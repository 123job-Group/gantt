{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./sources/utils/utils.js","webpack:///./sources/utils/dom_helpers.js","webpack:///./sources/utils/extends.js","webpack:///./sources/utils/eventable.js","webpack:///./sources/utils/helpers.js","webpack:///./sources/core/lightbox/controls/base_control.js","webpack:///./sources/core/ui/grid/editors/editors/base.js","webpack:///./sources/core/ui/layout/cell.js","webpack:///./sources/core/lightbox/controls/select_control.js","webpack:///./sources/core/ui/grid/tasks_grid_dnd_marker_helpers/drop_target.js","webpack:///./sources/core/ui/mouse_event_container.js","webpack:///./sources/core/ui/grid/editors/controller.js","webpack:///./sources/core/ui/timeline/timeline.js","webpack:///./sources/utils/env.js","webpack:///./sources/locale/locale.js","webpack:///./sources/core/worktime/calendar_arguments_helper.js","webpack:///./sources/utils/task_tree_helpers.js","webpack:///./sources/core/gantt_data_range.js","webpack:///./sources/core/datastore/power_array.js","webpack:///./sources/core/datastore/datastore.js","webpack:///./sources/core/ui/render/task_bar_render.js","webpack:///./sources/core/ui/grid/grid.js","webpack:///./sources/core/ui/timeline/scales.js","webpack:///./sources/core/ui/layout/layout.js","webpack:///./sources/utils/dom_event_scope.js","webpack:///./sources/utils/timeout.js","webpack:///./sources/core/destructor.js","webpack:///./sources/core/common/assert.js","webpack:///./sources/core/gantt_core.js","webpack:///./sources/core/touch.js","webpack:///./sources/css/skins/contrast_white.js","webpack:///./sources/css/skins/contrast_black.js","webpack:///./sources/css/skins/material.js","webpack:///./sources/css/skins/broadway.js","webpack:///./sources/css/skins/terrace.js","webpack:///./sources/css/skins/meadow.js","webpack:///./sources/css/skins/skyblue.js","webpack:///./sources/core/skin.js","webpack:///./sources/core/cached_functions.js","webpack:///./sources/core/data_task_types.gpl.js","webpack:///./sources/core/lightbox_optional_time.js","webpack:///./sources/core/lightbox/controls/parent_control.js","webpack:///./sources/core/lightbox/controls/duration_control.js","webpack:///./sources/core/lightbox/controls/radio_control.js","webpack:///./sources/core/lightbox/controls/checkbox_control.js","webpack:///./sources/utils/html_helpers.js","webpack:///./sources/core/lightbox/controls/time_control.js","webpack:///./sources/core/lightbox/controls/textarea_control.js","webpack:///./sources/core/lightbox/controls/template_control.js","webpack:///./sources/core/lightbox/index.js","webpack:///./sources/core/data.js","webpack:///./sources/core/facades/worktime_calendars.js","webpack:///./sources/core/worktime/strategy/no_work_time.js","webpack:///./sources/core/worktime/time_calculator.js","webpack:///./sources/core/worktime/strategy/calendar_workunit_cache.js","webpack:///./sources/core/worktime/strategy/calendar_strategy.js","webpack:///./sources/core/worktime/calendar_manager.js","webpack:///./sources/core/worktime/work_time.js","webpack:///./sources/core/load.js","webpack:///./sources/core/tasks.js","webpack:///./sources/core/wai_aria.js","webpack:///./sources/core/grid_column_api.gpl.js","webpack:///./sources/core/dynamic_loading.gpl.js","webpack:///./sources/core/plugins/auto_task_types.js","webpack:///./sources/core/plugins/new_task_placeholder.js","webpack:///./sources/core/plugins/resources.js","webpack:///./sources/core/plugins/dhtmlx_hooks.js","webpack:///./sources/core/plugins/jquery_hooks.js","webpack:///./sources/core/plugins/wbs.js","webpack:///./sources/core/plugins/batch_update.js","webpack:///./sources/core/plugins/autoscroll.js","webpack:///./sources/core/plugins/index.js","webpack:///./sources/core/dataprocessor/dataprocessor.js","webpack:///./sources/core/dataprocessor/live_update_hooks.js","webpack:///./sources/core/dataprocessor/hooks.js","webpack:///./sources/core/datastore/datastore_render.js","webpack:///./sources/core/datastore/select.js","webpack:///./sources/core/datastore/treedatastore.js","webpack:///./sources/core/facades/datastore_links.js","webpack:///./sources/core/facades/datastore_tasks.js","webpack:///./sources/core/facades/datastore.js","webpack:///./sources/core/datastore/datastore_hooks.js","webpack:///./sources/core/facades/layout.js","webpack:///./sources/core/data_task_layers.gpl.js","webpack:///./sources/core/ui/main_layout_initializer.js","webpack:///./sources/core/ui/timeline/links_dnd.js","webpack:///./sources/core/ui/timeline/tasks_dnd.js","webpack:///./sources/core/ui/timeline/main_timeline_initializer.js","webpack:///./sources/core/ui/grid/tasks_grid_dnd_marker_helpers/highlight.js","webpack:///./sources/core/ui/grid/tasks_grid_dnd_marker_helpers/multi_level.js","webpack:///./sources/core/ui/grid/tasks_grid_dnd_marker_helpers/locked_level.js","webpack:///./sources/core/ui/grid/tasks_grid_dnd_marker.js","webpack:///./sources/core/ui/grid/tasks_grid_dnd.js","webpack:///./sources/core/ui/grid/main_grid_initializer.js","webpack:///./sources/core/ui/render/task_grid_line_render.js","webpack:///./sources/core/ui/render/link_render.js","webpack:///./sources/core/ui/render/task_bg_render.js","webpack:///./sources/core/ui/render/task_split_render.js","webpack:///./sources/core/ui/grid/editors/editors/predecessor.js","webpack:///./sources/core/ui/grid/editors/editors/date.js","webpack:///./sources/core/ui/grid/editors/editors/select.js","webpack:///./sources/core/ui/grid/editors/editors/number.js","webpack:///./sources/core/ui/grid/editors/editors/text.js","webpack:///./sources/core/ui/grid/editors/keyboard_mappings/keyboard_navigation.js","webpack:///./sources/core/ui/grid/editors/keyboard_mappings/default.js","webpack:///./sources/core/ui/grid/editors/keyboard_mappings.js","webpack:///./sources/core/ui/grid/grid_resize.gpl.js","webpack:///./sources/core/ui/timeline/tasks_canvas_render.gpl.js","webpack:///./sources/core/ui/layout/scrollbar_cell.js","webpack:///./sources/core/ui/layout/resizer_cell.gpl.js","webpack:///./sources/core/ui/layout/view_cell.js","webpack:///./sources/core/ui/layout/view_layout.js","webpack:///./sources/core/ui/render/render_factory.js","webpack:///./sources/core/ui/render/layer_engine.js","webpack:///./sources/core/ui/gantt_layers.js","webpack:///./sources/core/ui/mouse.js","webpack:///./sources/core/ui/configurable.js","webpack:///./sources/core/ui/ui_factory.js","webpack:///./sources/core/ui/index.js","webpack:///./sources/core/message.js","webpack:///./sources/core/common/state.js","webpack:///./sources/core/common/templates.js","webpack:///./sources/core/common/dnd.js","webpack:///./sources/core/common/date.js","webpack:///./sources/core/common/ajax.js","webpack:///./sources/core/common/config.js","webpack:///./sources/core/common/services.js","webpack:///./sources/core/common/import.js","webpack:///./sources/constants/index.js","webpack:///./sources/core/gantt.js","webpack:///./sources/core/deprecated_warnings.js","webpack:///./sources/dhtmlxgantt.gpl.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","seed","helpers","copy","result","isDate","Date","isArray","Array","length","isStringObject","String","isNumberObject","Number","isBooleanObject","Boolean","apply","defined","obj","mixin","target","source","force","f","undefined","uid","valueOf","functor","arguments","event","el","handler","capture","addEventListener","attachEvent","eventRemove","removeEventListener","detachEvent","elementPosition","elem","top","left","right","bottom","getBoundingClientRect","box","body","document","docElem","documentElement","parentNode","scrollTop","window","pageYOffset","scrollLeft","pageXOffset","clientTop","clientLeft","offsetWidth","offsetHeight","parseInt","offsetTop","offsetLeft","offsetParent","y","Math","round","x","width","height","isVisible","node","display","visibility","getComputedStyle","style","currentStyle","hasNonNegativeTabIndex","isNaN","getAttribute","hasHref","a","area","nodeName","loLowerCase","isEnabled","input","select","textarea","button","toLowerCase","hasAttribute","getClassName","className","baseVal","indexOf","_trimString","_slave","createElement","getTargetNode","e","tagName","srcElement","str","trim","this","replace","getNodePosition","getFocusableNodes","root","nodes","querySelectorAll","join","nodesArray","slice","splice","getScrollSize","div","cssText","appendChild","clientWidth","removeChild","addClassName","removeClassName","split","regEx","RegExp","insertNode","newone","innerHTML","child","firstChild","removeNode","getChildNodes","css","ch","childNodes","len","out","push","toNode","getElementById","querySelector","locateClassName","classname","strict","trg","ind","charAt","locateAttribute","attribute","getRelativeEventPosition","ev","clientX","clientY","isChildOf","parent","hasClass","element","classList","contains","test","b","__","constructor","EventHost","_connected","_silent_mode","_silentStart","_silentEnd","createEventStorage","dhx_catch","z","res","zr","addEvent","removeEvent","id","eventHost","catcher","callObj","attachAll","callback","callEvent","arg0","handlerName","concat","checkEvent","list","detachAllEvents","units","second","minute","hour","day","week","month","quarter","year","arrayFilter","arr","filter","getSecondsInUnit","unit","forEach","workArray","arrayMap","map","resArray","arrayFind","find","arrayDifference","item","arraySome","hashToArray","hash","sortArrayOfHash","field","desc","compare","sort","throttle","timeout","wait","setTimeout","pop","getFullYear","getMonth","getDate","Function","toString","delay","timer","clearTimeout","dummy","console","log","BaseControl","render","set_value","get_value","focus","gantt","BaseEditor","show","column","config","placeholder","hide","get_input","is_changed","currentValue","is_valid","save","utils","eventable","domHelpers","Cell","factory","$container","$parent","$config","headerHeight","$gantt","$domEvents","_createDomEventScope","$id","$name","$factory","destructor","$view","$services","getService","detach","_headerClickHandler","detachAll","cell","scrollTo","clear","getNode","padding","resize","final","$preResize","topCont","topSize","getSize","minWidth","maxWidth","minHeight","maxHeight","setSize","_hide","index","cellIndex","moveView","hidden","$toHTML","content","header","raw","html","canCollapse","$fill","init","self","toggle","delegate","collapsed","size","gravity","getContentSize","$lastSize","contentX","contentY","_getBorderSizes","borders","horizontal","vertical","_currentBorders","_borders","_sizeHeader","_sizeContent","_setBorders","view","cssHash","xLayout","floor","transform","__extends","htmlHelpers","_super","SelectControl","sns","getHtmlSelect","options","_dhx_onchange","onchange","_focus","createDropTargetObject","targetParent","targetIndex","targetId","nextSibling","prevSibling","nextSiblingTarget","taskId","store","getParent","getBranchIndex","prevSiblingTarget","firstChildTarget","lastChildTarget","children","getChildren","events","mouseEvents","h","getKeyboardMapping","textEditorFactory","numberEditorFactory","selectEditorFactory","dateEditorFactory","predecessorEditorFactory","initConfigs","editor_types","text","number","date","predecessor","keyboardMapping","eventBus","inlineEditController","createEditors","grid","_createPlaceholder","itemId","columnName","pos","getItemTop","getItemHeight","cols","getGridColumns","_getEditorPosition","setAttribute","item_attribute","getColumnIndex","handlers","controller","_itemId","_columnName","_editor","_editorType","_placeholder","locateCell","$grid","row","getEditorConfig","getColumn","editor","mapping","getMapping","getDatastore","oldId","newId","getState","batch_update","editorType","startEdit","exists","editorState","setValue","editorConfig","$getConfig","type","$grid_data","onShow","state","getItem","map_to","getValue","_getItemValue","getTask","isChanged","onHide","newValue","oldValue","mapTo","end_date","calculateEndDate","start_date","duration","task","updateItem","_findEditableCell","start","direction","nextIndex","nextColumn","getNextCell","dir","getFirstCell","getLastCell","editNextCell","canChangeRow","moveRow","editPrevCell","getNext","getPrev","editNextRow","editPrevRow","handlerId","ScaleHelper","canvasRender","Timeline","$scaleHelper","_findBinary","array","prev","low","high","container","$task","$task_scale","$task_data","$task_bg","$task_links","$task_bars","_tasks","col_width","full_width","trace_x","rendered","attr","linksAttr","bindLinks","link_attribute","layers","_createLayerConfig","tasks","linkLayers","links","_attachLayers","dataHeight","max","scale_height","refresh","backgroundImage","smart_rendering","rowStore","row_height","countVisible","scale","data_els","contentHeight","contentWidth","scrollHeight","scrollWidth","_refreshScales","smart_scales","scales","_scales","_getScaleChunkHtml","taskFilter","expose","renderer","$ui","taskBar","taskSplitBar","append","taskBg","static_background","link","_taskLayers","_linkLayers","taskRenderer","getDataRender","createDataRender","defaultContainer","taskLayers","layer","host","bar_layer","addLayer","_taskRenderer","getLayer","_initStaticBackgroundRender","linkStore","linkRenderer","linkLayer","_linkRenderer","staticRender","_staticBgHandler","getScale","_clearLayers","removeLayer","_render_tasks_scales","scales_html","outer_width","_getScales","availWidth","autosize","autosize_min_width","cfgs","prepareConfigs","min_column_width","min_date","max_date","rtl","cfg","fromPos","toPos","templates","scale_row_class","cssClass","tplClass","_prepareScaleHtml","globalConfig","globalTemplates","cells","template","date_to_str","startIndex","endIndex","count","inherit_scale_class","scale_cell_class","cssclass","_waiAria","getTimelineCellAttr","dateFromPos","summ","part","_getColumnDuration","posFromDate","columnIndexByDate","assert","wholeCells","partCell","min","days","trace_x_ascending","ignores","ignore_x","day_ind","transition","trace_index_transition","getItemPosition","xLeft","xRight","task_height","offset","task_height_offset","getRowTop","task_id","isSplitTask","getIndexById","primaryScale","subscales","sortScales","add","step","env","isIE","navigator","userAgent","isIE6","XMLHttpRequest","isIE7","isIE8","isOpera","isChrome","isKHTML","isFF","isIPad","search","isEdge","locale","month_full","month_short","day_full","day_short","labels","new_task","icon_save","icon_cancel","icon_details","icon_edit","icon_delete","confirm_closing","confirm_deleting","section_description","section_time","section_type","column_wbs","column_text","column_start_date","column_duration","column_add","confirm_link_deleting","link_start","link_end","type_task","type_project","type_milestone","minutes","hours","weeks","months","years","message_ok","message_cancel","IsWorkTimeArgument","calendar","ClosestWorkTimeArgument","CalculateEndDateArgument","GetDurationArgument","end","getWorkHoursArguments","setWorkTimeArguments","unsetWorkTimeArguments","isWorkTimeArguments","processedConfig","duration_unit","getClosestWorkTimeArguments","arg","_getStartEndConfig","param","argumentType","duration_step","getDurationArguments","hasDurationArguments","calculateEndDateArguments","copyLinkIdsArray","linkIds","targetHash","isLinkExists","getLink","copyLinkIds","$source","$target","getSubtreeLinks","rootId","isTaskExists","eachTask","getSubtreeTasks","_init_tasks_range","scale_unit","scale_offset_minimal","helper","_scale_range_unit","range","start_interval","resolveConfigRange","getSubtaskDates","dateRangeResolver","_min_date","_max_date","fit_tasks","old_min","old_max","_adjust_scales","$powerArray","$create","$removeAt","$remove","$find","$insertAt","data","$each","master","$map","$filter","powerArray","DataStore","pull","$initItem","initItem","visibleOrder","fullOrder","_skip_refresh","_filterRule","_searchVisibleOrder","_parseInner","loaded","parse","_updateOrder","code","_removeItemInner","removeItem","_addItemInner","silent","order","data_size","getVisibleItems","getIndexRange","addItem","_changeIdInner","changeId","_moveInner","sindex","tindex","getIdByIndex","move","clearAll","arraysEqual","arr1","arr2","quick","oldOrder","serialize","eachItem","rule","filteredOrder","from","to","Infinity","ret","getItems","_getNullIfUndefined","getFirst","getLast","_task_default_render","_isAllowedUnscheduledTask","$getTemplates","taskType","getTaskType","padd","types","milestone","link_line_width","show_progress","done","progress","pr","progressColor","backgroundColor","opacity","progress_text","position","wrapper","drag_progress","isReadonly","drag","markerPos","_render_task_progress","task_text","_render_task_content","textColor","color","basic","project","isSummaryTask","select_task","selected_task","drag_id","drag_mode","touch_drag","link_source_id","link_target_id","highlight_critical_path","isCriticalTask","link_landing_area","from_id","from_start","link_from_start","to_start","link_to_start","allowDrag","isLinkAllowed","dragClass","_combine_item_class","task_class","styles","side","_get_link_crossing_css","_render_side_content","leftside_text","_render_leftside_content","rightside_text","_render_rightside_content","setTaskBarAttr","drag_resize","_render_pair","drag_links","show_links","outer","inner","showLinkPoints","touch","cond","leftside","start_to_start","finish_to_start","finish_to_finish","_get_conditions","ln","tp","type_renderers","defaultRenderer","gridResize","Grid","$state","gridAriaAttr","gridAttrString","gridDataAriaAttr","gridDataAttrString","gridScaleRowAttrString","$grid_scale","resizer","_renderHeaderResizers","doOnRender","_mouseDelegates","_addLayers","_initEvents","_validateColumnWidth","numericWidth","outerWidth","columns","innerWidth","scrollable","_setColumnsWidth","grid_width","_getGridWidth","_initSmartRenderingPlaceholder","_calculateGridWidth","_renderGridHeader","gridLine","_refreshPlaceholderOnStoreUpdate","scrollY","scroll","getView","getScrollState","scrollSize","$rowsPlaceholder","close","open","_getColumnWidth","min_width","min_grid_column_width","new_width","max_width","_getGridWidthLimits","min_limit","max_limit","newWidth","start_index","columns_width","final_width","extra_width","start_width","col","share","iterator","curExtra","_getColsTotalWidth","cols_width","v","parseFloat","unknown","gridWidth","autofit","diff","delta","changed","_setContentSize","reverse","lineHeigth","last","colWidth","_sort","grid_header_class","label","gridScaleCellAttrString","lineHeight","dateHelper","services","getSum","sizes","setSumWidth","sum_width","parts","adjustSize","splitSize","full","cellSize","initTemplate","date_scale","min_coll_width","container_width","minDate","maxDate","heights","configs","main_scale","initScaleConfig","processIgnores","initColSizes","limitVisibleRange","unshift","alineScaleColumns","reverseScale","setPosSettings","indexes","trace_indexes","_ignore_time_config","skip_off_time","skip","probe","isWorkTime","display_count","min_col_width","line_height","cont_width","column_count","eachColumn","iterateScales","lower_scale","upper_scale","upper_dates","lower_dates","prevUpper","up","target_index","upper_start","upper_end","lower_start","lower_end","targetWidth","curr","tzOffset","getTimezoneOffset","_correct_dst_change","dates","lastDate","outDate","shared","Layout","_this","$root","_parseConfig","$cells","_resizeScrollbars","scrollbars","scrollbar","scrollChanged","visibleScrollbars","hiddenSrollbars","showScrollbar","hideScrollbar","shouldHide","shouldShow","visibleGroups","group","_syncCellSizes","groupName","newSize","groups","_eachChild","_syncGroupSize","_xLayout","getNextSibling","ownSize","resizeSibling","getPrevSibling","siblingSize","totalGravity","totalSize","k","mainGrid","$content","startStage","mainCall","_resizeInProgress","contentViews","getCellsByType","setContentSize","_getAutosizeMode","isChild","cellId","sub","alert","insertBefore","rows","views","initUI","getCells","_cleanElSize","_getBoxStyles","computed","properties","boxSizing","clientHeight","MozBoxSizing","horPaddings","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","vertPaddings","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","borderBox","innerHeight","outerHeight","boxSizes","contentSizes","_sizes","margin","_calcFreeSpace","_free","_gravity","_calcSize","_configureBorders","borderClass","lastVisibleIndex","lastCell","borderColorClass","_updateCellVisibility","oldVisibleCells","_visibleCells","firstCall","visibleCells","cellView","marginSide","dx","dy","createScope","attach","extend","updPerSecond","_on_timeout","ceil","_eventRemoveAll","$layout","resetLightbox","_dp","check","message","show_errors","expire","calculateScaleRange","scroll_size","_reinit","_update_flags","initTemplates","_clearTaskLayers","_clearLinkLayers","reset","layout","createView","storeNames","refreshData","resizeDelay","getPropertyValue","resizeWatcher","tabIndex","contentWindow","addResizeListener","$mouseEvents","$click","buttons","edit","showLightbox","delete","question","title","confirm_deleting_title","_dhtmlx_confirm","$new","deleteTask","hideLightbox","posX","_getHorizontalScrollbar","codeScrollLeft","visible_date","task_scroll_offset","preserve_scroll","new_pos","showDate","setSizes","locate","targetAttribute","task_attribute","_locate_css","_locateHTML","getTaskRowNode","els","changeLightboxType","getLightboxType","_silent_redraw_lightbox","_get_link_type","start_to_finish","prevOffset","time_unit","offsetChanged","$data","tasksStore","_isSplitItem","_is_icon_open_click","getTaskDND","_tasks_dnd","touch_feedback","touch_feedback_duration","_prevent_touch_scroll","_touch_feedback","vibrate","touchEventsSupported","createEvent","_touch_events","touches","pageX","pageY","pointerEnabled","pointerType","msPointerEnabled","MSPOINTER_TYPE_MOUSE","touchHandlers","names","accessor","ignore","scroll_state","dblclicktime","action_mode","scroll_mode","action_start","long_tap_timer","current_target","start_drag","on_mouse_move","preventDefault","cancelBubble","abs","_touch_scroll_active","new_scroll_state","block_action","on_mouse_down","renders","_getTaskLayers","isTaskVisible","cloneNode","cloneTaskRendered","_start_dnd","_touch_drag","refreshTask","on_mouse_up","now","onDoubleClick","skins","link_arrow_size","lightbox_additional_height","_second_column_width","_third_column_width","material","_redefine_lightbox_buttons","buttons_left","buttons_right","getTaskNode","indx","broadway","_lightbox_template","_config_buttons_left","_config_buttons_right","gantt_delete_btn","gantt_save_btn","terrace","meadow","skyblue","_get_skin","skin","getElementsByTagName","href","match","skinset","_configure","resetSkin","activate","_cached_functions","update_if_changed","active","cache","critical_path_mode","wrap_methods","methods","_prefetch_originals","prefetch","methodname","original","optimizer","argumentsArray","args","get_arguments_hash","cached_values","has_cached_value","get_cached_value","cache_value","arguments_hash","is_date","getUTCDate","values","stringify_argument","deactivate","setup","override_gantt","gantt_methods","optimize_render","deactivTimeout","_extend_to_optional","lightbox_block","optional_time","section","_resolve_default_mapping","disable","val","enable","disabled","update_block","_lightbox_id","previousSibling","button_text","resizeLightbox","button_click","_get_typed_lightbox_config","form_blocks","duration_optional","time_optional","time","ParentControl","_display","item_id","getTaskByTime","allow_root","root_id","root_label","_filter","tmpDom","newOptions","onselect","replaceChild","DurationControl","_getStartDate","_time_format_order","_getDuration","getTimePicker","singleDate","single_date","readonly","lightboxDurationInputAttrString","duration_val","inps","btns","endspan","_calc_date","task_date","_change_duration","onclick","onkeydown","charCode","keyCode","which","constants","KEY_CODES","DOWN","UP","calculateDuration","_fill_lightbox_select","startDate","endDate","RadioControl","radio","default_value","checked","CheckboxControl","checkboxes","entry","attributes","_attributes","getHtmlOption","_getHtmlContainer","getHtmlButton","getHtmlDiv","getHtmlLabel","getHtmlInput","_getHtmlAttributes","tag","TimeControl","auto_end_date","_update_lightbox_select","selects","needSetTime","_getDate","mapOffset","_get_timepicker_step","_getEndDate","TextareaControl","_get_input","TemplateControl","ResourcesControl","getHtmlButtons","floatRight","_migrate_buttons","lightboxButtonAttrString","getHtmlTimePickerOptions","settings","start_year","end_year","tdate","timeFormat","year_range","first","_time_values","time_picker","setTime","getHours","getMinutes","_lightbox_methods","registerProvider","lightbox","getLightbox","_center_lightbox","showCover","_fill_lightbox","lightboxVisibleAttr","round_dnd_dates","timeline","_is_chart_visible","time_step","getLabel","sections","j","updateCollection","list_name","collection","serverList","_lightbox_type","lightboxDiv","fullWidth","classNames","_lightbox","_is_lightbox_timepicker","wide_form","lightboxAttr","drag_lightbox","onmousedown","_ready_to_dnd","onselectstart","cursor","_init_dnd_events","_render_sections","labelBlock","inputBlock","inputId","bindLabelsToInputs","_init_lightbox_events","block","con","scroll_top","scroll_left","view_height","_cover","_document_height","_scroll_height","lightbox_events","_save_lightbox","gantt_cancel_btn","_cancel_lightbox","src","sec","buttonTarget","SPACE","shiftKey","click","keys","edit_save","edit_cancel","getLightboxValues","addTask","updateTask","lightboxHiddenAttr","hideCover","_custom_lightbox","_set_lightbox_values","lightboxHeader","lightbox_header","task_time","substr","getLightboxSection","get_template_control","control","get_select_control","get_textarea_control","get_time_control","_move_while_dnd","_finish_dnd","_dnd_start_lb","gantt_unselectable","lb","_lb_start","ariaAttrs","date_part","time_format","getTimeFormat","limit_time_select","first_hour","last_hour","setHours","lightboxSelectAttrString","checkbox","resources","ok","opts","confirm","type_value","oldType","formData","updTask","isUnscheduledTask","unscheduled","show_unscheduled","taskStart","taskEnd","getGlobalTaskIndex","_defaultTaskDate","parent_id","getTaskByIndex","_set_default_task_timing","createTask","setParent","$open","details_on_create","selectTask","showTask","oldid","newid","unselect","getSelectedId","_get_task_timing_mode","task_type","$no_start","$no_end","$rendered_type","_init_task_timing","task_mode","dirty","resetProjectDates","taskMode","_assign_project_dates","getSubtaskDuration","taskTiming","_update_parents","pid","has_changed","oldStart","oldEnd","roundDate","upper","lower","colIndex","steps","correctTaskWorkTime","work_time","correct_work_time","getClosestWorkTime","calendarManager","timeCalculator","getWorkHours","setWorkTime","unsetWorkTime","_hasDuration","hasDuration","createCalendar","addCalendar","getCalendar","getCalendars","getTaskCalendar","deleteCalendar","CalendarDisabledTimeStrategy","argumentsHelper","_calculateDuration","fixedUnits","createArgumentsHelper","NoWorkTimeCalendar","TimeCalculator","$disabledCalendar","_getCalendar","manager","WorkUnitsCache","_cache","getTime","put","Cache","CalendarWorkTimeStrategy","_workingUnitsCache","_getUnitOrder","_timestamp","timestamp","UTC","_checkIfWorkingUnit","_isWorkTime","_is_work_day","_getWorkHours","_is_work_hour","_internDatesPull","_nextDate","_getWorkUnitsBetweenGeneric","stepStart","stepEnd","next","checkFirst","checkLast","isLastStep","_getHoursPerDay","_getWorkHoursForRange","_getWorkUnitsBetweenHours","firstDayStart","firstDayEnd","day_start","lastDayStart","lastDayEnd","startPart","endPart","hourRange","worktime","_setCalendar","_tryChangeCalendarSettings","payload","backup","JSON","stringify","_isEmptyCalendar","datesArray","isFullWeekSet","checkFullArray","getDay","reset_calendar","is_work_unit","mult","_calculateEndDate","added","_getClosestWorkTime","future_target","prev_target","tick","both_directins","inc","unitOrder","biggerTimeUnit","biggerTimeUnitSettings","CalendarWorktimeStrategy","CalendarManager","_calendars","_getDayHoursForMultiple","calendars","currPos","reduce","acc","mergeCalendars","newCalendar","_convertWorktimeSettings","parentCalendar","defaults","fulltime","apiCore","createDefaultCalendars","calendar_property","resource_calendars","resource","calendarId","worktimes","restoreConfigCalendars","global","worktimeFacadeFactory","facade","load","url","_load_url","cl","_load_type","ajax","on_load","xmlDoc","responseText","resp","_process_loading","collections","_load_collections","linksStore","initial_scroll","firstTask","collections_loaded","option","option_key","$ignore","json","dhx_security","security_key","serializeTask","_copyObject","serializeLink","_copyLink","xml_format","rawLinks","getLinks","xml","_xmlNodeToJSON","attrs_only","nodeType","nodeValue","_getCollections","loader","xpath","itms","attrs","_getXML","toptag","getXMLTopNode","xmltop","skey","evs","oldxml","startdate","est","enddate","predecessortasks","editable_property","readonly_property","htmlTags","extraSpaces","stripHTMLLite","htmlText","singleQuotes","escapeQuotes","getAttributeString","dateString","aria-label","_taskCommonAttr","tooltip_text","$dataprocessor_class","isSelectedTask","drag_move","taskRowAttr","order_branch","$level","hasChild","linkAttr","linkTypes","toStart","fromStart","drag_link","gridSeparatorAttr","buttonName","role","tabindex","headerText","time_option","aria-valuemin","multiselect","gridCellAttrString","textValue","gridAddButtonAttrString","messageButtonAttrString","buttonLabel","messageInfoAttr","messageModalAttr","quickInfoAttr","quickInfoHeaderAttrString","quickInfoHeader","quickInfoButtonAttrString","tooltipAttr","tooltipVisibleAttr","tooltipHiddenAttr","wai_aria_attributes","getGridColumn","callIfEnabled","auto_types","updateParents","childId","batchUpdate","checkParent","targetType","getTaskTypeToUpdate","updateTaskType","setTaskType","delTaskParent","allTypes","hasChildren","originalRowDndParent","originalMoveTaskParent","isParsingDone","updateAfterRemoveChild","sid","placeholder_task","insertPlaceholder","placeholders","getTaskBy","afterEdit","newTask","dataProcessor","_silencedPlaceholder","setUpdated","ready","action","commands","command","entity","createResourceMethods","resourceTaskCache","propertyName","propertyValue","filterResourceTasks","getResourceTasks","resourceIds","cacheKey","resourceHash","resourceValue","resource_id","getResourceLoad","resourceProperty","$role","timegrid","currDate","timetable","resource_render_empty_cells","calculateResourceLoad","renderBar","level","renderConnection","prevLevel","nextLevel","selectAssignments","resourceId","resource_property","owners","getResourceAssignments","assignments","renderLine","resource_cell_class","resource_cell_value","renderHistogram","capacityMatrix","maxCapacity","capacity","histogram_cell_class","histogram_cell_label","fill","histogram_cell_allocated","histogram_cell_capacity","capacityElement","colStart","colEnd","bar","connection","renderHistogramLine","filterTasks","resourceRow","resourceHistogram","resource_store","dhtmlx","attaches","attachGantt","cmp","attachObject","dataType","dataObj","that","vs","av","border","gridId","gridObj","dhtmlXCellObject","jQuery","$","fn","dhx_gantt","each","newgantt","Gantt","getGanttInstance","error","wbs","_needRecalc","_isRecalcNeeded","_isGroupSort","_groups","is_active","_getWBSCode","_calcWBS","$virtual","$wbs","_setWBSCode","getWBSCode","getByWBSCode","currentNode","_isFirst","_prevSibling","_wbs","_parent","createWbs","resetCache","getTaskByWBSCode","createMethod","isActive","disableMethod","methodName","dummyMethod","restoreMethod","restoreMethods","batchUpdatePayload","noRedraw","dp_mode","call_dp","updateMode","setUpdateMode","resetProjects","refreshLink","methodsHash","setGanttMode","sendData","scrollRange","scrollStep","scrollDelay","scrollSpeed","interval","isMove","delayTimeout","startPos","started","eventPos","getAutoscrollContainer","isScrollState","dragMarker","isResize","isLink","defineDelayTimeout","speed","autoscroll_speed","setInterval","autoscroll_delay","defineScrollInterval","clearInterval","autoscrollInterval","isScroll","autoscroll","posY","need_scroll","scrollState","currentScrollTop","scrollOuterHeight","inner_height","scrollInnerHeight","currentScrollLeft","scrollOuterWidth","inner_width","scrollInnerWidth","autoscroll_step","boxSize","startCoord","serverProcessorURL","serverProcessor","action_param","updatedRows","autoUpdate","_tMode","_headers","_payload","post_delim","_waitMode","_in_progress","_invalid","mandatoryFields","messages","updated","inserted","deleted","invalid","invalid_cell","enableUTFencoding","setTransactionMode","total","headers","_tSend","_endnm","_serialize_as_json","escape","_utf","encodeURIComponent","setDataColumns","_columns","getSyncState","enableDataNames","enablePartialDataSend","_changed","dnd","rowId","findRow","existing","getUserData","set_invalid","setUserData","is_invalid","_clearUpdateFlag","markRow","_methods","details","checkBeforeUpdate","mytype","_h2","editStop","sendAllData","_beforeSendData","_getRowData","_sendData","_serializeAsJSON","serialize_one","stack","pref","serialized","_applyPayload","urlSeparator","a1","queryParams","ids","afterUpdate","a3","_user","a4","method","query","_forEachUpdatedRow","valid","_getAllData","stop","has_one","setVerificator","verifFunction","clearVerificator","pattern","defineAction","_uActions","afterUpdateCallback","tid","btag","marker","correct","soid","finalizeUpdate","cleanUpdate","atag","anObj","_dp_init","setOnAfterUpdate","enableDebug","setOnBeforeUpdateHandler","func","setAutoUpdate","user","_need_update","_update_busy","xml_node","afterAutoUpdate","fullSync","loadUpdate","getUpdates","_v","_a","version","vers","upds","status","insertCallback","upd","isExist","addLink","deleteCallback","deleteLink","dataprocessor","liveUpdateHooks","oldAfterUpdate","dataProcessorHandlers","dp","_serverProcessor","modes","_ganttMode","newState","reqUrl","filePath","_change_id","changeLinkId","changeTaskId","_row_style","row_id","_delete_task","_sendTaskOrder","$drop_target","clientSideDelete","clientOnly","treeHelper","cascadeDelete","cascade_delete","dpMode","cascade","itemLinks","getTaskLinks","updateLink","substring","detachDataProcessor","userdata","bindDataStore","itemRepainter","getLayers","render_item","renderers","render_items","skipRepaint","change_id","refreshId","selectedId","deleteItem","TreeDataStore","_branches","$parentProperty","parentProperty","$getRootId","$openInitially","openInitially","eachParent","_buildTree","_add_branch","calculateItemLevel","_move_branch","$rendered_parent","_replace_branch_child","_traverseBranches","branch","items","source_pid","tbranch","parentId","getSiblings","siblings","_setParentInner","new_pid","startItem","added_already","old_parent","new_parent","old_id","new_id","newbranch","criteria","original_criteria","temp","getLinkCount","getTaskCount","getVisibleTaskCount","getTaskIndex","startTask","calculateTaskLevel","moveTask","createTasksFacade","createLinksFacade","createDatastoreSelect","datastoreRender","getDatastores","createDatastoreFacade","createDatastore","$StoreType","open_tree_initially","setService","storeList","stores","refresh_links","linkId","_clear_data","unselectTask","facadeFactory","parseDate","checkLinkedTaskVisibility","sync_link","sourceTask","targetTask","sync_link_delete","sync_links","mapEvents","conf","mapFrom","sourceEvent","targetEvent","$index","oldState","sourceVisible","targetVisible","deletedLinks","onItemLoading","onBeforeAdd","onAfterAdd","onBeforeUpdate","onAfterUpdate","onBeforeDelete","onAfterDelete","onIdChange","onBeforeItemMove","onAfterItemMove","onFilterItem","onItemOpen","onItemClose","onBeforeSelect","onAfterSelect","onAfterUnselect","getTimeline","getGrid","getVerticalScrollbar","getHorizontalScrollbar","DEFAULT_VALUE","tryCall","fallback","getTaskTop","getTaskPosition","getTaskHeight","roundTaskDates","getLinkNode","oldH","oldV","newV","newH","date_x","scroll_to","_scroll_state","x_pos","y_pos","x_inner","y_inner","scrollVer","scrollHor","horState","visible","verState","addTaskLayer","addLinkLayer","initializer","_legacyGridResizerClass","resizers","gridResizer","onCreated","mainTimeline","show_chart","showGrid","show_grid","colsWidth","grid_limits","original_grid_width","skinSettings","_initScrollStateEvents","_getVerticalScrollbar","oldPos","newPos","$scroll_ver","$scroll_hor","_findGridResizer","gridFirst","_getSiblings","_behind","_front","onInitialized","resizeInfo","initialWidth","prevCellWidth","nextCellWidth","viewCell","limits","newBehindSize","newFrontSize","oldBackSize","oldFrontSize","newBackSize","oldSize","onDestroyed","initLinksDND","_link_landing","_link_target_task","_link_target_task_start","_link_source_task","_link_source_task_start","getDndState","DnD","sensitivity","updates_per_second","getLinePos","shift","isStart","taskPos","xEnd","yEnd","milestoneWidth","origWidth","sqrt","getVisibleMilestoneWidth","getMilestonePosition","isMilestone","updateMarkedHtml","drag_link_class","resetDndState","coordinateCircleQuarter","sX","eX","sY","eY","_dir_start","dd","getPosition","advanceMarker","landing","prevTarget","prevLanding","prevToStart","targ","_dir_end","targetChanged","s_x","s_y","e_x","e_y","_direction","getDirectionLine","link_direction_class","dist","pow","tan","angle","atan","PI","sin","cos","ieTransform","shiftLeft","shiftTop","showDirectingLine","createLinkDND","createTaskDND","round_task_dates","dragMultiple","_events","before_start","before_finish","after_finish","_handlers","_domEvents","clear_drag_state","set_actions","drag_from_start","stage","_move","_resize","_resize_progress","start_x","start_y","coords_x","_drag_task_coords","min_duration","diffValue","_find_max_shift","dragItems","correctShift","minX","maxX","maxShift","minShift","new_start","new_end","obj_s_x","obj_e_x","_mouse_position_change","_is_number","isFinite","_update_on_move","_update_item_on_move","curr_date","drag_project","initialDrag","childDrag","_get_drag_mode","_fix_dnd_scale_time","fixStart","fixEnd","_fix_working_times","_finalize_mouse_up","_fireEvent","_dhx_changed","dragProperty","params","trigger","drag_state","taskDnD","linkDnD","_linksDnD","_tasksDnD","_attachDomEvents","_attachStateProvider","extendDom","_clearDomEvents","_clearStateProvider","_delete_link_handler","link_description","coll","coll_date","scale_step","unregisterProvider","gridToPageCoordinates","gridPos","removeLineHighlight","markerLine","highlightPosition","ePos","gridHeight","getTaskMarkerPosition","pointerEvents","markerFolder","highlightFolder","linePos","indentNode","indent","itemTop","itemHeight","childCount","getLineMarkerPosition","highlightRow","dropTarget","targetTaskId","relTargetPos","eventTop","findClosesTarget","allowedLevel","targetLevel","findTargetAbove","findTargetBelow","rootLevel","current","getLockedLevelTarget","getMultiLevelTarget","higlighter","dnd_sensitivity","hideQuickInfo","_hideQuickInfo","initial_open_state","outerHTML","drop_target","$transparent","getDropPosition","getTargetTaskId","lockLevel","order_branch_free","getStore","lastTaskOfLevel","last_item","_getGridPos","_getTargetY","_getTaskByY","dropIndex","targetY","over","nextId","prevId","rowDnd","rowDndMarker","extendGantt","ext","inlineEditors","_inlineEditors","initEvents","clearEvents","scroll_on_click","sorting_method","callHandler","totalWidth","aria","date_grid","tree","grid_indent","grid_open","grid_folder","grid_blank","grid_file","align","grid_row_class","css_template","drawer","current_pos","dirs","down","path","point","get_lines","dots","line_to","get_path","line","_get_line","get_wrapper_sizes","wrapper_size","link_wrapper_width","get_line_sizes","line_size","marginTop","marginLeft","render_line","innerPos","get_direction","vect","path_builder","point_to","get_points","pt","get_endpoint","xy","shiftX","lineType","get_line_type","forward","sign","milestoneHeight","lines","cssTemplate","link_class","isCriticalLink","endpoint","line_width","_render_link_arrow","borderColor","show_task_cells","task_cell_class","odd","task_row_class","defaultRender","sub_tasks","PredecessorEditor","parseInputString","predecessors","delimiter","formatPredecessors","pred","getLinksDiff","predecessorCodes","selectedLinks","lag","getSelectedLinks","existingLinksSearch","linksToAdd","linkKey","linksToDelete","remove","linksDiff","autoSchedule","inputPredecessors","taskPredecessors","html5DateFormat","dateToStr","strToDate","DateEditor","str_to_date","parsed","SelectEditor","optionsHtml","NumberEditor","TextEditor","onBlurDelay","keyNav","keyboardNavigation","activeCell","hasEditor","keyboard","preventKeyNav","ENTER","ctrlKey","metaKey","ESC","LEFT","RIGHT","DELETE","TAB","destroy","keyboard_navigation","defaultPrevented","shouldPrevent","defaultMapping","keyNavMappings","setMapping","keyboard_navigation_cells","ScrollbarCell","_scrollHorizontalHandler","_scrollVerticalHandler","_outerScrollVerticalHandler","_outerScrollHorizontalHandler","_mouseWheelHandler","_isHorizontal","scrollPosition","_isVertical","_initVertical","_initHorizontal","_initMouseWheel","_initLinkedViews","_getRootParent","_eachView","eachCell","_getLinkedViews","scrollX","_updateLinkedViews","scrollHorizontally","_scrolling","scrollVertically","_wheel_time","_oldLeft","_getScrollSize","outerSize","isHorizontal","linked","scrollProperty","innerSizeProperty","outerProperty","_getScrollOffset","cellScrollSize","nonScrollableSize","outerScroll","innerScroll","scrollSizes","_setScrollSize","toggleVisibility","_getScaleOffset","parentLayout","_oldTop","_checkWheelTarget","targetNode","connectedViews","ff","wx","deltaX","wheelDeltaX","wy","deltaY","wheelDelta","oldLeft","detail","oldTop","ViewCell","childConfig","$initialized","unload","outerX","outerY","childSize","ViewLayout","$cell","byMaxSize","otherCell","task_area_pulls","task_area_renderers","getRenderer","layer_attribute","dom","remove_item","clear_container","buffer","createDocumentFragment","vis","replace_item","newNode","restore","clearRenderers","renderFactoryProvider","mergeFilters","filter_methods","filter_method","renderFactory","createGroup","get_container","rel_root","defaultFilters","renderGroup","tempCollection","filters","_add","pending","topmost","rel","eachLayer","createLayerFactory","previusSiblingContainer","defaultContainerSibling","removeTaskLayer","_getLinkLayers","removeLinkLayer","createMouseHandler","eventHandlers","doubleclick","contextMenu","addEventTarget","onClick","findEventHandlers","callEventHandlers","onContextMenu","returnValue","delegateHandlers","handlerResult","details_on_dblclick","onMouseMove","_last_move_event","domEvents","eventName","elementHandlers","ViewSettings","extendSettings","parentSettings","own","parentView","parentConfig","parentTemplates","configurable","createFactory","createdViews","creator","configure","registerView","viewConstructor","uiFactory","createLayers","Resizer","Scrollbar","ResourceGrid","ResourceTimeline","ResourceHistogram","gridEditorsFactory","renderTaskBar","renderSplitTaskBar","renderTaskBg","renderLink","gridRenderer","mainGridInitializer","mainTimelineInitializer","mainLayoutInitializer","attachInitializer","layersEngine","layersApi","layersService","boxAttribute","_dhx_msg_cfg","usercall","modalBox","modal_key","messageBox","modality","cover","buttonAriaAttrs","getFirstDefined","_createBox","cancel","contentId","btn","_boxStructure","alertPopup","confirmPopup","boxPopup","box_params","focusable","timers","info","hideAll","popups","modalbox","stateProviders","internal","provider","regTemplates","initial","template_name","xml_date","server_utc","api_date","task_unscheduled_time","grid_date_format","tooltip_date_format","copyDomEvent","altKey","_obj","_settings","inputMethods","getInputMethods","_drag_start_timer","clearDragTimer","original_target","dragStart","traceDragEvents","domElement","inputMethod","mousemove","dragMove","limited_mousemove","dragScroll","mouseup","dragEnd","checkPositionChange","diff_x","diff_y","initDnDMarker","backupEventTarget","domEvent","getEvent","backup_element","elementFromPoint","month_short_hash","month_full_hash","old","hour_start","time_part","week_start","start_on_monday","month_start","setDate","quarter_start","res_month","setMonth","year_start","setMinutes","minute_start","getSeconds","setSeconds","getMilliseconds","setMilliseconds","_add_days","ndate","setYear","add_quarter","to_fixed","num","format","utc","getISOWeek","getWeek","splt","mask","_getWeekNumber","isoWeek","nday","first_thursday","year_number","ordinal_date","getUTCISOWeek","convert_to_utc","getUTCFullYear","getUTCMonth","getUTCHours","getUTCMinutes","getUTCSeconds","DOMParser","parseFromString","ActiveXObject","async","loadXML","tagname","xhr","responseXML","xpathExp","docObj","selectNodes","ownerDocument","evaluate","XPathResult","ANY_TYPE","iterateNext","_call","onLoad","getSync","postData","del","post","postSync","getLong","postLong","longParams","isQt","onreadystatechange","readyState","setRequestHeader","toUpperCase","send","branch_loading","branch_loading_property","show_loading","dhx_save_btn","dhx_cancel_btn","dhx_delete_btn","project_sections","milestone_sections","grid_resizer_column_attribute","grid_resizer_attribute","keep_grid_width","grid_resize","prevent_default_scroll","service","$inject","templatesLoader","stateService","uiApi","createLayoutFacade","warnings","base"],"mappings":"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","file":"dhtmlxgantt.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/codebase/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 133);\n","var helpers = require(\"./helpers\");\r\n\r\nfunction copy(object) {\r\n\tvar i, result; // iterator, types array, result\r\n\r\n\tif (object && typeof object == \"object\") {\r\n\r\n\t\tswitch (true){\r\n\t\t\tcase (helpers.isDate(object)):\r\n\t\t\t\tresult = new Date(object);\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isArray(object)):\r\n\t\t\t\tresult = new Array(object.length);\r\n\t\t\t\tfor(i = 0; i < object.length; i++){\r\n\t\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isStringObject(object)):\r\n\t\t\t\tresult = new String(object);\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isNumberObject(object)):\r\n\t\t\t\tresult = new Number(object);\r\n\t\t\t\tbreak;\r\n\t\t\tcase (helpers.isBooleanObject(object)):\r\n\t\t\t\tresult = new Boolean(object);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tresult = {};\r\n\t\t\t\tfor (i in object) {\r\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.apply(object, [i]))\r\n\t\t\t\t\t\tresult[i] = copy(object[i]);\r\n\t\t\t\t}\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn result || object;\r\n}\r\n\r\nfunction mixin (target, source, force){\r\n\tfor (var f in source)\r\n\t\tif (((target[f] === undefined) || force)) target[f]=source[f];\r\n\treturn target;\r\n}\r\n\r\nfunction defined(obj) {\r\n\treturn typeof(obj) != \"undefined\";\r\n}\r\n\r\nvar seed;\r\nfunction uid() {\r\n\tif (!seed)\r\n\t\tseed = (new Date()).valueOf();\r\n\r\n\tseed++;\r\n\treturn seed;\r\n}\r\n\r\n//creates function with specified \"this\" pointer\r\nfunction bind(functor, object){\r\n\tif(functor.bind)\r\n\t\treturn functor.bind(object);\r\n\telse\r\n\t\treturn function(){ return functor.apply(object,arguments); };\r\n}\r\n\r\nfunction event(el, event, handler, capture){\r\n\tif (el.addEventListener)\r\n\t\tel.addEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.attachEvent)\r\n\t\tel.attachEvent(\"on\"+event, handler);\r\n}\r\n\r\nfunction eventRemove(el, event, handler, capture){\r\n\tif (el.removeEventListener)\r\n\t\tel.removeEventListener(event, handler, capture === undefined ? false : capture);\r\n\r\n\telse if (el.detachEvent)\r\n\t\tel.detachEvent(\"on\"+event, handler);\r\n}\r\n\r\n\r\nmodule.exports = {\r\n\tcopy: copy,\r\n\tdefined: defined,\r\n\tmixin: mixin,\r\n\tuid: uid,\r\n\tbind: bind,\r\n\tevent: event,\r\n\teventRemove: eventRemove\r\n};","//returns position of html element on the page\r\nfunction elementPosition(elem) {\r\n\tvar top=0, left=0, right=0, bottom=0;\r\n\tif (elem.getBoundingClientRect) { //HTML5 method\r\n\t\tvar box = elem.getBoundingClientRect();\r\n\t\tvar body = document.body;\r\n\t\tvar docElem = (document.documentElement ||\r\n\t\t\tdocument.body.parentNode ||\r\n\t\t\tdocument.body);\r\n\r\n\t\tvar scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;\r\n\t\tvar scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;\r\n\t\tvar clientTop = docElem.clientTop || body.clientTop || 0;\r\n\t\tvar clientLeft = docElem.clientLeft || body.clientLeft || 0;\r\n\t\ttop  = box.top +  scrollTop - clientTop;\r\n\t\tleft = box.left + scrollLeft - clientLeft;\r\n\r\n\t\tright = document.body.offsetWidth - box.right;\r\n\t\tbottom = document.body.offsetHeight - box.bottom;\r\n\t} else { //fallback to naive approach\r\n\t\twhile(elem) {\r\n\t\t\ttop = top + parseInt(elem.offsetTop,10);\r\n\t\t\tleft = left + parseInt(elem.offsetLeft,10);\r\n\t\t\telem = elem.offsetParent;\r\n\t\t}\r\n\r\n\t\tright = document.body.offsetWidth - elem.offsetWidth - left;\r\n\t\tbottom = document.body.offsetHeight - elem.offsetHeight - top;\r\n\t}\r\n\treturn { y: Math.round(top), x: Math.round(left), width:elem.offsetWidth, height:elem.offsetHeight, right: Math.round(right), bottom: Math.round(bottom) };\r\n}\r\n\r\nfunction isVisible(node){\r\n\tvar display = false,\r\n\t\tvisibility = false;\r\n\tif(window.getComputedStyle){\r\n\t\tvar style = window.getComputedStyle(node, null);\r\n\t\tdisplay = style[\"display\"];\r\n\t\tvisibility = style[\"visibility\"];\r\n\t}else if(node.currentStyle){\r\n\t\tdisplay = node.currentStyle[\"display\"];\r\n\t\tvisibility = node.currentStyle[\"visibility\"];\r\n\t}\r\n\treturn (display != \"none\" && visibility != \"hidden\");\r\n}\r\n\r\nfunction hasNonNegativeTabIndex(node){\r\n\treturn !isNaN(node.getAttribute(\"tabindex\")) && (node.getAttribute(\"tabindex\")*1 >= 0);\r\n}\r\n\r\nfunction hasHref(node){\r\n\tvar canHaveHref = {\"a\": true, \"area\": true};\r\n\tif(canHaveHref[node.nodeName.loLowerCase()]){\r\n\t\treturn !!node.getAttribute(\"href\");\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nfunction isEnabled(node){\r\n\tvar canDisable = {\"input\":true, \"select\":true, \"textarea\":true, \"button\":true, \"object\":true};\r\n\tif(canDisable[node.nodeName.toLowerCase()]){\r\n\t\treturn !node.hasAttribute(\"disabled\");\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nfunction getFocusableNodes(root){\r\n\tvar nodes = root.querySelectorAll([\r\n\t\t\"a[href]\",\r\n\t\t\"area[href]\",\r\n\t\t\"input\",\r\n\t\t\"select\",\r\n\t\t\"textarea\",\r\n\t\t\"button\",\r\n\t\t\"iframe\",\r\n\t\t\"object\",\r\n\t\t\"embed\",\r\n\t\t\"[tabindex]\",\r\n\t\t\"[contenteditable]\"\r\n\t].join(\", \"));\r\n\r\n\tvar nodesArray = Array.prototype.slice.call(nodes, 0);\r\n\tfor(var i = 0; i < nodesArray.length; i++){\r\n\t\tvar node = nodesArray[i];\r\n\t\tvar isValid = (hasNonNegativeTabIndex(node)  || isEnabled(node) || hasHref(node)) && isVisible(node);\r\n\t\tif(!isValid){\r\n\t\t\tnodesArray.splice(i, 1);\r\n\t\t\ti--;\r\n\t\t}\r\n\t}\r\n\treturn nodesArray;\r\n}\r\n\r\nfunction getScrollSize(){\r\n\tvar div = document.createElement(\"div\");\r\n\tdiv.style.cssText=\"visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;\";\r\n\r\n\tdocument.body.appendChild(div);\r\n\tvar width = div.offsetWidth-div.clientWidth;\r\n\tdocument.body.removeChild(div);\r\n\r\n\treturn width;\r\n}\r\n\r\nfunction getClassName(node){\r\n\tif(!node) return \"\";\r\n\r\n\tvar className = node.className || \"\";\r\n\tif(className.baseVal)//'className' exist but not a string - IE svg element in DOM\r\n\t\tclassName = className.baseVal;\r\n\r\n\tif(!className.indexOf)\r\n\t\tclassName = \"\";\r\n\r\n\treturn _trimString(className);\r\n}\r\n\r\nfunction addClassName(node, className){\r\n\tif (className && node.className.indexOf(className) === -1) {\r\n\t\tnode.className += \" \" + className;\r\n\t}\r\n}\r\n\r\nfunction removeClassName(node, name) {\r\n\tname = name.split(\" \");\r\n\tfor (var i = 0; i < name.length; i++) {\r\n\t\tvar regEx = new RegExp(\"\\\\s?\\\\b\" + name[i] + \"\\\\b(?![-_\\.])\", \"\");\r\n\t\tnode.className = node.className.replace(regEx, \"\");\r\n\t}\r\n}\r\n\r\nfunction hasClass(element, className){\r\n\tif ('classList' in element) {\r\n\t\treturn element.classList.contains(className);\r\n\t} else { \r\n\t\treturn new RegExp(\"\\\\b\" + className + \"\\\\b\").test(element.className);\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction toNode(node) {\r\n\tif (typeof node === \"string\") {\r\n\t\treturn (document.getElementById(node) || document.querySelector(node) || document.body);\r\n\t}\r\n\treturn node || document.body;\r\n}\r\n\r\nvar _slave = document.createElement(\"div\");\r\nfunction insert(node, newone) {\r\n\t_slave.innerHTML = newone;\r\n\tvar child = _slave.firstChild;\r\n\tnode.appendChild(child);\r\n\treturn child;\r\n}\r\n\r\nfunction remove(node) {\r\n\tif (node && node.parentNode) {\r\n\t\tnode.parentNode.removeChild(node);\r\n\t}\r\n}\r\n\r\nfunction getChildren(node, css) {\r\n\tvar ch = node.childNodes;\r\n\tvar len = ch.length;\r\n\tvar out = [];\r\n\tfor (var i = 0; i < len; i++) {\r\n\t\tvar obj = ch[i];\r\n\t\tif (obj.className && obj.className.indexOf(css) !== -1) {\r\n\t\t\tout.push(obj);\r\n\t\t}\r\n\t}\r\n\treturn out;\r\n}\r\n\r\nfunction getTargetNode(e){\r\n\tvar trg;\r\n\tif (e.tagName)\r\n\t\ttrg = e;\r\n\telse {\r\n\t\te=e||window.event;\r\n\t\ttrg=e.target||e.srcElement;\r\n\t}\r\n\treturn trg;\r\n}\r\n\r\nfunction locateAttribute(e, attribute) {\r\n\tif(!attribute) return;\r\n\r\n\tvar trg = getTargetNode(e);\r\n\r\n\twhile (trg){\r\n\t\tif (trg.getAttribute){\t//text nodes has not getAttribute\r\n\t\t\tvar test = trg.getAttribute(attribute);\r\n\t\t\tif (test) return trg;\r\n\t\t}\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction _trimString(str){\r\n\tvar func = String.prototype.trim || function(){ return this.replace(/^\\s+|\\s+$/g, \"\"); };\r\n\treturn func.apply(str);\r\n}\r\n\r\nfunction locateClassName(e, classname, strict){\r\n\tvar trg = getTargetNode(e);\r\n\tvar css = \"\";\r\n\r\n\tif(strict === undefined)\r\n\t\tstrict = true;\r\n\r\n\twhile (trg){\r\n\t\tcss = getClassName(trg);\r\n\t\tif(css){\r\n\t\t\tvar ind = css.indexOf(classname);\r\n\t\t\tif (ind >= 0){\r\n\t\t\t\tif (!strict)\r\n\t\t\t\t\treturn trg;\r\n\r\n\t\t\t\t//check that we have exact match\r\n\t\t\t\tvar left = (ind === 0) || (!_trimString(css.charAt(ind - 1)));\r\n\t\t\t\tvar right = ((ind + classname.length >= css.length)) || (!_trimString(css.charAt(ind + classname.length)));\r\n\r\n\t\t\t\tif (left && right)\r\n\t\t\t\t\treturn trg;\r\n\t\t\t}\r\n\t\t}\r\n\t\ttrg=trg.parentNode;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\n/*\r\nevent position relatively to DOM element\r\n */\r\nfunction getRelativeEventPosition(ev, node){\r\n\tvar d = document.documentElement;\r\n\tvar box = elementPosition(node);\r\n\r\n\treturn {\r\n\t\tx: ev.clientX + d.scrollLeft - d.clientLeft - box.x + node.scrollLeft,\r\n\t\ty: ev.clientY + d.scrollTop - d.clientTop - box.y + node.scrollTop\r\n\t};\r\n}\r\n\r\n\r\nfunction isChildOf(child, parent){\r\n\tif(!child || !parent){\r\n\t\treturn false;\r\n\t}\r\n\r\n\twhile(child && child != parent) {\r\n\t\tchild = child.parentNode;\r\n\t}\r\n\r\n\treturn child === parent;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetNodePosition: elementPosition,\r\n\tgetFocusableNodes: getFocusableNodes,\r\n\tgetScrollSize: getScrollSize,\r\n\tgetClassName: getClassName,\r\n\taddClassName: addClassName,\r\n\tremoveClassName: removeClassName,\r\n\tinsertNode: insert,\r\n\tremoveNode: remove,\r\n\tgetChildNodes: getChildren,\r\n\ttoNode: toNode,\r\n\tlocateClassName:locateClassName,\r\n\tlocateAttribute: locateAttribute,\r\n\tgetTargetNode: getTargetNode,\r\n\tgetRelativeEventPosition: getRelativeEventPosition,\r\n\tisChildOf: isChildOf,\r\n\thasClass: hasClass\r\n};","module.exports = function (d, b) {\r\n\tfor (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\tfunction __() { this.constructor = d; }\r\n\td.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};","var EventHost = function(){\r\n\tthis._connected = [];\r\n\tthis._silent_mode = false;\r\n};\r\n\r\nEventHost.prototype = {\r\n\t_silentStart: function() {\r\n\t\tthis._silent_mode = true;\r\n\t},\r\n\t_silentEnd: function() {\r\n\t\tthis._silent_mode = false;\r\n\t}\r\n};\r\n\r\nvar\tcreateEventStorage = function(obj) {\r\n\tvar dhx_catch = [];\r\n\tvar z = function(){\r\n\t\tvar res = true;\r\n\t\tfor (var i = 0; i < dhx_catch.length; i++){\r\n\t\t\tif (dhx_catch[i]){\r\n\t\t\t\tvar zr = dhx_catch[i].apply(obj, arguments);\r\n\t\t\t\tres=res&&zr;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\tz.addEvent=function(ev){\r\n\t\tif (typeof (ev) == \"function\")\r\n\t\t\treturn dhx_catch.push(ev)-1;\r\n\t\treturn false;\r\n\t};\r\n\tz.removeEvent=function(id){\r\n\t\tdhx_catch[id]=null;\r\n\t};\r\n\treturn z;\r\n};\r\n\r\nfunction makeEventable(obj){\r\n\r\n\tvar eventHost = new EventHost();\r\n\tobj.attachEvent=function(name, catcher, callObj){\r\n\t\tname='ev_'+name.toLowerCase();\r\n\t\tif (!eventHost[name])\r\n\t\t\teventHost[name] = createEventStorage(callObj||this);\r\n\r\n\t\treturn(name+':'+eventHost[name].addEvent(catcher)); //return ID (event name & event ID)\r\n\t};\r\n\tobj.attachAll = function(callback, callObj){\r\n\t\tthis.attachEvent('listen_all', callback, callObj);\r\n\t};\r\n\r\n\tobj.callEvent=function(name, arg0, callObj){\r\n\t\tif (eventHost._silent_mode) return true;\r\n\r\n\t\tvar handlerName = 'ev_'+name.toLowerCase();\r\n\r\n\t\tif (eventHost['ev_listen_all']){\r\n\t\t\teventHost['ev_listen_all'].apply(callObj || this, [name].concat(arg0));\r\n\t\t}\r\n\r\n\t\tif (eventHost[handlerName])\r\n\t\t\treturn eventHost[handlerName].apply(callObj || this, arg0);\r\n\t\treturn true;\r\n\t};\r\n\tobj.checkEvent=function(name){\r\n\t\treturn (!!eventHost['ev_'+name.toLowerCase()]);\r\n\t};\r\n\tobj.detachEvent=function(id){\r\n\t\tif (id){\r\n\t\t\tvar list = id.split(':');           //get EventName and ID\r\n\t\t\teventHost[list[0]].removeEvent(list[1]); //remove event\r\n\t\t}\r\n\t};\r\n\tobj.detachAllEvents = function(){\r\n\t\tfor (var name in eventHost){\r\n\t\t\tif (name.indexOf(\"ev_\") === 0)\r\n\t\t\t\tdelete eventHost[name];\r\n\t\t}\r\n\t};\r\n\r\n}\r\n\r\nmodule.exports = makeEventable;","var units = {\r\n\t\"second\": 1,\r\n\t\"minute\": 60,\r\n\t\"hour\": 60 * 60,\r\n\t\"day\": 60 * 60 * 24,\r\n\t\"week\": 60 * 60 * 24 * 7,\r\n\t\"month\": 60 * 60 * 24 * 30,\r\n\t\"quarter\": 60 * 60 * 24 * 30 * 3,\r\n\t\"year\": 60 * 60 * 24 * 365\r\n};\r\nfunction getSecondsInUnit(unit){\r\n\treturn units[unit] || units.hour;\r\n}\r\n\r\nfunction forEach(arr, callback) {\r\n\tif (arr.forEach) {\r\n\t\tarr.forEach(callback);\r\n\t} else {\r\n\t\tvar workArray = arr.slice();\r\n\t\tfor (var i = 0; i < workArray.length; i++) {\r\n\t\t\tcallback(workArray[i], i);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction arrayMap(arr, callback) {\r\n\tif (arr.map) {\r\n\t\treturn arr.map(callback);\r\n\t} else {\r\n\t\tvar workArray = arr.slice();\r\n\t\tvar resArray = [];\r\n\r\n\t\tfor (var i = 0; i < workArray.length; i++) {\r\n\t\t\tresArray.push(callback(workArray[i], i));\r\n\t\t}\r\n\t\treturn resArray;\r\n\t}\r\n}\r\n\r\n\r\nfunction arrayFind(arr, callback) {\r\n\tif (arr.find) {\r\n\t\treturn arr.find(callback);\r\n\t} else {\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tif (callback(arr[i], i)) {\r\n\t\t\t\treturn arr[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// iframe-safe array type check instead of using instanceof\r\nfunction isArray(obj){\r\n\tif(Array.isArray){\r\n\t\treturn Array.isArray(obj);\r\n\t}else{\r\n\t\t// close enough\r\n\t\treturn (obj && obj.length !== undefined && obj.pop && obj.push);\r\n\t}\r\n}\r\n\r\n// non-primitive string object, e.g. new String(\"abc\")\r\nfunction isStringObject(obj){\r\n\treturn obj && typeof obj === \"object\"\r\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function String() { [native code] }\";\r\n}\r\n\r\n// non-primitive number object, e.g. new Number(5)\r\nfunction isNumberObject(obj){\r\n\treturn obj && typeof obj === \"object\"\r\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function Number() { [native code] }\";\r\n}\r\n\r\n// non-primitive number object, e.g. new Boolean(true)\r\nfunction isBooleanObject(obj){\r\n\treturn obj && typeof obj === \"object\"\r\n\t\t&& Function.prototype.toString.call(obj.constructor) === \"function Boolean() { [native code] }\";\r\n}\r\n\r\nfunction isDate(obj) {\r\n\tif (obj && typeof obj === \"object\") {\r\n\t\treturn !!(obj.getFullYear && obj.getMonth && obj.getDate);\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nfunction arrayFilter(arr, callback) {\r\n\tvar result = [];\r\n\r\n\tif (arr.filter) {\r\n\t\treturn arr.filter(callback);\r\n\t} else {\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tif (callback(arr[i], i)) {\r\n\t\t\t\tresult[result.length] = arr[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n}\r\n\r\nfunction hashToArray(hash) {\r\n\tvar result = [];\r\n\r\n\tfor (key in hash) {\r\n\t\tif (hash.hasOwnProperty(key)) {\r\n\t\t\tresult.push(hash[key]);\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n\r\nfunction arraySome(arr, callback) {\r\n\tif (arr.length === 0) return false;\r\n\r\n\tfor (var i = 0; i < arr.length; i++) {\r\n\t\tif (callback(arr[i], i, arr)) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nfunction arrayDifference(arr, callback) {\r\n\treturn arrayFilter(arr, function(item, i) {\r\n\t\treturn !callback(item, i);\r\n\t});\r\n}\r\n\r\nfunction throttle (callback, timeout) {\r\n\tvar wait = false;\r\n\r\n\treturn function () {\r\n\t\tif (!wait) {\r\n\t\t\tcallback.apply(null, arguments);\r\n\t\t\twait = true;\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\twait = false;\r\n\t\t\t}, timeout);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction delay (callback, timeout){\r\n\tvar timer;\r\n\treturn function() {\r\n\t\tclearTimeout(timer);\r\n\t\ttimer = setTimeout(function(){\r\n\t\t\tcallback();\r\n\t\t}, timeout);\r\n\t}\r\n};\r\n\r\nfunction sortArrayOfHash(arr, field, desc) {\r\n\tvar compare = function(a, b) {\r\n\t\treturn a < b;\r\n\t};\r\n\r\n\tarr.sort(function(a, b) {\r\n\t\tif (a[field] === b[field]) return 0;\r\n\t\t\r\n\t\treturn desc ? compare(a[field], b[field]) : compare(b[field], a[field]);\r\n\t});\r\n}\r\n\r\nmodule.exports = {\r\n\tgetSecondsInUnit: getSecondsInUnit,\r\n\tforEach: forEach,\r\n\tarrayMap: arrayMap,\r\n\tarrayFind: arrayFind,\r\n\tarrayFilter: arrayFilter,\r\n\tarrayDifference: arrayDifference,\r\n\tarraySome: arraySome,\r\n\thashToArray: hashToArray,\r\n\tsortArrayOfHash: sortArrayOfHash,\r\n\tthrottle: throttle,\r\n\tisArray: isArray,\r\n\tisDate: isDate,\r\n\tisStringObject: isStringObject,\r\n\tisNumberObject: isNumberObject,\r\n\tisBooleanObject: isBooleanObject,\r\n\tdelay: delay\r\n};","function dummy() {\r\n\tconsole.log(\"Method is not implemented.\"); // jshint ignore:line\r\n}\r\nfunction BaseControl() {\r\n}\r\n\r\n// base methods will be runned in gantt context\r\nBaseControl.prototype.render = dummy; // arguments: sns\r\nBaseControl.prototype.set_value = dummy; // arguments: node, value, ev, sns(config)\r\nBaseControl.prototype.get_value = dummy; // arguments node, ev, sns(config)\r\nBaseControl.prototype.focus = dummy; // arguments: node\r\n\r\nmodule.exports = function(gantt) { // we could send current instance of gantt to module\r\n\treturn BaseControl;\r\n};","module.exports = function (gantt) {\r\n\r\n\tvar BaseEditor = function () {\r\n\t};\r\n\r\n\tBaseEditor.prototype = {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t},\r\n\t\thide: function () {\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tthis.get_input(node).value = value;\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn this.get_input(node).value || \"\";\r\n\t\t},\r\n\t\tis_changed: function (value, id, column, node) {\r\n\t\t\tvar currentValue = this.get_value(id, column, node);\r\n\t\t\tif (currentValue && value && currentValue.valueOf && value.valueOf) {\r\n\t\t\t\treturn currentValue.valueOf() != value.valueOf();\r\n\t\t\t} else {\r\n\t\t\t\treturn currentValue != value;\r\n\t\t\t}\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\treturn true;\r\n\t\t},\r\n\r\n\t\tsave: function (id, column, node) {\r\n\r\n\t\t},\r\n\t\tget_input: function (node) {\r\n\t\t\treturn node.querySelector(\"input\");\r\n\t\t},\r\n\t\tfocus: function (node) {\r\n\t\t\tvar input = this.get_input(node);\r\n\t\t\tif (!input) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (input.focus) {\r\n\t\t\t\tinput.focus();\r\n\t\t\t}\r\n\r\n\t\t\tif (input.select) {\r\n\t\t\t\tinput.select();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn BaseEditor;\r\n};","var utils = require(\"../../../utils/utils\"),\r\n\tdomEventsScope = require(\"../../../utils/dom_event_scope\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar Cell = (function () {\r\n\t\"use strict\";\r\n\r\n\tfunction Cell(parent, config, factory, gantt) {\r\n\t\tif (parent) {\r\n\t\t\tthis.$container = domHelpers.toNode(parent);\r\n\t\t\tthis.$parent = parent;\r\n\t\t}\r\n\t\t// save config\r\n\t\tthis.$config = utils.mixin(config, {\r\n\t\t\theaderHeight: 33\r\n\t\t});\r\n\t\tthis.$gantt = gantt;\r\n\t\tthis.$domEvents = gantt._createDomEventScope();\r\n\t\t// set id\r\n\t\tthis.$id = config.id || \"c\" + utils.uid();\r\n\r\n\t\tthis.$name = \"cell\";\r\n\t\tthis.$factory = factory;\r\n\r\n\t\teventable(this);\r\n\r\n\t}\r\n\r\n\tCell.prototype.destructor = function () {\r\n\t\tthis.$parent = this.$container = this.$view = null;\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.detach(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\t\tthis.$domEvents.detachAll();\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t};\r\n\tCell.prototype.cell = function (id) {\r\n\t\treturn null;\r\n\t};\r\n\r\n\tCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tthis.$view.scrollLeft = left;\r\n\t\t}\r\n\t\tif(top*1 == top){\r\n\t\t\tthis.$view.scrollTop = top;\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype.clear = function(){\r\n\t\tthis.getNode().innerHTML = \"\";\r\n\t\tthis.getNode().className = \"gantt_layout_content\";\r\n\t\tthis.getNode().style.padding = \"0\";\r\n\t};\r\n\r\n\tCell.prototype.resize = function (final) {\r\n\t\tif (this.$parent) {\r\n\t\t\treturn this.$parent.resize(final);\r\n\t\t}\r\n\r\n\t\tif(final === false){\r\n\t\t\tthis.$preResize = true;\r\n\t\t}\r\n\r\n\t\tvar topCont = this.$container;\r\n\t\tvar x = topCont.offsetWidth;\r\n\t\tvar y = topCont.offsetHeight;\r\n\t\tvar topSize = this.getSize();\r\n\t\tif (topCont === document.body) {\r\n\t\t\tx = document.body.offsetWidth;\r\n\t\t\ty = document.body.offsetHeight;\r\n\t\t}\r\n\t\tif (x < topSize.minWidth) {\r\n\t\t\tx = topSize.minWidth;\r\n\t\t}\r\n\t\tif (x > topSize.maxWidth) {\r\n\t\t\tx = topSize.maxWidth;\r\n\t\t}\r\n\t\tif (y < topSize.minHeight) {\r\n\t\t\ty = topSize.minHeight;\r\n\t\t}\r\n\t\tif (y > topSize.maxHeight) {\r\n\t\t\ty = topSize.maxHeight;\r\n\t\t}\r\n\t\tthis.setSize(x, y);\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tif(!this.$preResize){\r\n\t\t//\tself.callEvent(\"onResize\", [x, y]);\r\n\t\t}\r\n\t\tthis.$preResize = false;\r\n\t};\r\n\r\n\tCell.prototype.hide = function () {\r\n\t\tthis._hide(true);\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.show = function (force) {\r\n\t\tthis._hide(false);\r\n\t\tif (force && this.$parent) {\r\n\t\t\tthis.$parent.show();\r\n\t\t}\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype._hide = function (mode) {\r\n\t\tif (mode === true && this.$view.parentNode) {\r\n\t\t\tthis.$view.parentNode.removeChild(this.$view);\r\n\t\t}\r\n\t\telse if (mode === false && !this.$view.parentNode) {\r\n\t\t\tvar index = this.$parent.cellIndex(this.$id);\r\n\t\t\tthis.$parent.moveView(this, index);\r\n\t\t}\r\n\t\tthis.$config.hidden = mode;\r\n\t};\r\n\tCell.prototype.$toHTML = function (content, css) {\r\n\t\tif (content === void 0) { content = \"\"; }\r\n\t\tcss = [(css || \"\"), (this.$config.css || \"\")].join(\" \");\r\n\t\tvar obj = this.$config;\r\n\t\tvar header = \"\";\r\n\t\tif (obj.raw) {\r\n\t\t\tcontent = typeof obj.raw === \"string\" ? obj.raw : \"\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (!content) {\r\n\t\t\t\tcontent = \"<div class='gantt_layout_content' \"+(css ? \" class='\"+css+\"' \" : \"\")+\" >\" + (obj.html || \"\") + \"</div>\";\r\n\t\t\t}\r\n\t\t\tif (obj.header) {\r\n\t\t\t\tvar collapseIcon = obj.canCollapse ? \"<div class='gantt_layout_header_arrow'></div>\" : \"\";\r\n\t\t\t\theader = \"<div class='gantt_layout_header'>\" + collapseIcon + \"<div class='gantt_layout_header_content'>\" + obj.header + \"</div></div>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"<div class='gantt_layout_cell \" + css + \"' data-cell-id='\" + this.$id + \"'>\" + header + content + \"</div>\";\r\n\t};\r\n\tCell.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tthis.init();\r\n\t};\r\n\tCell.prototype.getNode = function () {\r\n\t\treturn (this.$view.querySelector(\"gantt_layout_cell\") || this.$view);\r\n\t};\r\n\tCell.prototype.init = function () {\r\n\t\t// [NOT-GOOD] code is executed for each component, while it still has only one handler, it is no good\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tthis._headerClickHandler = function(e){\r\n\t\t\tvar cellId = domHelpers.locateAttribute(e, \"data-cell-id\");\r\n\t\t\tif(cellId == self.$id){\r\n\t\t\t\tself.toggle();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar mouse = this.$gantt.$services.getService(\"mouseEvents\");\r\n\t\tmouse.delegate(\"click\", \"gantt_header_arrow\", this._headerClickHandler);\r\n\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t};\r\n\tCell.prototype.toggle = function () {\r\n\t\tthis.$config.collapsed = !this.$config.collapsed;\r\n\t\tthis.resize();\r\n\t};\r\n\tCell.prototype.getSize = function () {\r\n\t\tvar size = {\r\n\t\t\theight: this.$config.height || 0,\r\n\t\t\twidth: this.$config.width || 0,\r\n\t\t\tgravity: this.$config.gravity || 1,\r\n\t\t\tminHeight: this.$config.minHeight || 0,\r\n\t\t\tminWidth: this.$config.minWidth || 0,\r\n\t\t\tmaxHeight: this.$config.maxHeight || 100000,\r\n\t\t\tmaxWidth: this.$config.maxWidth || 100000\r\n\t\t};\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tvar mode = this.$config.mode === \"x\";\r\n\t\t\tsize[mode ? \"width\" : \"height\"] = size[mode ? \"maxWidth\" : \"maxHeight\"] = this.$config.headerHeight;\r\n\t\t}\r\n\t\treturn size;\r\n\t};\r\n\r\n\tCell.prototype.getContentSize = function(){\r\n\r\n\t\tvar width = this.$lastSize.contentX;\r\n\t\tif(width !== width*1){\r\n\t\t\twidth = this.$lastSize.width;\r\n\t\t}\r\n\r\n\t\tvar height = this.$lastSize.contentY;\r\n\t\tif(height !== height*1){\r\n\t\t\theight = this.$lastSize.height;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: width,\r\n\t\t\theight: height\r\n\t\t};\r\n\t};\r\n\r\n\tCell.prototype._getBorderSizes = function(){\r\n\t\tvar borders = {\r\n\t\t\ttop: 0,\r\n\t\t\tright: 0,\r\n\t\t\tbottom: 0,\r\n\t\t\tleft: 0,\r\n\t\t\thorizontal: 0,\r\n\t\t\tvertical: 0\r\n\t\t};\r\n\t\tif(this._currentBorders){\r\n\t\t\tif(this._currentBorders[this._borders.left]){\r\n\t\t\t\tborders.left = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.right]){\r\n\t\t\t\tborders.right = 1;\r\n\t\t\t\tborders.horizontal++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.top]){\r\n\t\t\t\tborders.top = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\r\n\t\t\tif(this._currentBorders[this._borders.bottom]){\r\n\t\t\t\tborders.bottom = 1;\r\n\t\t\t\tborders.vertical++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn borders;\r\n\r\n\t};\r\n\r\n\tCell.prototype.setSize = function (x, y) {\r\n\t\tthis.$view.style.width = x + \"px\";\r\n\t\tthis.$view.style.height = y + \"px\";\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar contentY = y - borders.vertical;\r\n\t\tvar contentX = x - borders.horizontal;\r\n\r\n\t\tthis.$lastSize = { x: x, y: y, contentX: contentX, contentY: contentY };\r\n\t\tif (this.$config.header) {\r\n\t\t\tthis._sizeHeader();\r\n\t\t}else{\r\n\t\t\tthis._sizeContent();\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._borders = {\r\n\t\t\"left\":\"gantt_layout_cell_border_left\",\r\n\t\t\"right\":\"gantt_layout_cell_border_right\",\r\n\t\t\"top\":\"gantt_layout_cell_border_top\",\r\n\t\t\"bottom\":\"gantt_layout_cell_border_bottom\"\r\n\t};\r\n\r\n\tCell.prototype._setBorders = function(css, view){\r\n\t\tif(!view) {\r\n\t\t\tview = this;\r\n\t\t}\r\n\t\tvar node = view.$view;\r\n\r\n\t\tfor( var i in this._borders){\r\n\t\t\tdomHelpers.removeClassName(node, this._borders[i]);\r\n\t\t}\r\n\r\n\t\tif(typeof css == \"string\"){\r\n\t\t\tcss = [css];\r\n\t\t}\r\n\r\n\t\tvar cssHash = {};\r\n\r\n\t\tfor(var i = 0; i < css.length; i++){\r\n\t\t\tdomHelpers.addClassName(node, css[i]);\r\n\t\t\tcssHash[css[i]] = true;\r\n\t\t}\r\n\r\n\t\tview._currentBorders = cssHash;\r\n\t};\r\n\r\n\r\n\tCell.prototype._sizeContent = function(){\r\n\t\tvar content = this.$view.childNodes[0];\r\n\t\tif(content && content.className == \"gantt_layout_content\"){\r\n\t\t\tcontent.style.height = this.$lastSize.contentY + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tCell.prototype._sizeHeader = function () {\r\n\t\tvar size = this.$lastSize;\r\n\t\tsize.contentY -= this.$config.headerHeight;\r\n\t\tvar header = this.$view.childNodes[0];\r\n\t\tvar content = this.$view.childNodes[1];\r\n\t\tvar xLayout = this.$config.mode === \"x\";\r\n\t\tif (this.$config.collapsed) {\r\n\t\t\tcontent.style.display = \"none\";\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_x\";\r\n\t\t\t\theader.style.width = size.y + \"px\";\r\n\t\t\t\tvar d = Math.floor(size.y / 2 - size.x / 2);\r\n\t\t\t\theader.style.transform = \"rotate(90deg) translate(\" + d + \"px, \" + d + \"px)\";\r\n\t\t\t\tcontent.style.display = \"none\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header collapsed_y\";\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (xLayout) {\r\n\t\t\t\theader.className = \"gantt_layout_header\";\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\theader.className = \"gantt_layout_header vertical\";\r\n\t\t\t}\r\n\t\t\theader.style.width = 'auto';\r\n\t\t\theader.style.transform = '';\r\n\t\t\tcontent.style.display = \"\";\r\n\t\t\tcontent.style.height = size.contentY + \"px\";\r\n\t\t}\r\n\t\theader.style.height = this.$config.headerHeight + \"px\";\r\n\t};\r\n\treturn Cell;\r\n}());\r\n\r\nmodule.exports = Cell;\r\n","var __extends = require(\"../../../utils/extends\");\r\nvar htmlHelpers = require(\"../../../utils/html_helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction SelectControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\t\r\n\t\treturn self; \r\n\t}\r\n\t\r\n\t__extends(SelectControl, _super);\r\n\t\r\n\tSelectControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'>\";\r\n\r\n\t\thtml += htmlHelpers.getHtmlSelect(sns.options, [{ key: \"style\", value: \"width:100%;\" }]);\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tSelectControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar select = node.firstChild;\r\n\t\tif (!select._dhx_onchange && sns.onchange) {\r\n\t\t\tselect.onchange = sns.onchange;\r\n\t\t\tselect._dhx_onchange = true;\r\n\t\t}\r\n\t\tif (typeof value === \"undefined\")\r\n\t\t\tvalue = (select.options[0] || {}).value;\r\n\t\tselect.value = value || \"\";\r\n\t};\r\n\t\r\n\tSelectControl.prototype.get_value = function(node) {\r\n\t\treturn node.firstChild.value;\r\n\t};\r\n\t\r\n\tSelectControl.prototype.focus = function(node) {\r\n\t\tvar a = node.firstChild;\r\n\t\tgantt._focus(a, true);\r\n\t};\r\n\t\r\n\treturn SelectControl;\r\n};","/**\r\n * The state object for order branch drag and drop\r\n */\r\n\r\nvar utils = require(\"../../../../utils/utils\");\r\n\r\nmodule.exports = {\r\n\tcreateDropTargetObject: function createDropTargetObject(parent) {\r\n\t\tvar res = {\r\n\t\t\ttargetParent: null,\r\n\t\t\ttargetIndex: 0,\r\n\t\t\ttargetId: null,\r\n\t\t\tchild: false,\r\n\t\t\tnextSibling: false,\r\n\t\t\tprevSibling: false\r\n\t\t};\r\n\r\n\t\tif (parent) {\r\n\t\t\tutils.mixin(res, parent, true);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tnextSiblingTarget: function nextSiblingTarget(taskId, store) {\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = taskId;\r\n\t\tresult.nextSibling = true;\r\n\t\tresult.targetParent = store.getParent(result.targetId);\r\n\t\tresult.targetIndex = store.getBranchIndex(result.targetId) + 1;\r\n\t\treturn result;\r\n\t},\r\n\tprevSiblingTarget: function prevSiblingTarget(taskId, store) {\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = taskId;\r\n\t\tresult.prevSibling = true;\r\n\t\tresult.targetParent = store.getParent(result.targetId);\r\n\t\tresult.targetIndex = store.getBranchIndex(result.targetId);\r\n\t\treturn result;\r\n\t},\r\n\tfirstChildTarget: function firstChildTarget(taskId, store) {\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = taskId;\r\n\t\tresult.targetParent = result.targetId;\r\n\t\tresult.targetIndex = 0;\r\n\t\tresult.child = true;\r\n\t\treturn result;\r\n\t},\r\n\tlastChildTarget: function lastChildTarget(taskId, store) {\r\n\t\tvar children = store.getChildren(taskId);\r\n\t\tvar result = this.createDropTargetObject();\r\n\t\tresult.targetId = children[children.length - 1];\r\n\t\tresult.targetParent = taskId;\r\n\t\tresult.targetIndex = children.length;\r\n\t\tresult.nextSibling = true;\r\n\t\treturn result;\r\n\t}\r\n};","function create(gantt){\r\n\tvar events = [];\r\n\r\n\treturn {\r\n\t\tdelegate:function(event, className, handler, root) {\r\n\t\t\tevents.push([event, className, handler, root]);\r\n\r\n\t\t\tvar helper = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\thelper.delegate(event, className, handler, root);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\tfor(var i = 0; i < events.length; i++){\r\n\t\t\t\tvar h = events[i];\r\n\t\t\t\tmouseEvents.detach(h[0], h[1], h[2], h[3]);\r\n\t\t\t}\r\n\t\t\tevents = [];\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = create;","var getKeyboardMapping = require(\"./keyboard_mappings\");\r\nvar textEditorFactory = require(\"./editors/text\"),\r\n\tnumberEditorFactory = require(\"./editors/number\"),\r\n\tselectEditorFactory = require(\"./editors/select\"),\r\n\tdateEditorFactory = require(\"./editors/date\"),\r\n\tpredecessorEditorFactory = require(\"./editors/predecessor\");\r\nvar utils = require(\"../../../../utils/utils\");\r\nvar domHelpers = require(\"../../../../utils/dom_helpers\");\r\nvar eventable = require(\"../../../../utils/eventable\");\r\n\r\nfunction initConfigs(gantt){\r\n\tgantt.config.editor_types = {\r\n\t\ttext: new (textEditorFactory(gantt))(),\r\n\t\tnumber: new (numberEditorFactory(gantt))(),\r\n\t\tselect: new (selectEditorFactory(gantt))(),\r\n\t\tdate: new (dateEditorFactory(gantt))(),\r\n\t\tpredecessor: new (predecessorEditorFactory(gantt))()\r\n\t};\r\n}\r\n\r\nfunction create(gantt){\r\n\tvar keyboardMapping = getKeyboardMapping(gantt);\r\n\r\n\tvar eventBus = {};\r\n\teventable(eventBus);\r\n\r\n\tfunction createGridEditors(grid) {\r\n\r\n\t\tfunction _getGridCellFromNode(node){\r\n\t\t\tif(!domHelpers.isChildOf(node, grid.$grid)){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tvar row = domHelpers.locateAttribute(node, grid.$config.item_attribute);\r\n\t\t\tvar cell = domHelpers.locateAttribute(node, \"data-column-name\");\r\n\t\t\tif(cell){\r\n\t\t\t\tvar columnName = cell.getAttribute(\"data-column-name\");\r\n\t\t\t\tvar id = row.getAttribute(grid.$config.item_attribute);\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t\tcolumnName: columnName\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tfunction _getEditorPosition(itemId, columnName) {\r\n\t\t\tvar top = grid.getItemTop(itemId);\r\n\t\t\tvar height = grid.getItemHeight(itemId);\r\n\t\t\tvar cols = grid.getGridColumns();\r\n\t\t\tvar left = 0,\r\n\t\t\t\twidth = 0;\r\n\r\n\t\t\tfor (var i = 0; i < cols.length; i++) {\r\n\t\t\t\tif (cols[i].name == columnName) {\r\n\t\t\t\t\twidth = cols[i].width;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tleft += cols[i].width;\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\ttop: top,\r\n\t\t\t\tleft: left,\r\n\t\t\t\theight: height,\r\n\t\t\t\twidth: width\r\n\t\t\t};\r\n\t\t}\r\n\t\tfunction _createPlaceholder(itemId, columnName) {\r\n\t\t\tvar pos = _getEditorPosition(itemId, columnName);\r\n\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\tel.className = \"gantt_grid_editor_placeholder\";\r\n\t\t\tel.setAttribute(grid.$config.item_attribute, itemId);\r\n\t\t\tel.setAttribute(\"data-column-name\", columnName);\r\n\t\t\tel.setAttribute(\"data-column-index\", grid.getColumnIndex(columnName));\r\n\r\n\t\t\tel.style.cssText = [\r\n\t\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\t\"width:\" + pos.width + \"px\",\r\n\t\t\t\t\"height:\" + pos.height + \"px\"\r\n\t\t\t].join(\";\");\r\n\r\n\t\t\treturn el;\r\n\t\t}\r\n\r\n\r\n\t\tvar handlers = [];\r\n\t\tvar store = null;\r\n\t\tvar controller = {\r\n\t\t\t_itemId: null,\r\n\t\t\t_columnName: null,\r\n\t\t\t_editor: null,\r\n\t\t\t_editorType: null,\r\n\t\t\t_placeholder: null,\r\n\r\n\t\t\tlocateCell: _getGridCellFromNode,\r\n\t\t\tgetEditorConfig: function (columnName) {\r\n\t\t\t\tvar column = grid.getColumn(columnName);\r\n\t\t\t\treturn column.editor;\r\n\t\t\t},\r\n\r\n\t\t\tinit: function () {\r\n\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\tif(mapping.init){\r\n\t\t\t\t\tmapping.init(this, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstore = grid.$gantt.getDatastore(grid.$config.bind);\r\n\r\n\t\t\t\tvar self = this;\r\n\r\n\t\t\t\thandlers.push(store.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\t\t\t\tif(self._itemId == oldId){\r\n\t\t\t\t\t\tself._itemId = newId;\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\t\t\t\thandlers.push(store.attachEvent(\"onStoreUpdated\", function(){\r\n\t\t\t\t\tif(grid.$gantt.getState(\"batchUpdate\").batch_update){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(self.isVisible() && !store.isVisible(self._itemId)){\r\n\t\t\t\t\t\tself.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tthis.init = function(){};\r\n\t\t\t},\r\n\r\n\t\t\tgetState: function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\teditor: this._editor,\r\n\t\t\t\t\teditorType: this._editorType,\r\n\t\t\t\t\tplaceholder: this._placeholder,\r\n\t\t\t\t\tid: this._itemId,\r\n\t\t\t\t\tcolumnName: this._columnName\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tstartEdit: function(itemId, columnName) {\r\n\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!store.exists(itemId)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar editorState = {id: itemId, columnName: columnName};\r\n\t\t\t\tif(this.callEvent(\"onBeforeEditStart\", [editorState]) === false){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.show(editorState.id, editorState.columnName);\r\n\t\t\t\tthis.setValue();\r\n\r\n\t\t\t\tthis.callEvent(\"onEditStart\", [editorState]);\r\n\t\t\t},\r\n\t\t\tisVisible: function(){\r\n\t\t\t\treturn !!(this._editor && domHelpers.isChildOf(this._placeholder, document.body));\r\n\t\t\t},\r\n\t\t\tshow: function (itemId, columnName) {\r\n\t\t\t\tif (this.isVisible()) {\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t}\r\n\t\t\t\tvar editorState = {id: itemId, columnName: columnName};\r\n\r\n\t\t\t\tvar column = grid.getColumn(editorState.columnName);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(column.name);\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar editor = grid.$getConfig().editor_types[editorConfig.type];\r\n\r\n\t\t\t\tvar placeholder = _createPlaceholder(editorState.id, editorState.columnName);\r\n\t\t\t\tgrid.$grid_data.appendChild(placeholder);\r\n\t\t\t\teditor.show(editorState.id, column, editorConfig, placeholder);\r\n\t\t\t\tthis._editor = editor;\r\n\t\t\t\tthis._placeholder = placeholder;\r\n\t\t\t\tthis._itemId = editorState.id;\r\n\t\t\t\tthis._columnName = editorState.columnName;\r\n\t\t\t\tthis._editorType = editorConfig.type;\r\n\r\n\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\tif(mapping.onShow){\r\n\t\t\t\t\tmapping.onShow(this, placeholder, grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tsetValue: function () {\r\n\t\t\t\tvar state = this.getState();\r\n\t\t\t\tvar itemId = state.id,\r\n\t\t\t\t\tcolumnName = state.columnName;\r\n\r\n\t\t\t\tvar column = grid.getColumn(columnName);\r\n\t\t\t\tvar item = store.getItem(itemId);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(columnName);\r\n\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar value = item[editorConfig.map_to];\r\n\t\t\t\tif(editorConfig.map_to == \"auto\"){\r\n\t\t\t\t\tvalue = store.getItem(itemId);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._editor.set_value(value, itemId, column, this._placeholder);\r\n\t\t\t\tthis.focus();\r\n\t\t\t},\r\n\r\n\t\t\tfocus: function(){\r\n\t\t\t\tthis._editor.focus(this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\tgetValue: function () {\r\n\t\t\t\tvar column = grid.getColumn(this._columnName);\r\n\t\t\t\treturn this._editor.get_value(this._itemId, column, this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\t_getItemValue: function() {\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(this._columnName);\r\n\r\n\t\t\t\tif(!editorConfig)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar item = gantt.getTask(this._itemId);\r\n\t\t\t\tvar value = item[editorConfig.map_to];\r\n\t\t\t\tif(editorConfig.map_to == \"auto\"){\r\n\t\t\t\t\tvalue = store.getItem(this._itemId);\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t},\r\n\r\n\t\t\tisChanged: function(){\r\n\r\n\t\t\t\tvar column = grid.getColumn(this._columnName);\r\n\r\n\t\t\t\tvar value = this._getItemValue();\r\n\r\n\t\t\t\treturn this._editor.is_changed(value, this._itemId, column, this._placeholder);\r\n\t\t\t},\r\n\r\n\t\t\thide: function () {\r\n\t\t\t\tif(!this._itemId)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar itemId = this._itemId,\r\n\t\t\t\t\tcolumnName = this._columnName;\r\n\r\n\t\t\t\tvar mapping = keyboardMapping.getMapping();\r\n\t\t\t\tif(mapping.onHide){\r\n\t\t\t\t\tmapping.onHide(this, this._placeholder, grid);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._itemId = null;\r\n\t\t\t\tthis._columnName = null;\r\n\t\t\t\tthis._editorType = null;\r\n\t\t\t\tif (!this._placeholder) return;\r\n\r\n\t\t\t\tif (this._editor) {\r\n\t\t\t\t\tthis._editor.hide(this._placeholder);\r\n\t\t\t\t}\r\n\t\t\t\tthis._editor = null;\r\n\t\t\t\tif (this._placeholder.parentNode) {\r\n\t\t\t\t\tthis._placeholder.parentNode.removeChild(this._placeholder);\r\n\t\t\t\t}\r\n\t\t\t\tthis._placeholder = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onEditEnd\", [{id: itemId, columnName: columnName}]);\r\n\t\t\t},\r\n\t\t\tsave: function () {\r\n\t\t\t\tif(!(this.isVisible() && store.exists(this._itemId) && this.isChanged())) {\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar itemId = this._itemId,\r\n\t\t\t\t\tcolumnName = this._columnName;\r\n\r\n\t\t\t\tif(!store.exists(itemId)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar item = store.getItem(itemId);\r\n\t\t\t\tvar editorConfig = this.getEditorConfig(columnName);\r\n\t\t\t\tvar editorState = {\r\n\t\t\t\t\tid: itemId,\r\n\t\t\t\t\tcolumnName: columnName,\r\n\t\t\t\t\tnewValue: this.getValue(),\r\n\t\t\t\t\toldValue: this._getItemValue()\r\n\t\t\t\t};\r\n\t\t\t\tif(this.callEvent(\"onBeforeSave\", [editorState]) !== false) {\r\n\t\t\t\t\tif(this._editor.is_valid(editorState.newValue, editorState.id, editorState.columnName, this._placeholder)){\r\n\r\n\r\n\t\t\t\t\t\tvar mapTo = editorConfig.map_to;\r\n\t\t\t\t\t\tvar value = editorState.newValue;\r\n\t\t\t\t\t\tif (mapTo != \"auto\") {\r\n\t\t\t\t\t\t\titem[mapTo] = value;\r\n\t\t\t\t\t\t\tif (mapTo == \"duration\") {\r\n\t\t\t\t\t\t\t\titem.end_date = gantt.calculateEndDate(item);\r\n\t\t\t\t\t\t\t} else if (mapTo == \"end_date\") {\r\n\t\t\t\t\t\t\t\titem.start_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\t\t\t\tstart_date: item.end_date,\r\n\t\t\t\t\t\t\t\t\tduration: -item.duration,\r\n\t\t\t\t\t\t\t\t\ttask: item}\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} else if (mapTo == \"start_date\") {\r\n\t\t\t\t\t\t\t\titem.end_date = gantt.calculateEndDate(item);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tstore.updateItem(itemId);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis._editor.save(itemId, grid.getColumn(columnName), this._placeholder);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.callEvent(\"onSave\", [editorState]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.hide();\r\n\t\t\t},\r\n\r\n\t\t\t_findEditableCell: function findEditableCell(start, direction){\r\n\t\t\t\tvar nextIndex = start;\r\n\t\t\t\tvar columns = grid.getGridColumns();\r\n\t\t\t\tvar nextColumn = columns[nextIndex];\r\n\r\n\t\t\t\tvar columnName = nextColumn ? nextColumn.name : null;\r\n\t\t\t\tif(columnName){\r\n\t\t\t\t\twhile(columnName && !this.getEditorConfig(columnName)){\r\n\t\t\t\t\t\tcolumnName = this._findEditableCell(start + direction, direction);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn columnName;\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t},\r\n\r\n\t\t\tgetNextCell: function moveCell(dir){\r\n\t\t\t\treturn this._findEditableCell(grid.getColumnIndex(this._columnName) + dir, dir);\r\n\t\t\t},\r\n\r\n\t\t\tgetFirstCell: function getFirstCell(){\r\n\t\t\t\treturn this._findEditableCell(0, 1);\r\n\t\t\t},\r\n\r\n\t\t\tgetLastCell: function getLastCell(){\r\n\t\t\t\treturn this._findEditableCell(grid.getGridColumns().length - 1, -1);\r\n\t\t\t},\r\n\r\n\t\t\teditNextCell: function nextCell(canChangeRow){\r\n\t\t\t\tvar cell = this.getNextCell(1);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tvar nextColumn = this.getNextCell(1);\r\n\t\t\t\t\tif(nextColumn && this.getEditorConfig(nextColumn)){\r\n\t\t\t\t\t\tthis.startEdit(this._itemId, nextColumn);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(canChangeRow && this.moveRow(1)){\r\n\t\t\t\t\tvar task = this.moveRow(1);\r\n\t\t\t\t\tcell = this.getFirstCell();\r\n\t\t\t\t\tif(cell && this.getEditorConfig(cell)){\r\n\t\t\t\t\t\tthis.startEdit(task, cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\teditPrevCell: function prevCell(canChangeRow){\r\n\t\t\t\tvar cell = this.getNextCell(-1);\r\n\t\t\t\tif(cell){\r\n\t\t\t\t\tvar nextColumn = this.getNextCell(-1);\r\n\t\t\t\t\tif(nextColumn && this.getEditorConfig(nextColumn)){\r\n\t\t\t\t\t\tthis.startEdit(this._itemId, nextColumn);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(canChangeRow && this.moveRow(-1)){\r\n\t\t\t\t\tvar task = this.moveRow(-1);\r\n\t\t\t\t\tcell = this.getLastCell();\r\n\t\t\t\t\tif(cell && this.getEditorConfig(cell)){\r\n\t\t\t\t\t\tthis.startEdit(task, cell);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tmoveRow: function moveRow(dir){\r\n\t\t\t\tif(dir > 0){\r\n\t\t\t\t\treturn gantt.getNext(this._itemId);\r\n\t\t\t\t}else {\r\n\t\t\t\t\treturn  gantt.getPrev(this._itemId);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\teditNextRow: function nextRow(){\r\n\t\t\t\tvar row = this.getNextCell(1);\r\n\t\t\t\tif(row){\r\n\t\t\t\t\tthis.startEdit(row, this._columnName);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\teditPrevRow: function prevRow(){\r\n\t\t\t\tvar row = this.getNextCell(-1);\r\n\t\t\t\tif(row){\r\n\t\t\t\t\tthis.startEdit(row, this._columnName);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tdestructor: function(){\r\n\t\t\t\thandlers.forEach(function(handlerId){\r\n\t\t\t\t\tstore.detachEvent(handlerId);\r\n\t\t\t\t});\r\n\t\t\t\tstore = null;\r\n\t\t\t\tthis.hide();\r\n\t\t\t\tthis.detachAllEvents();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tutils.mixin(controller, keyboardMapping);\r\n\t\tutils.mixin(controller, eventBus);\r\n\r\n\t\treturn controller;\r\n\t}\r\n\r\n\r\n\tvar inlineEditController = {\r\n\t\tinit: initConfigs,\r\n\t\tcreateEditors: createGridEditors\r\n\t};\r\n\r\n\tutils.mixin(inlineEditController, keyboardMapping);\r\n\tutils.mixin(inlineEditController, eventBus);\r\n\r\n\treturn inlineEditController;\r\n}\r\n\r\nmodule.exports = create;","var ScaleHelper = require(\"./scales_ignore\");\r\nvar eventable = require(\"../../../utils/eventable\");\r\nvar utils = require(\"../../../utils/utils\");\r\n\r\nvar canvasRender = require(\"./tasks_canvas_render\");\r\n\r\nvar Timeline = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$scaleHelper = new ScaleHelper(gantt);\r\n\tthis.$gantt = gantt;\r\n\teventable(this);\r\n};\r\n\r\nTimeline.prototype = {\r\n\tinit: function(container){\r\n\t\tcontainer.innerHTML += \"<div class='gantt_task' style='width:inherit;height:inherit;'></div>\";\r\n\t\tthis.$task = container.childNodes[0];\r\n\r\n\t\tthis.$task.innerHTML = \"<div class='gantt_task_scale'></div><div class='gantt_data_area'></div>\";\r\n\t\tthis.$task_scale = this.$task.childNodes[0];\r\n\r\n\t\tthis.$task_data = this.$task.childNodes[1];\r\n\t\tthis.$task_data.innerHTML = \"<div class='gantt_task_bg'></div><div class='gantt_links_area'></div><div class='gantt_bars_area'></div>\";\r\n\t\tthis.$task_bg = this.$task_data.childNodes[0];\r\n\t\tthis.$task_links = this.$task_data.childNodes[1];\r\n\t\tthis.$task_bars = this.$task_data.childNodes[2];\r\n\r\n\t\tthis._tasks = {\r\n\t\t\tcol_width: 0,\r\n\t\t\twidth: [], // width of each column\r\n\t\t\tfull_width: 0, // width of all columns\r\n\t\t\ttrace_x: [],\r\n\t\t\trendered: {}\r\n\t\t};\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar attr = config[this.$config.bind + \"_attribute\"];\r\n\t\tvar linksAttr = config[this.$config.bindLinks + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tif(!linksAttr && this.$config.bindLinks){\r\n\t\t\tlinksAttr = this.$config.bindLinks + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\t\tthis.$config.link_attribute = linksAttr || null;\r\n\r\n\t\tvar layers = this._createLayerConfig();\r\n\t\tif(!this.$config.layers){\r\n\t\t\tthis.$config.layers = layers.tasks;\r\n\t\t}\r\n\t\tif(!this.$config.linkLayers){\r\n\t\t\tthis.$config.linkLayers = layers.links;\r\n\t\t}\r\n\r\n\t\tthis._attachLayers(this.$gantt);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\r\n\tsetSize: function(width, height){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tif(width*1 === width){\r\n\t\t\tthis.$config.width = width;\r\n\t\t}\r\n\t\tif(height*1 === height){\r\n\r\n\t\t\tthis.$config.height = height;\r\n\t\t\tvar dataHeight = Math.max(this.$config.height - config.scale_height);\r\n\t\t\tthis.$task_data.style.height = dataHeight + 'px';\r\n\t\t}\r\n\r\n\t\tthis.refresh();\r\n\t\tthis.$task_bg.style.backgroundImage = \"\";\r\n\r\n\t\tif(config.smart_rendering && this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tthis.$task_bg.style.height = config.row_height * store.countVisible() +\"px\";\r\n\t\t}else{\r\n\t\t\tthis.$task_bg.style.height = \"\";\r\n\t\t}\r\n\r\n\t\tvar scale = this._tasks;\r\n\t\t//timeline area layers\r\n\t\tvar data_els = this.$task_data.childNodes;\r\n\t\tfor(var i= 0, len = data_els.length; i < len; i++){\r\n\t\t\tvar el = data_els[i];\r\n\t\t\tif(el.hasAttribute(\"data-layer\") && el.style)\r\n\t\t\t\tel.style.width = scale.full_width + \"px\";\r\n\t\t}\r\n\t},\r\n\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$task.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetSize: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0,\r\n\t\t\tcontentWidth = this._tasks.full_width;\r\n\r\n\t\treturn {\r\n\t\t\tx: this.$config.width,\r\n\t\t\ty: this.$config.height,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth : 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight : 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\t},\r\n\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif(top*1 === top){\r\n\t\t\tthis.$config.scrollTop = top;\r\n\t\t\tthis.$task_data.scrollTop = this.$config.scrollTop;\r\n\t\t}\r\n\t\tif (left*1 === left){\r\n\t\t\tthis.$task.scrollLeft = left;\r\n\t\t\tthis.$config.scrollLeft = this.$task.scrollLeft;\r\n\t\t\tthis._refreshScales();\r\n\t\t}\r\n\t},\r\n\r\n\t_refreshScales: function _refreshScales() {\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif (!config.smart_scales) return;\r\n\r\n\t\tvar x = this.$config.scrollLeft;\r\n\t\tvar width = this.$config.width;\r\n\r\n\t\tvar scales = this._scales;\r\n\t\tthis.$task_scale.innerHTML = this._getScaleChunkHtml(scales, x, x + width);\r\n\t},\r\n\t_createLayerConfig: function(){\r\n\t\tvar self = this;\r\n\t\tvar taskFilter = function(){\r\n\t\t\treturn self.isVisible();\r\n\t\t};\r\n\r\n\t\tvar taskLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBar,\r\n\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskSplitBar,\r\n\t\t\t\tfilter: [taskFilter],\r\n\t\t\t\tcontainer: this.$task_bars,\r\n\t\t\t\tappend: true\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.taskBg,\r\n\t\t\t\tcontainer: this.$task_bg,\r\n\t\t\t\tfilter: [\r\n\t\t\t\t\tfunction(){\r\n\t\t\t\t\t\treturn !self.$getConfig().static_background;\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttaskFilter\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tvar linkLayers = [\r\n\t\t\t{\r\n\t\t\t\texpose: true,\r\n\t\t\t\trenderer: this.$gantt.$ui.layers.link,\r\n\t\t\t\tcontainer: this.$task_links,\r\n\t\t\t\tfilter: [taskFilter]\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\treturn {\r\n\t\t\ttasks: taskLayers,\r\n\t\t\tlinks: linkLayers\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t_attachLayers: function(gantt){\r\n\t\tthis._taskLayers = [];\r\n\t\tthis._linkLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\r\n\t\tif(this.$config.bind){\r\n\r\n\t\t\tself.$config.rowStore = self.$gantt.getDatastore(self.$config.bind);\r\n\r\n\t\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\t\tif(!taskRenderer){\r\n\t\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bind,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\ttaskRenderer.container = function(){ return self.$task_data;};\r\n\r\n\t\t\tvar taskLayers = this.$config.layers;\r\n\t\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\t\tvar layer = taskLayers[i];\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(typeof layer == \"function\"){\r\n\t\t\t\t\tlayer = {renderer: layer};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t\t\tif(layer.expose){\r\n\t\t\t\t\tthis._taskRenderer = taskRenderer.getLayer(bar_layer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._initStaticBackgroundRender();\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks){\r\n\t\t\tself.$config.linkStore = self.$gantt.getDatastore(self.$config.bindLinks);\r\n\r\n\t\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\t\tif(!linkRenderer){\r\n\t\t\t\tlinkRenderer = layers.createDataRender({\r\n\t\t\t\t\tname: this.$config.bindLinks,\r\n\t\t\t\t\tdefaultContainer: function(){ return self.$task_data;}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar linkLayers = this.$config.linkLayers;\r\n\t\t\tfor(var i = 0; linkLayers && i < linkLayers.length; i++){\r\n\r\n\t\t\t\tif(typeof layer == \"string\"){\r\n\t\t\t\t\tlayer = this.$gantt.$ui.layers[layer];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar layer = linkLayers[i];\r\n\t\t\t\tlayer.host = this;\r\n\t\t\t\tvar linkLayer = linkRenderer.addLayer(layer);\r\n\t\t\t\tthis._taskLayers.push(linkLayer);\r\n\t\t\t\tif(linkLayers[i].expose){\r\n\t\t\t\t\tthis._linkRenderer = linkRenderer.getLayer(linkLayer);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t_initStaticBackgroundRender: function(){\r\n\t\tvar self = this;\r\n\t\tvar staticRender = canvasRender.create();\r\n\t\tvar store = self.$config.rowStore;\r\n\t\tif(!store) return;\r\n\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", function(id, item, mode){\r\n\t\t\tif(id !== null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(!self.isVisible())\r\n\t\t\t\treturn;\r\n\t\t\tvar config = self.$getConfig();\r\n\t\t\tif(config.static_background) {\r\n\t\t\t\tvar store = self.$gantt.getDatastore(self.$config.bind);\r\n\t\t\t\tif (store) {\r\n\t\t\t\t\tstaticRender.render(self.$task_bg, config, self.getScale(), config.row_height * store.countVisible());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis._initStaticBackgroundRender = function(){};//init once\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\t\tvar linkRenderer = layers.getDataRender(this.$config.bindLinks);\r\n\r\n\t\tif (this._taskLayers) {\r\n\t\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this._linkLayers) {\r\n\t\t\tfor(var i = 0; i < this._linkLayers.length; i++){\r\n\t\t\t\tlinkRenderer.removeLayer(this._linkLayers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._linkLayers = [];\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_render_tasks_scales: function _render_tasks_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar scales_html = \"\",\r\n\t\t\touter_width = 0,\r\n\t\t\tscale_height = 0;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (this.isVisible()) {\r\n\t\t\tvar helpers = this.$scaleHelper;\r\n\t\t\tvar scales = this._getScales();\r\n\t\t\tscale_height = config.scale_height;\r\n\r\n\t\t\tvar availWidth = this.$config.width;\r\n\t\t\tif(config.autosize == \"x\" || config.autosize == \"xy\"){\r\n\t\t\t\tavailWidth = Math.max(config.autosize_min_width, 0);\r\n\t\t\t}\r\n\r\n\t\t\tvar cfgs = helpers.prepareConfigs(scales, config.min_column_width, availWidth, scale_height - 1, state.min_date, state.max_date, config.rtl);\r\n\t\t\tvar cfg = this._tasks = cfgs[cfgs.length - 1];\r\n\t\t\tthis._scales = cfgs;\r\n\r\n\t\t\tscales_html = this._getScaleChunkHtml(cfgs, 0, this.$config.width);\r\n\r\n\t\t\touter_width = cfg.full_width + \"px\";//cfg.full_width + (this._scroll_sizes().y ? scrollSizes.scroll_size : 0) + \"px\";\r\n\t\t\tscale_height += \"px\";\r\n\t\t}\r\n\r\n\t\tthis.$task_scale.style.height = scale_height;\r\n\r\n\t\tthis.$task_data.style.width =\r\n\t\t\tthis.$task_scale.style.width = outer_width;\r\n\r\n\t\tthis.$task_scale.innerHTML = scales_html;\r\n\r\n\t},\r\n\r\n\t_getScaleChunkHtml: function _get_scale_chunk_html (scales, fromPos, toPos) {\r\n\t\tvar templates = this.$gantt.$services.templates();\r\n\t\tvar html = [];\r\n\r\n\t\tvar css = templates.scale_row_class;\r\n\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\tvar cssClass = \"gantt_scale_line\";\r\n\t\t\tvar tplClass = css(scales[i]);\r\n\t\t\tif (tplClass) {\r\n\t\t\t\tcssClass += \" \" + tplClass;\r\n\t\t\t}\r\n\r\n\t\t\thtml.push(\"<div class=\\\"\" + cssClass + \"\\\" style=\\\"height:\" + (scales[i].height) +\r\n\t\t\t\t\"px;position:relative;line-height:\" + (scales[i].height) + \"px\\\">\" + this._prepareScaleHtml(scales[i], fromPos, toPos) + \"</div>\");\r\n\t\t}\r\n\r\n\t\treturn html.join(\"\");\r\n\t},\r\n\t_prepareScaleHtml: function _prepare_scale_html(config, fromPos, toPos) {\r\n\t\tvar globalConfig = this.$getConfig();\r\n\t\tvar globalTemplates = this.$gantt.$services.templates();\r\n\r\n\t\tvar cells = [];\r\n\t\tvar date = null, content = null, css = null;\r\n\r\n\t\tif (config.template || config.date) {\r\n\t\t\tcontent = config.template || this.$gantt.date.date_to_str(config.date);\r\n\t\t}\r\n\r\n\t\tvar startIndex = 0,\r\n\t\t\tendIndex = config.count;\r\n\r\n\t\tif (globalConfig.smart_scales && (!isNaN(fromPos) && !isNaN(toPos))) {\r\n\t\t\tstartIndex = _findBinary(config.left, fromPos);\r\n\t\t\tendIndex = _findBinary(config.left, toPos) + 1;\r\n\t\t}\r\n\r\n\t\tcss = config.css || function () {\r\n\t\t\t};\r\n\t\tif (!config.css && globalConfig.inherit_scale_class) {\r\n\t\t\tcss = globalTemplates.scale_cell_class;\r\n\t\t}\r\n\r\n\t\tfor (var i = startIndex; i < endIndex; i++) {\r\n\t\t\tif (!config.trace_x[i]) break;\r\n\r\n\t\t\tdate = new Date(config.trace_x[i]);\r\n\t\t\tvar value = content.call(this, date),\r\n\t\t\t\twidth = config.width[i],\r\n\t\t\t\theight = config.height,\r\n\t\t\t\tleft = config.left[i],\r\n\t\t\t\tstyle = \"\",\r\n\t\t\t\ttemplate = \"\",\r\n\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\tif (width) {\r\n\t\t\t\tvar position = globalConfig.smart_scales ? (\"position:absolute;left:\" + left + \"px\") : \"\";\r\n\r\n\t\t\t\tstyle = \"width:\" + (width) + \"px;height:\" + height + \"px;\" + position;\r\n\t\t\t\tcssclass = \"gantt_scale_cell\" + (i == config.count - 1 ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\t\ttemplate = css.call(this, date);\r\n\t\t\t\tif (template) cssclass += \" \" + template;\r\n\r\n\t\t\t\tvar ariaAttr = this.$gantt._waiAria.getTimelineCellAttr(value);\r\n\t\t\t\tvar cell = \"<div class='\" + cssclass + \"'\" + ariaAttr + \" style='\" + style + \"'>\" + value + \"</div>\";\r\n\t\t\t\tcells.push(cell);\r\n\t\t\t} else {\r\n\t\t\t\t//do not render ignored cells\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn cells.join(\"\");\r\n\t},\r\n\tdateFromPos: function dateFromPos(x) {\r\n\t\tvar scale = this._tasks;\r\n\t\tif (x < 0 || x > scale.full_width || !scale.full_width) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar ind = _findBinary(this._tasks.left, x);\r\n\t\tvar summ = this._tasks.left[ind];\r\n\r\n\t\tvar col_width = scale.width[ind] || scale.col_width;\r\n\t\tvar part = 0;\r\n\t\tif (col_width) {\r\n\t\t\tpart = (x - summ) / col_width;\r\n\t\t\tif(scale.rtl){\r\n\t\t\t\tpart = 1 - part;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar unit = 0;\r\n\t\tif (part) {\r\n\t\t\tunit = this._getColumnDuration(scale, scale.trace_x[ind]);\r\n\t\t}\r\n\r\n\t\tvar date = new Date(scale.trace_x[ind].valueOf() + Math.round(part * unit));\r\n\t\treturn date;\r\n\t},\r\n\tposFromDate: function posFromDate(date) {\r\n\t\tif (!this.isVisible())\r\n\t\t\treturn 0;\r\n\r\n\t\tvar ind = this.columnIndexByDate(date);\r\n\t\tthis.$gantt.assert(ind >= 0, \"Invalid day index\");\r\n\r\n\t\tvar wholeCells = Math.floor(ind);\r\n\t\tvar partCell = ind % 1;\r\n\r\n\t\tvar pos = this._tasks.left[Math.min(wholeCells, this._tasks.width.length - 1)];\r\n\t\tif (wholeCells == this._tasks.width.length)\r\n\t\t\tpos += this._tasks.width[this._tasks.width.length - 1];\r\n\t\t//for(var i=1; i <= wholeCells; i++)\r\n\t\t//\tpos += gantt._tasks.width[i-1];\r\n\r\n\t\tif (partCell) {\r\n\t\t\tif (wholeCells < this._tasks.width.length) {\r\n\t\t\t\tpos += this._tasks.width[wholeCells] * (partCell % 1);\r\n\t\t\t} else {\r\n\t\t\t\tpos += 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn Math.round(pos);\r\n\t},\r\n\tcolumnIndexByDate: function columnIndexByDate(date) {\r\n\t\tvar pos = new Date(date).valueOf();\r\n\t\tvar days = this._tasks.trace_x_ascending,\r\n\t\t\tignores = this._tasks.ignore_x;\r\n\r\n\t\tvar state = this.$gantt.getState();\r\n\r\n\t\tif (pos <= state.min_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn days.length;\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (pos >= state.max_date) {\r\n\t\t\tif(this._tasks.rtl){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn days.length;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t/*var day = null;\r\n\t\t for (var xind = 0, length = days.length-1; xind < length; xind++) {\r\n\t\t // | 8:00, 8:30 | 8:15 should be checked against 8:30\r\n\t\t // clicking at the most left part of the cell, say 8:30 should create event in that cell, not previous one\r\n\t\t day = +days[xind+1];\r\n\t\t if (pos < day && !ignores[day])\r\n\t\t break;\r\n\t\t }*/\r\n\r\n\t\tvar day_ind = _findBinary(days, pos);\r\n\t\tvar day = +days[day_ind];\r\n\t\twhile (ignores[day]) {\r\n\t\t\tday = +days[++day_ind];\r\n\t\t}\r\n\r\n\t\tvar transition = this._tasks.trace_index_transition;\r\n\t\tvar index = day_ind;\r\n\t\tif(!day){\r\n\t\t\tif(transition){\r\n\t\t\t\treturn transition[0];\r\n\t\t\t}else{\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar part = ((date - days[day_ind]) / this._getColumnDuration(this._tasks, days[day_ind]));\r\n\t\tif(transition){\r\n\t\t\treturn transition[index] + (1 - part);\r\n\t\t}else{\r\n\t\t\treturn index + part;\r\n\t\t}\r\n\r\n\t\t//return day_ind + ((date - days[day_ind]) / this._getColumnDuration(this._tasks, days[day_ind]));\r\n\t},\r\n\tgetItemPosition:function (task, start_date, end_date) {\r\n\t\tvar xLeft, xRight, width;\r\n\t\tif(this._tasks.rtl){\r\n\t\t\txRight = this.posFromDate(start_date || task.start_date);\r\n\t\t\txLeft = this.posFromDate(end_date || task.end_date);\r\n\t\t}else{\r\n\t\t\txLeft = this.posFromDate(start_date || task.start_date);\r\n\t\t\txRight = this.posFromDate(end_date || task.end_date);\r\n\t\t}\r\n\t\twidth =  Math.max((xRight - xLeft), 0);\r\n\r\n\t\tvar y = this.getItemTop(task.id);\r\n\t\tvar height = this.getItemHeight();\r\n\t\treturn {\r\n\t\t\tleft: xLeft,\r\n\t\t\ttop: y,\r\n\t\t\theight: height,\r\n\t\t\twidth: width\r\n\t\t};\r\n\t},\r\n\r\n\tgetItemHeight: function(){\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\t// height of the bar item\r\n\t\tvar height = config.task_height;\r\n\r\n\t\tif (height == \"full\") {\r\n\t\t\tvar offset = config.task_height_offset || 5;\r\n\t\t\theight = config.row_height - offset;\r\n\t\t}\r\n\t\t//item height cannot be bigger than row height\r\n\t\theight = Math.min(height, config.row_height);\r\n\t\treturn Math.max(height, 0);\r\n\t},\r\n\r\n\tgetRowTop: function(index){\r\n\t\treturn index * this.$getConfig().row_height;\r\n\t},\r\n\r\n\tgetItemTop: function (task_id) {\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return 0;\r\n\r\n\t\t\tif(store.getParent && store.exists(task_id) && store.exists(store.getParent(task_id))){\r\n\t\t\t\tvar parent = store.getItem(store.getParent(task_id));\r\n\t\t\t\tif(this.$gantt.isSplitTask(parent)){\r\n\t\t\t\t\treturn store.getIndexById(parent.id) * this.$getConfig().row_height;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn store.getIndexById(task_id) * this.$getConfig().row_height;\r\n\r\n\t\t}else{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetScale: function(){\r\n\t\treturn this._tasks;\r\n\t},\r\n\r\n\t_getScales: function _get_scales() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar helpers = this.$scaleHelper;\r\n\t\tvar scales = [helpers.primaryScale()].concat(config.subscales);\r\n\r\n\t\thelpers.sortScales(scales);\r\n\t\treturn scales;\r\n\t},\r\n\r\n\t_getColumnDuration: function _get_coll_duration(scale, date) {\r\n\t\treturn this.$gantt.date.add(date, scale.step, scale.unit) - date;\r\n\t},\r\n\r\n\trefresh: function(){\r\n\t\tif(this.$config.bind) {\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\t\t}\r\n\r\n\t\tif(this.$config.bindLinks) {\r\n\t\t\tthis.$config.linkStore = this.$gantt.getDatastore(this.$config.bindLinks);\r\n\t\t}\r\n\r\n\t\tthis._initStaticBackgroundRender();\r\n\t\tthis._render_tasks_scales();\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tthis._clearLayers(gantt);\r\n\r\n\t\tthis.$task = null;\r\n\t\tthis.$task_scale = null;\r\n\t\tthis.$task_data = null;\r\n\t\tthis.$task_bg = null;\r\n\t\tthis.$task_links = null;\r\n\t\tthis.$task_bars = null;\r\n\r\n\t\tthis.$gantt = null;\r\n\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\t\tif(this.$config.linkStore){\r\n\t\t\tthis.$config.linkStore = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t}\r\n};\r\n\r\nmodule.exports = Timeline;\r\n\r\nfunction _findBinary(array, target) {\r\n\t// modified binary search, target value not exactly match array elements, looking for closest one\r\n\r\n\tvar low = 0, high = array.length - 1, i, item, prev;\r\n\twhile (low <= high) {\r\n\r\n\t\ti = Math.floor((low + high) / 2);\r\n\t\titem = +array[i];\r\n\t\tprev = +array[i - 1];\r\n\t\tif (item < target) {\r\n\t\t\tlow = i + 1;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif (item > target) {\r\n\t\t\tif (!(!isNaN(prev) && prev < target)) {\r\n\t\t\t\thigh = i - 1;\r\n\t\t\t\tcontinue;\r\n\t\t\t} else {\r\n\t\t\t\t// if target is between 'i' and 'i-1' return 'i - 1'\r\n\t\t\t\treturn i - 1;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\twhile (+array[i] == +array[i + 1]) i++;\r\n\r\n\t\treturn i;\r\n\t}\r\n\treturn array.length - 1;\r\n}\r\n\r\n","var env = {\r\n\tisIE: (navigator.userAgent.indexOf(\"MSIE\") >= 0 || navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisIE6: (!window.XMLHttpRequest && navigator.userAgent.indexOf(\"MSIE\") >= 0),\r\n\tisIE7: (navigator.userAgent.indexOf(\"MSIE 7.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") < 0),\r\n\tisIE8: (navigator.userAgent.indexOf(\"MSIE 8.0\") >= 0 && navigator.userAgent.indexOf(\"Trident\") >= 0),\r\n\tisOpera: (navigator.userAgent.indexOf(\"Opera\") >= 0),\r\n\tisChrome: (navigator.userAgent.indexOf(\"Chrome\") >= 0),\r\n\tisKHTML: (navigator.userAgent.indexOf(\"Safari\") >= 0 || navigator.userAgent.indexOf(\"Konqueror\") >= 0),\r\n\tisFF: (navigator.userAgent.indexOf(\"Firefox\") >= 0),\r\n\tisIPad: (navigator.userAgent.search(/iPad/gi) >= 0),\r\n\tisEdge: (navigator.userAgent.indexOf(\"Edge\")!=-1)\r\n};\r\n\r\nmodule.exports = env;","module.exports = function(gantt) {\r\n\tgantt.locale = {\r\n\t\tdate: {\r\n\t\t\tmonth_full: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\t\tmonth_short: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\t\tday_full: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\r\n\t\t\tday_short: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"]\r\n\t\t},\r\n\t\tlabels: {\r\n\t\t\tnew_task: \"New task\",\r\n\t\t\ticon_save: \"Save\",\r\n\t\t\ticon_cancel: \"Cancel\",\r\n\t\t\ticon_details: \"Details\",\r\n\t\t\ticon_edit: \"Edit\",\r\n\t\t\ticon_delete: \"Delete\",\r\n\t\t\tconfirm_closing: \"\",//Your changes will be lost, are you sure?\r\n\t\t\tconfirm_deleting: \"Task will be deleted permanently, are you sure?\",\r\n\t\t\tsection_description: \"Description\",\r\n\t\t\tsection_time: \"Time period\",\r\n\t\t\tsection_type: \"Type\",\r\n\r\n\t\t\t/* grid columns */\r\n\t\t\tcolumn_wbs: \"WBS\",\r\n\t\t\tcolumn_text: \"Task name\",\r\n\t\t\tcolumn_start_date: \"Start time\",\r\n\t\t\tcolumn_duration: \"Duration\",\r\n\t\t\tcolumn_add: \"\",\r\n\r\n\t\t\t/* link confirmation */\r\n\t\t\tlink: \"Link\",\r\n\t\t\tconfirm_link_deleting: \"will be deleted\",\r\n\t\t\tlink_start: \" (start)\",\r\n\t\t\tlink_end: \" (end)\",\r\n\r\n\t\t\ttype_task: \"Task\",\r\n\t\t\ttype_project: \"Project\",\r\n\t\t\ttype_milestone: \"Milestone\",\r\n\r\n\t\t\tminutes: \"Minutes\",\r\n\t\t\thours: \"Hours\",\r\n\t\t\tdays: \"Days\",\r\n\t\t\tweeks: \"Week\",\r\n\t\t\tmonths: \"Months\",\r\n\t\t\tyears: \"Years\",\r\n\r\n\t\t\t/* message popup */\r\n\t\t\tmessage_ok: \"OK\",\r\n\t\t\tmessage_cancel: \"Cancel\"\r\n\r\n\t\t}\r\n\t};\r\n};\r\n\r\n","var utils = require(\"../../utils/utils\");\r\nvar helpers = require(\"../../utils/helpers\");\r\n\r\n\r\nfunction IsWorkTimeArgument(date, unit, task, id, calendar){\r\n\tthis.date = date;\r\n\tthis.unit = unit;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction ClosestWorkTimeArgument(date, dir, unit, task, id, calendar){\r\n\tthis.date = date;\r\n\tthis.dir = dir;\r\n\tthis.unit = unit;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar){\r\n\tthis.start_date = start_date;\r\n\tthis.duration = duration;\r\n\tthis.unit = unit;\r\n\tthis.step = step;\r\n\tthis.task = task;\r\n\tthis.id = id;\r\n\tthis.calendar = calendar;\r\n\treturn this;\r\n}\r\n\r\nfunction GetDurationArgument(start, end, task, calendar) {\r\n\tthis.start_date = start;\r\n\tthis.end_date = end;\r\n\tthis.task = task;\r\n\tthis.calendar = calendar;\r\n\tthis.unit = null;\r\n\tthis.step = null;\r\n\treturn this;\r\n}\r\n\r\nvar calendarArgumentsHelper = function(gantt){\r\n\treturn {\r\n\t\tgetWorkHoursArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (helpers.isDate(config)) {\r\n\t\t\t\tconfig = {\r\n\t\t\t\t\tdate: config\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tconfig = utils.mixin({}, config);\r\n\t\t\t}\r\n\t\t\treturn config;\r\n\t\t},\r\n\t\tsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tunsetWorkTimeArguments: function () {\r\n\t\t\treturn arguments[0];\r\n\t\t},\r\n\t\tisWorkTimeArguments: function () {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif(config instanceof IsWorkTimeArgument){\r\n\t\t\t\treturn config;\r\n\t\t\t}\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\tif (!config.date) {\r\n\t\t\t\t//IsWorkTimeArgument(date, unit, task, id, calendar)\r\n\t\t\t\tprocessedConfig = new IsWorkTimeArgument(arguments[0], arguments[1], arguments[2], null, arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new IsWorkTimeArgument(config.date, config.unit, config.task, null, config.calendar);\r\n\t\t\t}\r\n\r\n\t\t\tprocessedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t},\r\n\t\tgetClosestWorkTimeArguments: function (arg) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof ClosestWorkTimeArgument)\r\n\t\t\t\treturn config;\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\tif (helpers.isDate(config)) {\r\n\t\t\t\tprocessedConfig = new ClosestWorkTimeArgument(config);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new ClosestWorkTimeArgument(\r\n\t\t\t\t\tconfig.date,\r\n\t\t\t\t\tconfig.dir,\r\n\t\t\t\t\tconfig.unit,\r\n\t\t\t\t\tconfig.task,\r\n\t\t\t\t\tnull,//config.id,\r\n\t\t\t\t\tconfig.calendar\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif(config.id){\r\n\t\t\t\tprocessedConfig.task = config;\r\n\t\t\t}\r\n\t\t\tprocessedConfig.dir = config.dir || 'any';\r\n\t\t\tprocessedConfig.unit = config.unit || gantt.config.duration_unit;\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t},\r\n\r\n\t\t_getStartEndConfig: function (param) {\r\n\t\t\tvar argumentType = GetDurationArgument;\r\n\t\t\tvar config;\r\n\t\t\tif (param instanceof argumentType)\r\n\t\t\t\treturn param;\r\n\r\n\t\t\tif (helpers.isDate(param)) {\r\n\t\t\t\tconfig = new argumentType(arguments[0], arguments[1], arguments[2], arguments[3]);\r\n\t\t\t} else {\r\n\t\t\t\tconfig = new argumentType(param.start_date, param.end_date, param.task);\r\n\t\t\t\tif (param.id) {\r\n\t\t\t\t\tconfig.task = param;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconfig.unit = config.unit || gantt.config.duration_unit;\r\n\t\t\tconfig.step = config.step || gantt.config.duration_step;\r\n\t\t\tconfig.start_date = config.start_date || config.start || config.date;\r\n\r\n\t\t\treturn config;\r\n\t\t},\r\n\r\n\t\tgetDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\thasDurationArguments: function (start, end, unit, step) {\r\n\t\t\treturn this._getStartEndConfig.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\tcalculateEndDateArguments: function (start, duration, unit, step) {\r\n\t\t\tvar config = arguments[0];\r\n\t\t\tif (config instanceof CalculateEndDateArgument)\r\n\t\t\t\treturn config;\r\n\r\n\t\t\tvar processedConfig;\r\n\t\t\t//CalculateEndDateArgument(start_date, duration, unit, step, task, id, calendar)\r\n\t\t\tif (helpers.isDate(config)) {\r\n\t\t\t\tprocessedConfig = new CalculateEndDateArgument(\r\n\t\t\t\t\targuments[0],\r\n\t\t\t\t\targuments[1],\r\n\t\t\t\t\targuments[2],\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\targuments[3],\r\n\t\t\t\t\tundefined,\r\n\t\t\t\t\targuments[4]\r\n\t\t\t\t);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tprocessedConfig = new CalculateEndDateArgument(\r\n\t\t\t\t\tconfig.start_date,\r\n\t\t\t\t\tconfig.duration,\r\n\t\t\t\t\tconfig.unit,\r\n\t\t\t\t\tconfig.step,\r\n\t\t\t\t\tconfig.task,\r\n\t\t\t\t\tnull,//config.id,\r\n\t\t\t\t\tconfig.calendar\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif(config.id){\r\n\t\t\t\tprocessedConfig.task = config;\r\n\t\t\t}\r\n\r\n\t\t\tprocessedConfig.unit = processedConfig.unit || gantt.config.duration_unit;\r\n\t\t\tprocessedConfig.step = processedConfig.step || gantt.config.duration_step;\r\n\r\n\t\t\treturn processedConfig;\r\n\t\t}\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = calendarArgumentsHelper;","function copyLinkIdsArray(gantt, linkIds, targetHash){\r\n\tfor(var i = 0; i < linkIds.length; i++) {\r\n\t\tif(gantt.isLinkExists(linkIds[i])){\r\n\t\t\ttargetHash[linkIds[i]] = gantt.getLink(linkIds[i]);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction copyLinkIds(gantt, task, targetHash){\r\n\tcopyLinkIdsArray(gantt, task.$source, targetHash);\r\n\tcopyLinkIdsArray(gantt, task.$target, targetHash);\r\n}\r\n\r\nfunction getSubtreeLinks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tif(gantt.isTaskExists(rootId)){\r\n\t\tcopyLinkIds(gantt, gantt.getTask(rootId), res);\r\n\t}\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tcopyLinkIds(gantt, child, res);\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nfunction getSubtreeTasks(gantt, rootId){\r\n\tvar res = {};\r\n\r\n\tgantt.eachTask(function(child){\r\n\t\tres[child.id] = child;\r\n\t}, rootId);\r\n\r\n\treturn res;\r\n}\r\n\r\nmodule.exports = {\r\n\tgetSubtreeLinks: getSubtreeLinks,\r\n\tgetSubtreeTasks: getSubtreeTasks\r\n};","var ScaleHelper = require(\"./ui/timeline/scales_ignore\");\r\n\r\n\r\nfunction dateRangeResolver(gantt){\r\n\t//reset project timing\r\n\t//_get_tasks_data(gantt);\r\n\treturn gantt.getSubtaskDates();\r\n}\r\n\r\nfunction defaultRangeResolver(){\r\n\treturn {\r\n\t\tstart_date: new Date(),\r\n\t\tend_date: new Date()\r\n\t};\r\n}\r\n\r\nfunction resolveConfigRange(unit, gantt){\r\n\tvar range = {\r\n\t\tstart_date:null,\r\n\t\tend_date:null\r\n\t};\r\n\r\n\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](new Date(gantt.config.start_date));\r\n\r\n\t\tvar end = new Date(gantt.config.end_date);\r\n\t\tvar start_interval = gantt.date[unit + \"_start\"](new Date(end));\r\n\t\tif (+end != +start_interval) {\r\n\t\t\tend = gantt.date.add(start_interval, 1, unit);\r\n\t\t} else {\r\n\t\t\tend = start_interval;\r\n\t\t}\r\n\r\n\t\trange.end_date = end;\r\n\t}\r\n\treturn range;\r\n}\r\n\r\nfunction _scale_range_unit(gantt) {\r\n\tvar unit = gantt.config.scale_unit;\r\n\tvar step = gantt.config.step;\r\n\tif (gantt.config.scale_offset_minimal) {\r\n\r\n\t\tvar helper = new ScaleHelper(gantt);\r\n\t\tvar scales = [helper.primaryScale()].concat(gantt.config.subscales);\r\n\r\n\t\thelper.sortScales(scales);\r\n\t\tunit = scales[scales.length - 1].unit;\r\n\t\tstep = scales[scales.length - 1].step || 1;\r\n\t}\r\n\treturn { unit:unit, step:step };\r\n}\r\n\r\nfunction _init_tasks_range(gantt) {\r\n\tvar cfg = _scale_range_unit(gantt);\r\n\tvar unit = cfg.unit,\r\n\t\tstep = cfg.step;\r\n\tvar range = resolveConfigRange(unit, gantt);\r\n\r\n\tif(!(range.start_date && range.end_date)){\r\n\t\trange = dateRangeResolver(gantt);\r\n\t\tif(!range.start_date || !range.end_date){\r\n\t\t\trange = defaultRangeResolver(gantt);\r\n\t\t}\r\n\r\n\t\trange.start_date = gantt.date[unit + \"_start\"](range.start_date);\r\n\t\trange.start_date = gantt.calculateEndDate({\r\n\t\t\tstart_date: gantt.date[unit + \"_start\"](range.start_date),\r\n\t\t\tduration: -1,\r\n\t\t\tunit: unit,\r\n\t\t\tstep:step\r\n\t\t});//one free column before first task\r\n\r\n\t\trange.end_date = gantt.date[unit + \"_start\"](range.end_date);\r\n\t\trange.end_date = gantt.calculateEndDate({start_date: range.end_date, duration: 2, unit: unit, step:step});//one free column after last task\r\n\t}\r\n\r\n\tgantt._min_date = range.start_date;\r\n\tgantt._max_date = range.end_date;\r\n}\r\n\r\nfunction _adjust_scales(gantt) {\r\n\tif (gantt.config.fit_tasks) {\r\n\t\tvar old_min = +gantt._min_date,\r\n\t\t\told_max = +gantt._max_date;\r\n\t\t//this._init_tasks_range();\r\n\t\tif (+gantt._min_date != old_min || +gantt._max_date != old_max) {\r\n\t\t\tgantt.render();\r\n\r\n\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\treturn false;\r\n}\r\n\r\nmodule.exports = function updateTasksRange(gantt){\r\n\t_init_tasks_range(gantt);\r\n\t_adjust_scales(gantt);\r\n};\r\n","var utils = require(\"../../utils/utils\");\r\n\r\nvar $powerArray  = {\r\n\t$create: function(array){\r\n\t\treturn utils.mixin(array || [], this);\r\n\t},\r\n\t//remove element at specified position\r\n\t$removeAt:function(pos,len){\r\n\t\tif (pos>=0) this.splice(pos,(len||1));\r\n\t},\r\n\t//find element in collection and remove it\r\n\t$remove:function(value){\r\n\t\tthis.$removeAt(this.$find(value));\r\n\t},\r\n\t//add element to collection at specific position\r\n\t$insertAt:function(data,pos){\r\n\t\tif (!pos && pos!==0) \t//add to the end by default\r\n\t\t\tthis.push(data);\r\n\t\telse {\r\n\t\t\tvar b = this.splice(pos,(this.length-pos));\r\n\t\t\tthis[pos] = data;\r\n\t\t\tthis.push.apply(this,b); //reconstruct array without loosing this pointer\r\n\t\t}\r\n\t},\r\n\t//return index of element, -1 if it doesn't exists\r\n\t$find:function(data){\r\n\t\tfor (var i=0; i<this.length; i++)\r\n\t\t\tif (data==this[i]) return i;\r\n\t\treturn -1;\r\n\t},\r\n\t//execute some method for each element of array\r\n\t$each:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tfunctor.call((master||this),this[i]);\r\n\t},\r\n\t//create new array from source, by using results of functor\r\n\t$map:function(functor,master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tthis[i]=functor.call((master||this),this[i]);\r\n\t\treturn this;\r\n\t},\r\n\t$filter:function(functor, master){\r\n\t\tfor (var i=0; i < this.length; i++)\r\n\t\t\tif (!functor.call((master||this),this[i])){\r\n\t\t\t\tthis.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\treturn this;\r\n\t}\r\n};\r\n\r\nmodule.exports = $powerArray;","var powerArray = require(\"./power_array\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar eventable = require(\"../../utils/eventable\");\r\n\r\nvar DataStore = function(config){\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._skip_refresh = false;\r\n\tthis._filterRule = null;\r\n\tthis._searchVisibleOrder = {};\r\n\tthis.$config = config;\r\n\teventable(this);\r\n\treturn this;\r\n};\r\nDataStore.prototype = {\r\n\r\n\t_parseInner: function(data){\r\n\t\tvar item = null,\r\n\t\t\tloaded = [];\r\n\t\tfor(var i = 0, len = data.length; i< len; i++){\r\n\t\t\titem = data[i];\r\n\t\t\tif(this.$initItem){\r\n\t\t\t\titem = this.$initItem(item);\r\n\t\t\t}\r\n\t\t\tif(this.callEvent(\"onItemLoading\", [item])){\r\n\t\t\t\tif (!this.pull.hasOwnProperty(item.id)) {\r\n\t\t\t\t\tthis.fullOrder.push(item.id);\r\n\t\t\t\t\tloaded.push(item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.pull[item.id] = item;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn loaded;\r\n\t},\r\n\tparse: function(data){\r\n\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\tvar loaded = this._parseInner(data);\r\n\t\tthis.refresh();\r\n\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t},\r\n\tgetItem: function(id){\r\n\t\treturn this.pull[id];\r\n\t},\r\n\r\n\t_updateOrder: function(code){\r\n\t\tcode.call(this.visibleOrder);\r\n\t\tcode.call(this.fullOrder);\r\n\t},\r\n\tupdateItem: function(id, item){\r\n\t\tif (!utils.defined(item)) item = this.getItem(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeUpdate\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\t\tthis.pull[id]=item;\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.callEvent(\"onAfterUpdate\", [item.id, item]);\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [item.id, item, \"update\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_removeItemInner: function(id){\r\n\t\t//clear from collections\r\n\t\t//this.visibleOrder.$remove(id);\r\n\t\tthis._updateOrder(function(){ this.$remove(id);});\r\n\t\tdelete this.pull[id];\r\n\t},\r\n\r\n\tremoveItem: function(id){\r\n\t\t//utils.assert(this.exists(id), \"Not existing ID in remove command\"+id);\r\n\r\n\t\tvar obj = this.getItem(id);\t//save for later event\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tif (this.callEvent(\"onBeforeDelete\", [obj.id, obj]) === false) return false;\r\n\t\t}\r\n\r\n\t\tthis._removeItemInner(id);\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onAfterDelete\", [obj.id, obj]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"delete\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t_addItemInner: function(item, index){\r\n\t\t//in case of treetable order is sent as 3rd parameter\r\n\t\t//var order = index;\r\n\r\n\t\tif(this.exists(item.id)){\r\n\t\t\tthis.silent(function(){this.updateItem(item.id, item);});\r\n\t\t}else{\r\n\t\t\tvar order = this.visibleOrder;\r\n\r\n\t\t\t//by default item is added to the end of the list\r\n\t\t\tvar data_size = order.length;\r\n\r\n\t\t\tif (!utils.defined(index) || index < 0)\r\n\t\t\t\tindex = data_size;\r\n\t\t\t//check to prevent too big indexes\r\n\t\t\tif (index > data_size){\r\n\t\t\t\t//dhx.log(\"Warning\",\"DataStore:add\",\"Index of out of bounds\");\r\n\t\t\t\tindex = Math.min(order.length,index);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//gantt.assert(!this.exists(id), \"Not unique ID\");\r\n\r\n\t\tthis.pull[item.id]=item;\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis._updateOrder(function(){\r\n\t\t\t\tif(this.$find(item.id) === -1)\r\n\t\t\t\t\tthis.$insertAt(item.id,index);\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.filter();\r\n\t\t//order.$insertAt(item.id,index);\r\n\t},\r\n\r\n\r\n\tisVisible: function(id){\r\n\t\treturn this.visibleOrder.$find(id) > -1;\r\n\t},\r\n\tgetVisibleItems: function(){\r\n\t\treturn this.getIndexRange();\r\n\t},\r\n\r\n\taddItem: function(item, index){\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif(this.$initItem){\r\n\t\t\titem = this.$initItem(item);\r\n\t\t}\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tif (this.callEvent(\"onBeforeAdd\", [item.id, item]) === false) return false;\r\n\t\t}\r\n\r\n\r\n\t\tthis._addItemInner(item, index);\r\n\r\n\t\tif (!this._skip_refresh){\r\n\t\t\tthis.callEvent(\"onAfterAdd\",[item.id, item]);\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[item.id,item,\"add\"]);\r\n\t\t}\r\n\t\treturn item.id;\r\n\t},\r\n\r\n\t_changeIdInner: function(oldId, newId){\r\n\t\tif(this.pull[oldId])\r\n\t\t\tthis.pull[newId] = this.pull[oldId];\r\n\r\n\t\tvar visibleOrder = this._searchVisibleOrder[oldId];\r\n\t\tthis.pull[newId].id = newId;\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis[this.$find(oldId)] = newId;\r\n\t\t});\r\n\t\tthis._searchVisibleOrder[newId] = visibleOrder;\r\n\t\tdelete this._searchVisibleOrder[oldId];\r\n\r\n\t\t//this.visibleOrder[this.visibleOrder.$find(oldId)]=newId;\r\n\t\tdelete this.pull[oldId];\r\n\t},\r\n\tchangeId: function(oldId, newId){\r\n\t\tthis._changeIdInner(oldId, newId);\r\n\r\n\t\tthis.callEvent(\"onIdChange\", [oldId, newId]);\r\n\r\n\t},\r\n\texists: function(id){\r\n\t\treturn !!(this.pull[id]);\r\n\t},\r\n\r\n\t_moveInner: function(sindex, tindex){\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\r\n\t\tthis._updateOrder(function(){\r\n\t\t\tthis.$removeAt(sindex);\r\n\t\t\tthis.$insertAt(id,Math.min(this.length, tindex));\r\n\t\t});\r\n\t\t//this.visibleOrder.$removeAt(sindex);\t//remove at old position\r\n\t\t//if (sindex<tindex) tindex--;\t//correct shift, caused by element removing\r\n\t\t//this.visibleOrder.$insertAt(id,Math.min(this.visibleOrder.length, tindex));\t//insert at new position\r\n\t},\r\n\r\n\tmove: function(sindex, tindex){\r\n\t\t//gantt.assert(sindex>=0 && tindex>=0, \"DataStore::move\",\"Incorrect indexes\");\r\n\r\n\t\tvar id = this.getIdByIndex(sindex);\r\n\t\tvar obj = this.getItem(id);\r\n\t\tthis._moveInner(sindex, tindex);\r\n\r\n\r\n\t\tif (!this._skip_refresh) {\r\n\t\t\t//repaint signal\r\n\t\t\tthis.callEvent(\"onStoreUpdated\", [obj.id, obj, \"move\"]);\r\n\t\t}\r\n\t},\r\n\tclearAll: function(){\r\n\t\tthis.pull = {};\r\n\t\tthis.visibleOrder = powerArray.$create();\r\n\t\tthis.fullOrder = powerArray.$create();\r\n\t\tif (this._skip_refresh) return;\r\n\t\tthis.callEvent(\"onClearAll\",[]);\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\tsilent:function(code, master){\r\n\t\tthis._skip_refresh = true;\r\n\t\tcode.call(master||this);\r\n\t\tthis._skip_refresh = false;\r\n\t},\r\n\r\n\tarraysEqual: function (arr1, arr2) {\r\n\t\tif(arr1.length !== arr2.length)\r\n\t\t\treturn false;\r\n\t\tfor(var i = 0; i < arr1.length; i++) {\r\n\t\t\tif(arr1[i] !== arr2[i])\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t},\r\n\r\n\trefresh: function(id, quick){\r\n\t\tif (this._skip_refresh) return;\r\n\r\n\t\tif(id){\r\n\t\t\t// if item changes visible order (e.g. expand-collapse branch) - do a complete repaint\r\n\t\t\tif(!quick){\r\n\t\t\t\tvar oldOrder = this.visibleOrder;\r\n\t\t\t\tthis.filter();\r\n\t\t\t\tif(!this.arraysEqual(oldOrder, this.visibleOrder)){\r\n\t\t\t\t\tid = undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}else{\r\n\t\t\tthis.filter();\r\n\t\t}\r\n\r\n\t\tif (id)\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[id, this.pull[id], \"paint\"]);\r\n\t\telse\r\n\t\t\tthis.callEvent(\"onStoreUpdated\",[null,null,null]);\r\n\t},\r\n\r\n\tcount: function(){\r\n\t\treturn this.fullOrder.length;\r\n\t},\r\n\tcountVisible: function(){\r\n\t\treturn this.visibleOrder.length;\r\n\t},\r\n\r\n\tsort: function(sort){},\r\n\r\n\tserialize: function(){},\r\n\r\n\teachItem: function(code){\r\n\t\tfor (var i=0; i<this.fullOrder.length; i++) {\r\n\t\t\tvar item = this.pull[this.fullOrder[i]];\r\n\t\t\tcode.call(this, item);\r\n\t\t}\r\n\t},\r\n\t\r\n\tfilter: function(rule){\r\n\t\tvar filteredOrder = powerArray.$create();\r\n\t\tthis.eachItem(function(item){\r\n\t\t\tif(this.callEvent(\"onFilterItem\", [item.id, item])){\r\n\t\t\t\tfilteredOrder.push(item.id);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.visibleOrder = filteredOrder;\r\n\t\tthis._searchVisibleOrder = {};\r\n\t\tfor(var i = 0; i < this.visibleOrder.length; i++){\r\n\t\t\tthis._searchVisibleOrder[this.visibleOrder[i]] = i;\r\n\t\t}\r\n\t},\r\n\r\n\tgetIndexRange: function(from, to){\r\n\t\tto=Math.min((to||Infinity),this.countVisible()-1);\r\n\r\n\t\tvar ret= [];\r\n\t\tfor (var i=(from||0); i <= to; i++)\r\n\t\t\tret.push(this.getItem(this.visibleOrder[i]));\r\n\t\treturn ret;\r\n\t},\r\n\tgetItems: function(){\r\n\t\tvar res = [];\r\n\t\tfor(var i in this.pull){\r\n\t\t\tres.push(this.pull[i]);\r\n\t\t}\r\n\t/*\tfor(var i = 0; i < this.fullOrder.length; i++){\r\n\r\n\t\t}*/\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetIdByIndex: function(index){\r\n\t\treturn this.visibleOrder[index];\r\n\t},\r\n\tgetIndexById: function(id){\r\n\t\tvar res = this._searchVisibleOrder[id];\r\n\t\tif(res === undefined){\r\n\t\t\tres = -1;\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getNullIfUndefined: function(value){\r\n\t\tif(value === undefined){\r\n\t\t\treturn null;\r\n\t\t}else{\r\n\t\t\treturn value;\r\n\t\t}\r\n\t},\r\n\tgetFirst: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[0]);\r\n\t},\r\n\tgetLast: function(){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.visibleOrder.length-1]);\r\n\t},\r\n\tgetNext: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) + 1]);\r\n\t},\r\n\tgetPrev: function(id){\r\n\t\treturn this._getNullIfUndefined(this.visibleOrder[this.getIndexById(id) - 1]);\r\n\t},\r\n\tdestructor: function(){\r\n\t\tthis.detachAllEvents();\r\n\t\tthis.pull = null;\r\n\t\tthis.$initItem = null;\r\n\t\tthis.visibleOrder = null;\r\n\t\tthis.fullOrder = null;\r\n\t\tthis._skip_refresh = null;\r\n\t\tthis._filterRule = null;\r\n\t\tthis._searchVisibleOrder = null;\r\n\t}\r\n};\r\n\r\nmodule.exports = DataStore;","function createTaskRenderer(gantt){\r\n\r\n\tfunction _render_task_element(task, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar painters = config.type_renderers;\r\n\t\tvar renderer = painters[gantt.getTaskType(task.type)],\r\n\t\t\tdefaultRenderer = _task_default_render;\r\n\r\n\t\tif (!renderer) {\r\n\t\t\treturn defaultRenderer.call(gantt, task, view);\r\n\t\t}else{\r\n\t\t\treturn renderer.call(gantt, task, function(task){ return defaultRenderer.call(gantt, task, view);}, view);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _task_default_render(task, view) {\r\n\t\tif (gantt._isAllowedUnscheduledTask(task))\r\n\t\t\treturn;\r\n\r\n\r\n\t\tvar pos = view.getItemPosition(task);\r\n\r\n\t\tvar cfg = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\t\tvar height = view.getItemHeight();\r\n\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\r\n\t\tvar padd = Math.floor((gantt.config.row_height - height) / 2);\r\n\t\tif (taskType == cfg.types.milestone && cfg.link_line_width > 1) {\r\n\t\t\t//little adjust milestone position, so horisontal corners would match link arrow when thickness of link line is more than 1px\r\n\t\t\tpadd += 1;\r\n\t\t}\r\n\r\n\t\tif (taskType == cfg.types.milestone){\r\n\t\t\tpos.left -= Math.round(height / 2);\r\n\t\t\tpos.width = height;\r\n\t\t}\r\n\r\n\t\tvar div = document.createElement(\"div\");\r\n\r\n\t\tvar width = Math.round(pos.width);\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tdiv.setAttribute(view.$config.item_attribute, task.id);\r\n\t\t}\r\n\r\n\t\tif (cfg.show_progress && taskType != cfg.types.milestone) {\r\n\t\t\t_render_task_progress(task, div, width, cfg, templates);\r\n\t\t}\r\n\r\n\t\t//use separate div to display content above progress bar\r\n\t\tvar content = _render_task_content(task, width, templates);\r\n\t\tif (task.textColor) {\r\n\t\t\tcontent.style.color = task.textColor;\r\n\t\t}\r\n\t\tdiv.appendChild(content);\r\n\r\n\t\tvar css = _combine_item_class(\"gantt_task_line\",\r\n\t\t\ttemplates.task_class(task.start_date, task.end_date, task),\r\n\t\t\ttask.id,\r\n\t\t\tview);\r\n\t\tif (task.color || task.progressColor || task.textColor) {\r\n\t\t\tcss += \" gantt_task_inline_color\";\r\n\t\t}\r\n\t\tdiv.className = css;\r\n\r\n\t\tvar styles = [\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"top:\" + (padd + pos.top) + 'px',\r\n\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\"line-height:\" + (Math.max(height < 30 ? height - 2 : height, 0)) + 'px',\r\n\t\t\t\"width:\" + width + 'px'\r\n\t\t];\r\n\t\tif (task.color) {\r\n\t\t\tstyles.push(\"background-color:\" + task.color);\r\n\t\t}\r\n\t\tif (task.textColor) {\r\n\t\t\tstyles.push(\"color:\" + task.textColor);\r\n\t\t}\r\n\r\n\t\tdiv.style.cssText = styles.join(\";\");\r\n\t\tvar side = _render_leftside_content(task, cfg, templates);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tside = _render_rightside_content(task, cfg, templates);\r\n\t\tif (side) div.appendChild(side);\r\n\r\n\t\tgantt._waiAria.setTaskBarAttr(task, div);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tif (!gantt.isReadonly(task)) {\r\n\t\t\tif (cfg.drag_resize && !gantt.isSummaryTask(task) && taskType != cfg.types.milestone) {\r\n\t\t\t\t_render_pair(div, \"gantt_task_drag\", task, function (css) {\r\n\t\t\t\t\tvar el = document.createElement(\"div\");\r\n\t\t\t\t\tel.className = css;\r\n\t\t\t\t\treturn el;\r\n\t\t\t\t}, cfg);\r\n\t\t\t}\r\n\t\t\tif (cfg.drag_links && cfg.show_links) {\r\n\t\t\t\t_render_pair(div, \"gantt_link_control\", task, function (css) {\r\n\t\t\t\t\tvar outer = document.createElement(\"div\");\r\n\t\t\t\t\touter.className = css;\r\n\t\t\t\t\touter.style.cssText = [\r\n\t\t\t\t\t\t\"height:\" + height + 'px',\r\n\t\t\t\t\t\t\"line-height:\" + height + 'px'\r\n\t\t\t\t\t].join(\";\");\r\n\t\t\t\t\tvar inner = document.createElement(\"div\");\r\n\t\t\t\t\tinner.className = \"gantt_link_point\";\r\n\r\n\t\t\t\t\tvar showLinkPoints = false;\r\n\t\t\t\t\tif(state.link_source_id && cfg.touch){\r\n\t\t\t\t\t\tshowLinkPoints = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinner.style.display = showLinkPoints ? \"block\" : \"\";\r\n\t\t\t\t\touter.appendChild(inner);\r\n\t\t\t\t\treturn outer;\r\n\t\t\t\t}, cfg);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn div;\r\n\t}\r\n\r\n\tfunction _render_side_content(task, template, cssClass) {\r\n\t\tif (!template) return null;\r\n\r\n\t\tvar text = template(task.start_date, task.end_date, task);\r\n\t\tif (!text) return null;\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tcontent.className = \"gantt_side_content \" + cssClass;\r\n\t\tcontent.innerHTML = text;\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_leftside_content(task, cfg, templates) {\r\n\t\tvar css = \"gantt_left \" + _get_link_crossing_css(!cfg.rtl ? true : false, task, cfg);\r\n\t\treturn _render_side_content(task, templates.leftside_text, css);\r\n\t}\r\n\r\n\tfunction _render_rightside_content(task, cfg, templates) {\r\n\t\tvar css = \"gantt_right \" + _get_link_crossing_css(!cfg.rtl ? false : true, task, cfg);\r\n\t\treturn _render_side_content(task, templates.rightside_text, css);\r\n\t}\r\n\r\n\tfunction _get_link_crossing_css(left, task) {\r\n\t\tvar cond = _get_conditions(left);\r\n\r\n\t\tfor (var i in cond) {\r\n\t\t\tvar links = task[i];\r\n\t\t\tfor (var ln = 0; ln < links.length; ln++) {\r\n\t\t\t\tvar link = gantt.getLink(links[ln]);\r\n\r\n\t\t\t\tfor (var tp = 0; tp < cond[i].length; tp++) {\r\n\t\t\t\t\tif (link.type == cond[i][tp]) {\r\n\t\t\t\t\t\treturn \"gantt_link_crossing\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\r\n\tfunction _render_task_content(task, width, templates) {\r\n\t\tvar content = document.createElement(\"div\");\r\n\t\tif (gantt.getTaskType(task.type) != gantt.config.types.milestone)\r\n\t\t\tcontent.innerHTML = templates.task_text(task.start_date, task.end_date, task);\r\n\t\tcontent.className = \"gantt_task_content\";\r\n\t\t//content.style.width = width + 'px';\r\n\t\treturn content;\r\n\t}\r\n\r\n\tfunction _render_task_progress(task, element, maxWidth, cfg, templates) {\r\n\t\tvar done = task.progress * 1 || 0;\r\n\r\n\t\tmaxWidth = Math.max(maxWidth - 2, 0);//2px for borders\r\n\t\tvar pr = document.createElement(\"div\");\r\n\t\tvar width = Math.round(maxWidth * done);\r\n\r\n\t\twidth = Math.min(maxWidth, width);\r\n\t\tif (task.progressColor) {\r\n\t\t\tpr.style.backgroundColor = task.progressColor;\r\n\t\t\tpr.style.opacity = 1;\r\n\t\t}\r\n\t\tpr.style.width = width + 'px';\r\n\t\tpr.className = \"gantt_task_progress\";\r\n\t\tpr.innerHTML = templates.progress_text(task.start_date, task.end_date, task);\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tpr.style.position = \"absolute\";\r\n\t\t\tpr.style.right = \"0px\";\r\n\t\t}\r\n\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.className = \"gantt_task_progress_wrapper\";\r\n\t\twrapper.appendChild(pr);\r\n\t\telement.appendChild(wrapper);\r\n\r\n\t\tif (gantt.config.drag_progress && !gantt.isReadonly(task)) {\r\n\t\t\tvar drag = document.createElement(\"div\");\r\n\r\n\t\t\tvar markerPos = width;\r\n\t\t\tif(cfg.rtl){\r\n\t\t\t\tmarkerPos = maxWidth - width;\r\n\t\t\t}\r\n\r\n\t\t\tdrag.style.left = markerPos + 'px';\r\n\t\t\tdrag.className = \"gantt_task_progress_drag\";\r\n\t\t\tpr.appendChild(drag);\r\n\t\t\telement.appendChild(drag);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _get_conditions(leftside) {\r\n\t\tif (leftside) {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.start_to_start\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.start_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_start\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn {\r\n\t\t\t\t$source: [\r\n\t\t\t\t\tgantt.config.links.finish_to_start,\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t],\r\n\t\t\t\t$target: [\r\n\t\t\t\t\tgantt.config.links.finish_to_finish\r\n\t\t\t\t]\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _combine_item_class(basic, template, itemId, view) {\r\n\t\tvar cfg = view.$getConfig();\r\n\t\tvar css = [basic];\r\n\t\tif (template)\r\n\t\t\tcss.push(template);\r\n\r\n\t\tvar state = gantt.getState();\r\n\r\n\t\tvar task = gantt.getTask(itemId);\r\n\r\n\t\tif (gantt.getTaskType(task.type) == cfg.types.milestone) {\r\n\t\t\tcss.push(\"gantt_milestone\");\r\n\t\t}else if (gantt.getTaskType(task.type) == cfg.types.project) {\r\n\t\t\tcss.push(\"gantt_project\");\r\n\t\t}\r\n\r\n\t\tcss.push(\"gantt_bar_\" + gantt.getTaskType(task.type));\r\n\r\n\r\n\t\tif (gantt.isSummaryTask(task))\r\n\t\t\tcss.push(\"gantt_dependent_task\");\r\n\r\n\t\tif (gantt.isSplitTask(task)) {\r\n\t\t\tcss.push(\"gantt_split_parent\");\r\n\t\t}\r\n\r\n\t\tif (cfg.select_task && itemId == state.selected_task)\r\n\t\t\tcss.push(\"gantt_selected\");\r\n\r\n\t\tif (itemId == state.drag_id) {\r\n\t\t\tcss.push(\"gantt_drag_\" + state.drag_mode);\r\n\t\t\tif (state.touch_drag) {\r\n\t\t\t\tcss.push(\"gantt_touch_\" + state.drag_mode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (state.link_source_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_source\");\r\n\r\n\t\tif (state.link_target_id == itemId)\r\n\t\t\tcss.push(\"gantt_link_target\");\r\n\r\n\r\n\t\tif (cfg.highlight_critical_path && gantt.isCriticalTask) {\r\n\t\t\tif (gantt.isCriticalTask(task))\r\n\t\t\t\tcss.push(\"gantt_critical_task\");\r\n\t\t}\r\n\r\n\t\tif (state.link_landing_area &&\r\n\t\t\t(state.link_target_id && state.link_source_id) &&\r\n\t\t\t(state.link_target_id != state.link_source_id)) {\r\n\r\n\t\t\tvar from_id = state.link_source_id;\r\n\t\t\tvar from_start = state.link_from_start;\r\n\t\t\tvar to_start = state.link_to_start;\r\n\r\n\t\t\tvar allowDrag = gantt.isLinkAllowed(from_id, itemId, from_start, to_start);\r\n\r\n\t\t\tvar dragClass = \"\";\r\n\t\t\tif (allowDrag) {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_allow\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_allow\";\r\n\t\t\t} else {\r\n\t\t\t\tif (to_start)\r\n\t\t\t\t\tdragClass = \"link_start_deny\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdragClass = \"link_finish_deny\";\r\n\t\t\t}\r\n\t\t\tcss.push(dragClass);\r\n\t\t}\r\n\t\treturn css.join(\" \");\r\n\t}\r\n\r\n\tfunction _render_pair(parent, css, task, content, config) {\r\n\t\tvar state = gantt.getState();\r\n\t\tvar className, element;\r\n\t\tif (+task.start_date >= +state.min_date) {\r\n\t\t\tclassName = [css, config.rtl ? \"task_right\" : \"task_left\", \"task_start_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"start_date\");\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t\tif (+task.end_date <= +state.max_date){\r\n\t\t\tclassName = [css, config.rtl ? \"task_left\" : \"task_right\", \"task_end_date\"];\r\n\t\t\telement = content(className.join(\" \"));\r\n\t\t\telement.setAttribute(\"data-bind-property\", \"end_date\");\r\n\t\t\tparent.appendChild(element);\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn _render_task_element;\r\n}\r\n\r\nmodule.exports = createTaskRenderer;","var domHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tgridResize = require(\"./grid_resize\"),\r\n\teditors = require(\"./editors/controller\");\r\n\r\nvar Grid = function(parent, config, factory, gantt){\r\n\tthis.$config = utils.mixin({}, config || {});\r\n\tthis.$gantt = gantt;\r\n\tthis.$parent = parent;\r\n\teventable(this);\r\n\tthis.$state = {};\r\n};\r\n\r\n\r\nGrid.prototype = {\r\n\tinit: function(container){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar gridAriaAttr = gantt._waiAria.gridAttrString();\r\n\t\tvar gridDataAriaAttr = gantt._waiAria.gridDataAttrString();\r\n\r\n\r\n\t\tcontainer.innerHTML = \"<div class='gantt_grid' style='height:inherit;width:inherit;' \"+gridAriaAttr+\"></div>\";\r\n\t\tthis.$grid = container.childNodes[0];\r\n\r\n\t\tthis.$grid.innerHTML = \"<div class='gantt_grid_scale' \"+\r\n\t\t\tgantt._waiAria.gridScaleRowAttrString()+\"></div><div class='gantt_grid_data' \"+gridDataAriaAttr+\"></div>\";\r\n\r\n\t\tthis.$grid_scale = this.$grid.childNodes[0];\r\n\t\tthis.$grid_data = this.$grid.childNodes[1];\r\n\r\n\t\tvar attr = this.$getConfig()[this.$config.bind + \"_attribute\"];\r\n\t\tif(!attr && this.$config.bind){\r\n\t\t\tattr = this.$config.bind + \"_id\";\r\n\t\t}\r\n\t\tthis.$config.item_attribute = attr || null;\r\n\r\n\t\tif(!this.$config.layers){\r\n\t\t\tvar layers = this._createLayerConfig();\r\n\t\t\tthis.$config.layers = layers;\r\n\t\t}\r\n\r\n\t\tvar resizer = gridResize(gantt, this);\r\n\t\tresizer.init();\r\n\t\tthis._renderHeaderResizers = resizer.doOnRender;\r\n\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\r\n\t\tthis._addLayers(this.$gantt);\r\n\t\tthis._initEvents();\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\t//this.refresh();\r\n\t},\r\n\r\n\t_validateColumnWidth: function(column, property){\r\n\t\t// user can set {name:\"text\", width:\"200\",...} for some reason,\r\n\t\t// check and convert it to number when possible\r\n\t\tvar value = column[property];\r\n\t\tif (value && value != \"*\") {\r\n\t\t\tvar numericWidth = value*1;\r\n\t\t\tif(isNaN(numericWidth)){\r\n\t\t\t\tgantt.assert(false, \"Wrong \" + property + \" value of column \" + column.name);\r\n\t\t\t}else{\r\n\t\t\t\tcolumn[property] = numericWidth;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tsetSize: function(width, height){\r\n\t\tthis.$config.width = this.$state.width = width;\r\n\t\tthis.$state.height = height;\r\n\r\n\t\t// TODO: maybe inherit and override in a subclass instead of extending here\r\n\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tinnerWidth = 0;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tthis._validateColumnWidth(columns[i], \"min_width\");\r\n\t\t\tthis._validateColumnWidth(columns[i], \"max_width\");\r\n\t\t\tthis._validateColumnWidth(columns[i], \"width\");\r\n\t\t\r\n\t\t\tinnerWidth += columns[i].width*1;\r\n\t\t}\r\n\r\n\t\tvar outerWidth;\r\n\t\tif(isNaN(innerWidth) || !this.$config.scrollable){\r\n\t\t\touterWidth = this._setColumnsWidth(width + 1);\r\n\t\t\tinnerWidth = outerWidth;\r\n\t\t}\r\n\r\n\t\tif(this.$config.scrollable){\r\n\t\t\tthis.$grid_scale.style.width = innerWidth + \"px\";\r\n\t\t\tthis.$grid_data.style.width = innerWidth + \"px\";\r\n\t\t}else{\r\n\t\t\tthis.$grid_scale.style.width = \"inherit\";\r\n\t\t\tthis.$grid_data.style.width = \"inherit\";\r\n\t\t}\r\n\t\tthis.$config.width -= 1;\r\n\r\n\t\tvar config = this.$getConfig();\r\n\t\tif(outerWidth !== width){\r\n\t\t\tconfig.grid_width = outerWidth;\r\n\t\t\tthis.$config.width = outerWidth - 1;\r\n\t\t}\r\n\r\n\t\tvar dataHeight = Math.max(this.$state.height - config.scale_height, 0);\r\n\t\tthis.$grid_data.style.height = dataHeight + \"px\";\r\n\t\tthis.refresh();\r\n\t},\r\n\tgetSize: function(){\r\n\r\n\t\tvar config = this.$getConfig();\r\n\r\n\t\tvar store = this.$config.rowStore;\r\n\r\n\t\tvar contentHeight = store ? config.row_height * store.countVisible() : 0,\r\n\t\t\tcontentWidth = this._getGridWidth();\r\n\r\n\t\tvar size = {\r\n\t\t\tx: this.$state.width,\r\n\t\t\ty: this.$state.height,\r\n\t\t\tcontentX: this.isVisible() ? contentWidth: 0,\r\n\t\t\tcontentY: this.isVisible() ? (config.scale_height + contentHeight) : 0,\r\n\t\t\tscrollHeight: this.isVisible() ? contentHeight: 0,\r\n\t\t\tscrollWidth: this.isVisible() ? contentWidth : 0\r\n\t\t};\r\n\r\n\t\treturn size;\r\n\t},\r\n\trefresh: function(){\r\n\r\n\t\tif(this.$config.bind)\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\r\n\t\tthis._calculateGridWidth();\r\n\t\tthis._renderGridHeader();\r\n\t},\r\n\tscrollTo: function(left, top){\r\n\t\tif(!this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\tif (left*1 == left){\r\n\t\t\tthis.$state.scrollLeft = this.$grid.scrollLeft = left;\r\n\t\t}\r\n\r\n\t\t// var config = this.$getConfig();\r\n\t\tif(top*1 == top){\r\n\t\t\tthis.$state.scrollTop = this.$grid_data.scrollTop = top;\r\n\t\t}\r\n\t},\r\n\r\n\tgetColumnIndex: function(name){\r\n\t\tvar columns = this.$getConfig().columns;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (columns[i].name == name) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t},\r\n\r\n\tgetColumn: function(name){\r\n\t\tvar index = this.getColumnIndex(name);\r\n\t\tif(index === null){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn this.$getConfig().columns[index];\r\n\t},\r\n\r\n\tgetGridColumns: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\treturn config.columns.slice();\r\n\t},\r\n\tisVisible: function(){\r\n\t\tif(this.$parent && this.$parent.$config){\r\n\t\t\treturn !this.$parent.$config.hidden;\r\n\t\t}else{\r\n\t\t\treturn this.$grid.offsetWidth;\r\n\t\t}\r\n\t},\r\n\r\n\tgetItemTop: function(id){\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return 0;\r\n\r\n\t\t\treturn store.getIndexById(id) * this.$getConfig().row_height;\r\n\r\n\t\t}else{\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t},\r\n\r\n\tgetItemHeight: function(){\r\n\t\tvar config = this.$getConfig();\r\n\t\treturn config.row_height;\r\n\t},\r\n\r\n\t_createLayerConfig: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar self = this;\r\n\t\tvar layers = [\r\n\t\t\t{\r\n\t\t\t\trenderer: gantt.$ui.layers.gridLine,\r\n\t\t\t\tcontainer: this.$grid_data,\r\n\t\t\t\tfilter: [function(){\r\n\t\t\t\t\treturn self.isVisible();\r\n\t\t\t\t}]\r\n\t\t\t}\r\n\t\t];\r\n\t\treturn layers;\r\n\t},\r\n\r\n\t_addLayers: function(gantt){\r\n\t\tif(!this.$config.bind)\r\n\t\t\treturn;\r\n\r\n\t\tthis._taskLayers = [];\r\n\r\n\t\tvar self = this;\r\n\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tif(!taskRenderer){\r\n\t\t\ttaskRenderer = layers.createDataRender({\r\n\t\t\t\tname: this.$config.bind,\r\n\t\t\t\tdefaultContainer: function(){ return self.$grid_data;}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar taskLayers = this.$config.layers;\r\n\t\tfor(var i = 0; taskLayers && i < taskLayers.length; i++){\r\n\t\t\tvar layer = taskLayers[i];\r\n\t\t\tlayer.host = this;\r\n\t\t\tvar bar_layer = taskRenderer.addLayer(layer);\r\n\t\t\tthis._taskLayers.push(bar_layer);\r\n\t\t}\r\n\r\n\t\tif(this.$config.bind)\r\n\t\t\tthis.$config.rowStore = this.$gantt.getDatastore(this.$config.bind);\r\n\r\n\t\tthis._initSmartRenderingPlaceholder();\r\n\t},\r\n\r\n\t_refreshPlaceholderOnStoreUpdate: function(id){\r\n\t\tvar config = this.$getConfig(),\r\n\t\t\tstore = this.$config.rowStore;\r\n\r\n\t\tif(!store || id !== null || !this.isVisible() || !config.smart_rendering) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar contentHeight;\r\n\t\tif(this.$config.scrollY) {\r\n\t\t\tvar scroll = this.$gantt.$ui.getView(this.$config.scrollY);\r\n\t\t\tif(scroll)\r\n\t\t\t\tcontentHeight = scroll.getScrollState().scrollSize;\r\n\t\t}\r\n\r\n\t\tif(!contentHeight){\r\n\t\t\tcontentHeight = store ? config.row_height * store.countVisible() : 0;\r\n\t\t}\r\n\r\n\t\tif(contentHeight){\r\n\t\t\tif(this.$rowsPlaceholder && this.$rowsPlaceholder.parentNode){\r\n\t\t\t\tthis.$rowsPlaceholder.parentNode.removeChild(this.$rowsPlaceholder);\r\n\t\t\t}\r\n\r\n\t\t\tvar placeholder = this.$rowsPlaceholder = document.createElement(\"div\");\r\n\t\t\tplaceholder.style.visibility = \"hidden\";\r\n\t\t\tplaceholder.style.height = contentHeight + \"px\";\r\n\t\t\tplaceholder.style.width = \"1px\";\r\n\t\t\tthis.$grid_data.appendChild(placeholder);\r\n\t\t}\r\n\t},\r\n\r\n\t_initSmartRenderingPlaceholder: function(){\r\n\t\tvar store = this.$config.rowStore;\r\n\t\tif(!store){\r\n\t\t\treturn;\r\n\t\t}else{\r\n\t\t\tthis._initSmartRenderingPlaceholder = function(){};\r\n\t\t}\r\n\t\tthis._staticBgHandler = store.attachEvent(\"onStoreUpdated\", utils.bind(this._refreshPlaceholderOnStoreUpdate, this));\r\n\t},\r\n\r\n\t_initEvents: function(){\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_close\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif(target){\r\n\t\t\t\tstore.close(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\r\n\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_open\", gantt.bind(function (e, id, trg) {\r\n\t\t\tvar store = this.$config.rowStore;\r\n\t\t\tif(!store) return true;\r\n\r\n\t\t\tvar target = domHelpers.locateAttribute(e, this.$config.item_attribute);\r\n\t\t\tif(target){\r\n\t\t\t\tstore.open(target.getAttribute(this.$config.item_attribute));\r\n\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}, this), this.$grid);\r\n\t},\r\n\r\n\t_clearLayers: function(gantt){\r\n\t\tvar layers = this.$gantt.$services.getService(\"layers\");\r\n\t\tvar taskRenderer = layers.getDataRender(this.$config.bind);\r\n\r\n\t\tif (this._taskLayers) {\r\n\t\t\tfor(var i = 0; i < this._taskLayers.length; i++){\r\n\t\t\t\ttaskRenderer.removeLayer(this._taskLayers[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._taskLayers = [];\r\n\t},\r\n\r\n\t_getColumnWidth: function(column, config, width) {\r\n\t\tvar min_width = column.min_width || config.min_grid_column_width;\r\n\t\tvar new_width = Math.max(width, min_width || 10);\r\n\t\tif (column.max_width)\r\n\t\t\tnew_width = Math.min(new_width, column.max_width);\r\n\t\treturn new_width;\r\n\t},\r\n\t// return min and max possible grid width according to restricts\r\n\t_getGridWidthLimits: function() {\r\n\t\tvar config = this.$getConfig(),\r\n\t\t\tcolumns = this.getGridColumns(),\r\n\t\t\tmin_limit = 0,\r\n\t\t\tmax_limit = 0;\r\n\r\n\t\t\tfor (var i=0; i<columns.length; i++) {\r\n\t\t\t\tmin_limit += columns[i].min_width ? columns[i].min_width : config.min_grid_column_width;\r\n\t\t\t\tif (max_limit !== undefined) {\r\n\t\t\t\t\tmax_limit = columns[i].max_width ? (max_limit + columns[i].max_width) : undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn [min_limit, max_limit];\r\n\t},\r\n\t// resize columns to get total newWidth, starting from columns[start_index]  \r\n\t_setColumnsWidth: function(newWidth, start_index) {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns(),\r\n\t\t\tcolumns_width = 0,\r\n\t\t\tfinal_width = newWidth;\r\n\r\n\t\tstart_index = !window.isNaN(start_index) ? start_index : -1;\r\n\r\n\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\tcolumns_width += columns[i].width*1;\r\n\t\t}\r\n\r\n\t\tif (window.isNaN(columns_width)) {\r\n\t\t\tthis._calculateGridWidth(); \r\n\t\t\tcolumns_width = 0;\r\n\t\t\tfor (var i = 0, l = columns.length; i < l; i++) {\r\n\t\t\t\tcolumns_width += columns[i].width*1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar extra_width = final_width - columns_width;\r\n\r\n\t\tvar start_width = 0;\r\n\t\tfor (var i=0; i<start_index+1; i++) {\r\n\t\t\tstart_width += columns[i].width;\r\n\t\t}\r\n\r\n\t\tcolumns_width -= start_width;\r\n\r\n\t\tfor (var i=start_index+1; i<columns.length; i++) {\r\n\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar\tshare = Math.round(extra_width * (col.width / columns_width));\r\n\r\n\t\t\t// columns have 2 additional restrict fields - min_width & max_width that are set by user\r\n\t\t\tif (extra_width < 0) {\r\n\t\t\t\tif (col.min_width && col.width+share < col.min_width)\r\n\t\t\t\t\tshare = col.min_width - col.width;\r\n\t\t\t\telse if (!col.min_width && config.min_grid_column_width && col.width+share < config.min_grid_column_width)\r\n\t\t\t\t\tshare = config.min_grid_column_width - col.width;\r\n\t\t\t} else if (col.max_width && col.width+share > col.max_width)\r\n\t\t\t\tshare = col.max_width - col.width;\r\n\r\n\t\t\tcolumns_width -= col.width;\r\n\t\t\tcol.width += share;\r\n\t\t\textra_width -= share;\r\n\r\n\t\t}\r\n\r\n\t\tvar iterator = extra_width > 0 ? 1 : -1;\r\n\t\twhile ((extra_width > 0 && iterator === 1) || (extra_width < 0 && iterator === -1)) {\r\n\t\t\tvar curExtra = extra_width;\r\n\t\t\tfor (i = start_index+1; i<columns.length; i++) {\r\n\t\t\t\tvar new_width = columns[i].width + iterator;\r\n\r\n\t\t\t\tif (new_width == this._getColumnWidth(columns[i], config, new_width)) {\r\n\t\t\t\t\textra_width -= iterator;\r\n\t\t\t\t\tcolumns[i].width = new_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!extra_width)\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif (curExtra == extra_width)\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// if impossible to resize the right-side columns, resize the start column\r\n\t\tif (extra_width && start_index > -1) {\r\n\t\t\tvar new_width = columns[start_index].width + extra_width;\r\n\t\t\tif (new_width == this._getColumnWidth(columns[start_index], config, new_width))\r\n\t\t\t\tcolumns[start_index].width = new_width;\r\n\t\t}\r\n\r\n\t\t//if (this.callEvent(\"onGridResizeEnd\", [config.grid_width, final_width]) === false)\r\n\t\t//\treturn;\r\n\r\n\t\treturn this._getColsTotalWidth();\r\n\t},\r\n\r\n\t_getColsTotalWidth: function(){\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\treturn cols_width;\r\n\t},\r\n\t_calculateGridWidth: function() {\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tvar cols_width = 0;\r\n\t\tvar unknown = [];\r\n\t\tvar width = [];\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar v = parseFloat(columns[i].width);\r\n\t\t\tif (window.isNaN(v)) {\r\n\t\t\t\tv = config.min_grid_column_width || 10;\r\n\t\t\t\tunknown.push(i);\r\n\t\t\t}\r\n\t\t\twidth[i] = v;\r\n\t\t\tcols_width += v;\r\n\t\t}\r\n\t\tvar gridWidth = this._getGridWidth() + 1;\r\n\t\tif (config.autofit || unknown.length) {\r\n\t\t\tvar diff = gridWidth - cols_width;\r\n\t\t\t// TODO: logic may be improved for proportional changing of width\r\n\t\t\tif (config.autofit) {\r\n\t\t\t\t// delta must be added for all columns\r\n\t\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (width.length-i));\r\n\t\t\t\t\twidth[i] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[i], config, width[i]);\r\n\r\n\t\t\t\t\tif (new_width != width[i]) {\r\n\t\t\t\t\t\tdelta = new_width - width[i];\r\n\t\t\t\t\t\twidth[i] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t} else if (unknown.length) {\r\n\t\t\t\t// there are several columns with undefined width\r\n\t\t\t\tfor (var i = 0; i < unknown.length; i++) {\r\n\t\t\t\t\tvar delta = Math.round(diff / (unknown.length-i)); // no float values, just integer\r\n\t\t\t\t\tvar index = unknown[i];\r\n\t\t\t\t\twidth[index] += delta;\r\n\t\t\t\t\tvar new_width = this._getColumnWidth(columns[index], config, width[index]);\r\n\t\t\t\t\tif (new_width != width[index]) {\r\n\t\t\t\t\t\tdelta = new_width - width[index];\r\n\t\t\t\t\t\twidth[index] = new_width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdiff -= delta;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < width.length; i++) {\r\n\t\t\t\tcolumns[i].width = width[i];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar changed = (gridWidth != cols_width);\r\n\t\t\tthis.$config.width = cols_width - 1;\r\n\t\t\tconfig.grid_width = cols_width;\r\n\t\t\tif(changed){\r\n\t\t\t\tthis.$parent._setContentSize(this.$config.width, this.$config.height);\r\n//\t\t\t\tthis.$parent.$config.width = cols_width;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t},\r\n\r\n\t_renderGridHeader: function(){\r\n\t\tvar gantt = this.$gantt;\r\n\t\tvar config = this.$getConfig();\r\n\t\tvar locale = this.$gantt.locale;\r\n\t\tvar templates = this.$gantt.templates;\r\n\r\n\t\tvar columns = this.getGridColumns();\r\n\t\tif(config.rtl){\r\n\t\t\tcolumns = columns.reverse();\r\n\t\t}\r\n\t\tvar cells = [];\r\n\t\tvar width = 0,\r\n\t\t\tlabels = locale.labels;\r\n\r\n\t\tvar lineHeigth = config.scale_height - 1;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\r\n\t\t\t// ensure columns have non-empty names\r\n\t\t\tif (!col.name) {\r\n\t\t\t\tcol.name = gantt.uid() + \"\";\r\n\t\t\t}\r\n\r\n\t\t\tvar colWidth = col.width * 1;\r\n\r\n\t\t\tvar gridWidth = this._getGridWidth();\r\n\t\t\tif (last && gridWidth > width + colWidth)\r\n\t\t\t\tcol.width = colWidth = gridWidth - width;\r\n\t\t\twidth += colWidth;\r\n\t\t\tvar sort = (gantt._sort && col.name == gantt._sort.name) ? (\"<div class='gantt_sort gantt_\" + gantt._sort.direction + \"'></div>\") : \"\";\r\n\t\t\tvar cssClass = [\"gantt_grid_head_cell\",\r\n\t\t\t\t(\"gantt_grid_head_\" + col.name),\r\n\t\t\t\t(last ? \"gantt_last_cell\" : \"\"),\r\n\t\t\t\ttemplates.grid_header_class(col.name, col)].join(\" \");\r\n\r\n\t\t\tvar style = \"width:\" + (colWidth - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tvar label = (col.label || labels[\"column_\" + col.name]);\r\n\t\t\tlabel = label || \"\";\r\n\r\n\t\t\tvar ariaAttrs = gantt._waiAria.gridScaleCellAttrString(col, label);\r\n\r\n\t\t\tvar cell = \"<div class='\" + cssClass + \"' style='\" + style + \"' \" + ariaAttrs + \" data-column-id='\" + col.name + \"' column_id='\" + col.name + \"'>\" + label + sort + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tthis.$grid_scale.style.height = (config.scale_height) + \"px\";\r\n\t\tthis.$grid_scale.style.lineHeight = lineHeigth + \"px\";\r\n\t\t//this.$grid_scale.style.width = \"inherit\";\r\n\t\tthis.$grid_scale.innerHTML = cells.join(\"\");\r\n\r\n\t\tif(this._renderHeaderResizers){\r\n\t\t\tthis._renderHeaderResizers();\r\n\t\t}\r\n\t},\r\n\r\n\t_getGridWidth: function(){\r\n\t\t// TODO: refactor/remove/comment some of _getGridWidth/this.$config.width/this.$state.width, it's not clear what they do\r\n\t\treturn this.$config.width;\r\n\t},\r\n\r\n\tdestructor: function(){\r\n\t\tthis._clearLayers(this.$gantt);\r\n\t\tif(this._mouseDelegates){\r\n\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\tthis._mouseDelegates = null;\r\n\t\t}\r\n\t\tthis.$grid = null;\r\n\t\tthis.$grid_scale = null;\r\n\t\tthis.$grid_data = null;\r\n\t\tthis.$gantt = null;\r\n\r\n\t\tif(this.$config.rowStore){\r\n\t\t\tthis.$config.rowStore.detachEvent(this._staticBgHandler);\r\n\t\t\tthis.$config.rowStore = null;\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\t}\r\n};\r\n\r\nmodule.exports = Grid;\r\n","var utils = require(\"../../../utils/utils\");\r\n\r\nfunction ScaleHelper(gantt){\r\n\tvar dateHelper = gantt.date;\r\n\tvar services = gantt.$services;\r\n\r\n\treturn {\r\n\t\tgetSum: function (sizes, from, to) {\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = sizes.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\r\n\t\t\tvar summ = 0;\r\n\t\t\tfor (var i = from; i <= to; i++)\r\n\t\t\t\tsumm += sizes[i];\r\n\r\n\t\t\treturn summ;\r\n\t\t},\r\n\t\tsetSumWidth: function (sum_width, scale, from, to) {\r\n\t\t\tvar parts = scale.width;\r\n\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\t\t\tif (from === undefined)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tif (from > parts.length - 1 || length <= 0 || to > parts.length - 1)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar oldWidth = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar diff = sum_width - oldWidth;\r\n\r\n\t\t\tthis.adjustSize(diff, parts, from, to);\r\n\t\t\tthis.adjustSize(-diff, parts, to + 1);\r\n\r\n\t\t\tscale.full_width = this.getSum(parts);\r\n\t\t},\r\n\t\tsplitSize: function (width, count) {\r\n\t\t\tvar arr = [];\r\n\t\t\tfor (var i = 0; i < count; i++) arr[i] = 0;\r\n\r\n\t\t\tthis.adjustSize(width, arr);\r\n\t\t\treturn arr;\r\n\r\n\t\t},\r\n\t\tadjustSize: function (width, parts, from, to) {\r\n\t\t\tif (!from)\r\n\t\t\t\tfrom = 0;\r\n\t\t\tif (to === undefined)\r\n\t\t\t\tto = parts.length - 1;\r\n\r\n\t\t\tvar length = to - from + 1;\r\n\r\n\t\t\tvar full = this.getSum(parts, from, to);\r\n\r\n\t\t\tvar shared = 0;\r\n\r\n\t\t\tfor (var i = from; i <= to; i++) {\r\n\t\t\t\tvar share = Math.floor(width * (full ? (parts[i] / full) : (1 / length)));\r\n\r\n\t\t\t\tfull -= parts[i];\r\n\t\t\t\twidth -= share;\r\n\t\t\t\tlength--;\r\n\r\n\t\t\t\tparts[i] += share;\r\n\t\t\t\tshared += share;\r\n\t\t\t}\r\n\t\t\tparts[parts.length - 1] += width;\r\n\t\t\t//parts[parts.length - 1] += width - shared;\r\n\t\t},\r\n\t\tsortScales: function (scales) {\r\n\t\t\tfunction cellSize(unit, step) {\r\n\t\t\t\tvar d = new Date(1970, 0, 1);\r\n\t\t\t\treturn dateHelper.add(d, step, unit) - d;\r\n\t\t\t}\r\n\r\n\t\t\tscales.sort(function (a, b) {\r\n\t\t\t\tif (cellSize(a.unit, a.step) < cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t} else if (cellSize(a.unit, a.step) > cellSize(b.unit, b.step)) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tfor (var i = 0; i < scales.length; i++) {\r\n\t\t\t\tscales[i].index = i;\r\n\t\t\t}\r\n\t\t},\r\n\t\tprimaryScale: function () {\r\n\r\n\t\t\tvar config = services.getService(\"templateLoader\");\r\n\t\t\tconfig.initTemplate(\"date_scale\", undefined, undefined, services.config(), services.templates());\r\n\r\n\t\t\treturn {\r\n\t\t\t\tunit: services.config().scale_unit,\r\n\t\t\t\tstep: services.config().step,\r\n\t\t\t\ttemplate: services.templates().date_scale,\r\n\t\t\t\tdate: services.config().date_scale,\r\n\t\t\t\tcss: services.templates().scale_cell_class\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tprepareConfigs: function (scales, min_coll_width, container_width, scale_height, minDate, maxDate, rtl) {\r\n\t\t\tvar heights = this.splitSize(scale_height, scales.length);\r\n\t\t\tvar full_width = container_width;\r\n\r\n\t\t\tvar configs = [];\r\n\t\t\tfor (var i = scales.length - 1; i >= 0; i--) {\r\n\t\t\t\tvar main_scale = (i == scales.length - 1);\r\n\t\t\t\tvar cfg = this.initScaleConfig(scales[i], minDate, maxDate);\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tthis.processIgnores(cfg);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initColSizes(cfg, min_coll_width, full_width, heights[i]);\r\n\t\t\t\tthis.limitVisibleRange(cfg);\r\n\r\n\t\t\t\tif (main_scale) {\r\n\t\t\t\t\tfull_width = cfg.full_width;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconfigs.unshift(cfg);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor (var i = 0; i < configs.length - 1; i++) {\r\n\t\t\t\tthis.alineScaleColumns(configs[configs.length - 1], configs[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < configs.length; i++) {\r\n\r\n\t\t\t\tif(rtl){\r\n\t\t\t\t\tthis.reverseScale(configs[i]);\r\n\t\t\t\t}\r\n\t\t\t\tthis.setPosSettings(configs[i]);\r\n\t\t\t}\r\n\t\t\treturn configs;\r\n\r\n\t\t},\r\n\r\n\t\treverseScale: function(scale){\r\n\t\t\tscale.width = scale.width.reverse();\r\n\t\t\tscale.trace_x = scale.trace_x.reverse();\r\n\r\n\t\t\tvar indexes = scale.trace_indexes;\r\n\t\t\tscale.trace_indexes = {};\r\n\t\t\tscale.trace_index_transition = {};\r\n\t\t\tscale.rtl = true;\r\n\t\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\t\tscale.trace_indexes[scale.trace_x[i].valueOf()] = i;\r\n\t\t\t\tscale.trace_index_transition[indexes[scale.trace_x[i].valueOf()]] = i;\r\n\t\t\t}\r\n\t\t\treturn scale;\r\n\t\t},\r\n\r\n\t\tsetPosSettings: function (config) {\r\n\t\t\tfor (var i = 0, len = config.trace_x.length; i < len; i++) {\r\n\t\t\t\tconfig.left.push((config.width[i - 1] || 0) + (config.left[i - 1] || 0));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_ignore_time_config: function (date, scale) {\r\n\r\n\t\t\tif (services.config().skip_off_time) {\r\n\t\t\t\tvar skip = true;\r\n\t\t\t\tvar probe = date;\r\n\r\n\t\t\t\t// check dates in case custom scale unit, e.g. {unit: \"month\", step: 3}\r\n\t\t\t\tfor (var i = 0; i < scale.step; i++) {\r\n\t\t\t\t\tif (i) {\r\n\t\t\t\t\t\tprobe = dateHelper.add(date, i, scale.unit);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tskip = skip && !this.isWorkTime(probe, scale.unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn skip;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t//defined in an extension\r\n\t\tprocessIgnores: function (config) {\r\n\t\t\tconfig.ignore_x = {};\r\n\t\t\tconfig.display_count = config.count;\r\n\t\t},\r\n\t\tinitColSizes: function (config, min_col_width, full_width, line_height) {\r\n\t\t\tvar cont_width = full_width;\r\n\r\n\t\t\tconfig.height = line_height;\r\n\r\n\t\t\tvar column_count = config.display_count === undefined ? config.count : config.display_count;\r\n\r\n\t\t\tif (!column_count)\r\n\t\t\t\tcolumn_count = 1;\r\n\r\n\t\t\tconfig.col_width = Math.floor(cont_width / column_count);\r\n\r\n\t\t\tif (min_col_width) {\r\n\t\t\t\tif (config.col_width < min_col_width) {\r\n\t\t\t\t\tconfig.col_width = min_col_width;\r\n\t\t\t\t\tcont_width = config.col_width * column_count;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconfig.width = [];\r\n\t\t\tvar ignores = config.ignore_x || {};\r\n\t\t\tfor (var i = 0; i < config.trace_x.length; i++) {\r\n\t\t\t\tif (ignores[config.trace_x[i].valueOf()] || (config.display_count == config.count)) {\r\n\t\t\t\t\tconfig.width[i] = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// width of month columns should be proportional month duration\r\n\t\t\t\t\tvar width = 1;\r\n\t\t\t\t\tif (config.unit == \"month\") {\r\n\t\t\t\t\t\tvar days = Math.round((dateHelper.add(config.trace_x[i], config.step, config.unit) - config.trace_x[i]) / (1000 * 60 * 60 * 24));\r\n\t\t\t\t\t\twidth = days;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconfig.width[i] = width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.adjustSize(cont_width - this.getSum(config.width)/* 1 width per column from the code above */, config.width);\r\n\t\t\tconfig.full_width = this.getSum(config.width);\r\n\t\t},\r\n\t\tinitScaleConfig: function (config, min_date, max_date) {\r\n\t\t\tvar cfg = utils.mixin({\r\n\t\t\t\tcount: 0,\r\n\t\t\t\tcol_width: 0,\r\n\t\t\t\tfull_width: 0,\r\n\t\t\t\theight: 0,\r\n\t\t\t\twidth: [],\r\n\t\t\t\tleft: [],\r\n\t\t\t\ttrace_x: [],\r\n\t\t\t\ttrace_indexes: {},\r\n\t\t\t\tmin_date: new Date(min_date),\r\n\t\t\t\tmax_date: new Date(max_date)\r\n\t\t\t}, config);\r\n\r\n\t\t\tthis.eachColumn(config.unit, config.step, min_date, max_date, function (date) {\r\n\t\t\t\tcfg.count++;\r\n\t\t\t\tcfg.trace_x.push(new Date(date));\r\n\t\t\t\tcfg.trace_indexes[date.valueOf()] = cfg.trace_x.length - 1;\r\n\t\t\t});\r\n\r\n\t\t\tcfg.trace_x_ascending = cfg.trace_x.slice();\r\n\t\t\treturn cfg;\r\n\t\t},\r\n\t\titerateScales: function (lower_scale, upper_scale, from, to, callback) {\r\n\t\t\tvar upper_dates = upper_scale.trace_x;\r\n\t\t\tvar lower_dates = lower_scale.trace_x;\r\n\r\n\t\t\tvar prev = from || 0;\r\n\t\t\tvar end = to || (lower_dates.length - 1);\r\n\t\t\tvar prevUpper = 0;\r\n\r\n\r\n\t\t\tfor (var up = 1; up < upper_dates.length; up++) {\r\n\t\t\t\tvar target_index = (lower_scale.trace_indexes[+upper_dates[up]]);\r\n\t\t\t\tif (target_index !== undefined && target_index <= end) {\r\n\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\tcallback.apply(this, [prevUpper, up, prev, target_index]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprev = target_index;\r\n\t\t\t\t\tprevUpper = up;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\talineScaleColumns: function (lower_scale, upper_scale, from, to) {\r\n\t\t\tthis.iterateScales(lower_scale, upper_scale, from, to, function (upper_start, upper_end, lower_start, lower_end) {\r\n\t\t\t\tvar targetWidth = this.getSum(lower_scale.width, lower_start, lower_end - 1);\r\n\t\t\t\tvar actualWidth = this.getSum(upper_scale.width, upper_start, upper_end - 1);\r\n\t\t\t\tif (actualWidth != targetWidth) {\r\n\t\t\t\t\tthis.setSumWidth(targetWidth, upper_scale, upper_start, upper_end - 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\teachColumn: function (unit, step, min_date, max_date, callback) {\r\n\t\t\tvar start = new Date(min_date),\r\n\t\t\t\tend = new Date(max_date);\r\n\t\t\tif (dateHelper[unit + \"_start\"]) {\r\n\t\t\t\tstart = dateHelper[unit + \"_start\"](start);\r\n\t\t\t}\r\n\r\n\t\t\tvar curr = new Date(start);\r\n\t\t\tif (+curr >= +end) {\r\n\t\t\t\tend = dateHelper.add(curr, step, unit);\r\n\t\t\t}\r\n\t\t\twhile (+curr < +end) {\r\n\t\t\t\tcallback.call(this, new Date(curr));\r\n\t\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\t\tcurr = dateHelper.add(curr, step, unit);\r\n\t\t\t\tcurr = gantt._correct_dst_change(curr, tzOffset, step, unit);\r\n\t\t\t\tif (dateHelper[unit + '_start'])\r\n\t\t\t\t\tcurr = dateHelper[unit + \"_start\"](curr);\r\n\t\t\t}\r\n\t\t},\r\n\t\tlimitVisibleRange: function (cfg) {\r\n\t\t\tvar dates = cfg.trace_x;\r\n\r\n\t\t\tvar left = 0, right = cfg.width.length - 1;\r\n\t\t\tvar diff = 0;\r\n\t\t\tif (+dates[0] < +cfg.min_date && left != right) {\r\n\t\t\t\tvar width = Math.floor(cfg.width[0] * ((dates[1] - cfg.min_date) / (dates[1] - dates[0])));\r\n\t\t\t\tdiff += cfg.width[0] - width;\r\n\t\t\t\tcfg.width[0] = width;\r\n\r\n\t\t\t\tdates[0] = new Date(cfg.min_date);\r\n\t\t\t}\r\n\r\n\t\t\tvar last = dates.length - 1;\r\n\t\t\tvar lastDate = dates[last];\r\n\t\t\tvar outDate = dateHelper.add(lastDate, cfg.step, cfg.unit);\r\n\t\t\tif (+outDate > +cfg.max_date && last > 0) {\r\n\t\t\t\tvar width = cfg.width[last] - Math.floor(cfg.width[last] * ((outDate - cfg.max_date) / (outDate - lastDate)));\r\n\t\t\t\tdiff += cfg.width[last] - width;\r\n\t\t\t\tcfg.width[last] = width;\r\n\t\t\t}\r\n\r\n\t\t\tif (diff) {\r\n\t\t\t\tvar full = this.getSum(cfg.width);\r\n\t\t\t\tvar shared = 0;\r\n\t\t\t\tfor (var i = 0; i < cfg.width.length; i++) {\r\n\t\t\t\t\tvar share = Math.floor(diff * (cfg.width[i] / full));\r\n\t\t\t\t\tcfg.width[i] += share;\r\n\t\t\t\t\tshared += share;\r\n\t\t\t\t}\r\n\t\t\t\tthis.adjustSize(diff - shared, cfg.width);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = ScaleHelper;\r\n","var __extends = require(\"../../../utils/extends\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar Layout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(Layout, _super);\r\n\tfunction Layout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(parent)\r\n\t\t\t_this.$root = true;\r\n\r\n\t\t_this._parseConfig(config);\r\n\t\t_this.$name = \"layout\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tLayout.prototype.destructor = function () {\r\n\t\tif (this.$container && this.$view) {\r\n\t\t\tdomHelpers.removeNode(this.$view);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tchild.destructor();\r\n\t\t}\r\n\t\tthis.$cells = [];\r\n\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tLayout.prototype._resizeScrollbars = function(autosize, scrollbars){\r\n\t\tvar scrollChanged = false;\r\n\t\tvar visibleScrollbars = [],\r\n\t\t\thiddenSrollbars = [];\r\n\r\n\t\tfunction showScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.show();\r\n\t\t\tscrollChanged = true;\r\n\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t}\r\n\t\tfunction hideScrollbar(scrollbar){\r\n\t\t\tscrollbar.$parent.hide();\r\n\t\t\tscrollChanged = true;\r\n\t\t\thiddenSrollbars.push(scrollbar);\r\n\t\t}\r\n\r\n\t\tvar scrollbar;\r\n\t\tfor(var i = 0; i < scrollbars.length; i++){\r\n\t\t\tscrollbar = scrollbars[i];\r\n\r\n\t\t\tif(autosize[scrollbar.$config.scroll]) {\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldHide()){\r\n\t\t\t\thideScrollbar(scrollbar);\r\n\t\t\t}else if(scrollbar.shouldShow()){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t}else{\r\n\t\t\t\tif(scrollbar.isVisible()){\r\n\t\t\t\t\tvisibleScrollbars.push(scrollbar);\r\n\t\t\t\t}else{\r\n\t\t\t\t\thiddenSrollbars.push(scrollbar);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar visibleGroups = {};\r\n\t\tfor(var i = 0; i < visibleScrollbars.length; i++){\r\n\t\t\tif(visibleScrollbars[i].$config.group){\r\n\t\t\t\tvisibleGroups[visibleScrollbars[i].$config.group] = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < hiddenSrollbars.length; i++){\r\n\t\t\tscrollbar = hiddenSrollbars[i];\r\n\r\n\t\t\tif(scrollbar.$config.group && visibleGroups[scrollbar.$config.group]){\r\n\t\t\t\tshowScrollbar(scrollbar);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn scrollChanged;\r\n\t};\r\n\r\n\tLayout.prototype._syncCellSizes = function(groupName, newSize){\r\n\t\tif(!groupName)\r\n\t\t\treturn;\r\n\r\n\t\tvar groups = {};\r\n\r\n\t\tthis._eachChild(function(cell){\r\n\t\t\tif(cell.$config.group && cell.$name != \"scrollbar\" && cell.$name != \"resizer\"){\r\n\t\t\t\tif(!groups[cell.$config.group]){\r\n\t\t\t\t\tgroups[cell.$config.group] = [];\r\n\t\t\t\t}\r\n\t\t\t\tgroups[cell.$config.group].push(cell);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tif(groups[groupName]){\r\n\t\t\tthis._syncGroupSize(groups[groupName], newSize);\r\n\t\t}\r\n\t\treturn groups[groupName];\r\n\t};\r\n\r\n\tLayout.prototype._syncGroupSize = function(cells, newSize){\r\n\t\tif(!cells.length) return;\r\n\r\n\t\tvar property = cells[0].$parent._xLayout ? \"width\" : \"height\";\r\n\t\tvar direction = cells[0].$parent.getNextSibling(cells[0].$id) ? 1 : -1;\r\n\r\n\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\tvar ownSize = cells[i].getSize();\r\n\r\n\t\t\tvar resizeSibling = direction > 0 ? cells[i].$parent.getNextSibling(cells[i].$id) : cells[i].$parent.getPrevSibling(cells[i].$id);\r\n\t\t\tif(resizeSibling.$name == \"resizer\"){\r\n\t\t\t\tresizeSibling = direction > 0 ? resizeSibling.$parent.getNextSibling(resizeSibling.$id) : resizeSibling.$parent.getPrevSibling(resizeSibling.$id);\r\n\t\t\t}\r\n\t\t\tvar siblingSize = resizeSibling.getSize();\r\n\r\n\t\t\tif(resizeSibling[property]){\r\n\t\t\t\tvar totalGravity = ownSize.gravity + siblingSize.gravity;\r\n\t\t\t\tvar totalSize = ownSize[property] + siblingSize[property];\r\n\t\t\t\tvar k = totalGravity / totalSize;\r\n\t\t\t\tcells[i].$config.gravity = k * newSize;\r\n\r\n\t\t\t\tresizeSibling.$config[property] = totalSize - newSize;\r\n\t\t\t\tresizeSibling.$config.gravity = totalGravity - k * newSize;\r\n\t\t\t}else{\r\n\r\n\r\n\t\t\t\tcells[i].$config[property] = newSize;\r\n\t\t\t}\r\n\r\n\t\t\tvar mainGrid = this.$gantt.$ui.getView(\"grid\");\r\n\t\t\tif(mainGrid && cells[i].$content === mainGrid && !mainGrid.$config.scrollable){\r\n\t\t\t\tthis.$gantt.config.grid_width = newSize;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.resize = function(startStage){\r\n\t\tvar mainCall = false;\r\n\t\tif(this.$root && !this._resizeInProgress){\r\n\t\t\tthis.callEvent(\"onBeforeResize\", []);\r\n\t\t\tmainCall = true;\r\n\t\t\tthis._resizeInProgress = true;\r\n\t\t}\r\n\r\n\t\t_super.prototype.resize.call(this, true);\r\n\t\t_super.prototype.resize.call(this, false);\r\n\r\n\t\tif(mainCall){\r\n\r\n\t\t\tvar contentViews = [];\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewCell\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"viewLayout\"));\r\n\t\t\tcontentViews = contentViews.concat(this.getCellsByType(\"hostCell\"));\r\n\r\n\t\t\tvar scrollbars = this.getCellsByType(\"scroller\");\r\n\r\n\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t}\r\n\r\n\t\t\tvar autosize = this._getAutosizeMode(this.$config.autosize);\r\n\r\n\t\t\tvar scrollChanged = this._resizeScrollbars(autosize, scrollbars);\r\n\r\n\t\t\tif(this.$config.autosize){\r\n\t\t\t\tthis.autosize(this.$config.autosize);\r\n\t\t\t\tscrollChanged = true;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollChanged){\r\n\t\t\t\tthis.resize();\r\n\t\t\t\tfor(var i = 0; i < contentViews.length; i++){\r\n\t\t\t\t\tif(!contentViews[i].$config.hidden)\r\n\t\t\t\t\t\tcontentViews[i].setContentSize();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onResize\", []);\r\n\t\t}\r\n\t\tif(mainCall){\r\n\t\t\tthis._resizeInProgress = false;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._eachChild = function(code, cell){\r\n\t\tcell = cell || this;\r\n\t\tcode(cell);\r\n\t\tif(cell.$cells){\r\n\t\t\tfor(var i = 0; i < cell.$cells.length; i++){\r\n\t\t\t\tthis._eachChild(code, cell.$cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.isChild = function(view){\r\n\t\tvar res = false;\r\n\t\tthis._eachChild(function(child){\r\n\t\t\tif(child === view || child.$content === view){\r\n\t\t\t\tres = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getCellsByType = function(type){\r\n\t\tvar res = [];\r\n\t\tif(type === this.$name){\r\n\t\t\tres.push(this);\r\n\t\t}\r\n\r\n\t\tif(this.$content && this.$content.$name == type){\r\n\t\t\tres.push(this.$content);\r\n\t\t}\r\n\r\n\t\tif(this.$cells){\r\n\t\t\tfor(var i = 0; i < this.$cells.length; i++){\r\n\t\t\t\tvar children = Layout.prototype.getCellsByType.call(this.$cells[i], type);\r\n\t\t\t\tif(children.length){\r\n\t\t\t\t\tres.push.apply(res, children);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.getNextSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index + 1]){\r\n\t\t\treturn this.$cells[index + 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getPrevSibling = function(cellId){\r\n\t\tvar index = this.cellIndex(cellId);\r\n\t\tif(index >= 0 && this.$cells[index - 1]){\r\n\t\t\treturn this.$cells[index - 1];\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tLayout.prototype.cell = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tvar child = this.$cells[i];\r\n\t\t\tif (child.$id === id) {\r\n\t\t\t\treturn child;\r\n\t\t\t}\r\n\t\t\tvar sub = child.cell(id);\r\n\t\t\tif (sub) {\r\n\t\t\t\treturn sub;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.cellIndex = function (id) {\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tif (this.$cells[i].$id === id) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t};\r\n\tLayout.prototype.moveView = function (view, ind) {\r\n\t\tif (this.$cells[ind] !== view) {\r\n\t\t\treturn window.alert(\"Not implemented\");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tind += this.$config.header ? 1 : 0;\r\n\t\t\tvar node = this.$view;\r\n\t\t\tif (ind >= node.childNodes.length) {\r\n\t\t\t\tnode.appendChild(view.$view);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tnode.insertBefore(view.$view, node.childNodes[ind]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype._parseConfig = function (config) {\r\n\t\tthis.$cells = [];\r\n\t\tthis._xLayout = !config.rows;\r\n\t\tvar cells = config.rows || config.cols || config.views;\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tvar cell = cells[i];\r\n\t\t\tcell.mode = this._xLayout ? \"x\" : \"y\";\r\n\t\t\tvar $content = this.$factory.initUI(cell, this);\r\n\t\t\tif(!$content){\r\n\t\t\t\tcells.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}else{\r\n\t\t\t\t$content.$parent = this;\r\n\t\t\t\tthis.$cells.push($content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.getCells = function () {\r\n\t\treturn this.$cells;\r\n\t};\r\n\tLayout.prototype.render = function () {\r\n\t\tvar view = domHelpers.insertNode(this.$container, this.$toHTML());\r\n\t\tthis.$fill(view, null);\r\n\t\tthis.callEvent(\"onReady\", []);\r\n\t\tthis.resize();\r\n\r\n\t\t// do simple repaint after the first call\r\n\t\tthis.render = this.resize;\r\n\t};\r\n\tLayout.prototype.$fill = function (node, parent) {\r\n\t\tthis.$view = node;\r\n\t\tthis.$parent = parent;\r\n\t\tvar cells = domHelpers.getChildNodes(node, \"gantt_layout_cell\");\r\n\t\tfor (var i = cells.length - 1; i >= 0; i--) {\r\n\t\t\tvar sub = this.$cells[i];\r\n\t\t\tsub.$fill(cells[i], this);\r\n\t\t\t// initially hidden cell\r\n\t\t\tif (sub.$config.hidden) {\r\n\t\t\t\tsub.$view.parentNode.removeChild(sub.$view);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tLayout.prototype.$toHTML = function () {\r\n\t\tvar mode = this._xLayout ? \"x\" : \"y\";\r\n\t\tvar html = [];\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\thtml.push(this.$cells[i].$toHTML());\r\n\t\t}\r\n\t\treturn _super.prototype.$toHTML.call(this, html.join(\"\"), (this.$root ? \"gantt_layout_root \" : \"\") + \"gantt_layout gantt_layout_\" + mode);\r\n\t};\r\n\r\n\tLayout.prototype.getContentSize = function(mode){\r\n\t\tvar contentWidth = 0,\r\n\t\t\tcontentHeight = 0;\r\n\r\n\t\tvar cellSize, cell, borders;\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\t\t\tif(cell.$config.hidden)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tcellSize = cell.getContentSize(mode);\r\n\r\n\t\t\tif(cell.$config.view === \"scrollbar\" && mode[cell.$config.scroll]){\r\n\t\t\t\tcellSize.height = 0;\r\n\t\t\t\tcellSize.width = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(cell.$config.resizer){\r\n\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\tcellSize.height = 0;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcellSize.width = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tborders = cell._getBorderSizes();\r\n\r\n\t\t\tif(this._xLayout){\r\n\t\t\t\tcontentWidth += (cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight = Math.max(contentHeight, (cellSize.height + borders.vertical));\r\n\t\t\t}else{\r\n\t\t\t\tcontentWidth = Math.max(contentWidth, cellSize.width + borders.horizontal);\r\n\t\t\t\tcontentHeight += cellSize.height + borders.vertical;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tborders = this._getBorderSizes();\r\n\t\tcontentWidth += borders.horizontal;\r\n\t\tcontentHeight += borders.vertical;\r\n\r\n\t\tif(this.$root){\r\n\t\t\tcontentWidth += 1;\r\n\t\t\tcontentHeight += 1;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\twidth: contentWidth,\r\n\t\t\theight: contentHeight\r\n\t\t};\r\n\t};\r\n\r\n\tLayout.prototype._cleanElSize = function(value){\r\n\t\treturn ((value || \"\").toString().replace(\"px\", \"\") * 1 || 0);\r\n\t};\r\n\tLayout.prototype._getBoxStyles = function(div){\r\n\t\tvar computed = null;\r\n\t\tif(window.getComputedStyle){\r\n\t\t\tcomputed = window.getComputedStyle(div, null);\r\n\t\t}else{\r\n\t\t\t//IE with elem.currentStyle does not calculate sizes from %, so will use the default approach\r\n\t\t\tcomputed = {\r\n\t\t\t\t\"width\":div.clientWidth,\r\n\t\t\t\t\"height\":div.clientHeight\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar properties = [\r\n\t\t\t\"width\",\r\n\t\t\t\"height\",\r\n\r\n\t\t\t\"paddingTop\",\r\n\t\t\t\"paddingBottom\",\r\n\t\t\t\"paddingLeft\",\r\n\t\t\t\"paddingRight\",\r\n\r\n\t\t\t\"borderLeftWidth\",\r\n\t\t\t\"borderRightWidth\",\r\n\t\t\t\"borderTopWidth\",\r\n\t\t\t\"borderBottomWidth\"\r\n\t\t];\r\n\t\tvar styles = {\r\n\t\t\tboxSizing:(computed.boxSizing == \"border-box\")\r\n\t\t};\r\n\r\n\t\tif(computed.MozBoxSizing){\r\n\t\t\tstyles.boxSizing = (computed.MozBoxSizing == \"border-box\");\r\n\t\t}\r\n\t\tfor(var i =0; i < properties.length; i++){\r\n\t\t\tstyles[properties[i]] = computed[properties[i]] ? this._cleanElSize(computed[properties[i]]) : 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar box = {\r\n\t\t\thorPaddings : (styles.paddingLeft + styles.paddingRight + styles.borderLeftWidth + styles.borderRightWidth),\r\n\t\t\tvertPaddings : (styles.paddingTop + styles.paddingBottom + styles.borderTopWidth + styles.borderBottomWidth),\r\n\t\t\tborderBox: styles.boxSizing,\r\n\t\t\tinnerWidth : styles.width,\r\n\t\t\tinnerHeight : styles.height,\r\n\t\t\touterWidth : styles.width,\r\n\t\t\touterHeight : styles.height\r\n\t\t};\r\n\r\n\r\n\t\tif(box.borderBox){\r\n\t\t\tbox.innerWidth -= box.horPaddings;\r\n\t\t\tbox.innerHeight -= box.vertPaddings;\r\n\t\t}else{\r\n\t\t\tbox.outerWidth += box.horPaddings;\r\n\t\t\tbox.outerHeight += box.vertPaddings;\r\n\t\t}\r\n\r\n\t\treturn box;\r\n\t};\r\n\r\n\tLayout.prototype._getAutosizeMode = function(config){\r\n\t\tvar res = {x:false, y:false};\r\n\t\tif(config === \"xy\"){\r\n\t\t\tres.x = res.y = true;\r\n\t\t}else if(config === \"y\" || config === true){\r\n\t\t\tres.y = true;\r\n\t\t}else if(config === \"x\"){\r\n\t\t\tres.x = true;\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\tLayout.prototype.autosize = function(mode) {\r\n\t\tvar res = this._getAutosizeMode(mode);\r\n\t\tvar boxSizes = this._getBoxStyles(this.$container);\r\n\t\tvar contentSizes = this.getContentSize(mode);\r\n\r\n\t\tvar node = this.$container;\r\n\t\tif(res.x){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.width += boxSizes.horPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.width = contentSizes.width + \"px\";\r\n\t\t}\r\n\t\tif(res.y){\r\n\t\t\tif(boxSizes.borderBox){\r\n\t\t\t\tcontentSizes.height += boxSizes.vertPaddings;\r\n\t\t\t}\r\n\t\t\tnode.style.height = contentSizes.height + \"px\";\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype.getSize = function () {\r\n\t\tthis._sizes = [];\r\n\t\tvar width = 0;\r\n\t\tvar minWidth = 0;\r\n\t\tvar maxWidth = 100000;\r\n\t\tvar height = 0;\r\n\t\tvar maxHeight = 100000;\r\n\t\tvar minHeight = 0;\r\n\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\r\n\t\t\tvar size = this._sizes[i] = this.$cells[i].getSize();\r\n\t\t\tif (this.$cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width && size.minWidth) {\r\n\t\t\t\t\twidth += size.minWidth;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\twidth += size.width;\r\n\t\t\t\t}\r\n\t\t\t\tmaxWidth += size.maxWidth;\r\n\t\t\t\tminWidth += size.minWidth;\r\n\t\t\t\theight = Math.max(height, size.height);\r\n\t\t\t\tmaxHeight = Math.min(maxHeight, size.maxHeight); // min of maxHeight\r\n\t\t\t\tminHeight = Math.max(minHeight, size.minHeight); // max of minHeight\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height && size.minHeight) {\r\n\t\t\t\t\theight += size.minHeight;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\theight += size.height;\r\n\t\t\t\t}\r\n\t\t\t\tmaxHeight += size.maxHeight;\r\n\t\t\t\tminHeight += size.minHeight;\r\n\t\t\t\twidth = Math.max(width, size.width);\r\n\t\t\t\tmaxWidth = Math.min(maxWidth, size.maxWidth); // min of maxWidth\r\n\t\t\t\tminWidth = Math.max(minWidth, size.minWidth); // max of minWidth\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar self = _super.prototype.getSize.call(this);\r\n\t\t// maxWidth\r\n\t\tif (self.maxWidth >= 100000) {\r\n\t\t\tself.maxWidth = maxWidth;\r\n\t\t}\r\n\t\t// maxHeight\r\n\t\tif (self.maxHeight >= 100000) {\r\n\t\t\tself.maxHeight = maxHeight;\r\n\t\t}\r\n\t\t// minWidth\r\n\t\tself.minWidth = self.minWidth !== self.minWidth ? 0 : self.minWidth;// || self.width || Math.max(minWidth, width);\r\n\t\t// minHeight\r\n\t\tself.minHeight = self.minHeight !== self.minHeight ? 0 : self.minHeight;//self.minHeight || self.height || Math.max(minHeight, height);\r\n\t\t// sizes with paddings and margins\r\n\t\tif (this._xLayout) {\r\n\t\t\tself.minWidth += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minWidth += this.$config.padding * 2 || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tself.minHeight += this.$config.margin * (this.$cells.length) || 0;\r\n\t\t\tself.minHeight += (this.$config.padding * 2) || 0;\r\n\t\t}\r\n\t\t\r\n\t\treturn self;\r\n\t};\r\n\t// calc total gravity and free space\r\n\tLayout.prototype._calcFreeSpace = function (s, cell, xLayout) {\r\n\t\tvar min = xLayout ? cell.minWidth : cell.minHeight;\r\n\t\tvar max = xLayout ? cell.maxWidth : cell.maxWidth;\r\n\t\tvar side = s;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * cell.gravity);\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t\tthis._free -= side;\r\n\t\t\t\tthis._gravity -= cell.gravity;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (side > max) {\r\n\t\t\t\tside = max;\r\n\t\t\t}\r\n\t\t\tif (side < min) {\r\n\t\t\t\tside = min;\r\n\t\t\t}\r\n\t\t\tthis._free -= side;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\tLayout.prototype._calcSize = function (s, size, xLayout) {\r\n\t\tvar side = s;\r\n\t\tvar min = xLayout ? size.minWidth : size.minHeight;\r\n\t\tvar max = xLayout ? size.maxWidth : size.maxHeight;\r\n\t\tif (!side) {\r\n\t\t\tside = Math.floor(this._free / this._gravity * size.gravity);\r\n\t\t}\r\n\t\tif (side > max) {\r\n\t\t\tside = max;\r\n\t\t}\r\n\t\tif (side < min) {\r\n\t\t\tside = min;\r\n\t\t}\r\n\t\treturn side;\r\n\t};\r\n\r\n\tLayout.prototype._configureBorders = function(){\r\n\t\tif(this.$root){\r\n\t\t\tthis._setBorders([\r\n\t\t\t\tthis._borders.left,\r\n\t\t\t\tthis._borders.top,\r\n\t\t\t\tthis._borders.right,\r\n\t\t\t\tthis._borders.bottom\r\n\t\t\t],\r\n\t\t\tthis);\r\n\t\t}\r\n\r\n\t\tvar borderClass = this._xLayout ? this._borders.right : this._borders.bottom;\r\n\r\n\t\tvar cells = this.$cells;\r\n\r\n\t\tvar lastVisibleIndex = cells.length - 1;\r\n\t\tfor(var i = lastVisibleIndex; i >= 0; i--){\r\n\t\t\tif (!cells[i].$config.hidden) {\r\n\t\t\t\tlastVisibleIndex = i;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\tif (cells[i].$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar lastCell = i >= lastVisibleIndex;\r\n\t\t\tvar borderColorClass = \"\";\r\n\t\t\tif(!lastCell && cells[i + 1]){\r\n\t\t\t\tif(cells[i + 1].$config.view == \"scrollbar\"){\r\n\t\t\t\t\tif(this._xLayout){\r\n\t\t\t\t\t\tlastCell = true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tborderColorClass = \"gantt_layout_cell_border_transparent\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis._setBorders(lastCell ? [] : [borderClass, borderColorClass], cells[i]);\r\n\t\t}\r\n\t};\r\n\r\n\tLayout.prototype._updateCellVisibility = function(){\r\n\t\tvar oldVisibleCells = this._visibleCells || {};\r\n\t\tvar firstCall = !this._visibleCells;\r\n\t\tvar visibleCells = {};\r\n\t\tvar cell;\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (!firstCall && cell.$config.hidden && oldVisibleCells[cell.$id]) {\r\n\t\t\t\tcell._hide(true);\r\n\t\t\t}else if(!cell.$config.hidden && !oldVisibleCells[cell.$id]){\r\n\t\t\t\tcell._hide(false);\r\n\t\t\t}\r\n\r\n\t\t\tif(!cell.$config.hidden){\r\n\t\t\t\tvisibleCells[cell.$id] = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis._visibleCells = visibleCells;\r\n\t};\r\n\r\n\tLayout.prototype.setSize = function (x, y) {\r\n\t\tthis._configureBorders();\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\t\ty = this.$lastSize.contentY;\r\n\t\tx = this.$lastSize.contentX;\r\n\r\n\t\tvar padding = (this.$config.padding || 0);\r\n\t\tthis.$view.style.padding = padding + \"px\";\r\n\t\tthis._gravity = 0;\r\n\t\tthis._free = this._xLayout ? x : y;\r\n\t\tthis._free -= padding * 2;\r\n\t\t// calc all gravity\r\n\r\n\t\tvar cell,\r\n\t\t\tsize;\r\n\r\n\t\tthis._updateCellVisibility();\r\n\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar margin = (this.$config.margin || 0);\r\n\t\t\tif(cell.$name == \"resizer\" && !margin){\r\n\t\t\t\tmargin = -1;\r\n\t\t\t}\r\n\r\n\t\t\t// set margins to child cell\r\n\t\t\tvar cellView = cell.$view;\r\n\r\n\t\t\tvar marginSide = this._xLayout ? \"marginRight\" : \"marginBottom\";\r\n\t\t\tif (i !== this.$cells.length - 1) {\r\n\t\t\t\tcellView.style[marginSide] = margin + \"px\";\r\n\t\t\t\tthis._free -= margin; // calc free space without margin\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tif (!size.width) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (!size.height) {\r\n\t\t\t\t\tthis._gravity += size.gravity;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this._sizes.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar width = size.width;\r\n\t\t\tvar height = size.height;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tthis._calcFreeSpace(width, size, true);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._calcFreeSpace(height, size, false);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\tcell = this.$cells[i];\r\n\r\n\t\t\tif (cell.$config.hidden) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tsize = this._sizes[i];\r\n\t\t\tvar dx = void 0;\r\n\t\t\tvar dy = void 0;\r\n\t\t\tif (this._xLayout) {\r\n\t\t\t\tdx = this._calcSize(size.width, size, true);\r\n\t\t\t\tdy = y - padding * 2; // layout height without paddings\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdx = x - padding * 2; // layout width without paddings\r\n\t\t\t\tdy = this._calcSize(size.height, size, false);\r\n\t\t\t}\r\n\r\n\t\t\tcell.setSize(dx, dy);\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn Layout;\r\n}(Cell));\r\n\r\nmodule.exports = Layout;","var utils = require(\"./utils\");\r\n\r\nfunction createScope(addEvent, removeEvent){\r\n\taddEvent = addEvent || utils.event;\r\n\tremoveEvent = removeEvent || utils.eventRemove;\r\n\r\n\tvar handlers = [];\r\n\r\n\treturn {\r\n\t\tattach: function(el, event, handler, capture){\r\n\t\t\thandlers.push({element: el, event:event, callback: handler, capture: capture});\r\n\t\t\taddEvent(el, event, handler, capture);\r\n\t\t},\r\n\t\tdetach: function(el, event, handler, capture){\r\n\t\t\tremoveEvent(el, event, handler, capture);\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handler = handlers[i];\r\n\t\t\t\tif(handler.element === el && handler.event === event && handler.callback === handler && handler.capture === capture){\r\n\t\t\t\t\thandlers.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdetachAll: function(){\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, handlers[i].capture);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, undefined);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, false);\r\n\t\t\t\tremoveEvent(handlers[i].element, handlers[i].event, handlers[i].callback, true);\r\n\t\t\t}\r\n\t\t\thandlers = [];\r\n\t\t},\r\n\t\textend: function(){\r\n\t\t\treturn createScope(this.event, this.eventRemove);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createScope;","function checkTimeout(host, updPerSecond){\r\n\tif (!updPerSecond)\r\n\t\treturn true;\r\n\t\r\n\tif (host._on_timeout)\r\n\t\treturn false;\r\n\t\r\n\tvar timeout = Math.ceil(1000/updPerSecond);\r\n\tif (timeout < 2) return true;\r\n\r\n\tsetTimeout(function(){\r\n\t\tdelete host._on_timeout;\r\n\t}, timeout);\r\n\r\n\thost._on_timeout = true;\r\n\treturn true;\r\n}\r\n\r\nmodule.exports = checkTimeout;","function extend(gantt){\r\n\r\n\tgantt.destructor = function(){\r\n\t\tgantt.callEvent(\"onDestroy\", []);\r\n\r\n\t\tthis.clearAll();\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tif(this.$root){\r\n\t\t\tdelete this.$root.gantt;\r\n\t\t}\r\n\r\n\t\tthis._eventRemoveAll();\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t}\r\n\r\n\t\tthis.resetLightbox();\r\n\r\n\t\tif(this._dp && this._dp.destructor){\r\n\t\t\tthis._dp.destructor();\r\n\t\t}\r\n\r\n\t\tthis.$services.destructor();\r\n\r\n\t\tfor(var i in this){\r\n\t\t\tif(i.indexOf(\"$\") === 0){\r\n\t\t\t\tdelete this[i];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = extend;\r\n","/*\r\n \tasserts will be removed in final code, so you can place them anythere\r\n\twithout caring about performance impacts\r\n*/\r\n\r\nmodule.exports = function(gantt){\r\n\treturn function assert(check, message){\r\n\t\t//jshint -W087\r\n\t\tif (!check){\r\n\t\t\tif(gantt.config.show_errors && gantt.callEvent(\"onError\",[message]) !== false) {\r\n\t\t\t\tgantt.message({type: \"error\", text: message, expire: -1});\r\n\t\t\t\tdebugger;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};","var domHelpers = require(\"../utils/dom_helpers\"),\r\n\thelpers = require(\"../utils/helpers\");\r\n\r\nmodule.exports = function(gantt){\r\n\tvar calculateScaleRange = require(\"./gantt_data_range\");\r\n\r\n\tgantt.assert = require(\"./common/assert\")(gantt);\r\n\r\n//initial initialization\r\n\tgantt.init = function(node, from, to){\r\n\t\tif(from && to){\r\n\t\t\tthis.config.start_date = this._min_date = new Date(from);\r\n\t\t\tthis.config.end_date = this._max_date = new Date(to);\r\n\t\t}\r\n\t\tthis.date.init();\r\n\r\n\t\tif (!this.config.scroll_size)\r\n\t\t\tthis.config.scroll_size = domHelpers.getScrollSize() || 1;\r\n\r\n\t\t//can be called only once\r\n\t\tthis.init = function(node){\r\n\t\t\tif (this.$container && this.$container.parentNode){\r\n\t\t\t\tthis.$container.parentNode.removeChild(this.$container);\r\n\t\t\t\tthis.$container = null;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.$layout){\r\n\t\t\t\tthis.$layout.clear();\r\n\t\t\t}\r\n\t\t\tthis._reinit(node);\r\n\t\t};\r\n\r\n\t\tthis._reinit(node);\r\n\t};\r\n\r\n\tgantt._reinit = function(node){\r\n\t\tthis.callEvent(\"onBeforeGanttReady\", []);\r\n\t\t//this._init_tasks_range();\r\n\t\tthis.resetLightbox();\r\n\t\tthis._update_flags();\r\n\r\n\r\n\t\tvar config = this.$services.getService(\"templateLoader\");\r\n\t\tconfig.initTemplates(this);\r\n\r\n\t\tthis._clearTaskLayers();\r\n\t\tthis._clearLinkLayers();\r\n\r\n\t\t//this.clear\r\n\t\tif(this.$layout){\r\n\t\t\tthis.$layout.destructor();\r\n\t\t\tthis.$ui.reset();\r\n\t\t}\r\n\r\n\t\tthis.$root = domHelpers.toNode(node);\r\n\t\tif(this.$root){\r\n\t\t\tthis.$root.innerHTML = \"\";\r\n\t\t}\r\n\t\tthis.$root.gantt = this;\r\n\t\tcalculateScaleRange(this);\r\n\t\tthis.config.layout.id = \"main\";\r\n\t\tthis.$layout = this.$ui.createView(\"layout\", node, this.config.layout);\r\n\r\n\t\tthis.$layout.attachEvent(\"onBeforeResize\", function(){\r\n\t\t\tvar storeNames = gantt.$services.getService(\"datastores\");\r\n\t\t\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\t\t\tgantt.getDatastore(storeNames[i]).filter();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.$layout.attachEvent(\"onResize\", function(){\r\n\t\t\tgantt.refreshData();\r\n\t\t});\r\n\r\n\t\tthis.callEvent(\"onGanttLayoutReady\", []);\r\n\t\tthis.$layout.render();\r\n\r\n\t\tgantt.$container = this.$layout.$container.firstChild;\r\n\r\n\t\taddResizeListener(gantt);\r\n\r\n\t\tthis.callEvent(\"onTemplatesReady\",[]);\r\n\t\tthis.$mouseEvents.reset(this.$root);\r\n\t\tthis.callEvent(\"onGanttReady\", []);\r\n\r\n\t\tthis.render();\r\n\t};\r\n\r\n\tfunction addResizeListener(gantt){\r\n\t\tvar resizeDelay;\r\n\r\n\t\tvar containerStyles = window.getComputedStyle(gantt.$root);\r\n\t\tif(containerStyles.getPropertyValue(\"position\") == \"static\"){\r\n\t\t\tgantt.$root.style.position = \"relative\";\r\n\t\t}\r\n\r\n\t\tvar resizeWatcher = document.createElement('iframe');\r\n\t\tresizeWatcher.className = \"gantt_container_resize_watcher\";\r\n\t\tresizeWatcher.tabIndex = -1;\r\n\r\n\t\tgantt.$root.appendChild(resizeWatcher);\r\n\t\tresizeWatcher.contentWindow.addEventListener('resize', function(){ \r\n\t\t\tclearTimeout(resizeDelay);\r\n\t\t\tresizeDelay = setTimeout(function(){\r\n\t\t\t\tgantt.render();\r\n\t\t\t}, 300);\t\t\r\n\t\t});\r\n\t}\r\n\r\n\tgantt.$click={\r\n\t\tbuttons:{\r\n\t\t\t\"edit\":function(id){\r\n\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t},\r\n\t\t\t\"delete\":function(id){\r\n\t\t\t\tvar question = gantt.locale.labels.confirm_deleting;\r\n\t\t\t\tvar title = gantt.locale.labels.confirm_deleting_title;\r\n\r\n\t\t\t\tgantt._dhtmlx_confirm(question, title, function(){\r\n\t\t\t\t\tif(!gantt.isTaskExists(id)){\r\n\t\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\t\tif(task.$new){\r\n\t\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\t\tgantt.deleteTask(id, true);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tgantt.refreshData();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tgantt.deleteTask(id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgantt.hideLightbox();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n//renders self\r\n\tgantt.render = function(){\r\n\t\tthis.callEvent(\"onBeforeGanttRender\", []);\r\n\r\n\t\tif (!this.config.sort && this._sort) {\r\n\t\t\tthis._sort = undefined;\r\n\t\t}\r\n\r\n\t\tvar pos = this.getScrollState();\r\n\t\tvar posX = pos ? pos.x : 0;\r\n\t\tif(this._getHorizontalScrollbar()){\r\n\t\t\tvar scrollbar = this._getHorizontalScrollbar();\r\n\t\t\tposX = scrollbar.$config.codeScrollLeft || posX || 0;\r\n\t\t}\r\n\r\n\r\n\t\tvar visible_date = null;\r\n\t\tif(posX){\r\n\t\t\tvisible_date = gantt.dateFromPos(posX + this.config.task_scroll_offset);\r\n\t\t}\r\n\t\tcalculateScaleRange(this);\r\n\r\n\t\tthis.$layout.$config.autosize = this.config.autosize;\r\n\t\tthis.$layout.resize();\r\n\r\n\t\tif(this.config.preserve_scroll && pos){\r\n\r\n\t\t\tif(posX){\r\n\t\t\t\tvar new_pos = gantt.getScrollState();\r\n\t\t\t\tvar new_date = gantt.dateFromPos(new_pos.x);\r\n\t\t\t\tif(!(+visible_date == +new_date && new_pos.y == pos.y)){\r\n\t\t\t\t\tif(visible_date){\r\n\t\t\t\t\t\tthis.showDate(visible_date);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(pos.y)\r\n\t\t\t\t\t\tgantt.scrollTo(undefined, pos.y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onGanttRender\", []);\r\n\t};\r\n\r\n\t//TODO: add layout.resize method that wouldn't trigger data repaint\r\n\tgantt.setSizes = gantt.render;\r\n\r\n\tgantt.locate = function(e) {\r\n\t\tvar trg = domHelpers.getTargetNode(e);\r\n\r\n\t\t//ignore empty cells\r\n\t\tvar className = domHelpers.getClassName(trg);\r\n\t\tif ((className || \"\").indexOf(\"gantt_task_cell\") >= 0) return null;\r\n\r\n\t\tvar targetAttribute = arguments[1] || this.config.task_attribute;\r\n\r\n\t\tvar node = domHelpers.locateAttribute(trg, targetAttribute);\r\n\t\tif(node){\r\n\t\t\treturn node.getAttribute(targetAttribute);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._locate_css = function(e, classname, strict){\r\n\t\treturn domHelpers.locateClassName(e, classname, strict);\r\n\t};\r\n\r\n\tgantt._locateHTML = function(e, attribute) {\r\n\t\treturn domHelpers.locateAttribute(e, attribute || this.config.task_attribute);\r\n\t};\r\n\r\n\tgantt.getTaskRowNode = function(id) {\r\n\t\tvar els = this.$grid_data.childNodes;\r\n\t\tvar attribute = this.config.task_attribute;\r\n\t\tfor (var i = 0; i < els.length; i++) {\r\n\t\t\tif (els[i].getAttribute) {\r\n\t\t\t\tvar value = els[i].getAttribute(attribute);\r\n\t\t\t\tif (value == id) return els[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgantt.changeLightboxType = function(type){\r\n\t\tif(this.getLightboxType() == type)\r\n\t\t\treturn true;\r\n\t\tgantt._silent_redraw_lightbox(type);\r\n\t};\r\n\r\n\r\n\tgantt._get_link_type = function (from_start, to_start) {\r\n\t\tvar type = null;\r\n\t\tif (from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_start;\r\n\t\t} else if (!from_start && to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_start;\r\n\t\t} else if (!from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.finish_to_finish;\r\n\t\t} else if (from_start && !to_start) {\r\n\t\t\ttype = gantt.config.links.start_to_finish;\r\n\t\t}\r\n\t\treturn type;\r\n\t};\r\n\r\n\tgantt.isLinkAllowed = function (from, to, from_start, to_start) {\r\n\t\tvar link = null;\r\n\t\tif (typeof(from) == \"object\") {\r\n\t\t\tlink = from;\r\n\t\t} else {\r\n\t\t\tlink = {source: from, target: to, type: this._get_link_type(from_start, to_start)};\r\n\t\t}\r\n\r\n\t\tif (!link) return false;\r\n\t\tif (!(link.source && link.target && link.type)) return false;\r\n\t\tif (link.source == link.target) return false;\r\n\r\n\t\tvar res = true;\r\n\t\t//any custom rules\r\n\t\tif (this.checkEvent(\"onLinkValidation\"))\r\n\t\t\tres = this.callEvent(\"onLinkValidation\", [link]);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tgantt._correct_dst_change = function(date, prevOffset, step, unit){\r\n\t\tvar time_unit = helpers.getSecondsInUnit(unit) * step;\r\n\t\tif(time_unit > 60*60 && time_unit < 60*60*24){\r\n\t\t\t//correct dst change only if current unit is more than one hour and less than day (days have own checking), e.g. 12h\r\n\t\t\tvar offsetChanged = date.getTimezoneOffset() - prevOffset;\r\n\t\t\tif(offsetChanged){\r\n\t\t\t\tdate = gantt.date.add(date, offsetChanged, \"minute\");\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn date;\r\n\t};\r\n\r\n\tgantt.isSplitTask = function(task){\r\n\t\tgantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\"+task+\" of gantt.isSplitTask. Task object was expected\");\r\n\t\treturn this.$data.tasksStore._isSplitItem(task);\r\n\t};\r\n\r\n\tgantt._is_icon_open_click = function(e) {\r\n\t\tif (!e)\r\n\t\t\treturn false;\r\n\t\tvar target = e.target || e.srcElement;\r\n\t\tif (!(target && target.className))\r\n\t\t\treturn false;\r\n\t\tvar className = domHelpers.getClassName(target);\r\n\t\tif (className.indexOf(\"gantt_tree_icon\") !== -1 && (className.indexOf(\"gantt_close\") !== -1 || className.indexOf(\"gantt_open\") !== -1))\r\n\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n};","module.exports = function(gantt) {\r\n\r\n\tgantt.config.touch_drag = 500; //nearly immediate dnd\r\n\tgantt.config.touch = true;\r\n\tgantt.config.touch_feedback = true;\r\n\tgantt.config.touch_feedback_duration = 1;\r\n\tgantt._prevent_touch_scroll = false;\r\n\r\n\r\n\tgantt._touch_feedback = function () {\r\n\t\tif (gantt.config.touch_feedback) {\r\n\t\t\tif (navigator.vibrate)\r\n\t\t\t\tnavigator.vibrate(gantt.config.touch_feedback_duration);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", gantt.bind(function(){\r\n\t\tif (this.config.touch != \"force\")\r\n\t\t\tthis.config.touch = this.config.touch &&\r\n\t\t\t\t((navigator.userAgent.indexOf(\"Mobile\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"iPad\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Android\") != -1) ||\r\n\t\t\t\t\t(navigator.userAgent.indexOf(\"Touch\") != -1));\r\n\r\n\t\tif (this.config.touch) {\r\n\r\n\t\t\tvar touchEventsSupported = true;\r\n\t\t\ttry {\r\n\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (touchEventsSupported) {\r\n\t\t\t\tthis._touch_events([\"touchmove\", \"touchstart\", \"touchend\"], function (ev) {\r\n\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttarget: ev.target,\r\n\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function () {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.pointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"pointermove\", \"pointerdown\", \"pointerup\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || (ev.pointerType == \"mouse\" ));\r\n\t\t\t\t});\r\n\t\t\t} else if (window.navigator.msPointerEnabled) {\r\n\t\t\t\tthis._touch_events([\"MSPointerMove\", \"MSPointerDown\", \"MSPointerUp\"], function (ev) {\r\n\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\treturn ev;\r\n\t\t\t\t}, function (ev) {\r\n\t\t\t\t\treturn (!ev || ev.pointerType == ev.MSPOINTER_TYPE_MOUSE);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}, gantt));\r\n\r\n\r\n\tfunction getTaskDND(){\r\n\t\tvar _tasks_dnd;\r\n\t\tif(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t_tasks_dnd = gantt.$ui.getView(\"timeline\")._tasks_dnd;\r\n\t\t}\r\n\t\treturn _tasks_dnd;\r\n\t}\r\n\r\n\tvar touchHandlers = [];\r\n\r\n//we can't use native scrolling, as we need to sync momentum between different parts\r\n//so we will block native scroll and use the custom one\r\n//in future we can add custom momentum\r\n\tgantt._touch_events = function (names, accessor, ignore) {\r\n\t\t//webkit on android need to be handled separately\r\n\t\tvar dblclicktime = 0;\r\n\t\tvar action_mode = false;\r\n\t\tvar scroll_mode = false;\r\n\t\tvar dblclick_timer = 0;\r\n\t\tvar action_start = null;\r\n\t\tvar scroll_state;\r\n\t\tvar long_tap_timer = null;\r\n\t\tvar current_target = null;\r\n\r\n\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.eventRemove(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\t\ttouchHandlers = [];\r\n\r\n\t\t//touch move\r\n\t\ttouchHandlers.push([gantt.$container, names[0], function (e) {\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t\tif (ignore(e)) return;\r\n\r\n\t\t\t\t//ignore common and scrolling moves\r\n\t\t\t\tif (!action_mode) return;\r\n\r\n\t\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\r\n\t\t\t\tvar source = accessor(e);\r\n\t\t\t\tif (_tasks_dnd && (_tasks_dnd.drag.id || _tasks_dnd.drag.start_drag)) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_move(source);\r\n\t\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.cancelBubble = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif (!gantt._prevent_touch_scroll) {\r\n\t\t\t\t\tif (source && action_start) {\r\n\t\t\t\t\t\tvar dx = action_start.pageX - source.pageX;\r\n\t\t\t\t\t\tvar dy = action_start.pageY - source.pageY;\r\n\t\t\t\t\t\tif (!scroll_mode && (Math.abs(dx) > 5 || Math.abs(dy) > 5)) {\r\n\t\t\t\t\t\t\tgantt._touch_scroll_active = scroll_mode = true;\r\n\t\t\t\t\t\t\tdblclicktime = 0;\r\n\t\t\t\t\t\t\tscroll_state = gantt.getScrollState();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (scroll_mode) {\r\n\t\t\t\t\t\t\tgantt.scrollTo(scroll_state.x + dx, scroll_state.y + dy);\r\n\t\t\t\t\t\t\tvar new_scroll_state = gantt.getScrollState();\r\n\r\n\t\t\t\t\t\t\tif ((scroll_state.x != new_scroll_state.x && dy > 2 * dx) ||\r\n\t\t\t\t\t\t\t\t(scroll_state.y != new_scroll_state.y && dx > 2 * dy )) {\r\n\t\t\t\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn block_action(e);\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}]);\r\n\r\n\r\n\t\t//block touch context menu in IE10\r\n\t\ttouchHandlers.push([this.$container, \"contextmenu\", function (e) {\r\n\t\t\tif (action_mode)\r\n\t\t\t\treturn block_action(e);\r\n\t\t}]);\r\n\r\n\t\t//touch start\r\n\t\ttouchHandlers.push([this.$container, names[1], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (e.touches && e.touches.length > 1) {\r\n\t\t\t\taction_mode = false;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\taction_start = accessor(e);\r\n\t\t\tif (!gantt._locate_css(action_start, \"gantt_hor_scroll\") && !gantt._locate_css(action_start, \"gantt_ver_scroll\")) {\r\n\t\t\t\taction_mode = true;\r\n\t\t\t}\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\t//long tap\r\n\t\t\tlong_tap_timer = setTimeout(function () {\r\n\t\t\t\tvar taskId = gantt.locate(action_start);\r\n\t\t\t\tif (_tasks_dnd && (taskId && !gantt._locate_css(action_start, \"gantt_link_control\") && !gantt._locate_css(action_start, \"gantt_grid_data\"))) {\r\n\t\t\t\t\t_tasks_dnd.on_mouse_down(action_start);\r\n\r\n\t\t\t\t\tif (_tasks_dnd.drag && _tasks_dnd.drag.start_drag) {\r\n\t\t\t\t\t\tcloneTaskRendered(taskId);\r\n\t\t\t\t\t\t_tasks_dnd._start_dnd(action_start);\r\n\t\t\t\t\t\tgantt._touch_drag = true;\r\n\r\n\t\t\t\t\t\tgantt.refreshTask(taskId);\r\n\r\n\t\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlong_tap_timer = null;\r\n\t\t\t}, gantt.config.touch_drag);\r\n\t\t}]);\r\n\r\n\t\t//touch end\r\n\t\ttouchHandlers.push([this.$container, names[2], function (e) {\r\n\t\t\tif (ignore(e)) return;\r\n\t\t\tif (long_tap_timer) clearTimeout(long_tap_timer);\r\n\t\t\tgantt._touch_drag = false;\r\n\t\t\taction_mode = false;\r\n\t\t\tvar source = accessor(e);\r\n\r\n\t\t\tvar _tasks_dnd = getTaskDND();\r\n\r\n\t\t\tif(_tasks_dnd)\r\n\t\t\t\t_tasks_dnd.on_mouse_up(source);\r\n\r\n\t\t\tif (current_target) {\r\n\t\t\t\tgantt.refreshTask(gantt.locate(current_target));\r\n\t\t\t\tif (current_target.parentNode) {\r\n\t\t\t\t\tcurrent_target.parentNode.removeChild(current_target);\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tgantt._touch_scroll_active = action_mode = scroll_mode = false;\r\n\t\t\tcurrent_target = null;\r\n\r\n\t\t\t//dbl-tap handling\r\n\t\t\tif (action_start && dblclicktime) {\r\n\t\t\t\tvar now = new Date();\r\n\t\t\t\tif ((now - dblclicktime) < 500) {\r\n\r\n\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\tmouseEvents.onDoubleClick(action_start);\r\n\t\t\t\t\tblock_action(e);\r\n\t\t\t\t} else\r\n\t\t\t\t\tdblclicktime = now;\r\n\t\t\t} else {\r\n\t\t\t\tdblclicktime = new Date();\r\n\t\t\t}\r\n\t\t}]);\r\n\r\n\t\tfor(var i = 0; i < touchHandlers.length; i++){\r\n\t\t\tgantt.event(touchHandlers[i][0], touchHandlers[i][1], touchHandlers[i][2]);\r\n\t\t}\r\n\r\n\t\t//common helper, prevents event\r\n\t\tfunction block_action(e) {\r\n\t\t\tif (e && e.preventDefault)\r\n\t\t\t\te.preventDefault();\r\n\t\t\t(e || event).cancelBubble = true;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tfunction cloneTaskRendered(taskId) {\r\n\t\t\tvar renders = gantt._getTaskLayers();\r\n\t\t\tvar task = gantt.getTask(taskId);\r\n\t\t\tif (task && gantt.isTaskVisible(taskId)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\t\t\ttask = renders[i].rendered[taskId];\r\n\t\t\t\t\tif (task && task.getAttribute(gantt.config.task_attribute) && task.getAttribute(gantt.config.task_attribute) == taskId) {\r\n\t\t\t\t\t\tvar copy = task.cloneNode(true);\r\n\t\t\t\t\t\tcurrent_target = task;\r\n\t\t\t\t\t\trenders[i].rendered[taskId] = copy;\r\n\t\t\t\t\t\ttask.style.display = \"none\";\r\n\t\t\t\t\t\tcopy.className += \" gantt_drag_move \";\r\n\t\t\t\t\t\ttask.parentNode.appendChild(copy);\r\n\t\t\t\t\t\t//return copy;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n};","module.exports = function(gantt) {\r\ngantt.skins[\"contrast_white\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","module.exports = function(gantt) {\r\ngantt.skins[\"contrast_black\"] = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:100,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","module.exports = function(gantt) {\r\n\tgantt.skins.material = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 411,\r\n\t\t\trow_height: 34,\r\n\t\t\ttask_height_offset: 6,\r\n\t\t\tscale_height: 36,\r\n\t\t\tlink_line_width: 2,\r\n\t\t\tlink_arrow_size: 6,\r\n\t\t\tlightbox_additional_height: 80\r\n\t\t},\r\n\t\t_second_column_width: 110,\r\n\t\t_third_column_width: 75,\r\n\t\t_redefine_lightbox_buttons: {\r\n\t\t\t\"buttons_left\": [\"dhx_delete_btn\"],\r\n\t\t\t\"buttons_right\": [\"dhx_save_btn\", \"dhx_cancel_btn\"]\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDrag\", function (id) {\r\n\t\tvar t = gantt.getTaskNode(id);\r\n\t\tif (t) {\r\n\t\t\tt.className += \" gantt_drag_animation\";\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tvar indx = t.className.indexOf(\" gantt_drag_animation\");\r\n\t\t\t\tif (indx > -1) {\r\n\t\t\t\t\tt.className = t.className.slice(0, indx);\r\n\t\t\t\t}\r\n\t\t\t}, 200);\r\n\t\t}\r\n\t});\r\n\r\n};","module.exports = function(gantt) {\r\n\tgantt.skins.broadway = {\r\n\t\tconfig: {\r\n\t\t\tgrid_width: 360,\r\n\t\t\trow_height: 35,\r\n\t\t\tscale_height: 35,\r\n\t\t\tlink_line_width: 1,\r\n\t\t\tlink_arrow_size: 7,\r\n\t\t\tlightbox_additional_height: 86\r\n\t\t},\r\n\t\t_second_column_width: 90,\r\n\t\t_third_column_width: 80,\r\n\r\n\t\t_lightbox_template: \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span><div class='gantt_cancel_btn'></div></div><div class='gantt_cal_larea'></div>\",\r\n\t\t_config_buttons_left: {},\r\n\t\t_config_buttons_right: {\r\n\t\t\t\"gantt_delete_btn\": \"icon_delete\",\r\n\t\t\t\"gantt_save_btn\": \"icon_save\"\r\n\t\t}\r\n\t};\r\n};","module.exports = function(gantt) {\r\ngantt.skins.terrace = {\r\n\tconfig:{\r\n\t\tgrid_width:360,\r\n\t\trow_height: 35,\r\n\t\tscale_height: 35,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:90,\r\n\t_third_column_width:70\t\t\r\n};\r\n\r\n};","module.exports = function(gantt) {\r\ngantt.skins.meadow = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 30,\r\n\t\tlink_line_width:2,\r\n\t\tlink_arrow_size:6,\r\n\t\tlightbox_additional_height:72\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","module.exports = function(gantt) {\r\ngantt.skins.skyblue = {\r\n\tconfig:{\r\n\t\tgrid_width:350,\r\n\t\trow_height: 27,\r\n\t\tscale_height: 27,\r\n\t\tlink_line_width:1,\r\n\t\tlink_arrow_size:8,\r\n\t\tlightbox_additional_height:75\r\n\t},\r\n\t_second_column_width:95,\r\n\t_third_column_width:80\r\n};\r\n\r\n};","function _configure(col, data, force) {\r\n\tfor (var key in data)\r\n\t\tif (typeof col[key] == \"undefined\" || force)\r\n\t\t\tcol[key] = data[key];\r\n}\r\n\r\nfunction _get_skin(force, gantt) {\r\n\tvar skin = gantt.skin;\r\n\tif (!skin || force) {\r\n\t\tvar links = document.getElementsByTagName(\"link\");\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar res = links[i].href.match(\"dhtmlxgantt_([a-z\\_]+).css\");\r\n\t\t\tif (res) {\r\n\t\t\t\tif (gantt.skins[res[1]] || !skin) {\r\n\t\t\t\t\tskin = res[1];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.skin = skin || \"terrace\";\r\n\tvar skinset = gantt.skins[gantt.skin] || gantt.skins[\"terrace\"];\r\n\r\n\t//apply skin related settings\r\n\t_configure(gantt.config, skinset.config, force);\r\n\r\n\tvar config = gantt.getGridColumns();\r\n\tif (config[1] && !gantt.defined(config[1].width))\r\n\t\tconfig[1].width = skinset._second_column_width;\r\n\tif (config[2] && !gantt.defined(config[2].width))\r\n\t\tconfig[2].width = skinset._third_column_width;\r\n\t\r\n\tfor (var i=0; i<config.length; i++) {\r\n\t\tvar column = config[i];\r\n\t\tif (column.name == \"add\") {\r\n\t\t\tif(!column.width){\r\n\t\t\t\tcolumn.width = 44;\r\n\t\t\t}\r\n\t\t\tif (!(gantt.defined(column.min_width) && gantt.defined(column.max_width))) {\r\n\t\t\t\tcolumn.min_width = column.min_width || column.width;\r\n\t\t\t\tcolumn.max_width = column.max_width || column.width;\r\n\t\t\t}\r\n\t\t\tif (column.min_width)\r\n\t\t\t\tcolumn.min_width = +column.min_width;\r\n\t\t\tif (column.max_width)\r\n\t\t\t\tcolumn.max_width = +column.max_width;\r\n\t\t\tif (column.width) {\r\n\t\t\t\tcolumn.width = +column.width;\r\n\t\t\t\tcolumn.width = (column.min_width && column.min_width > column.width) ? column.min_width : column.width;\r\n\t\t\t\tcolumn.width = (column.max_width && column.max_width < column.width) ? column.max_width : column.width;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (skinset.config.task_height)\r\n\t\tgantt.config.task_height = skinset.config.task_height || \"full\"; \r\n\r\n\tif (skinset._lightbox_template)\r\n\t\tgantt._lightbox_template = skinset._lightbox_template;\r\n\r\n\tif (skinset._redefine_lightbox_buttons) {\r\n\t\tgantt.config.buttons_right = skinset._redefine_lightbox_buttons[\"buttons_right\"];\r\n\t\tgantt.config.buttons_left = skinset._redefine_lightbox_buttons[\"buttons_left\"];\r\n\t}\r\n\r\n\r\n\tgantt.resetLightbox();\r\n}\r\n\r\nmodule.exports = function(gantt) {\r\n\tif(!gantt.resetSkin){\r\n\t\tgantt.resetSkin = function () {\r\n\t\t\tthis.skin = \"\";\r\n\t\t\t_get_skin(true, this);\r\n\t\t};\r\n\t\tgantt.skins = {};\r\n\r\n\t\tgantt.attachEvent(\"onGanttLayoutReady\", function(){\r\n\t\t\t_get_skin(false, this);\r\n\t\t});\r\n\t}\r\n};","/*\r\n reuse results of functions that can be recalculated during rendering\r\n greatly increases the rendering speed when critical path enabled\r\n Sample - 94_dev/critical_path.html\r\n\r\n */\r\nmodule.exports = function(gantt){\r\n\r\ngantt._cached_functions = {\r\n\tcache: {},\r\n\tmode: false,\r\n\tcritical_path_mode: false,\r\n\twrap_methods : function(methods, object){\r\n\t\tif(object._prefetch_originals){\r\n\t\t\tfor(var i in object._prefetch_originals){\r\n\t\t\t\tobject[i] = object._prefetch_originals[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tobject._prefetch_originals = {};\r\n\t\tfor(var i = 0; i < methods.length; i++)\r\n\t\t\tthis.prefetch(methods[i], object);\r\n\r\n\t},\r\n\tprefetch : function(methodname, host){\r\n\t\tvar original = host[methodname];\r\n\t\tif(original){\r\n\t\t\tvar optimizer = this;\r\n\r\n\t\t\thost._prefetch_originals[methodname] = original;\r\n\t\t\thost[methodname] = function get_prefetched_value(){\r\n\r\n\t\t\t\tvar argumentsArray = new Array(arguments.length);\r\n\t\t\t\tfor (var i = 0, l = arguments.length; i < l; i++) {\r\n\t\t\t\t\targumentsArray[i] = arguments[i];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(optimizer.active){\r\n\t\t\t\t\tvar args = optimizer.get_arguments_hash(Array.prototype.slice.call(argumentsArray));\r\n\t\t\t\t\tif(!optimizer.cache[methodname]){\r\n\t\t\t\t\t\toptimizer.cache[methodname] = {};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar cached_values = optimizer.cache[methodname];\r\n\r\n\t\t\t\t\tif(optimizer.has_cached_value(cached_values, args)){\r\n\t\t\t\t\t\treturn optimizer.get_cached_value(cached_values, args);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar value = original.apply(this, argumentsArray);\r\n\t\t\t\t\t\toptimizer.cache_value(cached_values, args, value);\r\n\t\t\t\t\t\treturn value;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn original.apply(this, argumentsArray);\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn original;\r\n\t},\r\n\tcache_value: function(cache, arguments_hash, value){\r\n\t\tif(this.is_date(value))\r\n\t\t\tvalue = new Date(value);\r\n\t\tcache[arguments_hash] = value;\r\n\t},\r\n\thas_cached_value: function(cache, arguments_hash){\r\n\t\treturn cache.hasOwnProperty(arguments_hash);\r\n\t},\r\n\tget_cached_value: function(cache, arguments_hash){\r\n\t\tvar data = cache[arguments_hash];\r\n\r\n\t\t//for cached dates - return copy\r\n\t\tif(this.is_date(data)){\r\n\t\t\tdata = new Date(data);\r\n\t\t}\r\n\t\treturn data;\r\n\t},\r\n\tis_date: function(value){\r\n\t\treturn (value && value.getUTCDate);\r\n\t},\r\n\tget_arguments_hash:function(args){\r\n\t\tvar values = [];\r\n\t\tfor(var i = 0; i < args.length; i++){\r\n\t\t\tvalues.push(this.stringify_argument(args[i]));\r\n\t\t}\r\n\t\treturn \"(\" + values.join(\";\") + \")\";\r\n\t},\r\n\tstringify_argument: function(value){\r\n\t\t//expecting task or link, or any other data entries, dates and primitive values\r\n\t\tvar ret = \"\";\r\n\t\tif(value.id){\r\n\t\t\tret = value.id;\r\n\t\t}else if(this.is_date(value)){\r\n\t\t\tret = value.valueOf();\r\n\t\t}else{\r\n\t\t\tret = value;\r\n\t\t}\r\n\t\treturn ret + \"\";\r\n\t},\r\n\tactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = true;\r\n\t},\r\n\tdeactivate: function(){\r\n\t\tthis.clear();\r\n\t\tthis.active = false;\r\n\t},\r\n\tclear: function(){\r\n\t\tthis.cache = {};\r\n\t},\r\n\r\n\tsetup: function(gantt){\r\n\t\tvar override_gantt = [];\r\n\r\n\t\tvar gantt_methods  = [\r\n\t\t\t'_isProjectEnd',\r\n\t\t\t'_getProjectEnd',\r\n\t\t\t'_getSlack'\r\n\t\t];\r\n\r\n\r\n\r\n\t\tif(this.mode == 'auto'){\r\n\t\t\tif(gantt.config.highlight_critical_path){\r\n\t\t\t\toverride_gantt = gantt_methods;\r\n\t\t\t}\r\n\t\t}else if(this.mode === true){\r\n\t\t\toverride_gantt = gantt_methods;\r\n\t\t}\r\n\r\n\t\tthis.wrap_methods(override_gantt, gantt);\r\n\r\n\t},\r\n\tupdate_if_changed: function(gantt){\r\n\t\tvar changed = (this.critical_path_mode != gantt.config.highlight_critical_path ||\r\n\t\t\t\t\t\tthis.mode !== gantt.config.optimize_render);\r\n\t\tif(changed){\r\n\t\t\tthis.critical_path_mode = gantt.config.highlight_critical_path;\r\n\t\t\tthis.mode = gantt.config.optimize_render;\r\n\t\t\tthis.setup(gantt);\r\n\t\t}\r\n\t}\r\n};\r\n\r\nfunction activate(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\tif(!gantt._cached_functions.active){\r\n\t\tgantt._cached_functions.activate();\r\n\t}\r\n\treturn true;\r\n}\r\ngantt.attachEvent(\"onBeforeGanttRender\", activate);\r\ngantt.attachEvent(\"onBeforeDataRender\", activate);\r\ngantt.attachEvent(\"onBeforeSmartRender\",  function(){\r\n\tactivate();\r\n});\r\ngantt.attachEvent(\"onBeforeParse\", activate);\r\ngantt.attachEvent(\"onDataRender\", function(){\r\n\tgantt._cached_functions.deactivate();\r\n});\r\nvar deactivTimeout = null;\r\ngantt.attachEvent(\"onSmartRender\", function(){\r\n\tif(deactivTimeout)\r\n\t\tclearTimeout(deactivTimeout);\r\n\tdeactivTimeout = setTimeout(function(){\r\n\t\tgantt._cached_functions.deactivate();\r\n\t}, 1000);\r\n});\r\n\r\ngantt.attachEvent(\"onBeforeGanttReady\", function(){\r\n\tgantt._cached_functions.update_if_changed(gantt);\r\n\treturn true;\r\n});\r\n\r\n};","module.exports = function(gantt) {\r\n\r\n\tgantt.getTaskType = function (type) {\r\n\t\treturn \"task\";\r\n\t};\r\n};","module.exports = function(gantt) {\r\n\r\n\tgantt._extend_to_optional = function (lightbox_block) {\r\n\r\n\t\tvar duration = lightbox_block;\r\n\t\tvar optional_time = {\r\n\t\t\trender: duration.render,\r\n\t\t\tfocus: duration.focus,\r\n\t\t\tset_value: function (node, value, task, section) {\r\n\t\t\t\tvar mapping = gantt._resolve_default_mapping(section);\r\n\t\t\t\tif (!task[mapping.start_date] || (mapping.start_date == \"start_date\" && this._isAllowedUnscheduledTask(task))) {\r\n\t\t\t\t\toptional_time.disable(node, section);\r\n\t\t\t\t\tvar val = {};\r\n\r\n\t\t\t\t\tfor (var i in mapping) {\r\n\t\t\t\t\t\t//take default values from the time control from task start/end dates\r\n\t\t\t\t\t\tval[mapping[i]] = task[i];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, val, section);//set default value\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.enable(node, section);\r\n\t\t\t\t\treturn duration.set_value.call(gantt, node, value, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tget_value: function (node, task, section) {\r\n\t\t\t\tif (section.disabled) {\r\n\t\t\t\t\treturn {start_date: null};\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn duration.get_value.call(gantt, node, task, section);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdate_block: function (node, section) {\r\n\t\t\t\tgantt.callEvent(\"onSectionToggle\", [gantt._lightbox_id, section]);\r\n\t\t\t\tnode.style.display = section.disabled ? \"none\" : \"block\";\r\n\r\n\t\t\t\tif (section.button) {\r\n\t\t\t\t\tvar button = node.previousSibling.querySelector(\".gantt_custom_button_label\"),\r\n\t\t\t\t\t\tlabels = gantt.locale.labels;\r\n\r\n\t\t\t\t\tvar button_text = section.disabled ? labels[section.name + \"_enable_button\"] : labels[section.name + \"_disable_button\"];\r\n\r\n\t\t\t\t\tbutton.innerHTML = button_text;\r\n\t\t\t\t}\r\n\t\t\t\tgantt.resizeLightbox();\r\n\t\t\t},\r\n\t\t\tdisable: function (node, section) {\r\n\t\t\t\tsection.disabled = true;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\r\n\t\t\t},\r\n\t\t\tenable: function (node, section) {\r\n\t\t\t\tsection.disabled = false;\r\n\t\t\t\toptional_time.update_block(node, section);\r\n\t\t\t},\r\n\t\t\tbutton_click: function (index, el, section, container) {\r\n\t\t\t\tif (gantt.callEvent(\"onSectionButton\", [gantt._lightbox_id, section]) === false) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar config = gantt._get_typed_lightbox_config()[index];\r\n\t\t\t\tif (config.disabled) {\r\n\t\t\t\t\toptional_time.enable(container, config);\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptional_time.disable(container, config);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn optional_time;\r\n\t};\r\n\r\n\tgantt.form_blocks.duration_optional = gantt._extend_to_optional(gantt.form_blocks.duration);\r\n\tgantt.form_blocks.time_optional = gantt._extend_to_optional(gantt.form_blocks.time);\r\n\r\n};","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./select_control\")(gantt);\r\n\r\n\tfunction ParentControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(ParentControl, _super);\r\n\r\n\r\n\tParentControl.prototype.render = function(sns) {\r\n\t\treturn _display(sns, false);\r\n\t};\r\n\r\n\tParentControl.prototype.set_value = function(node, value, ev, config) {\r\n\t\tvar tmpDom = document.createElement(\"div\");\r\n\t\ttmpDom.innerHTML = _display(config, ev.id);\r\n\t\tvar newOptions = tmpDom.removeChild(tmpDom.firstChild);\r\n\t\tnode.onselect = null;\r\n\t\tnode.parentNode.replaceChild(newOptions, node);\r\n\r\n\t\treturn gantt.form_blocks.select.set_value.apply(gantt, [newOptions, value, ev, config]);\r\n\t};\r\n\r\n\tfunction _display(config, item_id) {\r\n\t\tvar tasks = [],\r\n\t\t\toptions = [];\r\n\t\tif (item_id) {\r\n\t\t\ttasks = gantt.getTaskByTime();\r\n\t\t\tif (config.allow_root) {\r\n\t\t\t\ttasks.unshift({id: gantt.config.root_id, text: config.root_label || \"\"});\r\n\t\t\t}\r\n\t\t\ttasks = _filter(tasks, config, item_id);\r\n\t\t\tif (config.sort) {\r\n\t\t\t\ttasks.sort(config.sort);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar text = config.template || gantt.templates.task_text;\r\n\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\tvar label = text.apply(gantt, [tasks[i].start_date, tasks[i].end_date, tasks[i]]);\r\n\t\t\tif (label === undefined) {\r\n\t\t\t\tlabel = \"\";\r\n\t\t\t}\r\n\t\t\toptions.push({\r\n\t\t\t\tkey: tasks[i].id,\r\n\t\t\t\tlabel: label\r\n\t\t\t});\r\n\t\t}\r\n\t\tconfig.options = options;\r\n\t\tconfig.map_to = config.map_to || \"parent\";\r\n\t\treturn gantt.form_blocks.select.render.apply(this, arguments);\r\n\t}\r\n\r\n\tfunction _filter(options, config, item_id) {\r\n\t\tvar filter = config.filter || function() {\r\n\t\t\treturn true;\r\n\t\t};\r\n\r\n\t\toptions = options.slice(0);\r\n\r\n\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\tvar task = options[i];\r\n\t\t\tif (task.id == item_id || gantt.isChildOf(task.id, item_id) || filter(task.id, task) === false) {\r\n\t\t\t\toptions.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn options;\r\n\t}\r\n\treturn ParentControl;\r\n};","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction DurationControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(DurationControl, _super);\r\n\r\n\tDurationControl.prototype.render = function(sns) {\r\n\t\tvar time = \"<div class='gantt_time_selects'>\" + gantt.form_blocks.getTimePicker.call(this, sns) + \"</div>\";\r\n\t\tvar label = gantt.locale.labels[gantt.config.duration_unit + \"s\"];\r\n\t\tvar singleDate = sns.single_date ? \" style='display:none'\" : \"\";\r\n\t\tvar readonly = sns.readonly ? \" disabled='disabled'\" : \"\";\r\n\t\tvar ariaAttr = gantt._waiAria.lightboxDurationInputAttrString(sns);\r\n\t\tvar duration = \"<div class='gantt_duration' \" + singleDate + \">\" +\r\n\t\t\t\"<input type='button' class='gantt_duration_dec' value='−'\" + readonly + \">\" +\r\n\t\t\t\"<input type='text' value='5' class='gantt_duration_value'\" + readonly + \" \" + ariaAttr + \">\" +\r\n\t\t\t\"<input type='button' class='gantt_duration_inc' value='+'\" + readonly + \"> \" + label + \" <span></span>\" +\r\n\t\t\t\"</div>\";\r\n\t\tvar html = \"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;' class='gantt_section_time'>\" + time + \" \" + duration + \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tDurationControl.prototype.set_value = function(node, value, ev, config) {\r\n\t\tvar cfg = config;\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar inps = node.getElementsByTagName(\"input\");\r\n\t\tvar duration = inps[1];\r\n\t\tvar btns = [inps[0], inps[2]];\r\n\t\tvar endspan = node.getElementsByTagName(\"span\")[0];\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar mapping;\r\n\t\tvar start_date;\r\n\t\tvar end_date;\r\n\t\tvar duration_val;\r\n\r\n\t\tfunction _calc_date() {\r\n\t\t\tvar start_date = _getStartDate.call(gantt, node, config);\r\n\t\t\tvar duration = _getDuration.call(gantt, node, config);\r\n\t\t\tvar end_date = gantt.calculateEndDate({start_date: start_date, duration: duration, task: ev});\r\n\r\n\t\t\tendspan.innerHTML = gantt.templates.task_date(end_date);\r\n\t\t}\r\n\r\n\t\tfunction _change_duration(step) {\r\n\t\t\tvar value = duration.value;\r\n\r\n\t\t\tvalue = parseInt(value, 10);\r\n\t\t\tif (window.isNaN(value))\r\n\t\t\t\tvalue = 0;\r\n\t\t\tvalue += step;\r\n\t\t\tif (value < 1) value = 1;\r\n\t\t\tduration.value = value;\r\n\t\t\t_calc_date();\r\n\t\t}\r\n\r\n\t\tbtns[0].onclick = gantt.bind(function() {\r\n\t\t\t_change_duration(-1 * gantt.config.duration_step);\r\n\t\t}, this);\r\n\t\tbtns[1].onclick = gantt.bind(function() {\r\n\t\t\t_change_duration(1 * gantt.config.duration_step);\r\n\t\t}, this);\r\n\t\ts[0].onchange = _calc_date;\r\n\t\ts[1].onchange = _calc_date;\r\n\t\ts[2].onchange = _calc_date;\r\n\t\tif (s[3]) s[3].onchange = _calc_date;\r\n\r\n\t\tduration.onkeydown = gantt.bind(function(e) {\r\n\t\t\tvar code; \r\n\r\n\t\t\te = e || window.event;\r\n\t\t\tcode = (e.charCode || e.keyCode || e.which);\r\n\t\t\t\r\n\t\t\tif (code == gantt.constants.KEY_CODES.DOWN) {\r\n\t\t\t\t_change_duration(-1 * gantt.config.duration_step);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tif (code == gantt.constants.KEY_CODES.UP) {\r\n\t\t\t\t_change_duration(1 * gantt.config.duration_step);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\twindow.setTimeout(_calc_date, 1);\r\n\t\t}, this);\r\n\r\n\t\tduration.onchange = gantt.bind(_calc_date, this);\r\n\r\n\t\tmapping = gantt._resolve_default_mapping(config);\r\n\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\tstart_date = ev[mapping.start_date] || new Date();\r\n\t\tend_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tduration: 1,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\t\tduration_val = Math.round(ev[mapping.duration]) || gantt.calculateDuration({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tend_date: end_date,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\tduration.value = duration_val;\r\n\t\t_calc_date();\r\n\t};\r\n\r\n\tDurationControl.prototype.get_value = function(node, ev, config) {\r\n\t\tvar startDate = _getStartDate(node, config);\r\n\t\tvar duration = _getDuration(node, config);\r\n\t\tvar endDate = gantt.calculateEndDate({start_date: startDate, duration: duration, task: ev});\r\n\r\n\t\tif (typeof gantt._resolve_default_mapping(config) == \"string\") {\r\n\t\t\treturn startDate;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: startDate,\r\n\t\t\tend_date: endDate,\r\n\t\t\tduration: duration\r\n\t\t};\r\n\t};\r\n\r\n\tDurationControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t};\r\n\r\n\r\n\tfunction _getStartDate(node, config) {\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar hours = 0;\r\n\t\tvar minutes = 0;\r\n\r\n\t\tif (gantt.defined(map[3])) {\r\n\t\t\tvar input = s[map[3]];\r\n\t\t\tvar time = parseInt(input.value, 10);\r\n\t\t\tif (isNaN(time) && input.hasAttribute(\"data-value\")) {\r\n\t\t\t\ttime = parseInt(input.getAttribute(\"data-value\"), 10);\r\n\t\t\t}\r\n\r\n\t\t\thours = Math.floor(time / 60);\r\n\t\t\tminutes = time % 60;\r\n\t\t}\r\n\t\treturn new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, hours, minutes);\r\n\t}\r\n\r\n\tfunction _getDuration(node) {\r\n\t\tvar duration = node.getElementsByTagName(\"input\")[1];\r\n\r\n\t\tduration = parseInt(duration.value, 10);\r\n\t\tif (!duration || window.isNaN(duration)) duration = 1;\r\n\t\tif (duration < 0) duration *= -1;\r\n\t\treturn duration;\r\n\t}\r\n\r\n\r\n\treturn DurationControl; \r\n};","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction RadioControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(RadioControl, _super);\r\n\r\n\tRadioControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'>\";\r\n\r\n\t\tif (sns.options && sns.options.length) {\r\n\t\t\tfor (var i = 0; i < sns.options.length; i++) {\r\n\t\t\t\thtml += \"<label><input type='radio' value='\" + sns.options[i].key + \"' name='\" + sns.name + \"'>\" + sns.options[i].label + \"</label>\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tRadioControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar radio;\r\n\r\n\t\tif (!sns.options || !sns.options.length) return;\r\n\r\n\t\tradio = node.querySelector(\"input[type=radio][value='\" + value + \"']\") ||\r\n\t\t\t\tnode.querySelector(\"input[type=radio][value='\" + sns.default_value + \"']\");\r\n\r\n\t\tif (!radio) return;\r\n\r\n\t\tif (!node._dhx_onchange && sns.onchange) {\r\n\t\t\tnode.onchange = sns.onchange;\r\n\t\t\tnode._dhx_onchange = true;\r\n\t\t}\r\n\r\n\t\tradio.checked = true;\r\n\t};\r\n\r\n\tRadioControl.prototype.get_value = function(node, ev) {\r\n\t\tvar result = node.querySelector(\"input[type=radio]:checked\");\r\n\r\n\t\treturn result ? result.value : \"\";\r\n\t};\r\n\r\n\tRadioControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.querySelector(\"input[type=radio]\"));\r\n\t};\r\n\r\n\treturn RadioControl;\r\n};","var helpers = require(\"../../../utils/helpers\");\r\nvar __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction CheckboxControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(CheckboxControl, _super);\r\n\r\n\tCheckboxControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"23\") + \"px\";\r\n\t\tvar html = \"<div class='gantt_cal_ltext' style='height:\" + height + \";'>\";\r\n\r\n\t\tif (sns.options && sns.options.length) {\r\n\t\t\tfor (var i = 0; i < sns.options.length; i++) {\r\n\t\t\t\thtml += \"<label><input type='checkbox' value='\" + sns.options[i].key + \"' name='\" + sns.name + \"'>\" + sns.options[i].label + \"</label>\";\r\n\t\t\t}\r\n\t\t}\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tCheckboxControl.prototype.set_value = function(node, value, ev, sns) {\r\n\t\tvar checkboxes = Array.prototype.slice.call(node.querySelectorAll(\"input[type=checkbox]\"));\r\n\r\n\t\tif (!node._dhx_onchange && sns.onchange) {\r\n\t\t\tnode.onchange = sns.onchange;\r\n\t\t\tnode._dhx_onchange = true;\r\n\t\t}\r\n\r\n\t\thelpers.forEach(checkboxes, function(entry) {\r\n\t\t\tentry.checked = value ? value.indexOf(entry.value) >= 0 : false;\r\n\t\t});\r\n\t};\r\n\r\n\tCheckboxControl.prototype.get_value = function(node) {\r\n\t\treturn helpers.arrayMap(Array.prototype.slice.call(node.querySelectorAll(\"input[type=checkbox]:checked\")), function(entry) {\r\n\t\t\treturn entry.value;\r\n\t\t});\r\n\t};\r\n\r\n\tCheckboxControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.querySelector(\"input[type=checkbox]\"));\r\n\t};\r\n\r\n\treturn CheckboxControl;\r\n};","var helpers = require(\"./helpers\");\r\n\r\nvar htmlHelpers = {\r\n\tgetHtmlSelect: function(options, attributes, value) {\r\n\t\tvar innerHTML = \"\";\r\n\t\tvar _this = this;\r\n\r\n\t\toptions = options || [];\r\n\t\t\r\n\t\thelpers.forEach(options, function(entry) {\r\n\t\t\tvar _attributes = [{ key: \"value\", value: entry.key }];\r\n\r\n\t\t\tif (value == entry.key) {\r\n\t\t\t\t_attributes[_attributes.length] = { key: \"selected\", value: \"selected\" };\r\n\t\t\t}\r\n\t\t\tif (entry.attributes) {\r\n\t\t\t\t_attributes = _attributes.concat(entry.attributes);\r\n\t\t\t}\r\n\t\t\tinnerHTML += _this.getHtmlOption({ innerHTML: entry.label }, _attributes);\r\n\t\t});\r\n\r\n\t\treturn _getHtmlContainer(\"select\", { innerHTML: innerHTML }, attributes);\r\n\t},\r\n\tgetHtmlOption: function(options, attributes) { return _getHtmlContainer(\"option\", options, attributes); },\r\n\tgetHtmlButton: function(options, attributes) { return _getHtmlContainer(\"button\", options, attributes); },\r\n\tgetHtmlDiv: function(options, attributes) { return _getHtmlContainer(\"div\", options, attributes); },\r\n\tgetHtmlLabel: function(options, attributes) { return _getHtmlContainer(\"label\", options, attributes); },\r\n\tgetHtmlInput: function(attributes) {\r\n\t\treturn \"<input\" + _getHtmlAttributes(attributes || []) + \">\";\r\n\t}\r\n};\r\n\r\nfunction _getHtmlContainer(tag, options, attributes) {\r\n\tvar html;\r\n\r\n\toptions = options || [];\r\n\t\r\n\thtml = \"<\" + tag + _getHtmlAttributes(attributes || []) + \">\" + (options.innerHTML || \"\") + \"</\" + tag +\">\";\r\n\treturn html;\r\n\r\n}\r\n\r\nfunction _getHtmlAttributes(attributes) {\r\n\tvar html = \"\";\r\n\r\n\thelpers.forEach(attributes, function(entry) {\r\n\t\thtml += \" \" + entry.key + \"='\" + entry.value + \"'\";\r\n\t});\r\n\treturn html;\r\n}\r\n\r\nmodule.exports = htmlHelpers;","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction TimeControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(TimeControl, _super);\r\n\r\n\r\n\tTimeControl.prototype.render = function(sns) {\r\n\t\tvar time = gantt.form_blocks.getTimePicker.call(this, sns);\r\n\t\tvar html = \"<div style='height:\" + (sns.height || 30) + \"px;padding-top:0px;font-size:inherit;text-align:center;' class='gantt_section_time'>\";\r\n\t\thtml += time;\r\n\r\n\t\tif (sns.single_date) {\r\n\t\t\ttime = gantt.form_blocks.getTimePicker.call(this, sns, true);\r\n\t\t\thtml += \"<span></span>\";\r\n\t\t} else {\r\n\t\t\thtml += \"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>\";\r\n\t\t}\r\n\r\n\t\thtml += time;\r\n\t\thtml += \"</div>\";\r\n\t\treturn html;\r\n\t};\r\n\r\n\tTimeControl.prototype.set_value = function(node, value, ev, config) {\r\n\t\tvar cfg = config;\r\n\t\tvar s = node.getElementsByTagName(\"select\");\r\n\t\tvar map = config._time_format_order;\r\n\r\n\t\tif (cfg.auto_end_date) {\r\n\t\t\tvar _update_lightbox_select = function() {\r\n\t\t\t\tstart_date = new Date(s[map[2]].value, s[map[1]].value, s[map[0]].value, 0, 0);\r\n\t\t\t\tend_date = gantt.calculateEndDate({start_date: start_date, duration: 1, task: ev});\r\n\t\t\t\tgantt.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t\t\t};\r\n\t\t\tfor (var i = 0; i < 4; i++) {\r\n\t\t\t\ts[i].onchange = _update_lightbox_select;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar mapping = gantt._resolve_default_mapping(config);\r\n\r\n\t\tif (typeof(mapping) === \"string\") mapping = {start_date: mapping};\r\n\r\n\t\tvar start_date = ev[mapping.start_date] || new Date();\r\n\t\tvar end_date = ev[mapping.end_date] || gantt.calculateEndDate({\r\n\t\t\tstart_date: start_date,\r\n\t\t\tduration: 1,\r\n\t\t\ttask: ev\r\n\t\t});\r\n\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, 0, start_date, map, cfg);\r\n\t\tgantt.form_blocks._fill_lightbox_select(s, map.size, end_date, map, cfg);\r\n\t};\r\n\r\n\tTimeControl.prototype.get_value = function(node, ev, config) {\r\n\t\tvar selects = node.getElementsByTagName(\"select\");\r\n\t\tvar map = config._time_format_order;\r\n\t\tvar needSetTime = gantt.defined(map[3]);\r\n\t\tvar startDate;\r\n\r\n\t\tfunction _getEndDate(selects, map, needSetTime, startDate) {\r\n\t\t\tvar endDate = _getDate(selects, map, needSetTime, map.size);\r\n\r\n\t\t\tif (endDate <= startDate) {\r\n\t\t\t\treturn gantt.date.add(startDate, gantt._get_timepicker_step(), \"minute\");\r\n\t\t\t}\r\n\t\t\treturn endDate;\r\n\t\t}\r\n\r\n\t\tfunction _getDate(selects, map, needSetTime, mapOffset) {\r\n\t\t\tvar time;\r\n\t\t\tvar hours = 0;\r\n\t\t\tvar minutes = 0;\r\n\r\n\t\t\tmapOffset = mapOffset || 0;\r\n\r\n\t\t\tif (needSetTime) {\r\n\t\t\t\ttime = parseInt(selects[map[3] + mapOffset].value, 10);\r\n\t\t\t\thours = Math.floor(time / 60);\r\n\t\t\t\tminutes = time % 60;\r\n\t\t\t}\r\n\t\t\treturn new Date(selects[map[2] + mapOffset].value, selects[map[1] + mapOffset].value, selects[map[0] + mapOffset].value, hours, minutes);\r\n\t\t}\r\n\r\n\t\tstartDate = _getDate(selects, map, needSetTime);\r\n\r\n\t\tif (typeof gantt._resolve_default_mapping(config) === \"string\") {\r\n\t\t\treturn startDate;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: startDate,\r\n\t\t\tend_date: _getEndDate(selects, map, needSetTime, startDate)\r\n\t\t};\r\n\t};\r\n\r\n\tTimeControl.prototype.focus = function(node) {\r\n\t\tgantt._focus(node.getElementsByTagName(\"select\")[0]);\r\n\t};\r\n\r\n\treturn TimeControl;\r\n};","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction TextareaControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this;\r\n\r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(TextareaControl, _super);\r\n\r\n\tTextareaControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"130\") + \"px\";\r\n\t\treturn \"<div class='gantt_cal_ltext' style='height:\" + height + \";'><textarea></textarea></div>\";\r\n\t};\r\n\r\n\tTextareaControl.prototype.set_value = function(node, value) {\r\n\t\tgantt.form_blocks.textarea._get_input(node).value = value || \"\";\r\n\t};\r\n\r\n\tTextareaControl.prototype.get_value = function(node) {\r\n\t\treturn gantt.form_blocks.textarea._get_input(node).value;\r\n\t};\r\n\r\n\tTextareaControl.prototype.focus = function(node) {\r\n\t\tvar a = gantt.form_blocks.textarea._get_input(node);\r\n\t\tgantt._focus(a, true);\r\n\t};\r\n\r\n\tTextareaControl.prototype._get_input = function(node) {\r\n\t\treturn node.querySelector(\"textarea\");\r\n\t};\r\n\r\n\treturn TextareaControl;\r\n};","var __extends = require(\"../../../utils/extends\");\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar _super = require(\"./base_control\")(gantt);\r\n\r\n\tfunction TemplateControl() {\r\n\t\tvar self = _super.apply(this, arguments) || this; \r\n\t\treturn self; \r\n\t}\r\n\r\n\t__extends(TemplateControl, _super);\r\n\r\n\r\n\tTemplateControl.prototype.render = function(sns) {\r\n\t\tvar height = (sns.height || \"30\") + \"px\";\r\n\t\treturn \"<div class='gantt_cal_ltext gantt_cal_template' style='height:\" + height + \";'></div>\";\r\n\t};\r\n\r\n\tTemplateControl.prototype.set_value = function(node, value) {\r\n\t\tnode.innerHTML = value || \"\";\r\n\t};\r\n\r\n\tTemplateControl.prototype.get_value = function(node) {\r\n\t\treturn node.innerHTML || \"\";\r\n\t};\r\n\r\n\tTemplateControl.prototype.focus = function() {};\r\n\r\n\treturn TemplateControl;\r\n};","module.exports = function(gantt) {\r\n\tvar domHelpers = require(\"../../utils/dom_helpers\");\r\n\tvar helpers = require(\"../../utils/helpers\");\r\n\r\n\tvar TemplateControl = require(\"./controls/template_control\")(gantt);\r\n\tvar TextareaControl = require(\"./controls/textarea_control\")(gantt);\r\n\tvar TimeControl = require(\"./controls/time_control\")(gantt);\r\n\tvar SelectControl = require(\"./controls/select_control\")(gantt);\r\n\tvar CheckboxControl = require(\"./controls/checkbox_control\")(gantt);\r\n\tvar RadioControl = require(\"./controls/radio_control\")(gantt);\r\n\tvar DurationControl = require(\"./controls/duration_control\")(gantt);\r\n\tvar ParentControl = require(\"./controls/parent_control\")(gantt);\r\n\tvar ResourcesControl = require(\"./controls/resources_control\")(gantt);\r\n\r\n\r\n\tgantt._lightbox_methods = {};\r\n\tgantt._lightbox_template = \"<div class='gantt_cal_ltitle'><span class='gantt_mark'>&nbsp;</span><span class='gantt_time'></span><span class='gantt_title'></span></div><div class='gantt_cal_larea'></div>\";\r\n\r\n\r\n\t//TODO: gantt._lightbox_id is changed from data.js and accessed from autoscheduling, check if it can be removed from gantt object\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"lightbox\", function(){\r\n\t\treturn {\r\n\t\t\tlightbox: gantt._lightbox_id\r\n\t\t};\r\n\t});\r\n\r\n\tgantt.showLightbox = function(id) {\r\n\t\tif (!id || gantt.isReadonly(this.getTask(id))) return;\r\n\t\tif (!this.callEvent(\"onBeforeLightbox\", [id])) return;\r\n\r\n\t\tvar task = this.getTask(id);\r\n\r\n\t\tvar box = this.getLightbox(this.getTaskType(task.type));\r\n\t\tthis._center_lightbox(box);\r\n\t\tthis.showCover();\r\n\t\tthis._fill_lightbox(id, box);\r\n\r\n\t\tthis._waiAria.lightboxVisibleAttr(box);\r\n\r\n\t\tthis.callEvent(\"onLightbox\", [id]);\r\n\t};\r\n\r\n\tfunction _is_chart_visible(gantt) {\r\n\t\tvar timeline = gantt.$ui.getView(\"timeline\");\r\n\t\tif(timeline && timeline.isVisible()){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt._get_timepicker_step = function() {\r\n\t\tif (this.config.round_dnd_dates) {\r\n\t\t\tvar step;\r\n\t\t\tif (_is_chart_visible(this)) {\r\n\t\t\t\tvar scale = gantt.getScale();\r\n\t\t\t\tstep = (helpers.getSecondsInUnit(scale.unit) * scale.step) / 60;//timepicker step is measured in minutes\r\n\t\t\t}\r\n\r\n\t\t\tif(!step || step >= 60 * 24){\r\n\t\t\t\tstep = this.config.time_step;\r\n\t\t\t}\r\n\t\t\treturn step;\r\n\t\t}\r\n\t\treturn this.config.time_step;\r\n\t};\r\n\tgantt.getLabel = function(property, key) {\r\n\t\tvar sections = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sections.length; i++) {\r\n\t\t\tif (sections[i].map_to == property) {\r\n\t\t\t\tvar options = sections[i].options;\r\n\t\t\t\tfor (var j = 0; j < options.length; j++) {\r\n\t\t\t\t\tif (options[j].key == key) {\r\n\t\t\t\t\t\treturn options[j].label;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t};\r\n\r\n\tgantt.updateCollection = function(list_name, collection) {\r\n\t\tcollection = collection.slice(0);\r\n\t\tvar list = gantt.serverList(list_name);\r\n\t\tif (!list) return false;\r\n\t\tlist.splice(0, list.length);\r\n\t\tlist.push.apply(list, collection || []);\r\n\t\tgantt.resetLightbox();\r\n\t};\r\n\tgantt.getLightboxType = function() {\r\n\t\treturn this.getTaskType(this._lightbox_type);\r\n\t};\r\n\tgantt.getLightbox = function(type) {\r\n\t\tvar lightboxDiv;\r\n\t\tvar fullWidth;\r\n\t\tvar html;\r\n\t\tvar sns;\r\n\t\tvar ds;\r\n\t\tvar classNames = \"\";\r\n\r\n\t\tif (type === undefined)\r\n\t\t\ttype = this.getLightboxType();\r\n\r\n\t\tif (!this._lightbox || this.getLightboxType() != this.getTaskType(type)) {\r\n\t\t\tthis._lightbox_type = this.getTaskType(type);\r\n\t\t\tlightboxDiv = document.createElement(\"div\");\r\n\t\t\tclassNames = \"gantt_cal_light\";\r\n\t\t\tfullWidth = this._is_lightbox_timepicker();\r\n\r\n\t\t\tif (gantt.config.wide_form || fullWidth)\r\n\t\t\t\tclassNames += \" gantt_cal_light_wide\";\r\n\r\n\t\t\tif (fullWidth) {\r\n\t\t\t\tgantt.config.wide_form = true;\r\n\t\t\t\tclassNames += \" gantt_cal_light_full\";\r\n\t\t\t}\r\n\r\n\t\t\tlightboxDiv.className = classNames;\r\n\r\n\t\t\tlightboxDiv.style.visibility = \"hidden\";\r\n\t\t\thtml = this._lightbox_template;\r\n\r\n\t\t\thtml += getHtmlButtons(this.config.buttons_left);\r\n\t\t\thtml += getHtmlButtons(this.config.buttons_right, true);\r\n\r\n\t\t\tlightboxDiv.innerHTML = html;\r\n\r\n\t\t\tgantt._waiAria.lightboxAttr(lightboxDiv);\r\n\r\n\t\t\tif (gantt.config.drag_lightbox) {\r\n\t\t\t\tlightboxDiv.firstChild.onmousedown = gantt._ready_to_dnd;\r\n\t\t\t\tlightboxDiv.firstChild.onselectstart = function() {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t};\r\n\t\t\t\tlightboxDiv.firstChild.style.cursor = \"pointer\";\r\n\t\t\t\tgantt._init_dnd_events();\r\n\t\t\t}\r\n\r\n\t\t\tdocument.body.insertBefore(lightboxDiv, document.body.firstChild);\r\n\t\t\tthis._lightbox = lightboxDiv;\r\n\r\n\t\t\tsns = this._get_typed_lightbox_config(type);\r\n\t\t\thtml = this._render_sections(sns);\r\n\r\n\t\t\tds = lightboxDiv.querySelector(\"div.gantt_cal_larea\");\r\n\t\t\tds.innerHTML = html;\r\n\r\n\t\t\tbindLabelsToInputs(sns);\r\n\r\n\t\t\t//sizes\r\n\t\t\tthis.resizeLightbox();\r\n\r\n\t\t\tthis._init_lightbox_events(this);\r\n\t\t\tlightboxDiv.style.display = \"none\";\r\n\t\t\tlightboxDiv.style.visibility = \"visible\";\r\n\t\t}\r\n\t\treturn this._lightbox;\r\n\t};\r\n\r\n\tgantt._render_sections = function(sns) {\r\n\t\tvar html = \"\";\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue; //ignore incorrect blocks\r\n\t\t\tsns[i].id = \"area_\" + this.uid();\r\n\r\n\t\t\tvar display = sns[i].hidden ? \" style='display:none'\" : \"\";\r\n\t\t\tvar button = \"\";\r\n\t\t\tif (sns[i].button) {\r\n\t\t\t\tbutton = \"<div class='gantt_custom_button' data-index='\" + i + \"'><div class='gantt_custom_button_\" + sns[i].button + \"'></div><div class='gantt_custom_button_label'>\" + this.locale.labels[\"button_\" + sns[i].button] + \"</div></div>\";\r\n\t\t\t}\r\n\t\t\tif (this.config.wide_form) {\r\n\t\t\t\thtml += \"<div class='gantt_wrap_section' \" + display + \">\";\r\n\t\t\t}\r\n\t\t\thtml += \"<div id='\" + sns[i].id + \"' class='gantt_cal_lsection'><label>\" + button + this.locale.labels[\"section_\" + sns[i].name] + \"</label></div>\" + block.render.call(this, sns[i]);\r\n\t\t\thtml += \"</div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t};\r\n\r\n\r\n\tgantt.resizeLightbox = function() {\r\n\t\tif (!this._lightbox) return;\r\n\r\n\t\tvar con = this._lightbox.childNodes[1];\r\n\t\tcon.style.height = \"0px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\";\r\n\t\tthis._lightbox.style.height = con.scrollHeight + this.config.lightbox_additional_height + \"px\";\r\n\t\tcon.style.height = con.scrollHeight + \"px\"; //it is incredible , how ugly IE can be\r\n\t};\r\n\r\n\tgantt._center_lightbox = function(box) {\r\n\t\tif (box) {\r\n\t\t\tbox.style.display = \"block\";\r\n\r\n\t\t\tvar scroll_top = window.pageYOffset || document.body.scrollTop || document.documentElement.scrollTop;\r\n\t\t\tvar scroll_left = window.pageXOffset || document.body.scrollLeft || document.documentElement.scrollLeft;\r\n\r\n\t\t\tvar view_height = window.innerHeight || document.documentElement.clientHeight;\r\n\r\n\t\t\tif (scroll_top) // if vertical scroll on window\r\n\t\t\t\tbox.style.top = Math.round(scroll_top + Math.max((view_height - box.offsetHeight) / 2, 0)) + \"px\";\r\n\t\t\telse // vertical scroll on body\r\n\t\t\t\tbox.style.top = Math.round(Math.max(((view_height - box.offsetHeight) / 2), 0) + 9) + \"px\"; // +9 for compatibility with auto tests\r\n\r\n\t\t\t// not quite accurate but used for compatibility reasons\r\n\t\t\tif (document.documentElement.scrollWidth > document.body.offsetWidth) // if horizontal scroll on the window\r\n\t\t\t\tbox.style.left = Math.round(scroll_left + (document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t\telse // horizontal scroll on the body\r\n\t\t\t\tbox.style.left = Math.round((document.body.offsetWidth - box.offsetWidth) / 2) + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt.showCover = function() {\r\n\t\tif (this._cover) return;\r\n\r\n\t\tthis._cover = document.createElement(\"DIV\");\r\n\t\tthis._cover.className = \"gantt_cal_cover\";\r\n\t\tvar _document_height = ((document.height !== undefined) ? document.height : document.body.offsetHeight);\r\n\t\tvar _scroll_height = ((document.documentElement) ? document.documentElement.scrollHeight : 0);\r\n\t\tthis._cover.style.height = Math.max(_document_height, _scroll_height) + \"px\";\r\n\t\tdocument.body.appendChild(this._cover);\r\n\t};\r\n\r\n\r\n\tgantt._init_lightbox_events = function() {\r\n\t\tgantt.lightbox_events = {};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_save_btn = function() {\r\n\t\t\tgantt._save_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_delete_btn = function() {\r\n\t\t\tif (!gantt.callEvent(\"onLightboxDelete\", [gantt._lightbox_id]))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif (gantt.isTaskExists(gantt._lightbox_id)) {\r\n\t\t\t\tgantt.$click.buttons[\"delete\"](gantt._lightbox_id);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.hideLightbox();\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events.gantt_cancel_btn = function() {\r\n\t\t\tgantt._cancel_lightbox();\r\n\t\t};\r\n\r\n\r\n\t\tgantt.lightbox_events[\"default\"] = function(e, src) {\r\n\t\t\tif (src.getAttribute(\"data-dhx-button\")) {\r\n\t\t\t\tgantt.callEvent(\"onLightboxButton\", [src.className, src, e]);\r\n\t\t\t} else {\r\n\t\t\t\tvar index, block, sec;\r\n\r\n\t\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\t\tif (className.indexOf(\"gantt_custom_button\") != -1) {\r\n\t\t\t\t\tif (className.indexOf(\"gantt_custom_button_\") != -1) {\r\n\t\t\t\t\t\tindex = src.parentNode.getAttribute(\"data-index\");\r\n\t\t\t\t\t\tsec = src;\r\n\t\t\t\t\t\twhile (sec && domHelpers.getClassName(sec).indexOf(\"gantt_cal_lsection\") == -1) {\r\n\t\t\t\t\t\t\tsec = sec.parentNode;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tindex = src.getAttribute(\"data-index\");\r\n\t\t\t\t\t\tsec = src.parentNode;\r\n\t\t\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar sections = gantt._get_typed_lightbox_config();\r\n\r\n\t\t\t\tif (index) {\r\n\t\t\t\t\tindex = index * 1;\r\n\t\t\t\t\tblock = gantt.form_blocks[sections[index * 1].type];\r\n\t\t\t\t\tblock.button_click(index, src, sec, sec.nextSibling);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.event(gantt.getLightbox(), \"click\", function(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target ? e.target : e.srcElement;\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tif (!className) {\r\n\t\t\t\tsrc = src.previousSibling;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className && className.indexOf(\"gantt_btn_set\") === 0) {\r\n\t\t\t\tsrc = src.firstChild;\r\n\t\t\t\tclassName = domHelpers.getClassName(src);\r\n\t\t\t}\r\n\t\t\tif (src && className) {\r\n\t\t\t\tvar func = gantt.defined(gantt.lightbox_events[src.className]) ? gantt.lightbox_events[src.className] : gantt.lightbox_events[\"default\"];\r\n\t\t\t\treturn func(e, src);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\tgantt.getLightbox().onkeydown = function(e) {\r\n\t\t\tvar event = e || window.event;\r\n\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\tvar buttonTarget = domHelpers.getClassName(target).indexOf(\"gantt_btn_set\") > -1;\r\n\r\n\t\t\tswitch ((e || event).keyCode) {\r\n\t\t\tcase gantt.constants.KEY_CODES.SPACE: {\r\n\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\ttarget.click();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\tif ((e || event).shiftKey) return;\r\n\t\t\t\tif (buttonTarget && target.click) {\r\n\t\t\t\t\ttarget.click();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgantt._save_lightbox();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\tgantt._cancel_lightbox();\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._cancel_lightbox = function() {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tthis.callEvent(\"onLightboxCancel\", [this._lightbox_id, task.$new]);\r\n\t\tif (gantt.isTaskExists(task.id) && task.$new) {\r\n\t\t\tthis.silent(function(){\r\n\t\t\t\tgantt.$data.tasksStore.removeItem(task.id);\r\n\t\t\t\tgantt._update_flags(task.id, null);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.refreshData();\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._save_lightbox = function() {\r\n\t\tvar task = this.getLightboxValues();\r\n\t\tif (!this.callEvent(\"onLightboxSave\", [this._lightbox_id, task, !!task.$new]))\r\n\t\t\treturn;\r\n\r\n\t\tif (task.$new) {\r\n\t\t\tdelete task.$new;\r\n\t\t\tthis.addTask(task);\r\n\t\t}else if(this.isTaskExists(task.id)){\r\n\t\t\tthis.mixin(this.getTask(task.id), task, true);\r\n\t\t\tthis.refreshTask(task.id);\r\n\t\t\tthis.updateTask(task.id);\r\n\t\t}\r\n\t\tthis.refreshData();\r\n\r\n\t\t// TODO: do we need any blockable events here to prevent closing lightbox?\r\n\t\tthis.hideLightbox();\r\n\t};\r\n\r\n\tgantt._resolve_default_mapping = function(section) {\r\n\t\tvar mapping = section.map_to;\r\n\t\tvar time_controls = {\"time\": true, \"time_optional\": true, \"duration\": true, \"duration_optional\": true};\r\n\t\tif (time_controls[section.type]) {\r\n\t\t\tif (section.map_to == \"auto\") {\r\n\t\t\t\tmapping = {start_date: \"start_date\", end_date: \"end_date\", duration: \"duration\"};\r\n\t\t\t} else if (typeof(section.map_to) === \"string\") {\r\n\t\t\t\tmapping = {start_date: section.map_to};\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn mapping;\r\n\t};\r\n\r\n\tgantt.getLightboxValues = function() {\r\n\t\tvar task = {};\r\n\r\n\t\tif (gantt.isTaskExists(this._lightbox_id)) {\r\n\t\t\ttask = this.mixin({}, this.getTask(this._lightbox_id));\r\n\t\t}\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar node = document.getElementById(sns[i].id);\r\n\t\t\tnode = (node ? node.nextSibling : node);\r\n\t\t\tvar block = this.form_blocks[sns[i].type];\r\n\t\t\tif (!block) continue;\r\n\t\t\tvar res = block.get_value.call(this, node, task, sns[i]);\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tif (typeof map_to == \"string\" && map_to != \"auto\") {\r\n\t\t\t\ttask[map_to] = res;\r\n\t\t\t} else if (typeof map_to == \"object\") {\r\n\t\t\t\tfor (var property in map_to) {\r\n\t\t\t\t\tif (map_to[property])\r\n\t\t\t\t\t\ttask[map_to[property]] = res[property];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn task;\r\n\t};\r\n\r\n\r\n\tgantt.hideLightbox = function() {\r\n\t\tvar box = this.getLightbox();\r\n\t\tif (box) box.style.display = \"none\";\r\n\r\n\t\tthis._waiAria.lightboxHiddenAttr(box);\r\n\t\tthis._lightbox_id = null;\r\n\r\n\t\tthis.hideCover();\r\n\t\tthis.callEvent(\"onAfterLightbox\", []);\r\n\t};\r\n\tgantt.hideCover = function() {\r\n\t\tif (this._cover)\r\n\t\t\tthis._cover.parentNode.removeChild(this._cover);\r\n\t\tthis._cover = null;\r\n\t};\r\n\r\n\tgantt.resetLightbox = function() {\r\n\t\tif (gantt._lightbox && !gantt._custom_lightbox)\r\n\t\t\tgantt._lightbox.parentNode.removeChild(gantt._lightbox);\r\n\t\tgantt._lightbox = null;\r\n\t};\r\n\tgantt._set_lightbox_values = function(data, box) {\r\n\t\tvar task = data;\r\n\t\tvar s = box.getElementsByTagName(\"span\");\r\n\t\tvar lightboxHeader = [];\r\n\t\tif (gantt.templates.lightbox_header) {\r\n\t\t\tlightboxHeader.push(\"\");\r\n\t\t\tlightboxHeader.push(gantt.templates.lightbox_header(task.start_date, task.end_date, task));\r\n\t\t\ts[1].innerHTML = \"\";\r\n\t\t\ts[2].innerHTML = gantt.templates.lightbox_header(task.start_date, task.end_date, task);\r\n\t\t} else {\r\n\t\t\tlightboxHeader.push(this.templates.task_time(task.start_date, task.end_date, task));\r\n\t\t\tlightboxHeader.push((this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70)); //IE6 fix\r\n\t\t\ts[1].innerHTML = this.templates.task_time(task.start_date, task.end_date, task);\r\n\t\t\ts[2].innerHTML = (this.templates.task_text(task.start_date, task.end_date, task) || \"\").substr(0, 70); //IE6 fix\r\n\t\t}\r\n\t\ts[1].innerHTML = lightboxHeader[0];\r\n\t\ts[2].innerHTML = lightboxHeader[1];\r\n\r\n\t\tgantt._waiAria.lightboxHeader(box, lightboxHeader.join(\" \"));\r\n\r\n\t\tvar sns = this._get_typed_lightbox_config(this.getLightboxType());\r\n\t\tfor (var i = 0; i < sns.length; i++) {\r\n\t\t\tvar section = sns[i];\r\n\r\n\t\t\tif (!this.form_blocks[section.type]) {\r\n\t\t\t\tcontinue;//skip incorrect sections, same check is done during rendering\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar node = document.getElementById(section.id).nextSibling;\r\n\t\t\tvar block = this.form_blocks[section.type];\r\n\t\t\tvar map_to = gantt._resolve_default_mapping(sns[i]);\r\n\t\t\tvar value = this.defined(task[map_to]) ? task[map_to] : section.default_value;\r\n\t\t\tblock.set_value.call(gantt, node, value, task, section);\r\n\r\n\t\t\tif (section.focus)\r\n\t\t\t\tblock.focus.call(gantt, node);\r\n\t\t}\r\n\t\tif (data.id)\r\n\t\t\tgantt._lightbox_id = data.id;\r\n\t};\r\n\tgantt._fill_lightbox = function(id, box) {\r\n\t\tvar task = this.getTask(id);\r\n\t\tthis._set_lightbox_values(task, box);\r\n\t};\r\n\r\n\r\n\tgantt.getLightboxSection = function(name) {\r\n\t\tvar config = this._get_typed_lightbox_config();\r\n\t\tvar i = 0;\r\n\t\tfor (i; i < config.length; i++)\r\n\t\t\tif (config[i].name == name)\r\n\t\t\t\tbreak;\r\n\t\tvar section = config[i];\r\n\t\tif (!section)\r\n\t\t\treturn null;\r\n\r\n\t\tif (!this._lightbox)\r\n\t\t\tthis.getLightbox();\r\n\t\tvar header = document.getElementById(section.id);\r\n\t\tvar node = header.nextSibling;\r\n\r\n\t\tvar result = {\r\n\t\t\tsection: section,\r\n\t\t\theader: header,\r\n\t\t\tnode: node,\r\n\t\t\tgetValue: function(ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].get_value.call(gantt, node, (ev || {}), section);\r\n\t\t\t},\r\n\t\t\tsetValue: function(value, ev) {\r\n\t\t\t\treturn gantt.form_blocks[section.type].set_value.call(gantt, node, value, (ev || {}), section);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tvar handler = this._lightbox_methods[\"get_\" + section.type + \"_control\"];\r\n\t\treturn handler ? handler(result) : result;\r\n\t};\r\n\r\n\tgantt._lightbox_methods.get_template_control = function(result) {\r\n\t\tresult.control = result.node;\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_select_control = function(result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"select\")[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_textarea_control = function(result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"textarea\")[0];\r\n\t\treturn result;\r\n\t};\r\n\tgantt._lightbox_methods.get_time_control = function(result) {\r\n\t\tresult.control = result.node.getElementsByTagName(\"select\"); // array\r\n\t\treturn result;\r\n\t};\r\n\r\n\r\n\tgantt._init_dnd_events = function() {\r\n\t\tthis.event(document.body, \"mousemove\", gantt._move_while_dnd);\r\n\t\tthis.event(document.body, \"mouseup\", gantt._finish_dnd);\r\n\t\tgantt._init_dnd_events = function() {\r\n\t\t};\r\n\t};\r\n\tgantt._move_while_dnd = function(e) {\r\n\t\tif (gantt._dnd_start_lb) {\r\n\t\t\tif (!document.gantt_unselectable) {\r\n\t\t\t\tdocument.body.className += \" gantt_unselectable\";\r\n\t\t\t\tdocument.gantt_unselectable = true;\r\n\t\t\t}\r\n\t\t\tvar lb = gantt.getLightbox();\r\n\t\t\tvar now = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t\t\tlb.style.top = gantt._lb_start[1] + now[1] - gantt._dnd_start_lb[1] + \"px\";\r\n\t\t\tlb.style.left = gantt._lb_start[0] + now[0] - gantt._dnd_start_lb[0] + \"px\";\r\n\t\t}\r\n\t};\r\n\tgantt._ready_to_dnd = function(e) {\r\n\t\tvar lb = gantt.getLightbox();\r\n\t\tgantt._lb_start = [parseInt(lb.style.left, 10), parseInt(lb.style.top, 10)];\r\n\t\tgantt._dnd_start_lb = (e && e.target) ? [e.pageX, e.pageY] : [event.clientX, event.clientY];\r\n\t};\r\n\tgantt._finish_dnd = function() {\r\n\t\tif (gantt._lb_start) {\r\n\t\t\tgantt._lb_start = gantt._dnd_start_lb = false;\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_unselectable\", \"\");\r\n\t\t\tdocument.gantt_unselectable = false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._focus = function(node, select) {\r\n\t\tif (node && node.focus) {\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t//do not focus editor, to prevent auto-zoom\r\n\t\t\t} else {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (select && node.select) node.select();\r\n\t\t\t\t\tnode.focus();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t// silent errors\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.form_blocks = {\r\n\t\tgetTimePicker: function(sns, hidden) {\r\n\t\t\tvar html = \"\";\r\n\t\t\tvar cfg = this.config;\r\n\t\t\tvar i;\r\n\t\t\tvar options;\r\n\t\t\tvar ariaAttrs;\r\n\t\t\tvar readonly;\r\n\t\t\tvar display;\r\n\t\t\tvar settings = {\r\n\t\t\t\tfirst: 0,\r\n\t\t\t\tlast: 24 * 60,\r\n\t\t\t\tdate: this.date.date_part(new Date(gantt._min_date.valueOf())),\r\n\t\t\t\ttimeFormat: getTimeFormat(sns)\r\n\t\t\t};\r\n\r\n\t\t\t// map: default order => real one\r\n\t\t\tsns._time_format_order = {size: 0};\r\n\r\n\t\t\tif (gantt.config.limit_time_select) {\r\n\t\t\t\tsettings.first = 60 * cfg.first_hour;\r\n\t\t\t\tsettings.last = 60 * cfg.last_hour + 1;\r\n\t\t\t\tsettings.date.setHours(cfg.first_hour);\r\n\t\t\t}\r\n\r\n\t\t\tfor (i = 0; i < settings.timeFormat.length; i++) {\r\n\t\t\t\t// adding spaces between selects\r\n\t\t\t\tif (i > 0) {\r\n\t\t\t\t\thtml += \" \";\r\n\t\t\t\t}\r\n\r\n\t\t\t\toptions = getHtmlTimePickerOptions(sns, i, settings);\r\n\r\n\t\t\t\tif (options) {\r\n\t\t\t\t\tariaAttrs = gantt._waiAria.lightboxSelectAttrString(settings.timeFormat[i]);\r\n\t\t\t\t\treadonly = sns.readonly ? \"disabled='disabled'\" : \"\";\r\n\t\t\t\t\tdisplay = hidden ? \" style='display:none' \" : \"\";\r\n\t\t\t\t\thtml += \"<select \" + readonly + display + ariaAttrs + \">\" + options + \"</select>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\t_fill_lightbox_select: function(s, i, d, map) {\r\n\t\t\ts[i + map[0]].value = d.getDate();\r\n\t\t\ts[i + map[1]].value = d.getMonth();\r\n\t\t\ts[i + map[2]].value = d.getFullYear();\r\n\t\t\tif (gantt.defined(map[3])) {\r\n\t\t\t\tvar v = d.getHours() * 60 + d.getMinutes();\r\n\t\t\t\tv = Math.round(v / gantt._get_timepicker_step()) * gantt._get_timepicker_step();\r\n\t\t\t\tvar input = s[i + map[3]];\r\n\t\t\t\tinput.value = v;\r\n\t\t\t\t//in case option not shown\r\n\t\t\t\tinput.setAttribute(\"data-value\", v);\r\n\t\t\t}\r\n\t\t},\r\n\t\ttemplate: new TemplateControl(),\r\n\t\ttextarea: new TextareaControl(),\r\n\t\tselect: new SelectControl(),\r\n\t\ttime: new TimeControl(),\r\n\t\tduration: new DurationControl(),\r\n\t\tparent: new ParentControl(),\r\n\t\tradio: new RadioControl(),\r\n\t\tcheckbox: new CheckboxControl(),\r\n\t\tresources: new ResourcesControl()\r\n\t};\r\n\r\n\tgantt._is_lightbox_timepicker = function() {\r\n\t\tvar s = this._get_typed_lightbox_config();\r\n\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\tif (s[i].name == \"time\" && s[i].type == \"time\")\r\n\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\tgantt._dhtmlx_confirm = function(message, title, callback, ok) {\r\n\t\tif (!message)\r\n\t\t\treturn callback();\r\n\t\tvar opts = {text: message};\r\n\t\tif (title)\r\n\t\t\topts.title = title;\r\n\t\tif (ok) {\r\n\t\t\topts.ok = ok;\r\n\t\t}\r\n\t\tif (callback) {\r\n\t\t\topts.callback = function(result) {\r\n\t\t\t\tif (result)\r\n\t\t\t\t\tcallback();\r\n\t\t\t};\r\n\t\t}\r\n\t\tgantt.confirm(opts);\r\n\t};\r\n\r\n\tfunction _get_type_name(type_value) {\r\n\t\tfor (var i in this.config.types) {\r\n\t\t\tif (this.config.types[i] == type_value) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"task\";\r\n\t}\r\n\r\n\tgantt._get_typed_lightbox_config = function(type) {\r\n\t\tif (type === undefined) {\r\n\t\t\ttype = this.getLightboxType();\r\n\t\t}\r\n\r\n\t\tvar field = _get_type_name.call(this, type);\r\n\r\n\t\tif (gantt.config.lightbox[field + \"_sections\"]) {\r\n\t\t\treturn gantt.config.lightbox[field + \"_sections\"];\r\n\t\t} else {\r\n\t\t\treturn gantt.config.lightbox.sections;\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._silent_redraw_lightbox = function(type) {\r\n\t\tvar oldType = this.getLightboxType();\r\n\r\n\t\tif (this.getState().lightbox) {\r\n\t\t\tvar taskId = this.getState().lightbox;\r\n\t\t\tvar formData = this.getLightboxValues(),\r\n\t\t\t\ttask = this.copy(this.getTask(taskId));\r\n\r\n\t\t\tthis.resetLightbox();\r\n\r\n\t\t\tvar updTask = this.mixin(task, formData, true);\r\n\t\t\tvar box = this.getLightbox(type ? type : undefined);\r\n\t\t\tthis._center_lightbox(this.getLightbox());\r\n\t\t\tthis._set_lightbox_values(updTask, box);\r\n\t\t} else {\r\n\t\t\tthis.resetLightbox();\r\n\t\t\tthis.getLightbox(type ? type : undefined);\r\n\t\t}\r\n\t\tthis.callEvent(\"onLightboxChange\", [oldType, this.getLightboxType()]);\r\n\t};\r\n\r\n\tfunction bindLabelsToInputs(sns) {\r\n\t\tvar section;\r\n\t\tvar label;\r\n\t\tvar labelBlock;\r\n\t\tvar inputBlock;\r\n\t\tvar input;\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < sns.length; i++) {\r\n\t\t\tsection = sns[i];\r\n\t\t\tlabelBlock = document.getElementById(section.id);\r\n\t\t\t\r\n\t\t\tif (!section.id || !labelBlock) continue;\r\n\r\n\t\t\tlabel = labelBlock.querySelector(\"label\");\r\n\t\t\tinputBlock = labelBlock.nextSibling;\r\n\t\t\t\r\n\t\t\tif (!inputBlock) continue;\r\n\r\n\t\t\tinput = inputBlock.querySelector(\"input, select, textarea\");\r\n\t\t\tif (input) {\r\n\t\t\t\tinput.id = input.id || \"input_\" + gantt.uid();\r\n\t\t\t\tsection.inputId = input.id;\r\n\t\t\t\tlabel.setAttribute(\"for\", section.inputId);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getHtmlButtons(buttons, floatRight) {\r\n\t\tvar button;\r\n\t\tvar ariaAttr;\r\n\t\tvar html = \"\";\r\n\t\tvar i;\r\n\r\n\t\tfor (i = 0; i < buttons.length; i++) {\r\n\t\t\t// needed to migrate from 'dhx_something' to 'gantt_something' naming in a lightbox\r\n\t\t\tbutton = gantt.config._migrate_buttons[buttons[i]] ? gantt.config._migrate_buttons[buttons[i]] : buttons[i];\r\n\r\n\t\t\tariaAttr = gantt._waiAria.lightboxButtonAttrString(button);\r\n\t\t\thtml += \"<div \" + ariaAttr + \" class='gantt_btn_set gantt_left_btn_set \" + button + \"_set'\" + (floatRight ? \" style='float:right;'\" : \"\") + \"><div dhx_button='1' data-dhx-button='1' class='\" + button + \"'></div><div>\" + gantt.locale.labels[button] + \"</div></div>\";\r\n\t\t}\r\n\t\treturn html;\r\n\t}\r\n\r\n\tfunction getTimeFormat(sns) {\r\n\t\tvar scale;\r\n\t\tvar unit;\r\n\t\tvar result;\r\n\r\n\t\tif (sns.time_format) return sns.time_format;\r\n\r\n\t\t// default order\r\n\t\tresult = [\"%d\", \"%m\", \"%Y\"];\r\n\t\tscale = gantt.getScale();\r\n\t\tunit = scale ? scale.unit : gantt.config.duration_unit;\r\n\t\tif (helpers.getSecondsInUnit(unit) < helpers.getSecondsInUnit(\"day\")) {\r\n\t\t\tresult.push(\"%H:%i\");\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\tfunction getHtmlTimePickerOptions(sns, index, settings) {\r\n\t\tvar range;\r\n\t\tvar offset;\r\n\t\tvar start_year;\r\n\t\tvar end_year;\r\n\t\tvar i;\r\n\t\tvar time;\r\n\t\tvar diff;\r\n\t\tvar tdate;\r\n\t\tvar html = \"\";\r\n\r\n\t\tswitch (settings.timeFormat[index]) {\r\n\t\tcase \"%Y\":\r\n\t\t\tsns._time_format_order[2] = index;\r\n\t\t\tsns._time_format_order.size++;\r\n\t\t\t//year\r\n\r\n\t\t\tif (sns.year_range) {\r\n\t\t\t\tif (!isNaN(sns.year_range)) {\r\n\t\t\t\t\trange = sns.year_range;\r\n\t\t\t\t} else if (sns.year_range.push) {\r\n\t\t\t\t\t// if\r\n\t\t\t\t\tstart_year = sns.year_range[0];\r\n\t\t\t\t\tend_year = sns.year_range[1];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\trange = range || 10;\r\n\t\t\toffset = offset || Math.floor(range / 2);\r\n\t\t\tstart_year = start_year || settings.date.getFullYear() - offset;\r\n\t\t\tend_year = end_year || start_year + range;\r\n\r\n\t\t\tfor (i = start_year; i < end_year; i++)\r\n\t\t\t\thtml += \"<option value='\" + (i) + \"'>\" + (i) + \"</option>\";\r\n\t\t\tbreak;\r\n\t\tcase \"%m\":\r\n\t\t\tsns._time_format_order[1] = index;\r\n\t\t\tsns._time_format_order.size++;\r\n\t\t\t//month\r\n\t\t\tfor (i = 0; i < 12; i++)\r\n\t\t\t\thtml += \"<option value='\" + i + \"'>\" + gantt.locale.date.month_full[i] + \"</option>\";\r\n\t\t\tbreak;\r\n\t\tcase \"%d\":\r\n\t\t\tsns._time_format_order[0] = index;\r\n\t\t\tsns._time_format_order.size++;\r\n\t\t\t//days\r\n\t\t\tfor (i = 1; i < 32; i++)\r\n\t\t\t\thtml += \"<option value='\" + i + \"'>\" + i + \"</option>\";\r\n\t\t\tbreak;\r\n\t\tcase \"%H:%i\":\r\n\t\t\t//  var last = 24*60, first = 0;\r\n\t\t\tsns._time_format_order[3] = index;\r\n\t\t\tsns._time_format_order.size++;\r\n\t\t\t//hours\r\n\t\t\ti = settings.first;\r\n\t\t\ttdate = settings.date.getDate();\r\n\t\t\tsns._time_values = [];\r\n\r\n\t\t\twhile (i < settings.last) {\r\n\t\t\t\ttime = gantt.templates.time_picker(settings.date);\r\n\t\t\t\thtml += \"<option value='\" + i + \"'>\" + time + \"</option>\";\r\n\t\t\t\tsns._time_values.push(i);\r\n\t\t\t\tsettings.date.setTime(settings.date.valueOf() + gantt._get_timepicker_step() * 60 * 1000);\r\n\t\t\t\tdiff = (settings.date.getDate() != tdate) ? 1 : 0; // moved or not to the next day\r\n\t\t\t\ti = diff * 24 * 60 + settings.date.getHours() * 60 + settings.date.getMinutes();\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\treturn html;\r\n\t}\r\n};","var helpers = require(\"../utils/helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.isUnscheduledTask = function (task) {\r\n\t\tgantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\"+task+\" of gantt.isUnscheduledTask. Task object was expected\");\r\n\t\treturn (!!task.unscheduled || !task.start_date);\r\n\t};\r\n\r\n\tgantt._isAllowedUnscheduledTask = function (task) {\r\n\t\treturn !!(task.unscheduled && gantt.config.show_unscheduled);\r\n\t};\r\n\r\n\tgantt.isTaskVisible = function (id) {\r\n\t\tif (!this.isTaskExists(id))\r\n\t\t\treturn false;\r\n\r\n\t\tvar task = this.getTask(id),\r\n\t\t\ttype = this.getTaskType(task.type);\r\n\r\n\t\tvar taskStart = task.start_date ? task.start_date.valueOf() : null;\r\n\t\tvar taskEnd = task.end_date ? task.end_date.valueOf() : null;\r\n\r\n\t\tif (!(gantt._isAllowedUnscheduledTask(task) || (taskStart && taskEnd && taskStart <= this._max_date.valueOf() && taskEnd >= this._min_date.valueOf()))){\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn !!(gantt.getGlobalTaskIndex(id) >= 0);\r\n\t};\r\n\r\n\tgantt._defaultTaskDate = function (item, parent_id) {\r\n\t\tvar parent = (parent_id && parent_id != this.config.root_id) ? this.getTask(parent_id) : false,\r\n\t\t\tstartDate = '';\r\n\t\tif (parent) {\r\n\t\t\tstartDate = parent.start_date;\r\n\t\t} else {\r\n\t\t\tvar first = this.getTaskByIndex(0);\r\n\t\t\tstartDate = first ? (first.start_date ? first.start_date : (first.end_date ? this.calculateEndDate({\r\n\t\t\t\tstart_date: first.end_date,\r\n\t\t\t\tduration: -this.config.duration_step\r\n\t\t\t}) : '')) : this.config.start_date || this.getState().min_date;\r\n\t\t}\r\n\t\tgantt.assert(startDate, \"Invalid dates\");\r\n\t\treturn new Date(startDate);\r\n\t};\r\n\r\n\tgantt._set_default_task_timing = function (task) {\r\n\t\ttask.start_date = task.start_date || gantt._defaultTaskDate(task, this.getParent(task));\r\n\t\ttask.duration = task.duration || this.config.duration_step;\r\n\t\ttask.end_date = task.end_date || this.calculateEndDate(task);\r\n\t};\r\n\r\n\tgantt.createTask = function (item, parent, index) {\r\n\t\titem = item || {};\r\n\t\tif (!gantt.defined(item.id))\r\n\t\t\titem.id = gantt.uid();\r\n\r\n\t\tif (!item.start_date) {\r\n\t\t\titem.start_date = gantt._defaultTaskDate(item, parent);\r\n\t\t}\r\n\t\tif (item.text === undefined) {\r\n\t\t\titem.text = gantt.locale.labels.new_task;\r\n\t\t}\r\n\t\tif (item.duration === undefined) {\r\n\t\t\titem.duration = 1;\r\n\t\t}\r\n\r\n\t\tif (parent) {\r\n\t\t\tthis.setParent(item, parent, true);\r\n\t\t\tvar parentObj = this.getTask(parent);\r\n\t\t\tparentObj.$open = true;\r\n\t\t}\r\n\r\n\t\tif (!this.callEvent(\"onTaskCreated\", [item])) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (this.config.details_on_create) {\r\n\t\t\titem.$new = true;\r\n\t\t\tthis.silent(function(){\r\n\t\t\t\tgantt.$data.tasksStore.addItem(item, index);\r\n\t\t\t});\r\n\t\t\tthis.selectTask(item.id);\r\n\t\t\tthis.refreshData();\r\n\t\t\tthis.showLightbox(item.id);\r\n\t\t} else {\r\n\t\t\tif (this.addTask(item, parent, index)) {\r\n\t\t\t\tthis.showTask(item.id);\r\n\t\t\t\tthis.selectTask(item.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn item.id;\r\n\t};\r\n\r\n\tgantt._update_flags = function (oldid, newid) {\r\n\t\t//  TODO: need a proper way to update all possible flags\r\n\t\tvar store = gantt.$data.tasksStore;\r\n\t\tif (oldid === undefined) {\r\n\t\t\tthis._lightbox_id = null;\r\n\r\n\t\t\tstore.silent(function(){\r\n\t\t\t\tstore.unselect();\r\n\t\t\t});\r\n\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = null;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (this._lightbox_id == oldid)\r\n\t\t\t\tthis._lightbox_id = newid;\r\n\r\n\t\t\t// TODO: probably can be removed\r\n\t\t\tif (store.getSelectedId() == oldid) {\r\n\t\t\t\tstore.silent(function(){\r\n\t\t\t\t\tstore.unselect(oldid);\r\n\t\t\t\t\tstore.select(newid);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this._tasks_dnd && this._tasks_dnd.drag && this._tasks_dnd.drag.id == oldid) {\r\n\t\t\t\tthis._tasks_dnd.drag.id = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt._get_task_timing_mode = function (task, force) {\r\n\t\tvar task_type = this.getTaskType(task.type);\r\n\r\n\t\tvar state = {\r\n\t\t\ttype: task_type,\r\n\t\t\t$no_start: false,\r\n\t\t\t$no_end: false\r\n\t\t};\r\n\r\n\t\tif (!force && task_type == task.$rendered_type) {\r\n\t\t\tstate.$no_start = task.$no_start;\r\n\t\t\tstate.$no_end = task.$no_end;\r\n\t\t\treturn state;\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.project) {\r\n\t\t\t//project duration is always defined by children duration\r\n\t\t\tstate.$no_end = state.$no_start = true;\r\n\t\t} else if (task_type != this.config.types.milestone) {\r\n\t\t\t//tasks can have fixed duration, children duration(as projects), or one date fixed, and other defined by nested items\r\n\t\t\tstate.$no_end = !(task.end_date || task.duration);\r\n\t\t\tstate.$no_start = !task.start_date;\r\n\r\n\t\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\t\tstate.$no_end = state.$no_start = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\t};\r\n\r\n\tgantt._init_task_timing = function (task) {\r\n\t\tvar task_mode = gantt._get_task_timing_mode(task, true);\r\n\r\n\t\tvar dirty = task.$rendered_type != task_mode.type;\r\n\r\n\t\tvar task_type = task_mode.type;\r\n\r\n\t\tif (dirty) {\r\n\t\t\ttask.$no_start = task_mode.$no_start;\r\n\t\t\ttask.$no_end = task_mode.$no_end;\r\n\t\t\ttask.$rendered_type = task_mode.type;\r\n\t\t}\r\n\r\n\t\tif (dirty && task_type != this.config.types.milestone) {\r\n\t\t\tif (task_type == this.config.types.project) {\r\n\t\t\t\t//project duration is always defined by children duration\r\n\t\t\t\tthis._set_default_task_timing(task);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (task_type == this.config.types.milestone) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\t\tif (task.start_date && task.end_date) {\r\n\t\t\ttask.duration = this.calculateDuration(task);\r\n\t\t}\r\n\r\n\t\tif (!task.end_date) {\r\n\t\t\ttask.end_date = task.start_date;\r\n\t\t}\r\n\r\n\t\ttask.duration = task.duration || 0;\r\n\t};\r\n\r\n\tgantt.isSummaryTask = function (task) {\r\n\t\tgantt.assert(task && task instanceof Object, \"Invalid argument <b>task</b>=\"+task+\" of gantt.isSummaryTask. Task object was expected\");\r\n\t\t\r\n\t\tvar mode = gantt._get_task_timing_mode(task);\r\n\r\n\t\treturn !!(mode.$no_end || mode.$no_start);\r\n\t};\r\n\r\n// downward calculation of project duration\r\n\tgantt.resetProjectDates = function (task) {\r\n\t\tvar taskMode = this._get_task_timing_mode(task);\r\n\t\tif (taskMode.$no_end || taskMode.$no_start) {\r\n\t\t\tvar dates = this.getSubtaskDates(task.id);\r\n\t\t\tthis._assign_project_dates(task, dates.start_date, dates.end_date);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.getSubtaskDuration = function (task_id) {\r\n\t\tvar res = 0,\r\n\t\t\troot = task_id !== undefined ? task_id : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tres += child.duration;\r\n\t\t}, root);\r\n\r\n\t\treturn res;\r\n\t};\r\n\r\n\tgantt.getSubtaskDates = function (task_id) {\r\n\t\tvar min = null,\r\n\t\t\tmax = null,\r\n\t\t\troot = task_id !== undefined ? task_id : gantt.config.root_id;\r\n\r\n\t\tthis.eachTask(function (child) {\r\n\t\t\tif (this.getTaskType(child.type) == gantt.config.types.project || this.isUnscheduledTask(child))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif ((child.start_date && !child.$no_start) && (!min || min > child.start_date.valueOf()))\r\n\t\t\t\tmin = child.start_date.valueOf();\r\n\t\t\tif ((child.end_date && !child.$no_end) && (!max || max < child.end_date.valueOf()))\r\n\t\t\t\tmax = child.end_date.valueOf();\r\n\t\t}, root);\r\n\r\n\t\treturn {\r\n\t\t\tstart_date: min ? new Date(min) : null,\r\n\t\t\tend_date: max ? new Date(max) : null\r\n\t\t};\r\n\t};\r\n\r\n\tgantt._assign_project_dates = function (task, from, to) {\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\tif (taskTiming.$no_start) {\r\n\t\t\tif (from && from != Infinity) {\r\n\t\t\t\ttask.start_date = new Date(from);\r\n\t\t\t} else {\r\n\t\t\t\ttask.start_date = this._defaultTaskDate(task, this.getParent(task));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (taskTiming.$no_end) {\r\n\t\t\tif (to && to != -Infinity) {\r\n\t\t\t\ttask.end_date = new Date(to);\r\n\t\t\t} else {\r\n\t\t\t\ttask.end_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\tduration: this.config.duration_step,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tthis._init_task_timing(task);\r\n\t\t}\r\n\t};\r\n\r\n// upward calculation of project duration\r\n\tgantt._update_parents = function (taskId, silent) {\r\n\t\tif (!taskId) return;\r\n\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tvar pid = this.getParent(task);\r\n\r\n\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\r\n\t\tvar has_changed = true;\r\n\r\n\t\tif (taskTiming.$no_start || taskTiming.$no_end) {\r\n\t\t\tvar oldStart = task.start_date.valueOf(),\r\n\t\t\t\toldEnd = task.end_date.valueOf();\r\n\r\n\t\t\tgantt.resetProjectDates(task);\r\n\r\n\t\t\t// not refresh parent projects if dates hasn't changed\r\n\t\t\tif (oldStart == task.start_date.valueOf() && oldEnd == task.end_date.valueOf()) {\r\n\t\t\t\thas_changed = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (has_changed && !silent) {\r\n\t\t\t\tthis.refreshTask(task.id, true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (has_changed && pid && this.isTaskExists(pid)) {\r\n\t\t\tthis._update_parents(pid, silent);\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.roundDate = function (config) {\r\n\t\tvar scale = gantt.getScale();\r\n\r\n\t\tif (helpers.isDate(config)) {\r\n\t\t\tconfig = {\r\n\t\t\t\tdate: config,\r\n\t\t\t\tunit: scale ? scale.unit : gantt.config.duration_unit,\r\n\t\t\t\tstep: scale ?  scale.step : gantt.config.duration_step\r\n\t\t\t};\r\n\t\t}\r\n\t\tvar date = config.date,\r\n\t\t\tsteps = config.step,\r\n\t\t\tunit = config.unit;\r\n\r\n\t\tif(!scale){\r\n\t\t\treturn date;\r\n\t\t}\r\n\r\n\t\tvar upper, lower, colIndex;\r\n\t\tif (unit == scale.unit && steps == scale.step &&\r\n\t\t\t+date >= +scale.min_date && +date <= +scale.max_date) {\r\n\t\t\t//find date in time scale config\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tif (!scale.trace_x[colIndex]) {\r\n\t\t\t\tcolIndex -= 1;// end of time scale\r\n\t\t\t\tif(scale.rtl){\r\n\t\t\t\t\tcolIndex = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlower = new Date(scale.trace_x[colIndex]);\r\n\t\t\tupper = gantt.date.add(lower, steps, unit);\r\n\t\t} else {\r\n\t\t\tcolIndex = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\tupper = gantt.date[unit + \"_start\"](new Date(scale.min_date));\r\n\t\t\tif (scale.trace_x[colIndex]) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](scale.trace_x[colIndex]);// end of time scale\r\n\t\t\t}\r\n\r\n\t\t\twhile (+upper < +date) {\r\n\t\t\t\tupper = gantt.date[unit + \"_start\"](gantt.date.add(upper, steps, unit));\r\n\r\n\t\t\t\tvar tzOffset = upper.getTimezoneOffset();\r\n\r\n\t\t\t\tupper = gantt._correct_dst_change(upper, tzOffset, upper, unit);\r\n\t\t\t\tif (gantt.date[unit + '_start'])\r\n\t\t\t\t\tupper = gantt.date[unit + '_start'](upper);\r\n\t\t\t}\r\n\r\n\t\t\tlower = gantt.date.add(upper, -1 * steps, unit);\r\n\r\n\t\t}\r\n\t\tif (config.dir && config.dir == 'future')\r\n\t\t\treturn upper;\r\n\t\tif (config.dir && config.dir == 'past')\r\n\t\t\treturn lower;\r\n\r\n\t\tif (Math.abs(date - lower) < Math.abs(upper - date)) {\r\n\t\t\treturn lower;\r\n\t\t} else {\r\n\t\t\treturn upper;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tgantt.correctTaskWorkTime = function (task) {\r\n\t\tif (gantt.config.work_time && gantt.config.correct_work_time) {\r\n\t\t\tif (!this.isWorkTime(task.start_date, undefined, task)) {\r\n\t\t\t\ttask.start_date = this.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!this.isWorkTime(new Date(+task.end_date - 1), undefined, task)) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskUpdate\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\tgantt.attachEvent(\"onBeforeTaskAdd\", function (id, task) {\r\n\t\tgantt._init_task_timing(task);\r\n\t\treturn true;\r\n\t});\r\n\r\n};","// TODO: rework public api for date methods\r\nvar utils = require(\"../../utils/utils\");\r\n\r\nvar createWorktimeFacade = function(calendarManager, timeCalculator){\r\n\treturn {\r\n\t\tgetWorkHours: function (date) {\r\n\t\t\treturn timeCalculator.getWorkHours(date);\r\n\t\t},\r\n\r\n\t\tsetWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.setWorkTime(config);\r\n\t\t},\r\n\r\n\t\tunsetWorkTime: function (config) {\r\n\t\t\ttimeCalculator.unsetWorkTime(config);\r\n\t\t},\r\n\r\n\t\tisWorkTime: function (date, unit, task) {\r\n\t\t\treturn timeCalculator.isWorkTime(date, unit, task);\r\n\t\t},\r\n\r\n\t\tgetClosestWorkTime: function (config) {\r\n\t\t\treturn timeCalculator.getClosestWorkTime(config);\r\n\t\t},\r\n\r\n\t\tcalculateDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.calculateDuration(start_date, end_date, task);\r\n\t\t},\r\n\t\t_hasDuration: function (start_date, end_date, task) {\r\n\t\t\treturn timeCalculator.hasDuration(start_date, end_date, task);\r\n\t\t},\r\n\r\n\t\tcalculateEndDate: function (start, duration, unit, task) {\r\n\t\t\treturn timeCalculator.calculateEndDate(start, duration, unit, task);\r\n\t\t},\r\n\r\n\t\tcreateCalendar: utils.bind(calendarManager.createCalendar, calendarManager),\r\n\t\taddCalendar: utils.bind(calendarManager.addCalendar, calendarManager),\r\n\t\tgetCalendar: utils.bind(calendarManager.getCalendar, calendarManager),\r\n\t\tgetCalendars: utils.bind(calendarManager.getCalendars, calendarManager),\r\n\t\tgetTaskCalendar: utils.bind(calendarManager.getTaskCalendar, calendarManager),\r\n\t\tdeleteCalendar: utils.bind(calendarManager.deleteCalendar, calendarManager)\r\n\t};\r\n};\r\n\r\n\r\nmodule.exports = { create: createWorktimeFacade };\r\n","function CalendarDisabledTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n}\r\n\r\nCalendarDisabledTimeStrategy.prototype = {\r\n\tgetWorkHours: function () {\r\n\t\treturn [0, 24];\r\n\t},\r\n\tsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tunsetWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tisWorkTime: function () {\r\n\t\treturn true;\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tvar config = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn config.date;\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this._calculateDuration(from, to, unit, step);\r\n\t},\r\n\t_calculateDuration: function (start, end, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar fixedUnits = {\r\n\t\t\t\"week\": 1000 * 60 * 60 * 24 * 7,\r\n\t\t\t\"day\": 1000 * 60 * 60 * 24,\r\n\t\t\t\"hour\": 1000 * 60 * 60,\r\n\t\t\t\"minute\": 1000 * 60\r\n\t\t};\r\n\r\n\t\tvar res = 0;\r\n\t\tif (fixedUnits[unit]) {\r\n\t\t\tres = Math.round((end - start) / (step * fixedUnits[unit]));\r\n\t\t} else {\r\n\t\t\tvar from = new Date(start),\r\n\t\t\t\tto = new Date(end);\r\n\t\t\twhile (from.valueOf() < to.valueOf()) {\r\n\t\t\t\tres += 1;\r\n\t\t\t\tfrom = dateHelper.add(from, step, unit);\r\n\t\t\t}\r\n\r\n\t\t\tif (from.valueOf() != end.valueOf()) {\r\n\t\t\t\tres += (to - from) / (dateHelper.add(from, step, unit) - from);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn Math.round(res);\r\n\t},\r\n\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tfrom = new Date(from);\r\n\t\tto = new Date(to);\r\n\r\n\t\treturn (from.valueOf() < to.valueOf());\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar start = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\treturn this.$gantt.date.add(start, step * duration, unit);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarDisabledTimeStrategy;","var createArgumentsHelper = require(\"./calendar_arguments_helper\"),\r\n\tNoWorkTimeCalendar = require(\"./strategy/no_work_time\");\r\n\r\nfunction TimeCalculator(calendarManager){\r\n\r\n\tthis.$gantt = calendarManager.$gantt;\r\n\tthis.argumentsHelper = createArgumentsHelper(this.$gantt);\r\n\tthis.calendarManager = calendarManager;\r\n\tthis.$disabledCalendar = new NoWorkTimeCalendar(this.$gantt, this.argumentsHelper);\r\n}\r\n\r\nTimeCalculator.prototype = {\r\n\t_getCalendar: function (config) {\r\n\t\tvar calendar;\r\n\t\tif (!this.$gantt.$services.config().work_time) {\r\n\t\t\tcalendar = this.$disabledCalendar;\r\n\t\t} else {\r\n\t\t\tvar manager = this.calendarManager;\r\n\t\t\tif (config.task) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config.task);\r\n\t\t\t} else if (config.id) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar(config);\r\n\t\t\t} else if (config.calendar) {\r\n\t\t\t\tcalendar = config.calendar;\r\n\t\t\t}\r\n\t\t\tif (!calendar) {\r\n\t\t\t\tcalendar = manager.getTaskCalendar();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn calendar;\r\n\t},\r\n\r\n\tgetWorkHours: function (config) {\r\n\t\tconfig = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getWorkHours(config.date);\r\n\t},\r\n\r\n\tsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.setWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.setWorkTime(config);\r\n\t},\r\n\r\n\tunsetWorkTime: function (config, calendar) {\r\n\t\tconfig = this.argumentsHelper.unsetWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tif (!calendar)\r\n\t\t\tcalendar = this.calendarManager.getCalendar(); // Global\r\n\t\treturn calendar.unsetWorkTime(config);\r\n\t},\r\n\tisWorkTime: function (date, unit, task, calendar) {\r\n\t\tvar config = this.argumentsHelper.isWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tcalendar = this._getCalendar(config);\r\n\t\treturn calendar.isWorkTime(config);\r\n\t},\r\n\tgetClosestWorkTime: function (config) {\r\n\t\tconfig = this.argumentsHelper.getClosestWorkTimeArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.getClosestWorkTime(config);\r\n\t},\r\n\r\n\tcalculateDuration: function () { // start_date_date, end_date, task\r\n\t\tvar config = this.argumentsHelper.getDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateDuration(config);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config = this.argumentsHelper.hasDurationArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\r\n\t\treturn calendar.hasDuration(config);\r\n\t},\r\n\tcalculateEndDate: function (config) { // start_date, duration, unit, task\r\n\t\tvar config = this.argumentsHelper.calculateEndDateArguments.apply(this.argumentsHelper, arguments);\r\n\r\n\t\tvar calendar = this._getCalendar(config);\r\n\t\treturn calendar.calculateEndDate(config);\r\n\t}\r\n};\r\n\r\nmodule.exports = TimeCalculator;\r\n\r\n","function WorkUnitsCache() {\r\n\tthis._cache = {};\r\n}\r\n\r\nWorkUnitsCache.prototype = {\r\n\t// cache previously calculated worktime\r\n\tget: function (unit, date) {\r\n\t\tvar result = -1;// default value (if not existed in the cache)\r\n\r\n\t\tvar cache = this._cache;\r\n\t\tif (cache && cache[unit]) {\r\n\t\t\tvar units = cache[unit];\r\n\t\t\tvar time = date.getTime();\r\n\t\t\tif (units[time] !== undefined)\r\n\t\t\t\tresult = units[time];\r\n\t\t}\r\n\t\treturn result;\r\n\t},\r\n\r\n\tput: function (unit, date, value) {\r\n\t\tif (!unit || !date) return false;\r\n\r\n\t\tvar cache = this._cache;\r\n\r\n\t\tvar time = date.getTime();\r\n\r\n\t\tvalue = !!value;\r\n\r\n\t\tif (!cache) return false;\r\n\t\tif (!cache[unit]) cache[unit] = {};\r\n\t\tcache[unit][time] = value;\r\n\t\treturn true;\r\n\t},\r\n\r\n\tclear: function () {\r\n\t\tthis._cache = {};\r\n\t}\r\n};\r\n\r\nmodule.exports = WorkUnitsCache;","var Cache = require(\"./calendar_workunit_cache\"),\r\n\tutils = require(\"../../../utils/utils\");\r\n\r\nfunction CalendarWorkTimeStrategy(gantt, argumentsHelper){\r\n\tthis.argumentsHelper = argumentsHelper;\r\n\tthis.$gantt = gantt;\r\n\tthis._workingUnitsCache = new Cache();\r\n}\r\n\r\nCalendarWorkTimeStrategy.prototype = {\r\n\tunits: [\r\n\t\t\"year\",\r\n\t\t\"month\",\r\n\t\t\"week\",\r\n\t\t\"day\",\r\n\t\t\"hour\",\r\n\t\t\"minute\"\r\n\t],\r\n\t// cache previously calculated worktime\r\n\t_getUnitOrder: function (unit) {\r\n\t\tfor (var i = 0, len = this.units.length; i < len; i++) {\r\n\t\t\tif (this.units[i] == unit)\r\n\t\t\t\treturn i;\r\n\t\t}\r\n\t},\r\n\t_timestamp: function (settings) {\r\n\r\n\t\tvar timestamp = null;\r\n\t\tif ((settings.day || settings.day === 0)) {\r\n\t\t\ttimestamp = settings.day;\r\n\t\t} else if (settings.date) {\r\n\t\t\t// store worktime datestamp in utc so it could be recognized in different timezones (e.g. opened locally and sent to the export service in different timezone)\r\n\t\t\ttimestamp = Date.UTC(settings.date.getFullYear(), settings.date.getMonth(), settings.date.getDate());\r\n\t\t}\r\n\t\treturn timestamp;\r\n\t},\r\n\t_checkIfWorkingUnit: function (date, unit, order) {\r\n\t\tif (order === undefined) {\r\n\t\t\torder = this._getUnitOrder(unit);\r\n\t\t}\r\n\r\n\t\t// disable worktime check for custom time units\r\n\t\tif (order === undefined) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (order) {\r\n\t\t\t//check if bigger time unit is a work time (hour < day < month...)\r\n\t\t\t//i.e. don't check particular hour if the whole day is marked as not working\r\n\t\t\tif (!this._isWorkTime(date, this.units[order - 1], order - 1))\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\tif (!this[\"_is_work_\" + unit])\r\n\t\t\treturn true;\r\n\t\treturn this[\"_is_work_\" + unit](date);\r\n\t},\r\n\t//checkings for particular time units\r\n\t//methods for month-year-week can be defined, otherwise always return 'true'\r\n\t_is_work_day: function (date) {\r\n\t\tvar val = this._getWorkHours(date);\r\n\r\n\t\tif (val instanceof Array) {\r\n\t\t\treturn val.length > 0;\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_is_work_hour: function (date) {\r\n\t\tvar hours = this._getWorkHours(date); // [7,12] or []\r\n\t\tvar hour = date.getHours();\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tif (hours[i + 1] === undefined) {\r\n\t\t\t\treturn hours[i] == hour;\r\n\t\t\t} else {\r\n\t\t\t\tif (hour >= hours[i] && hour < hours[i + 1])\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\t_internDatesPull: {},\r\n\t_nextDate: function (start, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\treturn dateHelper.add(start, step, unit);\r\n\r\n\t\t/*var start_value = +start,\r\n\t\t\tkey = unit + \"_\" + step;\r\n\t\tvar interned = this._internDatesPull[key];\r\n\t\tif(!interned){\r\n\t\t\tinterned = this._internDatesPull[key] = {};\r\n\t\t}\r\n\t\tvar calculated;\r\n\t\tif(!interned[start_value]){\r\n\t\t\tinterned[start_value] = calculated = dateHelper.add(start, step, unit);\r\n\t\t\t//interned[start_value] = dateHelper.add(start, step, unit);\r\n\t\t}\r\n\t\treturn calculated || interned[start_value];*/\r\n\t},\r\n\t_getWorkUnitsBetweenGeneric: function (from, to, unit, step) {\r\n\t\tvar dateHelper = this.$gantt.date;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\t\tvar units = 0;\r\n\r\n\r\n\t\tvar next = null;\r\n\t\tvar stepStart,\r\n\t\t\tstepEnd;\r\n\r\n\t\t// calculating decimal durations, i.e. 2016-09-20 00:05:00 - 2016-09-20 01:00:00 ~ 0.95 instead of 1\r\n\t\t// and also  2016-09-20 00:00:00 - 2016-09-20 00:05:00 ~ 0.05 instead of 1\r\n\t\t// durations must be rounded later\r\n\t\tvar checkFirst = false;\r\n\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\tif (stepStart.valueOf() != start.valueOf()) {\r\n\t\t\tcheckFirst = true;\r\n\t\t}\r\n\t\tvar checkLast = false;\r\n\t\tstepEnd = dateHelper[unit + \"_start\"](new Date(to));\r\n\t\tif (stepEnd.valueOf() != to.valueOf()) {\r\n\t\t\tcheckLast = true;\r\n\t\t}\r\n\r\n\t\tvar isLastStep = false;\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tnext = this._nextDate(start, unit, step);\r\n\t\t\tisLastStep = (next.valueOf() > end.valueOf());\r\n\r\n\t\t\tif (this._isWorkTime(start, unit)) {\r\n\t\t\t\tif (checkFirst || (checkLast && isLastStep)) {\r\n\t\t\t\t\tstepStart = dateHelper[unit + \"_start\"](new Date(start));\r\n\t\t\t\t\tstepEnd = dateHelper.add(stepStart, step, unit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (checkFirst) {\r\n\t\t\t\t\tcheckFirst = false;\r\n\t\t\t\t\tnext = this._nextDate(stepStart, unit, step);\r\n\t\t\t\t\tunits += ((stepEnd.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\t\t\t\t} else if (checkLast && isLastStep) {\r\n\t\t\t\t\tcheckLast = false;\r\n\t\t\t\t\tunits += ((end.valueOf() - start.valueOf()) / (stepEnd.valueOf() - stepStart.valueOf()));\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn units;\r\n\t},\r\n\t_getHoursPerDay: function (date) {\r\n\t\tvar hours = this._getWorkHours(date);\r\n\t\tvar res = 0;\r\n\t\tfor (var i = 0; i < hours.length; i += 2) {\r\n\t\t\tres += ((hours[i + 1] - hours[i]) || 0);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\t_getWorkHoursForRange: function (from, to) {\r\n\t\tvar hours = 0;\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, \"day\"))\r\n\t\t\t\thours += this._getHoursPerDay(start);\r\n\t\t\tstart = this._nextDate(start, \"day\", 1);\r\n\t\t}\r\n\t\treturn hours;\r\n\t},\r\n\t_getWorkUnitsBetweenHours: function (from, to, unit, step) {\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\tvar firstDayStart = new Date(start);\r\n\t\tvar firstDayEnd = this.$gantt.date.add(this.$gantt.date.day_start(new Date(start)), 1, \"day\");\r\n\r\n\t\tif (end.valueOf() <= firstDayEnd.valueOf()) {\r\n\t\t\treturn this._getWorkUnitsBetweenGeneric(from, to, unit, step);\r\n\t\t} else {\r\n\r\n\t\t\tvar lastDayStart = this.$gantt.date.day_start(new Date(end));\r\n\t\t\tvar lastDayEnd = end;\r\n\r\n\t\t\tvar startPart = this._getWorkUnitsBetweenGeneric(firstDayStart, firstDayEnd, unit, step);\r\n\t\t\tvar endPart = this._getWorkUnitsBetweenGeneric(lastDayStart, lastDayEnd, unit, step);\r\n\r\n\t\t\tvar hourRange = this._getWorkHoursForRange(firstDayEnd, lastDayStart);\r\n\t\t\thourRange = ((hourRange / step) + startPart + endPart);\r\n\r\n\t\t\treturn hourRange;\r\n\t\t}\r\n\t},\r\n\r\n\t_getCalendar: function () {\r\n\t\treturn this.worktime;\r\n\t},\r\n\t_setCalendar: function (settings) {\r\n\t\tthis.worktime = settings;\r\n\t},\r\n\r\n\t_tryChangeCalendarSettings: function (payload) {\r\n\t\tvar backup = JSON.stringify(this._getCalendar());\r\n\t\tpayload();\r\n\t\tif (this._isEmptyCalendar(this._getCalendar())) {\r\n\t\t\tthis.$gantt.assert(false, \"Invalid calendar settings, no worktime available\");\r\n\t\t\tthis._setCalendar(JSON.parse(backup));\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\t_isEmptyCalendar: function (settings) {\r\n\t\tvar result = false,\r\n\t\t\tdatesArray = [],\r\n\t\t\tisFullWeekSet = true;\r\n\t\tfor (var i in settings.dates) {\r\n\t\t\tresult |= !!settings.dates[i];\r\n\t\t\tdatesArray.push(i);\r\n\t\t}\r\n\r\n\t\tvar checkFullArray = [];\r\n\t\tfor (var i = 0; i < datesArray.length; i++) {\r\n\t\t\tif (datesArray[i] < 10) {\r\n\t\t\t\tcheckFullArray.push(datesArray[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcheckFullArray.sort();\r\n\r\n\t\tfor (var i = 0; i < 7; i++) {\r\n\t\t\tif (checkFullArray[i] != i)\r\n\t\t\t\tisFullWeekSet = false;\r\n\t\t}\r\n\t\tif (isFullWeekSet)\r\n\t\t\treturn !result;\r\n\t\treturn !(result || !!settings.hours); // can still return false if separated dates are set to true\r\n\t},\r\n\r\n\tgetWorkHours: function () {\r\n\t\tvar config = this.argumentsHelper.getWorkHoursArguments.apply(this.argumentsHelper, arguments);\r\n\t\treturn this._getWorkHours(config.date);\r\n\t},\r\n\t_getWorkHours: function (date) {\r\n\t\tvar t = this._timestamp({date: date});\r\n\t\tvar hours = true;\r\n\t\tvar calendar = this._getCalendar();\r\n\t\tif (calendar.dates[t] !== undefined) {\r\n\t\t\thours = calendar.dates[t];//custom day\r\n\t\t} else if (calendar.dates[date.getDay()] !== undefined) {\r\n\t\t\thours = calendar.dates[date.getDay()];//week day\r\n\t\t}\r\n\t\tif (hours === true) {\r\n\t\t\treturn calendar.hours;\r\n\t\t} else if (hours) {\r\n\t\t\treturn hours;\r\n\t\t}\r\n\t\treturn [];\r\n\t},\r\n\r\n\tsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tvar hours = settings.hours !== undefined ? settings.hours : true;\r\n\t\t\tvar timestamp = this._timestamp(settings);\r\n\t\t\tif (timestamp !== null) {\r\n\t\t\t\tthis._getCalendar().dates[timestamp] = hours;\r\n\t\t\t} else {\r\n\t\t\t\tthis._getCalendar().hours = hours;\r\n\t\t\t}\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\tunsetWorkTime: function (settings) {\r\n\t\treturn this._tryChangeCalendarSettings(utils.bind(function () {\r\n\t\t\tif (!settings) {\r\n\t\t\t\tthis.reset_calendar();\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar timestamp = this._timestamp(settings);\r\n\r\n\t\t\t\tif (timestamp !== null) {\r\n\t\t\t\t\tdelete this._getCalendar().dates[timestamp];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Clear work units cache\r\n\t\t\tthis._workingUnitsCache.clear();\r\n\t\t}, this));\r\n\t},\r\n\r\n\t_isWorkTime: function (date, unit, order) {\r\n\t\t//Check if this item has in the cache\r\n\t\tvar is_work_unit = this._workingUnitsCache.get(unit, date);\r\n\r\n\t\tif (is_work_unit == -1) {\r\n\t\t\t// calculate if not cached\r\n\t\t\tis_work_unit = this._checkIfWorkingUnit(date, unit, order);\r\n\t\t\tthis._workingUnitsCache.put(unit, date, is_work_unit);\r\n\t\t}\r\n\r\n\t\treturn is_work_unit;\r\n\t},\r\n\r\n\tisWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.isWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._isWorkTime(config.date, config.unit);\r\n\t},\r\n\r\n\tcalculateDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tif (!config.unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar res = 0;\r\n\t\tif (config.unit == \"hour\") {\r\n\t\t\tres = this._getWorkUnitsBetweenHours(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t} else {\r\n\t\t\tres = this._getWorkUnitsBetweenGeneric(config.start_date, config.end_date, config.unit, config.step);\r\n\t\t}\r\n\r\n\t\t// getDuration.. returns decimal durations\r\n\t\treturn Math.round(res);\r\n\t},\r\n\thasDuration: function () {\r\n\t\tvar config =  this.argumentsHelper.getDurationArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tto = config.end_date,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tif (!unit) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tvar start = new Date(from),\r\n\t\t\tend = new Date(to);\r\n\t\tstep = step || 1;\r\n\r\n\t\twhile (start.valueOf() < end.valueOf()) {\r\n\t\t\tif (this._isWorkTime(start, unit))\r\n\t\t\t\treturn true;\r\n\t\t\tstart = this._nextDate(start, unit, step);\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tcalculateEndDate: function () {\r\n\t\tvar config =  this.argumentsHelper.calculateEndDateArguments.apply( this.argumentsHelper, arguments);\r\n\r\n\t\tvar from = config.start_date,\r\n\t\t\tduration = config.duration,\r\n\t\t\tunit = config.unit,\r\n\t\t\tstep = config.step;\r\n\r\n\t\tvar mult = (config.duration >= 0) ? 1 : -1;\r\n\t\treturn this._calculateEndDate(from, duration, unit, step * mult);\r\n\t},\r\n\t_calculateEndDate: function (from, duration, unit, step) {\r\n\t\tif (!unit)\r\n\t\t\treturn false;\r\n\r\n\t\tvar start = new Date(from),\r\n\t\t\tadded = 0;\r\n\t\tstep = step || 1;\r\n\t\tduration = Math.abs(duration * 1);\r\n\r\n\t\twhile (added < duration) {\r\n\t\t\tvar next = this._nextDate(start, unit, step);\r\n\t\t\t//if(this.isWorkTime(step > 0 ? start : next, unit))\r\n\t\t\tif (this._isWorkTime(step > 0 ? new Date(next.valueOf() - 1) : new Date(next.valueOf() + 1), unit))\r\n\t\t\t\tadded++;\r\n\t\t\tstart = next;\r\n\t\t}\r\n\t\treturn start;\r\n\t},\r\n\r\n\tgetClosestWorkTime: function () {\r\n\t\tvar config =  this.argumentsHelper.getClosestWorkTimeArguments.apply( this.argumentsHelper, arguments);\r\n\t\treturn this._getClosestWorkTime(config);\r\n\t},\r\n\r\n\t_getClosestWorkTime: function (settings) {\r\n\t\tif (this._isWorkTime(settings.date, settings.unit))\r\n\t\t\treturn settings.date;\r\n\r\n\t\tvar unit = settings.unit;\r\n\r\n\t\tvar curr = this.$gantt.date[unit + '_start'](new Date(settings.date));\r\n\r\n\t\tvar future_target = new Date(curr),\r\n\t\t\tprev_target = new Date(curr),\r\n\t\t\ttick = true,\r\n\t\t\tmaximum_loop = 3000,//be extra sure we won't fall into infinite loop, 3k seems big enough\r\n\t\t\tcount = 0,\r\n\t\t\tboth_directins = (settings.dir == 'any' || !settings.dir);\r\n\r\n\t\tvar inc = 1;\r\n\t\tif (settings.dir == 'past')\r\n\t\t\tinc = -1;\r\n\r\n\t\tvar unitOrder = this._getUnitOrder(unit),\r\n\t\t\tbiggerTimeUnit = this.units[unitOrder - 1];\r\n\r\n\t\t//will seek closest working hour in future or in past, one step in one direction per iteration\r\n\t\twhile (!this._isWorkTime(curr, unit)) {\r\n\r\n\t\t\tif(biggerTimeUnit && !this._isWorkTime(curr, biggerTimeUnit)){\r\n\t\t\t\t// no need to check every hour/minute if we know that the whole day is not working\r\n\t\t\t\tvar biggerTimeUnitSettings = this.$gantt.copy(settings);\r\n\t\t\t\tbiggerTimeUnitSettings.date = curr;\r\n\t\t\t\tbiggerTimeUnitSettings.unit = biggerTimeUnit;\r\n\r\n\t\t\t\treturn this._getClosestWorkTime(biggerTimeUnitSettings);\r\n\t\t\t}\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tcurr = tick ? future_target : prev_target;\r\n\t\t\t\tinc = inc * (-1);\r\n\t\t\t}\r\n\t\t\tvar tzOffset = curr.getTimezoneOffset();\r\n\t\t\tcurr = this.$gantt.date.add(curr, inc, unit);\r\n\r\n\t\t\tcurr = this.$gantt._correct_dst_change(curr, tzOffset, inc, unit);\r\n\t\t\tif (this.$gantt.date[unit + '_start'])\r\n\t\t\t\tcurr = this.$gantt.date[unit + '_start'](curr);\r\n\r\n\t\t\tif (both_directins) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tfuture_target = curr;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tprev_target = curr;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttick = !tick;\r\n\t\t\tcount++;\r\n\t\t\tif (count > maximum_loop) {\r\n\t\t\t\tthis.$gantt.assert(false, \"Invalid working time check\");\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (curr == prev_target || settings.dir == 'past') {\r\n\t\t\tcurr = this.$gantt.date.add(curr, 1, unit);\r\n\t\t}\r\n\r\n\t\treturn curr;\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarWorkTimeStrategy;","var utils = require(\"../../utils/utils\");\r\nvar createArgumentsHelper = require(\"./calendar_arguments_helper\");\r\nvar CalendarWorktimeStrategy = require(\"./strategy/calendar_strategy\");\r\n\r\nfunction CalendarManager (gantt){\r\n\tthis.$gantt = gantt;\r\n\tthis._calendars = {};\r\n}\r\n\r\nCalendarManager.prototype = {\r\n\t_calendars: {},\r\n\t_getDayHoursForMultiple: function (calendars, date) {\r\n\t\tvar units = [],\r\n\t\t\ttick = true,\r\n\t\t\tcurrPos = 0,\r\n\t\t\tis_work_hour = false,\r\n\t\t\tstart = this.$gantt.date.day_start(new Date(date));\r\n\t\tfor (var hour = 0; hour < 24; hour++) {\r\n\t\t\tis_work_hour = calendars.reduce(function (acc, calendar) {\r\n\t\t\t\treturn acc && calendar._is_work_hour(start);\r\n\t\t\t}, true);\r\n\t\t\tif (is_work_hour) {\r\n\t\t\t\tif (tick) {\r\n\t\t\t\t\tunits[currPos] = hour;\r\n\t\t\t\t\tunits[currPos + 1] = (hour + 1);\r\n\t\t\t\t\tcurrPos += 2;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tunits[currPos - 1] += 1;\r\n\t\t\t\t}\r\n\t\t\t\ttick = false;\r\n\t\t\t} else if (!tick) {\r\n\t\t\t\ttick = true;\r\n\t\t\t}\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"hour\");\r\n\t\t}\r\n\t\tif (!units.length)\r\n\t\t\tunits = false;\r\n\t\treturn units;\r\n\t},\r\n\tmergeCalendars: function () {\r\n\t\tvar newCalendar = this.createCalendar(),\r\n\t\t\tday,\r\n\t\t\tunits = [];\r\n\t\tvar calendars = Array.prototype.slice.call(arguments, 0);\r\n\t\tnewCalendar.worktime.hours = [0, 24];\r\n\t\tnewCalendar.worktime.dates = {};\r\n\t\tvar start = this.$gantt.date.day_start(new Date(259200000)); // 1970 day=0\r\n\t\tfor (day = 0; day < 7; day++) {\r\n\t\t\tunits = this._getDayHoursForMultiple(calendars, start);\r\n\t\t\tnewCalendar.worktime.dates[day] = units;\r\n\t\t\tstart = this.$gantt.date.add(start, 1, \"day\");\r\n\t\t}\r\n\t\tfor (var i = 0; i < calendars.length; i++) {\r\n\t\t\tfor (var value in calendars[i].worktime.dates) if (+value > 10000) {\r\n\t\t\t\tunits = this._getDayHoursForMultiple(calendars, new Date(+value));\r\n\t\t\t\tnewCalendar.worktime.dates[value] = units;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn newCalendar;\r\n\t},\r\n\r\n\t_convertWorktimeSettings: function (settings) {\r\n\t\tvar days = settings.days;\r\n\t\tif (days) {\r\n\t\t\tsettings.dates = settings.dates || {};\r\n\t\t\tfor (var i = 0; i < days.length; i++) {\r\n\t\t\t\tsettings.dates[i] = days[i];\r\n\t\t\t\tif (!(days[i] instanceof Array)) {\r\n\t\t\t\t\tsettings.dates[i] = !!days[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete settings.days;\r\n\t\t}\r\n\t\treturn settings;\r\n\t},\r\n\r\n\tcreateCalendar: function (parentCalendar) {\r\n\t\tvar settings;\r\n\r\n\t\tif (!parentCalendar) {\r\n\t\t\tparentCalendar = {};\r\n\t\t}\r\n\r\n\t\tif (parentCalendar.worktime) {\r\n\t\t\tsettings = utils.copy(parentCalendar.worktime);\r\n\t\t} else {\r\n\t\t\tsettings = utils.copy(parentCalendar);\r\n\t\t}\r\n\r\n\t\tvar defaults = utils.copy(this.defaults.fulltime.worktime);\r\n\t\tutils.mixin(settings, defaults);\r\n\r\n\t\tvar id = utils.uid();\r\n\t\tvar calendar = {\r\n\t\t\tid: id + \"\",\r\n\t\t\tworktime: this._convertWorktimeSettings(settings)\r\n\t\t};\r\n\r\n\t\tvar apiCore = new CalendarWorktimeStrategy(this.$gantt, createArgumentsHelper(this.$gantt));\r\n\t\tutils.mixin(apiCore, calendar);\r\n\r\n\t\t// validate/check if empty calendar\r\n\t\tif (!apiCore._tryChangeCalendarSettings(function () {\r\n\t\t\t})) {\r\n\t\t\treturn null;\r\n\t\t} else {\r\n\t\t\treturn apiCore;\r\n\t\t}\r\n\t},\r\n\r\n\tgetCalendar: function (id) {\r\n\t\tid = id || \"global\";\r\n\t\tthis.createDefaultCalendars();\r\n\t\treturn this._calendars[id];\r\n\t},\r\n\r\n\tgetCalendars: function () {\r\n\t\tvar res = [];\r\n\t\tfor (var i in this._calendars) {\r\n\t\t\tres.push(this.getCalendar(i));\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\tgetTaskCalendar: function (task) {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tif (!task) {\r\n\t\t\treturn this.getCalendar();\r\n\t\t} else if (task[config.calendar_property]) {\r\n\t\t\treturn this.getCalendar(task[config.calendar_property]);\r\n\t\t} else if (config.resource_calendars) {\r\n\r\n\t\t\tfor (var field in config.resource_calendars) {\r\n\t\t\t\tvar resource = config.resource_calendars[field];\r\n\t\t\t\tif (task[field]) {\r\n\t\t\t\t\tvar calendarId = resource[task[field]];\r\n\t\t\t\t\tif (calendarId) {\r\n\t\t\t\t\t\treturn this.getCalendar(calendarId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.getCalendar();\r\n\t},\r\n\r\n\taddCalendar: function (calendar) { // puts new calendar to Global Storage - gantt.calendarManager._calendars {}\r\n\t\tif (!(calendar instanceof CalendarWorktimeStrategy)) {\r\n\t\t\tvar id = calendar.id;\r\n\t\t\tcalendar = this.createCalendar(calendar);\r\n\t\t\tcalendar.id = id;\r\n\t\t}\r\n\t\tvar config = this.$gantt.$services.config();\r\n\r\n\t\tcalendar.id = calendar.id || utils.uid();\r\n\t\tthis._calendars[calendar.id] = calendar;\r\n\t\tif (!config.worktimes)\r\n\t\t\tconfig.worktimes = {};\r\n\t\tconfig.worktimes[calendar.id] = calendar.worktime;\r\n\t\treturn calendar.id;\r\n\t},\r\n\r\n\tdeleteCalendar: function (calendar) {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tif (!calendar) return false;\r\n\t\tif (this._calendars[calendar]) {\r\n\t\t\tdelete this._calendars[calendar];\r\n\t\t\tif (config.worktimes && config.worktimes[calendar])\r\n\t\t\t\tdelete config.worktimes[calendar];\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\t},\r\n\r\n\trestoreConfigCalendars: function (configs) {\r\n\t\tfor (var i in configs) {\r\n\t\t\tif (this._calendars[i])\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar settings = configs[i];\r\n\t\t\tvar calendar = this.createCalendar(settings);\r\n\t\t\tcalendar.id = i;\r\n\t\t\tthis.addCalendar(calendar);\r\n\t\t}\r\n\t},\r\n\r\n\tdefaults: {\r\n\t\tglobal: {\r\n\t\t\tid: \"global\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [8, 17],\r\n\t\t\t\tdays: [0, 1, 1, 1, 1, 1, 0]\r\n\t\t\t}\r\n\t\t},\r\n\t\tfulltime: {\r\n\t\t\tid: \"fulltime\",\r\n\t\t\tworktime: {\r\n\t\t\t\thours: [0, 24],\r\n\t\t\t\tdays: [1, 1, 1, 1, 1, 1, 1]\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcreateDefaultCalendars: function () {\r\n\t\tvar config = this.$gantt.$services.config();\r\n\t\tthis.restoreConfigCalendars(this.defaults);\r\n\t\tthis.restoreConfigCalendars(config.worktimes);\r\n\t}\r\n};\r\n\r\nmodule.exports = CalendarManager;","var CalendarManager = require(\"./calendar_manager\"),\r\n\tTimeCalculator = require(\"./time_calculator\"),\r\n\tworktimeFacadeFactory = require(\"../facades/worktime_calendars\"),\r\n\tutils = require(\"../../utils/utils\");\r\n\r\nmodule.exports = function (gantt) {\r\n\tvar manager = new CalendarManager(gantt),\r\n\ttimeCalculator = new TimeCalculator(manager);\r\n\tvar facade = worktimeFacadeFactory.create(manager, timeCalculator);\r\n\tutils.mixin(gantt, facade);\r\n};\r\n","var utils = require(\"../utils/utils\");\r\nvar helpers = require(\"../utils/helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tgantt.load = function (url, type, callback) {\r\n\t\tthis._load_url = url;\r\n\t\tthis.assert(arguments.length, \"Invalid load arguments\");\r\n\r\n\t\tvar tp = 'json', cl = null;\r\n\t\tif (arguments.length >= 3) {\r\n\t\t\ttp = type;\r\n\t\t\tcl = callback;\r\n\t\t} else {\r\n\t\t\tif (typeof arguments[1] == \"string\")\r\n\t\t\t\ttp = arguments[1];\r\n\t\t\telse if (typeof arguments[1] == \"function\")\r\n\t\t\t\tcl = arguments[1];\r\n\t\t}\r\n\r\n\t\tthis._load_type = tp;\r\n\r\n\t\tthis.callEvent(\"onLoadStart\", [url, tp]);\r\n\r\n\t\tthis.ajax.get(url, gantt.bind(function (l) {\r\n\t\t\tthis.on_load(l, tp);\r\n\t\t\tthis.callEvent(\"onLoadEnd\", [url, tp]);\r\n\t\t\tif (typeof cl == \"function\")\r\n\t\t\t\tcl.call(this);\r\n\t\t}, this));\r\n\t};\r\n\tgantt.parse = function (data, type) {\r\n\t\tthis.on_load({xmlDoc: {responseText: data}}, type);\r\n\t};\r\n\r\n\tgantt.serialize = function (type) {\r\n\t\ttype = type || \"json\";\r\n\t\treturn this[type].serialize();\r\n\t};\r\n\r\n\t/*\r\n\ttasks and relations\r\n\t{\r\n\tdata:[\r\n\t\t{\r\n\t\t\t\"id\":\"string\",\r\n\t\t\t\"text\":\"...\",\r\n\t\t\t\"start_date\":\"Date or string\",\r\n\t\t\t\"end_date\":\"Date or string\",\r\n\t\t\t\"duration\":\"number\",\r\n\t\t\t\"progress\":\"0..1\",\r\n\t\t\t\"parent_id\":\"string\",\r\n\t\t\t\"order\":\"number\"\r\n\t\t},...],\r\n\tlinks:[\r\n\t\t{\r\n\t\t\tid:\"string\",\r\n\t\t\tsource:\"string\",\r\n\t\t\ttarget:\"string\",\r\n\t\t\ttype:\"string\"\r\n\t\t},...],\r\n\tcollections:{\r\n\t\t\tcollectionName:[\r\n\t\t\t\t{key:, label:, optional:...},...\r\n\t\t\t],...\r\n\t\t}\r\n\t}\r\n\r\n\t* */\r\n\r\n\tgantt.on_load = function (resp, type) {\r\n\t\tthis.callEvent(\"onBeforeParse\", []);\r\n\t\tif (!type)\r\n\t\t\ttype = \"json\";\r\n\t\tthis.assert(this[type], \"Invalid data type:'\" + type + \"'\");\r\n\r\n\t\tvar raw = resp.xmlDoc.responseText;\r\n\r\n\t\tvar data = this[type].parse(raw, resp);\r\n\t\tthis._process_loading(data);\r\n\t};\r\n\r\n\tgantt._process_loading = function (data) {\r\n\t\tif(data.collections)\r\n\t\t\tthis._load_collections(data.collections);\r\n\r\n\t\tthis.$data.tasksStore.parse(data.data);\r\n\t\tvar links = data.links || (data.collections ? data.collections.links : []);\r\n\t\tthis.$data.linksStore.parse(links);\r\n\r\n\t\t//this._sync_links();\r\n\t\tthis.callEvent(\"onParse\", []);\r\n\t\tthis.render();\r\n\t\tif(this.config.initial_scroll){\r\n\t\t\tvar firstTask = this.getTaskByIndex(0);\r\n\t\t\tvar id = firstTask ? firstTask.id : this.config.root_id;\r\n\t\t\tif(this.isTaskExists(id))\r\n\t\t\t\tthis.showTask(id);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt._load_collections = function (collections) {\r\n\t\tvar collections_loaded = false;\r\n\t\tfor (var key in collections) {\r\n\t\t\tif (collections.hasOwnProperty(key)) {\r\n\t\t\t\tcollections_loaded = true;\r\n\t\t\t\tvar collection = collections[key];\r\n\t\t\t\tvar arr = this.serverList[key];\r\n\t\t\t\tif (!arr) continue;\r\n\t\t\t\tarr.splice(0, arr.length); //clear old options\r\n\t\t\t\tfor (var j = 0; j < collection.length; j++) {\r\n\t\t\t\t\tvar option = collection[j];\r\n\t\t\t\t\tvar obj = this.copy(option);\r\n\t\t\t\t\tobj.key = obj.value;// resulting option object\r\n\r\n\t\t\t\t\tfor (var option_key in option) {\r\n\t\t\t\t\t\tif (option.hasOwnProperty(option_key)) {\r\n\t\t\t\t\t\t\tif (option_key == \"value\" || option_key == \"label\")\r\n\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\tobj[option_key] = option[option_key]; // obj['value'] = option['value']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (collections_loaded)\r\n\t\t\tthis.callEvent(\"onOptionsLoad\", []);\r\n\t};\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDisplay\", function (id, task) {\r\n\t\treturn !task.$ignore;\r\n\t});\r\n\r\n\tgantt.json = {\r\n\t\tparse: function (data) {\r\n\t\t\tgantt.assert(data, \"Invalid data\");\r\n\r\n\t\t\tif (typeof data == \"string\") {\r\n\t\t\t\tif (window.JSON)\r\n\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\telse {\r\n\t\t\t\t\tgantt.assert(false, \"JSON is not supported\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (data.dhx_security)\r\n\t\t\t\tgantt.security_key = data.dhx_security;\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserializeTask: function (task) {\r\n\t\t\treturn this._copyObject(task);\r\n\t\t},\r\n\t\tserializeLink: function (link) {\r\n\t\t\treturn this._copyLink(link);\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj)\r\n\t\t\t\tcopy[key] = obj[key];\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\tvar copy = {};\r\n\t\t\tfor (var key in obj) {\r\n\t\t\t\tif (key.charAt(0) == \"$\")\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\tcopy[key] = obj[key];\r\n\r\n\t\t\t\tif (helpers.isDate(copy[key])) {\r\n\t\t\t\t\tcopy[key] = gantt.templates.xml_format(copy[key]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn copy;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tgantt.eachTask(function (obj) {\r\n\t\t\t\tgantt.resetProjectDates(obj);\r\n\t\t\t\ttasks.push(this.serializeTask(obj));\r\n\t\t\t}, gantt.config.root_id, this);\r\n\r\n\t\t\tvar rawLinks = gantt.getLinks();\r\n\t\t\tfor (var i = 0; i < rawLinks.length; i++) {\r\n\t\t\t\tlinks.push(this.serializeLink(rawLinks[i]));\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdata: tasks,\r\n\t\t\t\tlinks: links\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t/*\r\n\t<data>\r\n\t\t<task id:\"some\" parent_id=\"0\" progress=\"0.5\">\r\n\t\t\t<text>My task 1</text>\r\n\t\t\t<start_date>16.08.2013</start_date>\r\n\t\t\t<end_date>22.08.2013</end_date>\r\n\t\t</task>\r\n\t\t<coll_options>\r\n\t\t\t<links>\r\n\t\t\t\t<link source='a1' target='b2' type='c3' />\r\n\t\t\t</links>\r\n\t\t</coll_options>\r\n\t</data>\r\n\t*/\r\n\r\n\tgantt.xml = {\r\n\t\t_xmlNodeToJSON: function (node, attrs_only) {\r\n\t\t\tvar t = {};\r\n\t\t\tfor (var i = 0; i < node.attributes.length; i++)\r\n\t\t\t\tt[node.attributes[i].name] = node.attributes[i].value;\r\n\r\n\t\t\tif (!attrs_only) {\r\n\t\t\t\tfor (var i = 0; i < node.childNodes.length; i++) {\r\n\t\t\t\t\tvar child = node.childNodes[i];\r\n\t\t\t\t\tif (child.nodeType == 1)\r\n\t\t\t\t\t\tt[child.tagName] = child.firstChild ? child.firstChild.nodeValue : \"\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!t.text) t.text = node.firstChild ? node.firstChild.nodeValue : \"\";\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\t\t},\r\n\t\t_getCollections: function (loader) {\r\n\t\t\tvar collection = {};\r\n\t\t\tvar opts = gantt.ajax.xpath(\"//coll_options\", loader);\r\n\t\t\tfor (var i = 0; i < opts.length; i++) {\r\n\t\t\t\tvar bind = opts[i].getAttribute(\"for\");\r\n\t\t\t\tvar arr = collection[bind] = [];\r\n\t\t\t\tvar itms = gantt.ajax.xpath(\".//item\", opts[i]);\r\n\t\t\t\tfor (var j = 0; j < itms.length; j++) {\r\n\t\t\t\t\tvar itm = itms[j];\r\n\t\t\t\t\tvar attrs = itm.attributes;\r\n\t\t\t\t\tvar obj = {key: itms[j].getAttribute(\"value\"), label: itms[j].getAttribute(\"label\")};\r\n\t\t\t\t\tfor (var k = 0; k < attrs.length; k++) {\r\n\t\t\t\t\t\tvar attr = attrs[k];\r\n\t\t\t\t\t\tif (attr.nodeName == \"value\" || attr.nodeName == \"label\")\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\tobj[attr.nodeName] = attr.nodeValue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tarr.push(obj);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn collection;\r\n\t\t},\r\n\t\t_getXML: function (text, loader, toptag) {\r\n\t\t\ttoptag = toptag || \"data\";\r\n\t\t\tif (!loader.getXMLTopNode) {\r\n\t\t\t\tloader = gantt.ajax.parse(loader);\r\n\t\t\t}\r\n\r\n\t\t\tvar xml = gantt.ajax.xmltop(toptag, loader.xmlDoc);\r\n\t\t\tif (!xml || xml.tagName != toptag) throw \"Invalid XML data\";\r\n\r\n\t\t\tvar skey = xml.getAttribute(\"dhx_security\");\r\n\t\t\tif (skey)\r\n\t\t\t\tgantt.security_key = skey;\r\n\r\n\t\t\treturn xml;\r\n\t\t},\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = this._getXML(text, loader);\r\n\t\t\tvar data = {};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++)\r\n\t\t\t\tevs[i] = this._xmlNodeToJSON(xml[i]);\r\n\r\n\t\t\tdata.collections = this._getCollections(loader);\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\t_copyLink: function (obj) {\r\n\t\t\treturn \"<item id='\" + obj.id + \"' source='\" + obj.source + \"' target='\" + obj.target + \"' type='\" + obj.type + \"' />\";\r\n\t\t},\r\n\t\t_copyObject: function (obj) {\r\n\t\t\treturn \"<task id='\" + obj.id + \"' parent='\" + (obj.parent || \"\") + \"' start_date='\" + obj.start_date + \"' duration='\" + obj.duration + \"' open='\" + (!!obj.open) + \"' progress='\" + obj.progress + \"' end_date='\" + obj.end_date + \"'><![CDATA[\" + obj.text + \"]]></task>\";\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tvar tasks = [];\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tvar json = gantt.json.serialize();\r\n\t\t\tfor (var i = 0, len = json.data.length; i < len; i++) {\r\n\t\t\t\ttasks.push(this._copyObject(json.data[i]));\r\n\t\t\t}\r\n\t\t\tfor (var i = 0, len = json.links.length; i < len; i++) {\r\n\t\t\t\tlinks.push(this._copyLink(json.links[i]));\r\n\t\t\t}\r\n\t\t\treturn \"<data>\" + tasks.join(\"\") + \"<coll_options for='links'>\" + links.join(\"\") + \"</coll_options></data>\";\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tgantt.oldxml = {\r\n\t\tparse: function (text, loader) {\r\n\t\t\tloader = gantt.xml._getXML(text, loader, \"projects\");\r\n\t\t\tvar data = {collections: {links: []}};\r\n\r\n\t\t\tvar evs = data.data = [];\r\n\t\t\tvar xml = gantt.ajax.xpath(\"//task\", loader);\r\n\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tevs[i] = gantt.xml._xmlNodeToJSON(xml[i]);\r\n\t\t\t\tvar parent = xml[i].parentNode;\r\n\r\n\t\t\t\tif (parent.tagName == \"project\")\r\n\t\t\t\t\tevs[i].parent = \"project-\" + parent.getAttribute(\"id\");\r\n\t\t\t\telse\r\n\t\t\t\t\tevs[i].parent = parent.parentNode.getAttribute(\"id\");\r\n\t\t\t}\r\n\r\n\t\t\txml = gantt.ajax.xpath(\"//project\", loader);\r\n\t\t\tfor (var i = 0; i < xml.length; i++) {\r\n\t\t\t\tvar ev = gantt.xml._xmlNodeToJSON(xml[i], true);\r\n\t\t\t\tev.id = \"project-\" + ev.id;\r\n\t\t\t\tevs.push(ev);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < evs.length; i++) {\r\n\t\t\t\tvar ev = evs[i];\r\n\t\t\t\tev.start_date = ev.startdate || ev.est;\r\n\t\t\t\tev.end_date = ev.enddate;\r\n\t\t\t\tev.text = ev.name;\r\n\t\t\t\tev.duration = ev.duration / 8;\r\n\t\t\t\tev.open = 1;\r\n\t\t\t\tif (!ev.duration && !ev.end_date) ev.duration = 1;\r\n\t\t\t\tif (ev.predecessortasks)\r\n\t\t\t\t\tdata.collections.links.push({\r\n\t\t\t\t\t\ttarget: ev.id,\r\n\t\t\t\t\t\tsource: ev.predecessortasks,\r\n\t\t\t\t\t\ttype: gantt.config.links.finish_to_start\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\tserialize: function () {\r\n\t\t\tgantt.message(\"Serialization to 'old XML' is not implemented\");\r\n\t\t}\r\n\t};\r\n\r\n\tgantt.serverList = function (name, array) {\r\n\t\tif (array) {\r\n\t\t\tthis.serverList[name] = array.slice(0);\r\n\t\t} else if (!this.serverList[name]) {\r\n\t\t\tthis.serverList[name] = [];\r\n\t\t}\r\n\t\treturn this.serverList[name];\r\n\t};\r\n\r\n};","module.exports = function(gantt) {\r\n\tgantt.isReadonly = function (item) {\r\n\t\tif (item && item[this.config.editable_property]) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn (item && item[this.config.readonly_property]) || this.config.readonly;\r\n\t\t}\r\n\t};\r\n};","module.exports = function(gantt){\r\n\r\n\tvar htmlTags = new RegExp(\"<(?:.|\\n)*?>\", \"gm\");\r\n\tvar extraSpaces = new RegExp(\" +\", \"gm\");\r\n\r\n\tfunction stripHTMLLite(htmlText){\r\n\t\treturn (htmlText + \"\")\r\n\t\t\t.replace(htmlTags, \" \").\r\n\t\t\treplace(extraSpaces, \" \");\r\n\t}\r\n\r\n\tvar singleQuotes = new RegExp(\"'\", \"gm\");\r\n\tfunction escapeQuotes(text){\r\n\t\treturn (text + \"\").replace(singleQuotes, \"&#39;\");\r\n\t}\r\n\r\n\tgantt._waiAria = {\r\n\t\tgetAttributeString: function(attr){\r\n\t\t\tvar attributes = [\" \"];\r\n\t\t\tfor(var i in attr){\r\n\t\t\t\tvar text = escapeQuotes(stripHTMLLite(attr[i]));\r\n\t\t\t\tattributes.push(i + \"='\" + text + \"'\");\r\n\t\t\t}\r\n\t\t\tattributes.push(\" \");\r\n\t\t\treturn attributes.join(\" \");\r\n\r\n\t\t},\r\n\r\n\t\tgetTimelineCellAttr:function(dateString){\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": dateString});\r\n\t\t},\r\n\r\n\r\n\t\t_taskCommonAttr: function(task, div){\r\n\r\n\t\t\tif(!(task.start_date && task.end_date))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(gantt.templates.tooltip_text(task.start_date, task.end_date, task)));\r\n\r\n\t\t\tif(gantt.isReadonly(task)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(task.$dataprocessor_class){\r\n\t\t\t\tdiv.setAttribute(\"aria-busy\", true);\r\n\t\t\t}\r\n\r\n\r\n\t\t\tdiv.setAttribute(\"aria-selected\",\r\n\t\t\t\t(gantt.getState().selected_task == task.id || (gantt.isSelectedTask && gantt.isSelectedTask(task.id))) ? \"true\" : \"false\");\r\n\t\t},\r\n\r\n\t\tsetTaskBarAttr: function(task, div){\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.drag_move){\r\n\t\t\t\tif(task.id != gantt.getState().drag_id){\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdiv.setAttribute(\"aria-grabbed\", true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ttaskRowAttr: function(task, div){\r\n\r\n\t\t\tthis._taskCommonAttr(task, div);\r\n\r\n\t\t\tif(!gantt.isReadonly(task) && gantt.config.order_branch){\r\n\t\t\t\tdiv.setAttribute(\"aria-grabbed\", false);\r\n\t\t\t}\r\n\r\n\t\t\tdiv.setAttribute(\"role\", \"row\");\r\n\r\n\t\t\tdiv.setAttribute(\"aria-level\", task.$level);\r\n\r\n\t\t\tif(gantt.hasChild(task.id)){\r\n\t\t\t\tdiv.setAttribute(\"aria-expanded\", task.$open ? \"true\" : \"false\");\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tlinkAttr: function(link, div){\r\n\r\n\t\t\tvar linkTypes = gantt.config.links;\r\n\r\n\t\t\tvar toStart = link.type == linkTypes.finish_to_start || link.type == linkTypes.start_to_start;\r\n\t\t\tvar fromStart = link.type == linkTypes.start_to_start || link.type == linkTypes.start_to_finish;\r\n\r\n\t\t\tvar content = gantt.locale.labels.link + \" \" +  gantt.templates.drag_link(link.source, fromStart, link.target, toStart);\r\n\r\n\t\t\tdiv.setAttribute(\"aria-label\", stripHTMLLite(content));\r\n\t\t\tif(gantt.isReadonly(link)){\r\n\t\t\t\tdiv.setAttribute(\"aria-readonly\", true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgridSeparatorAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"separator\");\r\n\t\t},\r\n\r\n\t\tlightboxHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t},\r\n\r\n\t\tlightboxVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\tlightboxAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t\tdiv.firstChild.setAttribute(\"role\", \"heading\");\r\n\t\t},\r\n\r\n\t\tlightboxButtonAttrString:function(buttonName){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\":gantt.locale.labels[buttonName], \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\tlightboxHeader: function(div, headerText){\r\n\t\t\tdiv.setAttribute(\"aria-label\", headerText);\r\n\t\t},\r\n\r\n\t\tlightboxSelectAttrString: function(time_option){\r\n\t\t\tvar label = \"\";\r\n\r\n\t\t\tswitch (time_option) {\r\n\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.years;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%m\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.months;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%d\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.days;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"%H:%i\":\r\n\t\t\t\t\tlabel = gantt.locale.labels.hours + gantt.locale.labels.minutes;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"aria-label\": label});\r\n\t\t},\r\n\r\n\t\tlightboxDurationInputAttrString: function(section){\r\n\t\t\treturn this.getAttributeString({\"aria-label\": gantt.locale.labels.column_duration, \"aria-valuemin\": \"0\"});\r\n\t\t},\r\n\r\n\t\tgridAttrString: function(){\r\n\t\t\treturn [\" role='treegrid'\", gantt.config.multiselect ? \"aria-multiselectable='true'\" : \"aria-multiselectable='false'\", \" \"].join(\" \");\r\n\t\t},\r\n\r\n\r\n\t\tgridScaleRowAttrString: function(){\r\n\t\t\treturn \"role='row'\";\r\n\t\t},\r\n\r\n\t\tgridScaleCellAttrString: function(column, label){\r\n\t\t\tvar attrs = \"\";\r\n\t\t\tif(column.name == \"add\"){\r\n\t\t\t\tattrs = this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t\t}else{\r\n\r\n\t\t\t\tvar attributes = {\r\n\t\t\t\t\t\"role\":\"columnheader\",\r\n\t\t\t\t\t\"aria-label\": label\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif(gantt._sort && gantt._sort.name == column.name){\r\n\t\t\t\t\tif(gantt._sort.direction == \"asc\"){\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"ascending\";\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tattributes[\"aria-sort\"] = \"descending\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tattrs = this.getAttributeString(attributes);\r\n\t\t\t}\r\n\t\t\treturn attrs;\r\n\t\t},\r\n\r\n\t\tgridDataAttrString: function(){\r\n\t\t\treturn \"role='rowgroup'\";\r\n\t\t},\r\n\r\n\t\tgridCellAttrString: function(column, textValue){\r\n\t\t\treturn this.getAttributeString({\"role\":\"gridcell\", \"aria-label\": textValue});\r\n\t\t},\r\n\r\n\t\tgridAddButtonAttrString: function(column){\r\n\t\t\treturn this.getAttributeString({\"role\":\"button\", \"aria-label\": gantt.locale.labels.new_task});\r\n\t\t},\r\n\r\n\t\tmessageButtonAttrString: function(buttonLabel){\r\n\t\t\treturn \"tabindex='0' role='button' aria-label='\"+buttonLabel+\"'\";\r\n\t\t},\r\n\r\n\t\tmessageInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"alert\");\r\n\t\t\t//div.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tmessageModalAttr: function(div, uid){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t\tif(uid){\r\n\t\t\t\tdiv.setAttribute(\"aria-labelledby\", uid);\r\n\t\t\t}\r\n\r\n\t\t//\tdiv.setAttribute(\"tabindex\", \"-1\");\r\n\t\t},\r\n\r\n\t\tquickInfoAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"dialog\");\r\n\t\t},\r\n\r\n\t\tquickInfoHeaderAttrString: function(){\r\n\t\t\treturn \" role='heading' \";\r\n\t\t},\r\n\r\n\t\tquickInfoHeader: function(div, header){\r\n\t\t\tdiv.setAttribute(\"aria-label\", header);\r\n\t\t},\r\n\r\n\t\tquickInfoButtonAttrString: function(label){\r\n\t\t\treturn gantt._waiAria.getAttributeString({\"role\":\"button\", \"aria-label\":label, \"tabindex\":\"0\"});\r\n\t\t},\r\n\r\n\t\ttooltipAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"role\", \"tooltip\");\r\n\t\t},\r\n\r\n\t\ttooltipVisibleAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"false\");\r\n\t\t},\r\n\r\n\t\ttooltipHiddenAttr: function(div){\r\n\t\t\tdiv.setAttribute(\"aria-hidden\", \"true\");\r\n\t\t}\r\n\t};\r\n\r\n\tfunction isDisabled(){\r\n\t\treturn !gantt.config.wai_aria_attributes;\r\n\t}\r\n\r\n\tfor(var i in gantt._waiAria){\r\n\t\tgantt._waiAria[i] = (function(payload){\r\n\t\t\treturn function(){\r\n\t\t\t\tif(isDisabled()){\r\n\t\t\t\t\treturn \"\";\r\n\t\t\t\t}\r\n\t\t\t\treturn payload.apply(this, arguments);\r\n\t\t\t};\r\n\t\t})(gantt._waiAria[i]);\r\n\t}\r\n\r\n\r\n};","module.exports = function(gantt) {\r\n\tgantt.getGridColumn = function(name) {\r\n\t\tvar columns = gantt.config.columns;\r\n\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tif (columns[i].name == name)\r\n\t\t\t\treturn columns[i];\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n\r\n\tgantt.getGridColumns = function() {\r\n\t\treturn gantt.config.columns.slice();\r\n\t};\r\n};","module.exports = function(gantt) {\r\n};","module.exports = function(gantt) {\r\n\tfunction isEnabled() {\r\n\t\treturn gantt.config.auto_types && // if enabled\r\n\t\t\t(gantt.getTaskType(gantt.config.types.project) == gantt.config.types.project);// and supported\r\n\t}\r\n\r\n\tfunction callIfEnabled(callback) {\r\n\t\treturn function() {\r\n\t\t\tif (!isEnabled()) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn callback.apply(this, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\tfunction updateParents(childId) {\r\n\t\tgantt.batchUpdate(function() {\r\n\t\t\tcheckParent(childId);\r\n\t\t});\r\n\t}\r\n\r\n\tvar delTaskParent;\r\n\r\n\tfunction checkParent(id) {\r\n\t\tsetTaskType(id);\r\n\t\tvar parent = gantt.getParent(id);\r\n\r\n\t\tif (parent != gantt.config.root_id) {\r\n\t\t\tcheckParent(parent);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setTaskType(id) {\r\n\t\tid = id.id || id;\r\n\t\tvar task = gantt.getTask(id);\r\n\t\tvar targetType = getTaskTypeToUpdate(task);\r\n\r\n\t\tif (targetType !== false) {\r\n\t\t\tupdateTaskType(task, targetType);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction updateTaskType(task, targetType) {\r\n\t\ttask.type = targetType;\r\n\t\tgantt.updateTask(task.id);\r\n\t}\r\n\r\n\tfunction getTaskTypeToUpdate(task) {\r\n\t\tvar allTypes = gantt.config.types;\r\n\t\tvar hasChildren = gantt.hasChild(task.id);\r\n\t\tvar taskType = gantt.getTaskType(task.type);\r\n\r\n\t\tif (hasChildren && taskType === allTypes.task) {\r\n\t\t\treturn allTypes.project;\r\n\t\t}\r\n\r\n\t\tif (!hasChildren && taskType === allTypes.project) {\r\n\t\t\treturn allTypes.task;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tvar isParsingDone = true;\r\n\r\n\tgantt.attachEvent(\"onParse\", callIfEnabled(function() {\r\n\t\tisParsingDone = false;\r\n\r\n\t\tgantt.batchUpdate(function() {\r\n\t\t\tgantt.eachTask(function(task) {\r\n\t\t\t\tvar targetType = getTaskTypeToUpdate(task);\r\n\t\t\t\tif (targetType !== false) {\r\n\t\t\t\t\tupdateTaskType(task, targetType);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tisParsingDone = true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskAdd\",  function() {\r\n\t\tif (isParsingDone)\r\n\t\t\tcallIfEnabled(updateParents)\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskUpdate\", function() {\r\n\t\tif (isParsingDone)\r\n\t\t\tcallIfEnabled(updateParents);\r\n\t});\r\n\r\n\r\n\tfunction updateAfterRemoveChild(id){\r\n\t\tif (id != gantt.config.root_id && gantt.isTaskExists(id)) {\r\n\t\t\tupdateParents(id);\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDelete\",  callIfEnabled(function(id, task) {\r\n\t\tdelTaskParent = gantt.getParent(id);\r\n\t\treturn true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", callIfEnabled(function(id, task) {\r\n\t\tupdateAfterRemoveChild(delTaskParent);\r\n\t}));\r\n\r\n\r\n\tvar originalRowDndParent;\r\n\r\n\tgantt.attachEvent(\"onRowDragStart\", callIfEnabled(function(id, target, e) {\r\n\t\toriginalRowDndParent = gantt.getParent(id);\r\n\t\treturn true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onRowDragEnd\", callIfEnabled(function(id, target) {\r\n\t\tupdateAfterRemoveChild(originalRowDndParent);\r\n\t\tupdateParents(id);\r\n\t}));\r\n\r\n\tvar originalMoveTaskParent;\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskMove\", callIfEnabled(function(sid, parent, tindex) {\r\n\t\toriginalMoveTaskParent = gantt.getParent(sid);\r\n\t\treturn true;\r\n\t}));\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", callIfEnabled(function(id, parent, tindex) {\r\n\t\tif (document.querySelector(\".gantt_drag_marker\")) {\r\n\t\t\t// vertical dnd in progress\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tupdateAfterRemoveChild(originalMoveTaskParent);\r\n\t\tupdateParents(id);\r\n\t}));\r\n};","module.exports = function addPlaceholder(gantt){\r\n\tfunction isEnabled(){\r\n\t\treturn gantt.config.placeholder_task;\r\n\t}\r\n\r\n\tfunction callIfEnabled(callback){\r\n\t\treturn function(){\r\n\t\t\tif(!isEnabled()){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn callback.apply(this, arguments);\r\n\t\t};\r\n\t}\r\n\r\n\tfunction silenceDataProcessor(dataProcessor){\r\n\t\tif(dataProcessor && !dataProcessor._silencedPlaceholder){\r\n\t\t\tdataProcessor._silencedPlaceholder = true;\r\n\t\t\tdataProcessor.attachEvent(\"onBeforeUpdate\", callIfEnabled(function(id, state, data){\r\n\t\t\t\tif(data.type == gantt.config.types.placeholder){\r\n\t\t\t\t\tdataProcessor.setUpdated(id, false);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction insertPlaceholder(){\r\n\t\tvar placeholders = gantt.getTaskBy(\"type\", gantt.config.types.placeholder)\r\n\t\tif(!placeholders.length || !gantt.isTaskExists(placeholders[0].id)){\r\n\t\t\tvar placeholder = {\r\n\t\t\t\tunscheduled: true,\r\n\t\t\t\ttype: gantt.config.types.placeholder,\r\n\t\t\t\tduration:0,\r\n\t\t\t\ttext: gantt.locale.labels.new_task\r\n\t\t\t};\r\n\t\t\tif(gantt.callEvent(\"onTaskCreated\", [placeholder]) === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tgantt.addTask(placeholder);\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tfunction afterEdit(id){\r\n\t\tvar item = gantt.getTask(id);\r\n\t\tif(item.type == gantt.config.types.placeholder) {\r\n\t\t\tif(item.start_date && item.end_date && item.unscheduled){\r\n\t\t\t\titem.unscheduled = false;\r\n\t\t\t}\r\n\r\n\t\t\tgantt.batchUpdate(function(){\r\n\t\t\t\tvar newTask = gantt.copy(item);\r\n\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\tgantt.deleteTask(item.id);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdelete newTask[\"!nativeeditor_status\"];\r\n\t\t\t\tnewTask.type = gantt.config.types.task;\r\n\t\t\t\tnewTask.id = gantt.uid();\r\n\t\t\t\tgantt.addTask(newTask);\r\n\r\n\t\t\t\t//insertPlaceholder();\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.config.types.placeholder = \"placeholder\";\r\n\tgantt.attachEvent(\"onDataProcessorReady\", callIfEnabled(silenceDataProcessor));\r\n\r\n\tvar ready = false;\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tif(ready){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tready = true;\r\n\t\tgantt.attachEvent(\"onAfterTaskUpdate\", callIfEnabled(afterEdit));\r\n\t\tgantt.attachEvent(\"onAfterTaskAdd\", callIfEnabled(function(id, task){\r\n\t\t\tif(task.type != gantt.config.types.placeholder){\r\n\t\t\t\tvar placeholders = gantt.getTaskBy(\"type\", gantt.config.types.placeholder);\r\n\t\t\t\tplaceholders.forEach(function(p){\r\n\t\t\t\t\tgantt.silent(function(){\r\n\t\t\t\t\t\tif(gantt.isTaskExists(p.id))\r\n\t\t\t\t\t\t\tgantt.deleteTask(p.id);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tinsertPlaceholder();\r\n\t\t\t}\r\n\t\t}));\r\n\t\tgantt.attachEvent(\"onParse\", callIfEnabled(insertPlaceholder));\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onBeforeUndoStack\", function(action){\r\n\t\tfor(var i = 0; i < action.commands.length; i++){\r\n\t\t\tvar command = action.commands[i];\r\n\t\t\tif(command.entity === \"task\" && command.value.type === gantt.config.types.placeholder){\r\n\t\t\t\taction.commands.splice(i,1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n};","var helpers = require(\"../../utils/helpers\");\r\n\r\nfunction createResourceMethods(gantt){\r\n\r\n\tvar resourceTaskCache = {},\r\n\t\tresourceLoadCache = {};\r\n\r\n\tgantt.$data.tasksStore.attachEvent(\"onStoreUpdated\", function(){\r\n\t\tresourceTaskCache = {};\r\n\t\tresourceLoadCache = {};\r\n\t});\r\n\r\n\tfunction getTaskBy(propertyName, propertyValue) {\r\n\t\tif (typeof propertyName == \"function\") {\r\n\t\t\treturn filterResourceTasks(propertyName);\r\n\t\t} else {\r\n\t\t\tif (helpers.isArray(propertyValue)) {\r\n\t\t\t\treturn getResourceTasks(propertyName, propertyValue);\r\n\t\t\t} else {\r\n\t\t\t\treturn getResourceTasks(propertyName, [propertyValue]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction filterResourceTasks(filter) {\r\n\t\tvar res = [];\r\n\t\tgantt.eachTask(function (task) {\r\n\t\t\tif (filter(task)) {\r\n\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction getResourceTasks(property, resourceIds) {\r\n\t\tvar res;\r\n\r\n\t\tvar cacheKey = resourceIds.join(\"_\") + \"_\" + property;\r\n\r\n\t\tvar resourceHash = {};\r\n\t\tfor (var i = 0; i < resourceIds.length; i++) {\r\n\t\t\tresourceHash[resourceIds[i]] = true;\r\n\t\t}\r\n\r\n\t\tif (!resourceTaskCache[cacheKey]) {\r\n\t\t\tres = resourceTaskCache[cacheKey] = [];\r\n\t\t\tgantt.eachTask(function (task) {\r\n\t\t\t\tif (task.type == gantt.config.types.project)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tvar resourceValue;\r\n\t\t\t\tif (!helpers.isArray(task[property])) {\r\n\t\t\t\t\tresourceValue = [task[property]];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresourceValue = task[property];\r\n\t\t\t\t}\r\n\r\n\t\t\t\thelpers.forEach(resourceValue, function(value) {\r\n\t\t\t\t\tif(value && (resourceHash[value]  || resourceHash[value.resource_id])) {\r\n\t\t\t\t\t\tres.push(task);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction getResourceLoad(resource, resourceProperty, scale, timeline){\r\n\t\tvar cacheKey = resource.id + \"_\" + resourceProperty  + \"_\" + scale.unit + \"_\" + scale.step;\r\n\t\tvar res;\r\n\t\tif (!resourceTaskCache[cacheKey]) {\r\n\t\t\tres = resourceTaskCache[cacheKey] = calculateResourceLoad(resource, resourceProperty, scale, timeline);\r\n\r\n\t\t} else {\r\n\t\t\tres = resourceTaskCache[cacheKey];\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\tfunction calculateResourceLoad(resource, resourceProperty, scale, timeline) {\r\n\r\n\t\tvar tasks;\r\n\t\tif(resource.$role == \"task\"){\r\n\t\t\ttasks = [];\r\n\t\t}else{\r\n\t\t\ttasks = getTaskBy(resourceProperty, resource.id);\r\n\t\t}\r\n\t\tvar step = scale.unit;\r\n\t\tvar timegrid = {};\r\n\r\n\t\tfor (var i = 0; i < tasks.length; i++) {\r\n\t\t\tvar task = tasks[i];\r\n\r\n\t\t\tvar currDate = gantt.date[step + \"_start\"](new Date(task.start_date));\r\n\r\n\t\t\twhile (currDate < task.end_date) {\r\n\r\n\t\t\t\tvar date = currDate;\r\n\t\t\t\tcurrDate = gantt.date.add(currDate, 1, step);\r\n\r\n\t\t\t\tif (!gantt.isWorkTime({date: date, task: task, unit: step})) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar timestamp = date.valueOf();\r\n\t\t\t\tif (!timegrid[timestamp]){\r\n\t\t\t\t\ttimegrid[timestamp] = [];\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttimegrid[timestamp].push(task);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar timetable = [];\r\n\t\tvar start, end, tasks;\r\n\t\tvar config = timeline.$getConfig();\r\n\r\n\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\tstart = new Date(scale.trace_x[i]);\r\n\t\t\tend = gantt.date.add(start, 1, step);\r\n\t\t\ttasks = timegrid[start.valueOf()] || [];\r\n\t\t\tif(tasks.length || config.resource_render_empty_cells){\r\n\t\t\t\ttimetable.push({\r\n\t\t\t\t\tstart_date: start,\r\n\t\t\t\t\tend_date: end,\r\n\t\t\t\t\ttasks: tasks\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn timetable;\r\n\t}\r\n\r\n\tfunction renderResourceLine(resource, timeline) {\r\n\t\tvar config = timeline.$getConfig(),\r\n\t\t\ttemplates = timeline.$getTemplates();\r\n\t\tvar timetable = getResourceLoad(resource, config.resource_property, timeline.getScale(), timeline);\r\n\r\n\t\tvar cells = [];\r\n\t\tfor (var i = 0; i < timetable.length; i++) {\r\n\r\n\t\t\tvar day = timetable[i];\r\n\r\n\t\t\tvar css = templates.resource_cell_class(day.start_date, day.end_date, resource, day.tasks);\r\n\t\t\tvar content = templates.resource_cell_value(day.start_date, day.end_date, resource, day.tasks);\r\n\r\n\t\t\tif (css || content){\r\n\t\t\t\tvar sizes = timeline.getItemPosition(resource, day.start_date, day.end_date);\r\n\t\t\t\tvar el = document.createElement('div');\r\n\t\t\t\tel.className = [\"gantt_resource_marker\", css].join(\" \");\r\n\r\n\t\t\t\tel.style.cssText = [\r\n\t\t\t\t\t'left:' + sizes.left + 'px',\r\n\t\t\t\t\t'width:' + sizes.width + 'px',\r\n\t\t\t\t\t'height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'line-height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'top:' + sizes.top + 'px'\r\n\t\t\t\t].join(\";\");\r\n\r\n\t\t\t\tif(content)\r\n\t\t\t\t\tel.innerHTML = content;\r\n\r\n\t\t\t\tcells.push(el);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar row = null;\r\n\t\tif(cells.length){\r\n\t\t\trow = document.createElement(\"div\");\r\n\t\t\tfor(var i = 0; i < cells.length; i++){\r\n\t\t\t\trow.appendChild(cells[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\r\n\tfunction renderBar(level, start, end, timeline){\r\n\t\tvar top = (1 - (level*1||0))*100;\r\n\t\tvar left = timeline.posFromDate(start);\r\n\t\tvar right = timeline.posFromDate(end);\r\n\t\tvar element = document.createElement(\"div\");\r\n\t\telement.className = \"gantt_histogram_hor_bar\";\r\n\t\telement.style.top = top + '%';\r\n\t\telement.style.left = left + \"px\";\r\n\t\telement.style.width = (right - left + 1) + \"px\";\r\n\t\treturn element;\r\n\t}\r\n\tfunction renderConnection(prevLevel, nextLevel, left){\r\n\t\tif(prevLevel === nextLevel){\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tvar top = 1 - Math.max(prevLevel, nextLevel);\r\n\t\tvar height = Math.abs(prevLevel - nextLevel);\r\n\t\tvar element = document.createElement(\"div\");\r\n\t\telement.className = \"gantt_histogram_vert_bar\";\r\n\t\telement.style.top = top*100 + \"%\";\r\n\t\telement.style.height = height*100 + \"%\";\r\n\t\telement.style.left = left + \"px\";\r\n\r\n\t\treturn element;\r\n\t}\r\n\r\n\tfunction renderHistogramLine(capacity, timeline, maxCapacity){\r\n\t\tvar scale = timeline.getScale();\r\n\r\n\t\tvar el = document.createElement(\"div\");\r\n\r\n\t\tfor(var i = 0; i < scale.trace_x.length; i++){\r\n\t\t\tvar colStart = scale.trace_x[i];\r\n\t\t\tvar colEnd = scale.trace_x[i + 1] || gantt.date.add(colStart, scale.step, scale.unit);\r\n\t\t\tvar col = scale.trace_x[i].valueOf();\r\n\t\t\tvar level = Math.min(capacity[col]/maxCapacity, 1) || 0;\r\n\t\t\tif(level < 0){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\tvar nextLevel = Math.min(capacity[colEnd.valueOf()]/maxCapacity, 1) || 0;\r\n\r\n\r\n\t\t\tvar bar = renderBar(level, colStart, colEnd, timeline);\r\n\t\t\tif(bar){\r\n\t\t\t\tel.appendChild(bar);\r\n\t\t\t}\r\n\t\t\tvar connection = renderConnection(level, nextLevel, timeline.posFromDate(colEnd));\r\n\t\t\tif(connection){\r\n\t\t\t\tel.appendChild(connection)\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\treturn el;\r\n\t}\r\n\r\n\tfunction renderResourceHistogram(resource, timeline) {\r\n\t\tvar config = timeline.$getConfig(),\r\n\t\t\ttemplates = timeline.$getTemplates();\r\n\t\tvar timetable = getResourceLoad(resource, config.resource_property, timeline.getScale(), timeline);\r\n\r\n\t\tvar cells = [];\r\n\t\tvar capacityMatrix = {};\r\n\t\tvar maxCapacity = resource.capacity || timeline.$config.capacity || 24;\r\n\t\tfor (var i = 0; i < timetable.length; i++) {\r\n\r\n\t\t\tvar day = timetable[i];\r\n\r\n\t\t\tvar css = templates.histogram_cell_class(day.start_date, day.end_date, resource, day.tasks);\r\n\t\t\tvar content = templates.histogram_cell_label(day.start_date, day.end_date, resource, day.tasks);\r\n\t\t\tvar fill = templates.histogram_cell_allocated(day.start_date, day.end_date, resource, day.tasks);\r\n\t\t\tvar capacity = templates.histogram_cell_capacity(day.start_date, day.end_date, resource, day.tasks);\r\n\t\t\tcapacityMatrix[day.start_date.valueOf()] = capacity || 0;\r\n\t\t\tif(css || content){\r\n\t\t\t\tvar sizes = timeline.getItemPosition(resource, day.start_date, day.end_date);\r\n\t\t\t\tvar el = document.createElement('div');\r\n\t\t\t\tel.className = [\"gantt_histogram_cell\", css].join(\" \");\r\n\r\n\t\t\t\tel.style.cssText = [\r\n\t\t\t\t\t'left:' + sizes.left + 'px',\r\n\t\t\t\t\t'width:' + sizes.width + 'px',\r\n\t\t\t\t\t'height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'line-height:' + (config.row_height - 1) + 'px',\r\n\t\t\t\t\t'top:' + (sizes.top + 1) + 'px'\r\n\t\t\t\t].join(\";\");\r\n\r\n\r\n\t\t\t\tif (content) {\r\n\t\t\t\t\tcontent = \"<div class='gantt_histogram_label'>\" + content +\"</div>\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (fill) {\r\n\r\n\t\t\t\t\tcontent = \"<div class='gantt_histogram_fill' style='height:\"+(Math.min(fill/maxCapacity||0, 1)*100)+\"%;'></div>\" + content;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (content)\r\n\t\t\t\t\tel.innerHTML = content;\r\n\r\n\t\t\t\tcells.push(el);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar row = null;\r\n\t\tif (cells.length) {\r\n\t\t\trow = document.createElement(\"div\");\r\n\t\t\tfor (var i = 0; i < cells.length; i++) {\r\n\t\t\t\trow.appendChild(cells[i]);\r\n\t\t\t}\r\n\r\n\t\t\tvar capacityElement = renderHistogramLine(capacityMatrix, timeline, maxCapacity);\r\n\r\n\t\t\tif (capacityElement) {\r\n\t\t\t\tcapacityElement.setAttribute(\"data-resource-id\", resource.id);\r\n\t\t\t\tcapacityElement.style.position = \"absolute\";\r\n\t\t\t\tcapacityElement.style.top = (sizes.top + 1) + \"px\";\r\n\t\t\t\tcapacityElement.style.height = (config.row_height - 1) + \"px\";\r\n\t\t\t\tcapacityElement.style.left = 0;\r\n\t\t\t\trow.appendChild(capacityElement)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\tfunction selectAssignments(resourceId, taskId, result){\r\n\t\tvar property = gantt.config.resource_property;\r\n\t\tvar task = gantt.getTask(taskId);\r\n\t\tvar owners = task[property] || [];\r\n\t\tif(!Array.isArray(owners)){\r\n\t\t\towners = [owners];\r\n\t\t}\r\n\t\tfor(var i = 0; i < owners.length; i++){\r\n\t\t\tif(owners[i].resource_id == resourceId){\r\n\t\t\t\tresult.push({task_id: task.id, resource_id:owners[i].resource_id, value:owners[i].value});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetResourceAssignments = function(resourceId, taskId){\r\n\t\t// resource assignment as an independent module: \r\n\t\t// {taskId:, resourceId, value}\r\n\t\t// TODO: probably should add a separate datastore for these\r\n\t\tvar assignments = [];\r\n\t\tvar property = gantt.config.resource_property;\r\n\t\tif(taskId !== undefined){\r\n\t\t\tselectAssignments(resourceId, taskId, assignments);\r\n\t\t}else{\r\n\t\t\tvar tasks = gantt.getTaskBy(property, resourceId);\r\n\t\t\ttasks.forEach(function(task){\r\n\t\t\t\tselectAssignments(resourceId, task.id, assignments);\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn assignments;\r\n\t};\r\n\r\n\treturn {\r\n\t\trenderLine: renderResourceLine,\r\n\t\trenderHistogram: renderResourceHistogram,\r\n\t\tfilterTasks: getTaskBy,\r\n\t\tgetResourceAssignments: getResourceAssignments\r\n\t};\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tvar methods = createResourceMethods(gantt);\r\n\r\n\tgantt.getTaskBy = methods.filterTasks;\r\n\tgantt.getResourceAssignments = methods.getResourceAssignments;\r\n\tgantt.$ui.layers.resourceRow = methods.renderLine;\r\n\tgantt.$ui.layers.resourceHistogram = methods.renderHistogram;\r\n\tgantt.config.resource_property = \"owner_id\";\r\n\tgantt.config.resource_store = \"resource\";\r\n\tgantt.config.resource_render_empty_cells = false;\r\n\r\n\t/**\r\n\t * these are placeholder functions that should be redefined by the user\r\n\t*/\r\n\tgantt.templates.histogram_cell_class = function(start_date, end_date, resource, tasks) {};\r\n\tgantt.templates.histogram_cell_label = function(start_date, end_date, resource, tasks) {\r\n\t\treturn tasks.length + \"/3\";\r\n\t};\r\n\tgantt.templates.histogram_cell_allocated = function(start_date, end_date, resource, tasks) {\r\n\t\treturn tasks.length / 3;\r\n\t};\r\n\tgantt.templates.histogram_cell_capacity = function(start_date, end_date, resource, tasks) {\r\n\t\treturn 0;\r\n\t};\r\n\r\n\r\n\r\n\tgantt.templates.resource_cell_class = function(start, end, resource, tasks) {\r\n\t\tvar css = \"\";\r\n\t\tif (tasks.length <= 1) {\r\n\t\t\tcss = \"gantt_resource_marker_ok\";\r\n\t\t} else {\r\n\t\t\tcss = \"gantt_resource_marker_overtime\";\r\n\t\t}\r\n\t\treturn css;\r\n\t};\r\n\r\n\tgantt.templates.resource_cell_value = function(start, end, resource, tasks) {\r\n\t\treturn tasks.length * 8;\r\n\t};\r\n};\r\n\r\n\r\n","if (window.dhtmlx){\r\n\r\n\tif (!dhtmlx.attaches)\r\n\t\tdhtmlx.attaches = {};\r\n\r\n\tdhtmlx.attaches.attachGantt=function(start, end, gantt){\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tobj.id = \"gantt_\"+ gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tvar that = this.vs[this.av];\r\n\t\tthat.grid = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\r\n\t\tthat.gridId = obj.id;\r\n\t\tthat.gridObj = obj;\r\n\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\treturn this.vs[this[method_name]()].grid;\r\n\t};\r\n\r\n}\r\nif (typeof(window.dhtmlXCellObject) != \"undefined\") {\r\n\r\n\tdhtmlXCellObject.prototype.attachGantt=function(start, end, gantt){\r\n\t\tgantt = gantt || window.gantt;\r\n\r\n\t\tvar obj = document.createElement(\"DIV\");\r\n\t\tobj.id = \"gantt_\"+gantt.uid();\r\n\t\tobj.style.width = \"100%\";\r\n\t\tobj.style.height = \"100%\";\r\n\t\tobj.cmp = \"grid\";\r\n\r\n\t\tdocument.body.appendChild(obj);\r\n\t\tthis.attachObject(obj.id);\r\n\r\n\t\tthis.dataType = \"gantt\";\r\n\t\tthis.dataObj = gantt;\r\n\r\n\t\tgantt.init(obj.id, start, end);\r\n\t\tobj.firstChild.style.border = \"none\";\r\n\t\tvar method_name=\"_viewRestore\";\r\n\t\tobj = null;\r\n\t\tthis.callEvent(\"_onContentAttach\",[]);\r\n\r\n\t\treturn this.dataObj;\r\n\t};\r\n}\r\n\r\nmodule.exports = null;","if (window.jQuery){\r\n\r\n\t(function( $ ){\r\n\r\n\t\tvar methods = [];\r\n\t\t$.fn.dhx_gantt = function(config){\r\n\t\t\tconfig = config || {};\r\n\t\t\tif (typeof(config) === 'string') {\r\n\t\t\t\tif (methods[config] ) {\r\n\t\t\t\t\treturn methods[config].apply(this, []);\r\n\t\t\t\t}else {\r\n\t\t\t\t\t$.error('Method ' +  config + ' does not exist on jQuery.dhx_gantt');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar views = [];\r\n\t\t\t\tthis.each(function() {\r\n\t\t\t\t\tif (this && this.getAttribute){\r\n\t\t\t\t\t\tif (!this.gantt && !(window.gantt.$root == this)){\r\n\r\n\t\t\t\t\t\t\tvar newgantt = (window.gantt.$container && window.Gantt) ? window.Gantt.getGanttInstance():window.gantt;\r\n\t\t\t\t\t\t\tfor (var key in config)\r\n\t\t\t\t\t\t\t\tif (key!=\"data\")\r\n\t\t\t\t\t\t\t\t\tnewgantt.config[key] = config[key];\r\n\r\n\t\t\t\t\t\t\tnewgantt.init(this);\r\n\t\t\t\t\t\t\tif (config.data)\r\n\t\t\t\t\t\t\t\tnewgantt.parse(config.data);\r\n\r\n\t\t\t\t\t\t\tviews.push(newgantt);\r\n\t\t\t\t\t\t} else\r\n\t\t\t\t\t\t\tviews.push(typeof this.gantt == \"object\" ? this.gantt : window.gantt);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t\tif (views.length === 1) return views[0];\r\n\t\t\t\treturn views;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t})(jQuery);\r\n\r\n}\r\n\r\n\r\nmodule.exports = null;","var createWbs = (function(gantt){\r\n\treturn {\r\n\t_needRecalc: true,\r\n\treset: function(){\r\n\t\tthis._needRecalc = true;\r\n\t},\r\n\t_isRecalcNeeded: function(){\r\n\t\treturn (!this._isGroupSort() && this._needRecalc);\r\n\t},\r\n\t_isGroupSort: function() {\r\n\t\treturn !!(gantt._groups && gantt._groups.is_active());\r\n\t},\r\n\t_getWBSCode: function(task) {\r\n\t\tif(!task) return \"\";\r\n\r\n\t\tif(this._isRecalcNeeded()){\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\r\n\t\tif(task.$virtual) return \"\";\r\n\t\tif(this._isGroupSort()) return task.$wbs || \"\";\r\n\r\n\t\tif(!task.$wbs) {\r\n\t\t\tthis.reset();\r\n\t\t\tthis._calcWBS();\r\n\t\t}\r\n\t\treturn task.$wbs;\r\n\t},\r\n\t_setWBSCode: function(task, value) {\r\n\t\ttask.$wbs = value;\r\n\t},\r\n\tgetWBSCode: function(task) {\r\n\t\treturn this._getWBSCode(task);\r\n\t},\r\n\tgetByWBSCode: function(code){\r\n\t\tvar parts = code.split(\".\");\r\n\t\tvar currentNode = gantt.config.root_id;\r\n\t\tfor(var i = 0; i < parts.length; i++){\r\n\t\t\tvar children = gantt.getChildren(currentNode);\r\n\t\t\tvar index = parts[i]*1 - 1;\r\n\t\t\tif(gantt.isTaskExists(children[index])){\r\n\t\t\t\tcurrentNode = children[index];\r\n\t\t\t}else{\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(currentNode)){\r\n\t\t\treturn gantt.getTask(currentNode);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\t_calcWBS: function() {\r\n\t\tif(!this._isRecalcNeeded()) return;\r\n\r\n\t\tvar _isFirst = true;\r\n\t\tgantt.eachTask(function(ch) {\r\n\t\t\tif(_isFirst) {\r\n\t\t\t\t_isFirst = false;\r\n\t\t\t\tthis._setWBSCode(ch, \"1\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar _prevSibling = gantt.getPrevSibling(ch.id);\r\n\t\t\tif (_prevSibling !== null) {\r\n\t\t\t\tvar _wbs = gantt.getTask(_prevSibling).$wbs;\r\n\t\t\t\tif(_wbs) {\r\n\t\t\t\t\t_wbs = _wbs.split(\".\");\r\n\t\t\t\t\t_wbs[_wbs.length-1]++;\r\n\t\t\t\t\tthis._setWBSCode(ch, _wbs.join(\".\"));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar _parent = gantt.getParent(ch.id);\r\n\t\t\t\tthis._setWBSCode(ch, gantt.getTask(_parent).$wbs + \".1\");\r\n\t\t\t}\r\n\t\t}, gantt.config.root_id, this);\r\n\r\n\t\tthis._needRecalc = false;\r\n\t}\r\n};\r\n});\r\n\r\nmodule.exports = function(gantt){\r\n\tvar wbs = createWbs(gantt);\r\n\tgantt.getWBSCode = function getWBSCode(task) {\r\n\t\treturn wbs.getWBSCode(task);\r\n\t};\r\n\r\n\tgantt.getTaskByWBSCode = function(code) {\r\n\t\treturn wbs.getByWBSCode(code);\r\n\t};\r\n\r\n\tfunction resetCache(){\r\n\t\twbs.reset();\r\n\t\treturn true;\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onAfterTaskMove\", resetCache);\r\n\tgantt.attachEvent(\"onBeforeParse\", resetCache);\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", resetCache);\r\n\tgantt.attachEvent(\"onAfterTaskAdd\", resetCache);\r\n\tgantt.attachEvent(\"onAfterSort\", resetCache);\r\n\r\n};\r\n","function createMethod(gantt){\r\n\tvar methods = {};\r\n\tvar isActive = false;\r\n\tfunction disableMethod(methodName, dummyMethod){\r\n\t\tdummyMethod = typeof dummyMethod == \"function\" ? dummyMethod : function(){};\r\n\r\n\t\tif(!methods[methodName]){\r\n\t\t\tmethods[methodName] = this[methodName];\r\n\t\t\tthis[methodName] = dummyMethod;\r\n\t\t}\r\n\t}\r\n\tfunction restoreMethod(methodName){\r\n\t\tif(methods[methodName]){\r\n\t\t\tthis[methodName] = methods[methodName];\r\n\t\t\tmethods[methodName] = null;\r\n\t\t}\r\n\t}\r\n\tfunction disableMethods(methodsHash){\r\n\t\tfor(var i in methodsHash){\r\n\t\t\tdisableMethod.call(this, i, methodsHash[i]);\r\n\t\t}\r\n\t}\r\n\t function restoreMethods(){\r\n\t\tfor(var i in methods){\r\n\t\t\trestoreMethod.call(this, i);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction batchUpdatePayload(callback){\r\n\t\ttry{\r\n\t\t\tcallback();\r\n\t\t}catch(e){\r\n\t\t\twindow.console.error(e);\r\n\t\t}\r\n\t}\r\n\r\n\tvar state = gantt.$services.getService(\"state\");\r\n\tstate.registerProvider(\"batchUpdate\", function(){\r\n\t\treturn {\r\n\t\t\tbatch_update: isActive\r\n\t\t};\r\n\t}, true);\r\n\r\n\treturn function batchUpdate(callback, noRedraw) {\r\n\t\tif(isActive){\r\n\t\t\t// batch mode is already active\r\n\t\t\tbatchUpdatePayload(callback);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar call_dp = (this._dp && this._dp.updateMode != \"off\");\r\n\t\tvar dp_mode;\r\n\t\tif (call_dp){\r\n\t\t\tdp_mode = this._dp.updateMode;\r\n\t\t\tthis._dp.setUpdateMode(\"off\");\r\n\t\t}\r\n\r\n\t\t// temporary disable some methods while updating multiple tasks\r\n\t\tvar resetProjects = {};\r\n\t\tvar methods = {\r\n\t\t\t\"render\":true,\r\n\t\t\t\"refreshData\":true,\r\n\t\t\t\"refreshTask\":true,\r\n\t\t\t\"refreshLink\":true,\r\n\t\t\t\"resetProjectDates\":function(task){\r\n\t\t\t\tresetProjects[task.id] = task;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdisableMethods.call(this, methods);\r\n\r\n\t\tisActive = true;\r\n\t\tthis.callEvent(\"onBeforeBatchUpdate\", []);\r\n\r\n\t\tbatchUpdatePayload(callback);\r\n\r\n\t\tthis.callEvent(\"onAfterBatchUpdate\", []);\r\n\r\n\t\trestoreMethods.call(this);\r\n\r\n\t\t// do required updates after changes applied\r\n\t\tfor(var i in resetProjects){\r\n\t\t\tthis.resetProjectDates(resetProjects[i]);\r\n\t\t}\r\n\r\n\t\tisActive = false;\r\n\r\n\t\tif(!noRedraw){\r\n\t\t\tthis.render();\r\n\t\t}\r\n\r\n\t\tif (call_dp) {\r\n\t\t\tthis._dp.setUpdateMode(dp_mode);\r\n\t\t\tthis._dp.setGanttMode(\"tasks\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t\tthis._dp.setGanttMode(\"links\");\r\n\t\t\tthis._dp.sendData();\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n}\r\n\r\nmodule.exports = function(gantt){\r\n\tgantt.batchUpdate = createMethod(gantt);\r\n};","var domHelpers = require(\"../../utils/dom_helpers\");\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tvar scrollRange = 50,\r\n\t\tscrollStep = 30,\r\n\t\tscrollDelay = 10,\r\n\t\tscrollSpeed = 50;\r\n\r\n\tvar interval = null,\r\n\t\tisMove = false,\r\n\t\tdelayTimeout = null,\r\n\t\tbox = {},\r\n\t\tstartPos = {\r\n\t\t\tstarted: false\r\n\t\t},\r\n\t\teventPos = {};\r\n\r\n\tfunction getAutoscrollContainer(){\r\n\t\treturn gantt.$task || gantt.$grid || gantt.$root;\r\n\t}\r\n\r\n\tfunction isScrollState() {\r\n\t\tvar dragMarker = !!document.querySelector(\".gantt_drag_marker\");\r\n\t\tvar isResize = !!document.querySelector(\".gantt_drag_marker.gantt_grid_resize_area\");\r\n\t\tvar isLink = !!document.querySelector(\".gantt_link_direction\");\r\n\t\tisMove = dragMarker && !isResize && !isLink;\r\n\t\treturn !((!gantt.getState().drag_mode && !dragMarker) || isResize);\r\n\t}\r\n\r\n\tfunction defineDelayTimeout(state) {\r\n\t\tif (delayTimeout) {\r\n\t\t\tclearTimeout(delayTimeout);\r\n\t\t\tdelayTimeout = null;\r\n\t\t}\r\n\t\tif (state) {\r\n\t\t\tvar speed = gantt.config.autoscroll_speed;\r\n\t\t\tif (speed && speed < 10) // limit speed value to 10 \r\n\t\t\t\tspeed = 10;\r\n\r\n\t\t\tdelayTimeout = setTimeout(function() {\r\n\t\t\t\tinterval = setInterval(tick, speed || scrollSpeed);\r\n\t\t\t\tbox = domHelpers.getNodePosition(getAutoscrollContainer());\r\n\t\t\t}, gantt.config.autoscroll_delay || scrollDelay);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction defineScrollInterval(state) {\r\n\t\tif (state) {\r\n\t\t\tdefineDelayTimeout(true);\r\n\t\t\tif (!startPos.started) {\r\n\t\t\t\tstartPos.x = eventPos.x;\r\n\t\t\t\tstartPos.y = eventPos.y;\r\n\t\t\t\tstartPos.started = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (interval) {\r\n\t\t\t\tclearInterval(interval);\r\n\t\t\t\tinterval = null;\r\n\t\t\t}\r\n\t\t\tdefineDelayTimeout(false);\r\n\t\t\tstartPos.started = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction autoscrollInterval(event) {\r\n\r\n\t\tvar isScroll = isScrollState();\r\n\r\n\t\tif ((interval || delayTimeout) && !isScroll) { \r\n\t\t\tdefineScrollInterval(false);\r\n\t\t}\r\n\r\n\t\tif (!gantt.config.autoscroll || !isScroll) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\teventPos = {\r\n\t\t\tx: event.clientX,\r\n\t\t\ty: event.clientY\r\n\t\t};\r\n\r\n\t\tif (!interval && isScroll) {\r\n\t\t\tdefineScrollInterval(true);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction tick() {\r\n\r\n\t\tif (!isScrollState()) {\r\n\t\t\tdefineScrollInterval(false);\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar box = domHelpers.getNodePosition(getAutoscrollContainer());\r\n\t\tvar posX = eventPos.x - box.x; \r\n\t\tvar posY = eventPos.y - box.y;\r\n\r\n\t\tvar scrollLeft = isMove ? 0 : need_scroll(posX, box.width, startPos.x - box.x);\r\n\t\tvar scrollTop = need_scroll(posY, box.height, startPos.y - box.y);\r\n\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar currentScrollTop = scrollState.y,\r\n\t\t\tscrollOuterHeight = scrollState.inner_height,\r\n\t\t\tscrollInnerHeight = scrollState.height,\r\n\t\t\tcurrentScrollLeft = scrollState.x,\r\n\t\t\tscrollOuterWidth = scrollState.inner_width,\r\n\t\t\tscrollInnerWidth = scrollState.width;\r\n\r\n\t\t// do scrolling only if we have scrollable area to do so\r\n\t\tif (scrollTop && !scrollOuterHeight) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop < 0 && !currentScrollTop) {\r\n\t\t\tscrollTop = 0;\r\n\t\t} else if (scrollTop > 0 && currentScrollTop + scrollOuterHeight >= scrollInnerHeight + 2) {\r\n\t\t\tscrollTop = 0;\r\n\t\t}\r\n\r\n\t\tif (scrollLeft && !scrollOuterWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft < 0 && !currentScrollLeft) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t} else if (scrollLeft > 0 && currentScrollLeft + scrollOuterWidth >= scrollInnerWidth) {\r\n\t\t\tscrollLeft = 0;\r\n\t\t}\r\n\r\n\t\tvar step = gantt.config.autoscroll_step;\r\n\r\n\t\tif (step && step < 2) // limit step value to 2\r\n\t\t\tstep = 2;\r\n\r\n\t\tscrollLeft = scrollLeft * (step || scrollStep);\r\n\t\tscrollTop = scrollTop * (step || scrollStep);\r\n\r\n\t\tif (scrollLeft || scrollTop) {\r\n\t\t\tscroll(scrollLeft, scrollTop);\r\n\t\t} \r\n\r\n\t}\r\n\r\n\tfunction need_scroll(pos, boxSize, startCoord) {\r\n\t\tif ((pos - scrollRange < 0) && (pos < startCoord))\r\n\t\t\treturn -1;\r\n\t\telse if ((pos > boxSize - scrollRange) && (pos > startCoord))\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t}\r\n\r\n\tfunction scroll(left, top) {\r\n\t\tvar scrollState = gantt.getScrollState();\r\n\r\n\t\tvar scrollLeft = null,\r\n\t\t\tscrollTop = null;\r\n\r\n\t\tif (left) {\r\n\t\t\tscrollLeft = scrollState.x + left;\r\n\t\t\tscrollLeft = Math.min(scrollState.width, scrollLeft);\r\n\t\t\tscrollLeft = Math.max(0, scrollLeft);\r\n\t\t}\r\n\r\n\t\tif (top) {\r\n\t\t\tscrollTop = scrollState.y + top;\r\n\t\t\tscrollTop = Math.min(scrollState.height, scrollTop);\r\n\t\t\tscrollTop = Math.max(0, scrollTop);\r\n\t\t}\r\n\r\n\t\tgantt.scrollTo(scrollLeft, scrollTop);\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onGanttReady\", function() {\r\n\t\tgantt.eventRemove(document.body, \"mousemove\", autoscrollInterval);\r\n\t\tgantt.event(document.body, \"mousemove\", autoscrollInterval);\r\n\t});\r\n\r\n};","module.exports = function(gantt){\r\n\tvar modules = [\r\n\t\trequire(\"./autoscroll\"),\r\n\t\trequire(\"./batch_update\"),\r\n\t\trequire(\"./wbs\"),\r\n\t\trequire(\"./jquery_hooks\"),\r\n\t\trequire(\"./dhtmlx_hooks\"),\r\n\t\trequire(\"./resources\"),\r\n\t\trequire(\"./new_task_placeholder\"),\r\n\t\trequire(\"./auto_task_types\")\r\n\t];\r\n\r\n\tfor(var i = 0; i < modules.length; i++){\r\n\t\tif(modules[i])\r\n\t\t\tmodules[i](gantt);\r\n\t}\r\n};","var utils = require(\"../../utils/utils\");\r\nvar eventable = require(\"../../utils/eventable\");\r\n\r\n/**\r\n\t* \t@desc: constructor, data processor object \r\n\t*\t@param: serverProcessorURL - url used for update\r\n\t*\t@type: public\r\n\t*/\r\nvar dataProcessor = function (serverProcessorURL) {\r\n\tthis.serverProcessor = serverProcessorURL;\r\n\tthis.action_param = \"!nativeeditor_status\";\r\n\r\n\tthis.object = null;\r\n\tthis.updatedRows = []; //ids of updated rows\r\n\r\n\tthis.autoUpdate = true;\r\n\tthis.updateMode = \"cell\";\r\n\tthis._tMode = \"GET\";\r\n\tthis._headers = null;\r\n\tthis._payload = null;\r\n\tthis.post_delim = \"_\";\r\n\r\n\tthis._waitMode = 0;\r\n\tthis._in_progress = {};//?\r\n\tthis._invalid = {};\r\n\tthis.mandatoryFields = [];\r\n\tthis.messages = [];\r\n\r\n\tthis.styles = {\r\n\t\tupdated: \"font-weight:bold;\",\r\n\t\tinserted: \"font-weight:bold;\",\r\n\t\tdeleted: \"text-decoration : line-through;\",\r\n\t\tinvalid: \"background-color:FFE0E0;\",\r\n\t\tinvalid_cell: \"border-bottom:2px solid red;\",\r\n\t\terror: \"color:red;\",\r\n\t\tclear: \"font-weight:normal;text-decoration:none;\"\r\n\t};\r\n\r\n\tthis.enableUTFencoding(true);\r\n\teventable(this);\r\n\r\n\treturn this;\r\n};\r\n\r\ndataProcessor.prototype = {\r\n\tsetTransactionMode: function (mode, total) {\r\n\t\tif (typeof mode == \"object\") {\r\n\t\t\tthis._tMode = mode.mode || this._tMode;\r\n\r\n\t\t\tif (utils.defined(mode.headers)) {\r\n\t\t\t\tthis._headers = mode.headers;\r\n\t\t\t}\r\n\r\n\t\t\tif (utils.defined(mode.payload)) {\r\n\t\t\t\tthis._payload = mode.payload;\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tthis._tMode = mode;\r\n\t\t\tthis._tSend = total;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"REST\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t}\r\n\r\n\t\tif (this._tMode == \"JSON\" || this._tMode == \"REST-JSON\") {\r\n\t\t\tthis._tSend = false;\r\n\t\t\tthis._endnm = true;\r\n\t\t\tthis._serialize_as_json = true;\r\n\t\t\tthis._headers = this._headers || {};\r\n\t\t\tthis._headers[\"Content-type\"] = \"application/json\";\r\n\t\t}\r\n\t},\r\n\tescape: function (data) {\r\n\t\tif (this._utf)\r\n\t\t\treturn encodeURIComponent(data);\r\n\t\telse\r\n\t\t\treturn escape(data);\r\n\t},\r\n    /**\r\n\t* \t@desc: allows to set escaping mode\r\n\t*\t@param: true - utf based escaping, simple - use current page encoding\r\n\t*\t@type: public\r\n\t*/\r\n\tenableUTFencoding: function (mode) {\r\n\t\tthis._utf = !!mode;\r\n\t},\r\n    /**\r\n\t* \t@desc: allows to define, which column may trigger update\r\n\t*\t@param: val - array or list of true/false values\r\n\t*\t@type: public\r\n\t*/\r\n\tsetDataColumns: function (val) {\r\n\t\tthis._columns = (typeof val == \"string\") ? val.split(\",\") : val;\r\n\t},\r\n    /**\r\n\t* \t@desc: get state of updating\r\n\t*\t@returns:   true - all in sync with server, false - some items not updated yet.\r\n\t*\t@type: public\r\n\t*/\r\n\tgetSyncState: function () {\r\n\t\treturn !this.updatedRows.length;\r\n\t},\r\n\t/**\r\n\t* \t@desc: enable/disable named field for data syncing, will use column ids for grid\r\n\t*\t@param:   mode - true/false\r\n\t*\t@type: public\r\n\t*/\r\n\tenableDataNames: function (mode) {\r\n\t\tthis._endnm = !!mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: enable/disable mode , when only changed fields and row id send to the server side, instead of all fields in default mode\r\n\t*\t@param:   mode - true/false\r\n\t*\t@type: public\r\n\t*/\r\n\tenablePartialDataSend: function (mode) {\r\n\t\tthis._changed = !!mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: set if rows should be send to server automaticaly\r\n\t*\t@param: mode - \"row\" - based on row selection changed, \"cell\" - based on cell editing finished, \"off\" - manual data sending\r\n\t*\t@type: public\r\n\t*/\r\n\tsetUpdateMode: function (mode, dnd) {\r\n\t\tthis.autoUpdate = (mode == \"cell\");\r\n\t\tthis.updateMode = mode;\r\n\t\tthis.dnd = dnd;\r\n\t},\r\n\tignore: function (code, master) {\r\n\t\tthis._silent_mode = true;\r\n\t\tcode.call(master || window);\r\n\t\tthis._silent_mode = false;\r\n\t},\r\n\t/**\r\n\t* \t@desc: mark row as updated/normal. check mandatory fields,initiate autoupdate (if turned on)\r\n\t*\t@param: rowId - id of row to set update-status for\r\n\t*\t@param: state - true for \"updated\", false for \"not updated\"\r\n\t*\t@param: mode - update mode name\r\n\t*\t@type: public\r\n\t*/\r\n\tsetUpdated: function (rowId, state, mode) {\r\n\t\tif (this._silent_mode) return;\r\n\t\tvar ind = this.findRow(rowId);\r\n\r\n\t\tmode = mode || \"updated\";\r\n\t\tvar existing = this.obj.getUserData(rowId, this.action_param);\r\n\t\tif (existing && mode == \"updated\") mode = existing;\r\n\t\tif (state) {\r\n\t\t\tthis.set_invalid(rowId, false); //clear previous error flag\r\n\t\t\tthis.updatedRows[ind] = rowId;\r\n\t\t\tthis.obj.setUserData(rowId, this.action_param, mode);\r\n\t\t\tif (this._in_progress[rowId])\r\n\t\t\t\tthis._in_progress[rowId] = \"wait\";\r\n\t\t} else {\r\n\t\t\tif (!this.is_invalid(rowId)) {\r\n\t\t\t\tthis.updatedRows.splice(ind, 1);\r\n\t\t\t\tthis.obj.setUserData(rowId, this.action_param, \"\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//clear changed flag\r\n\t\tif (!state)\r\n\t\t\tthis._clearUpdateFlag(rowId);\r\n\r\n\t\tthis.markRow(rowId, state, mode);\r\n\t\tif (state && this.autoUpdate) this.sendData(rowId);\r\n\t},\r\n\t_clearUpdateFlag: function (id) { },\r\n\tmarkRow: function (id, state, mode) {\r\n\t\tvar str = \"\";\r\n\t\tvar invalid = this.is_invalid(id);\r\n\t\tif (invalid) {\r\n\t\t\tstr = this.styles[invalid];\r\n\t\t\tstate = true;\r\n\t\t}\r\n\t\tif (this.callEvent(\"onRowMark\", [id, state, mode, invalid])) {\r\n\t\t\t//default logic\r\n\t\t\tstr = this.styles[state ? mode : \"clear\"] + str;\r\n\r\n\t\t\tthis.obj[this._methods[0]](id, str);\r\n\r\n\t\t\tif (invalid && invalid.details) {\r\n\t\t\t\tstr += this.styles[invalid + \"_cell\"];\r\n\t\t\t\tfor (var i = 0; i < invalid.details.length; i++)\r\n\t\t\t\t\tif (invalid.details[i])\r\n\t\t\t\t\t\tthis.obj[this._methods[1]](id, i, str);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tgetState: function (id) {\r\n\t\treturn this.obj.getUserData(id, this.action_param);\r\n\t},\r\n\tis_invalid: function (id) {\r\n\t\treturn this._invalid[id];\r\n\t},\r\n\tset_invalid: function (id, mode, details) {\r\n\t\tif (details) mode = {\r\n\t\t\tvalue: mode,\r\n\t\t\tdetails: details,\r\n\t\t\ttoString: function () {\r\n\t\t\t\treturn this.value.toString();\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis._invalid[id] = mode;\r\n\t},\r\n\t/**\r\n\t* \t@desc: check mandatory fields and varify values of cells, initiate update (if specified)\r\n\t*\t@param: rowId - id of row to set update-status for\r\n\t*\t@type: public\r\n\t*/\r\n\tcheckBeforeUpdate: function (rowId) {\r\n\t\treturn true;\r\n\t},\r\n\t/**\r\n\t* \t@desc: send row(s) values to server\r\n\t*\t@param: rowId - id of row which data to send. If not specified, then all \"updated\" rows will be send\r\n\t*\t@type: public\r\n\t*/\r\n\tsendData: function (rowId) {\r\n\t\tif (this._waitMode && (this.obj.mytype == \"tree\" || this.obj._h2)) return;\r\n\t\tif (this.obj.editStop) this.obj.editStop();\r\n\r\n\r\n\t\tif (typeof rowId == \"undefined\" || this._tSend) return this.sendAllData();\r\n\t\tif (this._in_progress[rowId]) return false;\r\n\r\n\t\tthis.messages = [];\r\n\t\tif (!this.checkBeforeUpdate(rowId) && this.callEvent(\"onValidationError\", [rowId, this.messages])) return false;\r\n\t\tthis._beforeSendData(this._getRowData(rowId), rowId);\r\n\t},\r\n\t_beforeSendData: function (data, rowId) {\r\n\t\tif (!this.callEvent(\"onBeforeUpdate\", [rowId, this.getState(rowId), data])) return false;\r\n\t\tthis._sendData(data, rowId);\r\n\t},\r\n\tserialize: function (data, id) {\r\n\t\tif (this._serialize_as_json) {\r\n\t\t\treturn  this._serializeAsJSON(data);\r\n\t\t}\r\n\r\n\t\tif (typeof data == \"string\")\r\n\t\t\treturn data;\r\n\t\tif (typeof id != \"undefined\")\r\n\t\t\treturn this.serialize_one(data, \"\");\r\n\t\telse {\r\n\t\t\tvar stack = [];\r\n\t\t\tvar keys = [];\r\n\t\t\tfor (var key in data)\r\n\t\t\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\t\t\tstack.push(this.serialize_one(data[key], key + this.post_delim));\r\n\t\t\t\t\tkeys.push(key);\r\n\t\t\t\t}\r\n\t\t\tstack.push(\"ids=\" + this.escape(keys.join(\",\")));\r\n\t\t\tif (this.$gantt.security_key)\r\n\t\t\t\tstack.push(\"dhx_security=\" + this.$gantt.security_key);\r\n\t\t\treturn stack.join(\"&\");\r\n\t\t}\r\n\t},\r\n\r\n\t_serializeAsJSON: function (data) {\r\n\t\tif (typeof data == \"string\")\r\n\t\t\treturn data;\r\n\r\n\t\tvar copy = utils.copy(data);\r\n\t\tif(this._tMode == \"REST-JSON\"){\r\n\t\t\tdelete copy.id;\r\n\t\t\tdelete copy[this.action_param];\r\n\t\t}\r\n\r\n\t\treturn JSON.stringify(copy);\r\n\t},\r\n\r\n\tserialize_one: function (data, pref) {\r\n\t\tif (typeof data == \"string\")\r\n\t\t\treturn data;\r\n\t\tvar stack = [];\r\n\t\tvar serialized = \"\";\r\n\t\tfor (var key in data)\r\n\t\t\tif (data.hasOwnProperty(key)) {\r\n\t\t\t\tif ((key == \"id\" || key == this.action_param) && this._tMode == \"REST\") continue;\r\n\t\t\t\tif (typeof data[key] === \"string\" || typeof data[key] === \"number\") {\r\n\t\t\t\t\tserialized = data[key];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tserialized = JSON.stringify(data[key]);\r\n\t\t\t\t}\r\n\t\t\t\tstack.push(this.escape((pref || \"\") + key) + \"=\" + this.escape(serialized));\r\n\t\t\t}\r\n\t\treturn stack.join(\"&\");\r\n\t},\r\n\t_applyPayload: function (url) {\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tif (this._payload)\r\n\t\t\tfor (var key in this._payload)\r\n\t\t\t\turl = url + ajax.urlSeparator(url) + this.escape(key) + \"=\" + this.escape(this._payload[key]);\r\n\t\treturn url;\r\n\t},\r\n\t_sendData: function (a1, rowId) {\r\n\t\tif (!a1) return; //nothing to send\r\n\t\tif (!this.callEvent(\"onBeforeDataSending\", rowId ? [rowId, this.getState(rowId), a1] : [null, null, a1])) return false;\r\n\r\n\t\tif (rowId)\r\n\t\t\tthis._in_progress[rowId] = (new Date()).valueOf();\r\n\r\n\t\tvar _this = this;\r\n\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\r\n\t\tvar queryParams = {\r\n\t\t\tcallback: function (xml) {\r\n\t\t\t\tvar ids = [];\r\n\t\t\t\tvar key;\r\n\r\n\t\t\t\tif (rowId)\r\n\t\t\t\t\tids.push(rowId);\r\n\t\t\t\telse if (a1)\r\n\t\t\t\t\tfor (key in a1)\r\n\t\t\t\t\t\tids.push(key);\r\n\r\n\t\t\t\treturn _this.afterUpdate(_this, xml, ids);\r\n\t\t\t},\r\n\t\t\theaders: this._headers\r\n\t\t};\r\n\r\n\t\tvar a3 = this.serverProcessor + (this._user ? (ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + this.obj.getUserData(0, \"version\")].join(\"&\")) : \"\");\r\n\t\tvar a4 = this._applyPayload(a3);\r\n\r\n\t\tswitch (this._tMode) {\r\n\t\t\tcase \"GET\":\r\n\t\t\t\tqueryParams.url = a4 + ajax.urlSeparator(a4) + this.serialize(a1, rowId);\r\n\t\t\t\tqueryParams.method = \"GET\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"POST\":\r\n\t\t\t\tqueryParams.url = a4;\r\n\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\tqueryParams.data = this.serialize(a1, rowId);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"JSON\":\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tfor (var key in a1) {\r\n\t\t\t\t\tif (key === this.action_param || key === \"id\" || key === \"gr_id\") continue;\r\n\t\t\t\t\tdata[key] = a1[key];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tqueryParams.url = a4;\r\n\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\tqueryParams.data = JSON.stringify({\r\n\t\t\t\t\tid: rowId,\r\n\t\t\t\t\taction: a1[this.action_param],\r\n\t\t\t\t\tdata: data\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"REST\":\r\n\t\t\tcase \"REST-JSON\":\r\n\t\t\t\tvar url = a3.replace(/(\\&|\\?)editing\\=true/, \"\");\r\n\t\t\t\tdata = \"\";\r\n\r\n\t\t\t\tswitch (this.getState(rowId)) {\r\n\t\t\t\t\tcase \"inserted\":\r\n\t\t\t\t\t\tqueryParams.method = \"POST\";\r\n\t\t\t\t\t\tqueryParams.data = this.serialize(a1, rowId);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"deleted\":\r\n\t\t\t\t\t\tqueryParams.method = \"DELETE\";\r\n\t\t\t\t\t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tqueryParams.method = \"PUT\";\r\n\t\t\t\t\t\tqueryParams.data = this.serialize(a1, rowId);\r\n\t\t\t\t\t\turl = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + rowId;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tqueryParams.url = this._applyPayload(url);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tajax.query(queryParams);\r\n\t\tthis._waitMode++;\r\n\t},\r\n\r\n\t_forEachUpdatedRow: function (code) {\r\n\t\tvar updatedRows = this.updatedRows.slice();\r\n\t\tfor (var i = 0; i < updatedRows.length; i++) {\r\n\t\t\tvar rowId = updatedRows[i];\r\n\t\t\tif (this.obj.getUserData(rowId, this.action_param)) {\r\n\t\t\t\tcode.call(this, rowId);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tsendAllData: function () {\r\n\t\tif (!this.updatedRows.length) return;\r\n\r\n\t\tthis.messages = [];\r\n\t\tvar valid = true;\r\n\r\n\t\tthis._forEachUpdatedRow(function (rowId) {\r\n\t\t\tvalid &= this.checkBeforeUpdate(rowId);\r\n\t\t});\r\n\r\n\t\tif (!valid && !this.callEvent(\"onValidationError\", [\"\", this.messages])) return false;\r\n\r\n\t\tif (this._tSend) {\r\n\t\t\tthis._sendData(this._getAllData());\r\n\t\t} else {\r\n\t\t\tvar stop = false;\r\n\r\n\t\t\t// this.updatedRows can be spliced from onBeforeUpdate via dp.setUpdated false\r\n\t\t\t// use an iterator instead of for(var i = 0; i < this.updatedRows; i++) then\r\n\t\t\tthis._forEachUpdatedRow(function (rowId) {\r\n\t\t\t\tif (stop) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!this._in_progress[rowId]) {\r\n\t\t\t\t\tif (this.is_invalid(rowId)) return;\r\n\t\t\t\t\tthis._beforeSendData(this._getRowData(rowId), rowId);\r\n\t\t\t\t\tif (this._waitMode && (this.obj.mytype == \"tree\" || this.obj._h2)) {\r\n\t\t\t\t\t\tstop = true; //block send all for tree\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\t_getAllData: function (rowId) {\r\n\t\tvar out = {};\r\n\t\tvar has_one = false;\r\n\r\n\t\tthis._forEachUpdatedRow(function (id) {\r\n\t\t\tif (this._in_progress[id] || this.is_invalid(id)) return;\r\n\t\t\tvar row = this._getRowData(id);\r\n\t\t\tif (!this.callEvent(\"onBeforeUpdate\", [id, this.getState(id), row])) return;\r\n\t\t\tout[id] = row;\r\n\t\t\thas_one = true;\r\n\t\t\tthis._in_progress[id] = (new Date()).valueOf();\r\n\t\t});\r\n\r\n\t\treturn has_one ? out : null;\r\n\t},\r\n\r\n\r\n\t/**\r\n\t* \t@desc: specify column which value should be varified before sending to server\r\n\t*\t@param: ind - column index (0 based)\r\n\t*\t@param: verifFunction - function (object) which should verify cell value (if not specified, then value will be compared to empty string). Two arguments will be passed into it: value and column name\r\n\t*\t@type: public\r\n\t*/\r\n\tsetVerificator: function (ind, verifFunction) {\r\n\t\tthis.mandatoryFields[ind] = verifFunction || (function (value) { return (value !== \"\"); });\r\n\t},\r\n\t/**\r\n\t* \t@desc: remove column from list of those which should be verified\r\n\t*\t@param: ind - column Index (0 based)\r\n\t*\t@type: public\r\n\t*/\r\n\tclearVerificator: function (ind) {\r\n\t\tthis.mandatoryFields[ind] = false;\r\n\t},\r\n\r\n\r\n\r\n\r\n\r\n\tfindRow: function (pattern) {\r\n\t\tvar i = 0;\r\n\t\tfor (i = 0; i < this.updatedRows.length; i++)\r\n\t\t\tif (pattern == this.updatedRows[i]) break;\r\n\t\treturn i;\r\n\t},\r\n\r\n\t/**\r\n\t* \t@desc: define custom actions\r\n\t*\t@param: name - name of action, same as value of action attribute\r\n\t*\t@param: handler - custom function, which receives a XMl response content for action\r\n\t*\t@type: private\r\n\t*/\r\n\tdefineAction: function (name, handler) {\r\n\t\tif (!this._uActions) this._uActions = [];\r\n\t\tthis._uActions[name] = handler;\r\n\t},\r\n\r\n\t/**\r\n*     @desc: used in combination with setOnBeforeUpdateHandler to create custom client-server transport system\r\n*     @param: sid - id of item before update\r\n*     @param: tid - id of item after up0ate\r\n*     @param: action - action name\r\n*     @type: public\r\n*     @topic: 0\r\n*/\r\n\tafterUpdateCallback: function (sid, tid, action, btag) {\r\n\t\tvar marker = sid;\r\n\t\tvar correct = (action != \"error\" && action != \"invalid\");\r\n\t\tif (!correct) this.set_invalid(sid, action);\r\n\t\tif ((this._uActions) && (this._uActions[action]) && (!this._uActions[action](btag)))\r\n\t\t\treturn (delete this._in_progress[marker]);\r\n\r\n\t\tif (this._in_progress[marker] != \"wait\")\r\n\t\t\tthis.setUpdated(sid, false);\r\n\r\n\t\tvar soid = sid;\r\n\r\n\t\tswitch (action) {\r\n\t\t\tcase \"inserted\":\r\n\t\t\tcase \"insert\":\r\n\t\t\t\tif (tid != sid) {\r\n\t\t\t\t\tthis.setUpdated(sid, false);\r\n\t\t\t\t\tthis.obj[this._methods[2]](sid, tid);\r\n\t\t\t\t\tsid = tid;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"delete\":\r\n\t\t\tcase \"deleted\":\r\n\t\t\t\tthis.obj.setUserData(sid, this.action_param, \"true_deleted\");\r\n\t\t\t\tthis.obj[this._methods[3]](sid);\r\n\t\t\t\tdelete this._in_progress[marker];\r\n\t\t\t\treturn this.callEvent(\"onAfterUpdate\", [sid, action, tid, btag]);\r\n\t\t}\r\n\r\n\t\tif (this._in_progress[marker] != \"wait\") {\r\n\t\t\tif (correct) this.obj.setUserData(sid, this.action_param, '');\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t} else {\r\n\t\t\tdelete this._in_progress[marker];\r\n\t\t\tthis.setUpdated(tid, true, this.obj.getUserData(sid, this.action_param));\r\n\t\t}\r\n\r\n\t\tthis.callEvent(\"onAfterUpdate\", [soid, action, tid, btag]);\r\n\t},\r\n\r\n\t/**\r\n\t* \t@desc: response from server\r\n\t*\t@param: xml - XMLLoader object with response XML\r\n\t*\t@type: private\r\n\t*/\r\n\tafterUpdate: function (that, xml, id) {\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\t//try to use json first\r\n\t\tif (window.JSON) {\r\n\t\t\tvar tag;\r\n\r\n\t\t\ttry {\r\n\t\t\t\ttag = JSON.parse(xml.xmlDoc.responseText);\r\n\t\t\t} catch (e) {\r\n\r\n\t\t\t\t// empty response also can be processed by json handler\r\n\t\t\t\tif (!xml.xmlDoc.responseText.length) {\r\n\t\t\t\t\ttag = {};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (tag) {\r\n\t\t\t\tvar action = tag.action || this.getState(id) || \"updated\";\r\n\t\t\t\tvar sid = tag.sid || id[0];\r\n\t\t\t\tvar tid = tag.tid || id[0];\r\n\t\t\t\tthat.afterUpdateCallback(sid, tid, action, tag);\r\n\t\t\t\tthat.finalizeUpdate();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//xml response\r\n\t\tvar top = ajax.xmltop(\"data\", xml.xmlDoc); //fix incorrect content type in IE\r\n\t\tif (!top) return this.cleanUpdate(id);\r\n\t\tvar atag = ajax.xpath(\"//data/action\", top);\r\n\t\tif (!atag.length) return this.cleanUpdate(id);\r\n\r\n\t\tfor (var i = 0; i < atag.length; i++) {\r\n\t\t\tvar btag = atag[i];\r\n\t\t\tvar action = btag.getAttribute(\"type\");\r\n\t\t\tvar sid = btag.getAttribute(\"sid\");\r\n\t\t\tvar tid = btag.getAttribute(\"tid\");\r\n\r\n\t\t\tthat.afterUpdateCallback(sid, tid, action, btag);\r\n\t\t}\r\n\t\tthat.finalizeUpdate();\r\n\t},\r\n\tcleanUpdate: function (id) {\r\n\t\tif (id)\r\n\t\t\tfor (var i = 0; i < id.length; i++)\r\n\t\t\t\tdelete this._in_progress[id[i]];\r\n\t},\r\n\tfinalizeUpdate: function () {\r\n\t\tif (this._waitMode) this._waitMode--;\r\n\r\n\t\tif ((this.obj.mytype == \"tree\" || this.obj._h2) && this.updatedRows.length)\r\n\t\t\tthis.sendData();\r\n\t\tthis.callEvent(\"onAfterUpdateFinish\", []);\r\n\t\tif (!this.updatedRows.length)\r\n\t\t\tthis.callEvent(\"onFullSync\", []);\r\n\t},\r\n\r\n\r\n\r\n\r\n\r\n\t/**\r\n\t* \t@desc: initializes data-processor\r\n\t*\t@param: anObj - dhtmlxGrid object to attach this data-processor to\r\n\t*\t@type: public\r\n\t*/\r\n\tinit: function (anObj) {\r\n\t\tthis.obj = anObj;\r\n\t\tif (this.obj._dp_init)\r\n\t\t\tthis.obj._dp_init(this);\r\n\t},\r\n\r\n\r\n\tsetOnAfterUpdate: function (ev) {\r\n\t\tthis.attachEvent(\"onAfterUpdate\", ev);\r\n\t},\r\n\tenableDebug: function (mode) {\r\n\t},\r\n\tsetOnBeforeUpdateHandler: function (func) {\r\n\t\tthis.attachEvent(\"onBeforeDataSending\", func);\r\n\t},\r\n\r\n\r\n\r\n\t/* starts autoupdate mode\r\n\t\t@param interval\r\n\t\t\ttime interval for sending update requests\r\n\t*/\r\n\tsetAutoUpdate: function (interval, user) {\r\n\t\tinterval = interval || 2000;\r\n\r\n\t\tthis._user = user || (new Date()).valueOf();\r\n\t\tthis._need_update = false;\r\n\t\t//this._loader = null;\r\n\t\tthis._update_busy = false;\r\n\r\n\t\tthis.attachEvent(\"onAfterUpdate\", function (sid, action, tid, xml_node) {\r\n\t\t\tthis.afterAutoUpdate(sid, action, tid, xml_node);\r\n\t\t});\r\n\t\tthis.attachEvent(\"onFullSync\", function () {\r\n\t\t\tthis.fullSync();\r\n\t\t});\r\n\r\n\t\tvar self = this;\r\n\t\twindow.setInterval(function () {\r\n\t\t\tself.loadUpdate();\r\n\t\t}, interval);\r\n\t},\r\n\r\n\r\n\t/* process updating request answer\r\n\t\tif status == collision version is depricated\r\n\t\tset flag for autoupdating immidiatly\r\n\t*/\r\n\tafterAutoUpdate: function (sid, action, tid, xml_node) {\r\n\t\tif (action == 'collision') {\r\n\t\t\tthis._need_update = true;\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t},\r\n\r\n\r\n\t/* callback function for onFillSync event\r\n\t\tcall update function if it's need\r\n\t*/\r\n\tfullSync: function () {\r\n\t\tif (this._need_update) {\r\n\t\t\tthis._need_update = false;\r\n\t\t\tthis.loadUpdate();\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\r\n\t/* sends query to the server and call callback function\r\n\t*/\r\n\tgetUpdates: function (url, callback) {\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tif (this._update_busy)\r\n\t\t\treturn false;\r\n\t\telse\r\n\t\t\tthis._update_busy = true;\r\n\r\n\t\t//this._loader = this._loader || new dtmlXMLLoaderObject(true);\r\n\r\n\t\t//this._loader.async=true;\r\n\t\t//this._loader.waitCall=callback;\r\n\t\t//this._loader.loadXML(url);\r\n\t\tajax.get(url, callback);\r\n\r\n\t},\r\n\r\n\r\n\t/* returns xml node value\r\n\t\t@param node\r\n\t\t\txml node\r\n\t*/\r\n\t_v: function (node) {\r\n\t\tif (node.firstChild) return node.firstChild.nodeValue;\r\n\t\treturn \"\";\r\n\t},\r\n\r\n\r\n\t/* returns values array of xml nodes array\r\n\t\t@param arr\r\n\t\t\tarray of xml nodes\r\n\t*/\r\n\t_a: function (arr) {\r\n\t\tvar res = [];\r\n\t\tfor (var i = 0; i < arr.length; i++) {\r\n\t\t\tres[i] = this._v(arr[i]);\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\r\n\r\n\t/* loads updates and processes them\r\n\t*/\r\n\tloadUpdate: function () {\r\n\t\tvar ajax = this.$gantt.ajax;\r\n\t\tvar self = this;\r\n\t\tvar version = this.obj.getUserData(0, \"version\");\r\n\t\tvar url = this.serverProcessor + ajax.urlSeparator(this.serverProcessor) + [\"dhx_user=\" + this._user, \"dhx_version=\" + version].join(\"&\");\r\n\t\turl = url.replace(\"editing=true&\", \"\");\r\n\t\tthis.getUpdates(url, function (xml) {\r\n\t\t\tvar vers = ajax.xpath(\"//userdata\", xml);\r\n\t\t\tself.obj.setUserData(0, \"version\", self._v(vers[0]));\r\n\r\n\t\t\tvar upds = ajax.xpath(\"//update\", xml);\r\n\t\t\tif (upds.length) {\r\n\t\t\t\tself._silent_mode = true;\r\n\r\n\t\t\t\tfor (var i = 0; i < upds.length; i++) {\r\n\t\t\t\t\tvar status = upds[i].getAttribute('status');\r\n\t\t\t\t\tvar id = upds[i].getAttribute('id');\r\n\t\t\t\t\tvar parent = upds[i].getAttribute('parent');\r\n\t\t\t\t\tswitch (status) {\r\n\t\t\t\t\t\tcase 'inserted':\r\n\t\t\t\t\t\t\tself.callEvent(\"insertCallback\", [upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'updated':\r\n\t\t\t\t\t\t\tself.callEvent(\"updateCallback\", [upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'deleted':\r\n\t\t\t\t\t\t\tself.callEvent(\"deleteCallback\", [upds[i], id, parent]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tself._silent_mode = false;\r\n\t\t\t}\r\n\r\n\t\t\tself._update_busy = false;\r\n\t\t\tself = null;\r\n\t\t});\r\n\t},\r\n\r\n\tdestructor: function () {\r\n\t\tthis.callEvent(\"onDestroy\", []);\r\n\t\tthis.detachAllEvents();\r\n\r\n\t\tthis.updatedRows = [];\r\n\t\tthis._in_progress = {};//?\r\n\t\tthis._invalid = {};\r\n\t\tthis._headers = null;\r\n\t\tthis._payload = null;\r\n\t\tthis.obj = null;\r\n\t}\r\n};\r\n\r\nmodule.exports = dataProcessor;","var utils = require (\"../../utils/utils\");\r\n\r\nfunction updateCallback(upd, id) {\r\n\tvar data = upd.data || this.xml._xmlNodeToJSON(upd.firstChild);\r\n\tif(!this.isTaskExists(id))\r\n\t\treturn;\r\n\tvar objData = this.getTask(id);\r\n\tfor(var key in data) {\r\n\t\tvar property = data[key];\r\n\t\tswitch(key) {\r\n\t\t\tcase \"id\":\r\n\t\t\t\tcontinue;\r\n\t\t\tcase \"start_date\":\r\n\t\t\tcase \"end_date\":\r\n\t\t\t\tproperty = this.templates.xml_date(property);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"duration\":\r\n\t\t\t\tobjData.end_date = this.calculateEndDate({start_date: objData.start_date, duration: property, task:objData});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tobjData[key] = property;\r\n\t}\r\n\tthis.updateTask(id);\r\n\tthis.refreshData();\r\n}\r\n\r\nfunction insertCallback(upd, id, parent, mode) {\r\n\tvar data = upd.data || this.xml._xmlNodeToJSON(upd.firstChild),\r\n\t\tmethods = {\r\n\t\t\tadd: this.addTask,\r\n\t\t\tisExist: this.isTaskExists\r\n\t\t};\r\n\tif(mode == \"links\") {\r\n\t\tmethods.add = this.addLink;\r\n\t\tmethods.isExist = this.isLinkExists;\r\n\t}\r\n\tif(methods.isExist.call(this, id))\r\n\t\treturn;\r\n\tdata.id = id;\r\n\tmethods.add.call(this, data);\r\n}\r\n\r\nfunction deleteCallback(upd, id, parent, mode) {\r\n\tvar methods = {\r\n\t\t\"delete\": this.deleteTask,\r\n\t\t\"isExist\": this.isTaskExists\r\n\t};\r\n\tif(mode == \"links\") {\r\n\t\tmethods[\"delete\"] = this.deleteLink;\r\n\t\tmethods.isExist = this.isLinkExists;\r\n\t}\r\n\tif(methods.isExist.call(this, id))\r\n\t\tmethods[\"delete\"].call(this, id);\r\n}\r\n\r\nfunction patchDataProcessor(gantt, dataprocessor){\r\n\tdataprocessor.attachEvent(\"insertCallback\", utils.bind(insertCallback, gantt));\r\n\tdataprocessor.attachEvent(\"updateCallback\",  utils.bind(deleteCallback, gantt));\r\n\tdataprocessor.attachEvent(\"deleteCallback\",  utils.bind(deleteCallback, gantt));\r\n}\r\n\r\nmodule.exports = patchDataProcessor;","var liveUpdateHooks = require(\"./live_update_hooks\");\r\nvar helpers = require(\"../../utils/helpers\");\r\n\r\nfunction addDataProcessorHooks(gantt) {\r\n\r\n\tgantt.dataProcessor = require(\"./dataprocessor\");\r\n\r\n\tfunction detachDataProcessor(gantt, dp){\r\n\t\tdelete dp.$gantt;\r\n\t\tdelete dp.setGanttMode;\r\n\t\tdelete dp._getRowData;\r\n\t\tdp.afterUpdate = oldAfterUpdate;\r\n\r\n\t\tdelete gantt._dp;\r\n\t\tdelete gantt._change_id;\r\n\t\tdelete gantt._row_style;\r\n\t\tdelete gantt._delete_task;\r\n\t\tdelete gantt._sendTaskOrder;\r\n\r\n\t\thelpers.forEach(dataProcessorHandlers, function(e){\r\n\t\t\tgantt.detachEvent(e);\r\n\t\t});\r\n\t\tdataProcessorHandlers = [];\r\n\t}\r\n\r\n\tvar oldAfterUpdate;\r\n\tfunction extendDataProcessor(gantt, dp){\r\n\t\tdp.setGanttMode = function(mode){\r\n\t\t\tvar modes = dp.modes || {};\r\n\t\t\tif(dp._ganttMode){\r\n\t\t\t\tmodes[dp._ganttMode] = {\r\n\t\t\t\t\t_in_progress : dp._in_progress,\r\n\t\t\t\t\t_invalid : dp._invalid,\r\n\t\t\t\t\tupdatedRows : dp.updatedRows\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar newState = modes[mode];\r\n\t\t\tif(!newState){\r\n\t\t\t\tnewState = modes[mode] = {\r\n\t\t\t\t\t_in_progress : {},\r\n\t\t\t\t\t_invalid : {},\r\n\t\t\t\t\tupdatedRows : []\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tdp._in_progress = newState._in_progress;\r\n\t\t\tdp._invalid = newState._invalid;\r\n\t\t\tdp.updatedRows = newState.updatedRows;\r\n\t\t\tdp.modes = modes;\r\n\t\t\tdp._ganttMode = mode;\r\n\t\t};\r\n\r\n\t\toldAfterUpdate = dp.afterUpdate;\r\n\t\tdp.afterUpdate = function(){\r\n\t\t\tvar xml;\r\n\t\t\tif(arguments.length == 3){\r\n\t\t\t\txml = arguments[1];\r\n\t\t\t}else{\r\n\t\t\t\t// old dataprocessor\r\n\t\t\t\txml = arguments[4];\r\n\t\t\t}\r\n\t\t\tvar mode = dp._ganttMode;\r\n\t\t\tvar reqUrl = xml.filePath;\r\n\r\n\t\t\tif(this._tMode != \"REST\" && this._tMode != \"REST-JSON\"){\r\n\t\t\t\tif (reqUrl.indexOf(\"gantt_mode=links\") != -1) {\r\n\t\t\t\t\tmode = \"links\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmode = \"tasks\";\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(reqUrl.indexOf(\"/link\") > reqUrl.indexOf(\"/task\")){\r\n\t\t\t\t\tmode = \"links\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmode = \"tasks\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdp.setGanttMode(mode);\r\n\r\n\t\t\tvar res = oldAfterUpdate.apply(dp, arguments);\r\n\t\t\tdp.setGanttMode(mode);\r\n\t\t\treturn res;\r\n\t\t};\r\n\r\n\t\tdp._getRowData=gantt.bind(function(id, pref) {\r\n\t\t\tvar task;\r\n\t\t\tif (dp._ganttMode == \"tasks\")\r\n\t\t\t\ttask = this.isTaskExists(id) ? this.getTask(id) : { id: id };\r\n\t\t\telse\r\n\t\t\t\ttask = this.isLinkExists(id) ? this.getLink(id) : { id: id };\r\n\r\n\t\t\ttask = gantt.copy(task);\r\n\r\n\t\t\tvar data = {};\r\n\t\t\tfor (var key in task) {\r\n\t\t\t\tif (key.substr(0, 1) == \"$\") continue;\r\n\t\t\t\tvar value = task[key];\r\n\t\t\t\tif (helpers.isDate(value))\r\n\t\t\t\t\tdata[key] = this.templates.xml_format(value);\r\n\t\t\t\telse if(value === null)\r\n\t\t\t\t\tdata[key] = \"\";\r\n\t\t\t\telse\r\n\t\t\t\t\tdata[key] = value;\r\n\t\t\t}\r\n\r\n\t\t\tvar taskTiming = this._get_task_timing_mode(task);\r\n\t\t\tif(taskTiming.$no_start){\r\n\t\t\t\ttask.start_date = \"\";\r\n\t\t\t\ttask.duration = \"\";\r\n\t\t\t}\r\n\t\t\tif(taskTiming.$no_end){\r\n\t\t\t\ttask.end_date = \"\";\r\n\t\t\t\ttask.duration = \"\";\r\n\t\t\t}\r\n\t\t\tdata[dp.action_param] = this.getUserData(id, dp.action_param);\r\n\t\t\treturn data;\r\n\t\t}, gantt);\r\n\t}\r\n\r\n\tfunction extendGantt(gantt, dp){\r\n\t\tgantt._change_id = gantt.bind(function(oldid, newid) {\r\n\t\t\tif (dp._ganttMode != \"tasks\")\r\n\t\t\t\tthis.changeLinkId(oldid, newid);\r\n\t\t\telse\r\n\t\t\t\tthis.changeTaskId(oldid, newid);\r\n\t\t}, this);\r\n\r\n\t\tgantt._row_style = function(row_id, classname){\r\n\t\t\tif (dp._ganttMode != \"tasks\") return;\r\n\t\t\tif(!gantt.isTaskExists(row_id))\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar task = gantt.getTask(row_id);\r\n\t\t\ttask.$dataprocessor_class = classname;\r\n\t\t\tgantt.refreshTask(row_id);\r\n\t\t};\r\n\r\n\t\t// fake method for dataprocessor\r\n\t\tgantt._delete_task = function(row_id, node){};\r\n\r\n\t\tgantt._sendTaskOrder = function(id, item){\r\n\t\t\tif(item.$drop_target){\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tthis.getTask(id).target = item.$drop_target;\r\n\t\t\t\tdp.setUpdated(id, true,\"order\");\r\n\t\t\t\tdelete this.getTask(id).$drop_target;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis._dp = dp;\r\n\t}\r\n\r\n\tfunction attachDataProcessorEvents(gantt, dp){\r\n\t\tfunction clientSideDelete(id){\r\n\t\t\tvar updated = dp.updatedRows.slice();\r\n\t\t\tvar clientOnly = false;\r\n\r\n\t\t\tfor(var i = 0; i < updated.length && !dp._in_progress[id]; i++){\r\n\t\t\t\tif(updated[i] == id ){\r\n\t\t\t\t\tif(gantt.getUserData(id, \"!nativeeditor_status\") == \"inserted\"){\r\n\t\t\t\t\t\tclientOnly = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdp.setUpdated(id,false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn clientOnly;\r\n\t\t}\r\n\r\n\t\tfunction getTaskLinks(task){\r\n\t\t\tvar links = [];\r\n\r\n\t\t\tif (task.$source) {\r\n\t\t\t\tlinks = links.concat(task.$source);\r\n\t\t\t}\r\n\t\t\tif (task.$target) {\r\n\t\t\t\tlinks = links.concat(task.$target);\r\n\t\t\t}\r\n\r\n\t\t\treturn links;\r\n\t\t}\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskAdd\", function(id, item) {\r\n\t\t\tif(gantt.isTaskExists(id)){\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdated(id,true,\"inserted\");\r\n\t\t\t}\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskUpdate\", function(id, item) {\r\n\t\t\tif(gantt.isTaskExists(id)){\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\t\t\t\tdp.setUpdated(id,true);\r\n\r\n\t\t\t\tgantt._sendTaskOrder(id, item);\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tvar treeHelper = require(\"../../utils/task_tree_helpers\");\r\n\t\tvar cascadeDelete = {};\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onBeforeTaskDelete\", function(id, item){\r\n\t\t\tif(!gantt.config.cascade_delete){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tcascadeDelete[id] = {\r\n\t\t\t\ttasks: treeHelper.getSubtreeTasks(gantt, id),\r\n\t\t\t\tlinks: treeHelper.getSubtreeLinks(gantt, id)\r\n\t\t\t};\r\n\t\t\treturn true;\r\n\t\t}));\r\n\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t// not send delete request if item is not inserted into the db - just remove it from the client\r\n\t\t\tvar needDbDelete = !clientSideDelete(id);\r\n\t\t\tif(!needDbDelete)\r\n\t\t\t\treturn;\r\n\t\t\t\r\n\t\t\tif(gantt.config.cascade_delete && cascadeDelete[id]){\r\n\t\t\t\tvar dpMode = dp.updateMode;\r\n\t\t\t\tdp.setUpdateMode(\"off\");\r\n\r\n\t\t\t\tvar cascade = cascadeDelete[id];\r\n\t\t\t\tfor(var i in cascade.tasks){\r\n\t\t\t\t\tif(!clientSideDelete(i)){\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tfor(var i in cascade.links){\r\n\t\t\t\t\tif(!clientSideDelete(i)){\r\n\t\t\t\t\t\tdp.setUpdated(i, true, \"deleted\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcascadeDelete[id] = null;\r\n\r\n\t\t\t\tif(dpMode != \"off\"){\r\n\t\t\t\t\tdp.sendAllData();\r\n\t\t\t\t}\r\n\t\t\t\tdp.setGanttMode(\"tasks\");\r\n\r\n\t\t\t\tdp.setUpdateMode(dpMode);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdp.setUpdated(id,true,\"deleted\");\r\n\r\n\t\t\tif(dp.updateMode != 'off' && !dp._tSend){\r\n\t\t\t\tdp.sendAllData();\r\n\t\t\t}\r\n\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkUpdate\", function(id, item) {\r\n\t\t\tif(gantt.isLinkExists(id)){\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tdp.setUpdated(id, true);\r\n\t\t\t}\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkAdd\", function(id, item) {\r\n\t\t\tif(gantt.isLinkExists(id)){\r\n\t\t\t\tdp.setGanttMode(\"links\");\r\n\t\t\t\tdp.setUpdated(id, true,\"inserted\");\r\n\t\t\t}\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onAfterLinkDelete\", function(id, item) {\r\n\t\t\tdp.setGanttMode(\"links\");\r\n\r\n\t\t\tvar needDbDelete = !clientSideDelete(id);\r\n\t\t\tif(!needDbDelete)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tdp.setUpdated(id, true,\"deleted\");\r\n\t\t}));\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onRowDragEnd\", function(id, target) {\r\n\t\t\tgantt._sendTaskOrder(id, gantt.getTask(id));\r\n\t\t}));\r\n\r\n\t\tvar tasks = null,\r\n\t\t\tlinks = null;\r\n\t\tdataProcessorHandlers.push(this.attachEvent(\"onTaskIdChange\",function(oldId, newId){\r\n\t\t\tif(!dp._waitMode) return;\r\n\r\n\t\t\tvar children = gantt.getChildren(newId);\r\n\t\t\tif(children.length) {\r\n\t\t\t\ttasks = tasks || {};\r\n\r\n\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\tvar ch = this.getTask(children[i]);\r\n\t\t\t\t\ttasks[ch.id] = ch;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar item = this.getTask(newId),\r\n\t\t\t\titemLinks = getTaskLinks(item);\r\n\r\n\t\t\tif(itemLinks.length) {\r\n\t\t\t\tlinks = links || {};\r\n\r\n\t\t\t\tfor (var i = 0; i < itemLinks.length; i++) {\r\n\t\t\t\t\tvar link = this.getLink(itemLinks[i]);\r\n\t\t\t\t\tlinks[link.id] = link;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}));\r\n\r\n\t\tdp.attachEvent(\"onAfterUpdateFinish\", function(){\r\n\t\t\tif(tasks || links){\r\n\t\t\t\tgantt.batchUpdate(function(){\r\n\t\t\t\t\tfor(var id in tasks){\r\n\t\t\t\t\t\tgantt.updateTask(tasks[id].id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor(var id in links){\r\n\t\t\t\t\t\tgantt.updateLink(links[id].id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttasks = null;\r\n\t\t\t\t\tlinks = null;\r\n\t\t\t\t});\r\n\t\t\t\tif(tasks) {\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"tasks\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tgantt._dp.setGanttMode(\"links\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdp.attachEvent(\"onBeforeDataSending\", function() {\r\n\t\t\tvar url = this._serverProcessor;\r\n\t\t\tif(this._tMode == \"REST-JSON\" || this._tMode == \"REST\"){\r\n\t\t\t\tvar mode = this._ganttMode.substr(0, this._ganttMode.length - 1);// links, tasks -> /link/id, /task/id\r\n\r\n\t\t\t\turl = url.substring(0, url.indexOf(\"?\") > -1 ? url.indexOf(\"?\") : url.length);\r\n\t\t\t\t//editing=true&\r\n\t\t\t\tthis.serverProcessor = url + (url.slice(-1) == \"/\" ? \"\" : \"/\") + mode;\r\n\t\t\t}else{\r\n\t\t\t\tthis.serverProcessor = url + gantt.ajax.urlSeparator(url) + \"gantt_mode=\" + this._ganttMode;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\t}\r\n\r\n\tvar dataProcessorHandlers = [];\r\n\r\n\tgantt._dp_init = function(dp) {\r\n\t\tgantt.assert(!this._dp, \"The dataProcessor is already attached to this gantt instance\");\r\n\r\n\t\tdp.setTransactionMode(\"POST\", true);\r\n\t\tdp.serverProcessor += (dp.serverProcessor.indexOf(\"?\") != -1 ? \"&\" : \"?\") + \"editing=true\";\r\n\t\tdp._serverProcessor = dp.serverProcessor;\r\n\t\tdp.$gantt = this;\r\n\t\tdp.styles = {\r\n\t\t\tupdated:\"gantt_updated\",\r\n\t\t\torder:\"gantt_updated\",\r\n\t\t\tinserted:\"gantt_inserted\",\r\n\t\t\tdeleted:\"gantt_deleted\",\r\n\t\t\tinvalid:\"gantt_invalid\",\r\n\t\t\terror:\"gantt_error\",\r\n\t\t\tclear:\"\"\r\n\t\t};\r\n\r\n\t\tdp._methods=[\"_row_style\",\"setCellTextStyle\",\"_change_id\",\"_delete_task\"];\r\n\r\n\t\textendDataProcessor.call(this, gantt, dp);\r\n\t\textendGantt.call(this, gantt, dp);\r\n\t\tattachDataProcessorEvents.call(this, gantt, dp);\r\n\r\n\t\tdp.attachEvent(\"onDestroy\", function(){\r\n\t\t\tdetachDataProcessor(gantt, dp);\r\n\t\t});\r\n\t\tliveUpdateHooks(gantt, dp);\r\n\r\n\t\tgantt.callEvent(\"onDataProcessorReady\", [dp]);\r\n\t};\r\n\r\n\tgantt.getUserData = function(id, name) {\r\n\t\tif (!this.userdata) this.userdata = {};\r\n\t\tif (this.userdata[id] && this.userdata[id][name]) return this.userdata[id][name];\r\n\t\treturn \"\";\r\n\t};\r\n\tgantt.setUserData = function(id, name, value) {\r\n\t\tif (!this.userdata) this.userdata = {};\r\n\t\tif (!this.userdata[id]) this.userdata[id] = {};\r\n\t\tthis.userdata[id][name] = value;\r\n\t};\r\n}\r\n\r\nmodule.exports = addDataProcessorHooks;\r\n","var storeRenderCreator = function(name, gantt){\r\n\tvar store = gantt.getDatastore(name);\r\n\r\n\tvar itemRepainter = {\r\n\t\trenderItem: function(id, renderer){\r\n\r\n\t\t\tvar renders = renderer.getLayers();\r\n\r\n\t\t\tvar item = store.getItem(id);\r\n\t\t\tif(item && store.isVisible(id)) {\r\n\t\t\t\tfor (var i = 0; i < renders.length; i++)\r\n\t\t\t\t\trenders[i].render_item(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\trenderItems: function(renderer){\r\n\t\t\tvar renderers = renderer.getLayers();\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].clear();\r\n\t\t\t}\r\n\r\n\t\t\tvar data = store.getVisibleItems();\r\n\r\n\t\t\tfor (var i = 0; i < renderers.length; i++) {\r\n\t\t\t\trenderers[i].render_items(data);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfunction skipRepaint(gantt){\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\r\n\t\tif(renderer){\r\n\t\t\tif(!id || action == \"move\" || action == \"delete\"){\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshAll\", []);\r\n\t\t\t\titemRepainter.renderItems(renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshAll\", []);\r\n\t\t\t}else{\r\n\t\t\t\tstore.callEvent(\"onBeforeRefreshItem\", [item.id]);\r\n\t\t\t\titemRepainter.renderItem(item.id, renderer);\r\n\t\t\t\tstore.callEvent(\"onAfterRefreshItem\", [item.id]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t// TODO: probably can be done more in a more efficient way\r\n\tstore.attachEvent(\"onItemOpen\", function(){\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tstore.attachEvent(\"onItemClose\", function(){\r\n\t\tgantt.render();\r\n\t});\r\n\r\n\tfunction refreshId(renders, oldId, newId, item) {\r\n\t\tfor (var i = 0; i < renders.length; i++) {\r\n\t\t\trenders[i].change_id(oldId, newId);\r\n\t\t}\r\n\t}\r\n\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\r\n\t\t// in case of linked datastores (tasks <-> links), id change should recalculate something in linked datastore before any repaint\r\n\t\t// use onBeforeIdChange for this hook.\r\n\t\t// TODO: use something more reasonable instead\r\n\t\tstore.callEvent(\"onBeforeIdChange\", [oldId, newId]);\r\n\r\n\t\tif(skipRepaint(gantt)){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar renderer = gantt.$services.getService(\"layers\").getDataRender(name);\r\n\t\trefreshId(renderer.getLayers(), oldId, newId, store.getItem(newId));\r\n\t\titemRepainter.renderItem(newId, renderer);\r\n\t});\r\n\r\n};\r\n\r\nmodule.exports = {\r\n\tbindDataStore: storeRenderCreator\r\n};","\r\nfunction createDataStoreSelectMixin(store){\r\n\tvar selectedId = null;\r\n\r\n\tvar deleteItem = store._removeItemInner;\r\n\tstore._removeItemInner = function(id){\r\n\t\tif(selectedId == id){\r\n\t\t\tselectedId = null;\r\n\t\t}\r\n\t\treturn deleteItem.apply(this, arguments);\r\n\t};\r\n\r\n\r\n\tstore.attachEvent(\"onIdChange\", function(oldId, newId) {\r\n\t\tif (store.getSelectedId() == oldId) {\r\n\t\t\tstore.silent(function () {\r\n\t\t\t\tstore.unselect(oldId);\r\n\t\t\t\tstore.select(newId);\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\treturn {\r\n\t\tselect: function(id){\r\n\t\t\tif (id){\r\n\r\n\t\t\t\tif(selectedId == id)\r\n\t\t\t\t\treturn selectedId;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tif (!this.callEvent(\"onBeforeSelect\", [id])) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.unselect();\r\n\r\n\t\t\t\tselectedId = id;\r\n\r\n\t\t\t\tif(!this._skip_refresh) {\r\n\t\t\t\t\tthis.refresh(id);\r\n\t\t\t\t\tthis.callEvent(\"onAfterSelect\", [id]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tgetSelectedId: function(){\r\n\t\t\treturn selectedId;\r\n\t\t},\r\n\t\tunselect: function(id){\r\n\t\t\tvar id = id || selectedId;\r\n\t\t\tif(!id)\r\n\t\t\t\treturn;\r\n\t\t\tselectedId = null;\r\n\t\t\tif(!this._skip_refresh){\r\n\t\t\t\tthis.refresh(id);\r\n\t\t\t\tthis.callEvent(\"onAfterUnselect\", [id]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = createDataStoreSelectMixin;","var powerArray = require(\"./power_array\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar eventable = require(\"../../utils/eventable\");\r\nvar DataStore = require(\"./datastore\");\r\n\r\nvar TreeDataStore = function(config){\r\n\tDataStore.apply(this, [config]);\r\n\tthis._branches = {};\r\n\r\n\tthis.pull = {};\r\n\tthis.$initItem = config.initItem;\r\n\tthis.$parentProperty = config.parentProperty || \"parent\";\r\n\r\n\tif(typeof config.rootId !== \"function\"){\r\n\t\tthis.$getRootId = (function(val){\r\n\t\t\treturn function(){return val;};\r\n\t\t})(config.rootId || 0);\r\n\t}else{\r\n\t\tthis.$getRootId = config.rootId;\r\n\t}\r\n\r\n\t// TODO: replace with live reference to gantt config\r\n\tthis.$openInitially = config.openInitially;\r\n\r\n\tthis.visibleOrder = powerArray.$create();\r\n\tthis.fullOrder = powerArray.$create();\r\n\tthis._searchVisibleOrder = {};\r\n\tthis._skip_refresh = false;\r\n\r\n\tthis.attachEvent(\"onFilterItem\", function(id, item){\r\n\t\tvar open = true;\r\n\t\tthis.eachParent(function(parent){\r\n\t\t\topen = open && parent.$open && !(this._isSplitItem(parent));\r\n\t\t}, item);\r\n\t\treturn !!open;\r\n\t});\r\n\r\n\treturn this;\r\n};\r\n\r\nTreeDataStore.prototype = utils.mixin({\r\n\r\n\t\t_buildTree: function(data){\r\n\t\t\tvar item = null;\r\n\t\t\tvar rootId = this.$getRootId();\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis.setParent(item, this.getParent(item) || rootId);\r\n\t\t\t}\r\n\r\n\t\t\t// calculating $level for each item\r\n\t\t\tfor (var i = 0, len = data.length; i < len; i++){\r\n\t\t\t\titem = data[i];\r\n\t\t\t\tthis._add_branch(item);\r\n\t\t\t\titem.$level = this.calculateItemLevel(item);\r\n\r\n\t\t\t\tif (!utils.defined(item.$open)) {\r\n\t\t\t\t\titem.$open = utils.defined(item.open) ? item.open : this.$openInitially();\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tthis._updateOrder();\r\n\t\t},\r\n\t\t_isSplitItem: function(item){\r\n\t\t\treturn (item.render == \"split\" && this.hasChild(item.id));\r\n\t\t},\r\n\t\tparse: function(data){\r\n\t\t\tthis.callEvent(\"onBeforeParse\", [data]);\r\n\t\t\tvar loaded = this._parseInner(data);\r\n\t\t\tthis._buildTree(loaded);\r\n\t\t\tthis.filter();\r\n\t\t\tthis.callEvent(\"onParse\", [loaded]);\r\n\t\t},\r\n\r\n\t\t_addItemInner: function(item, index){\r\n\r\n\t\t\tvar parent = this.getParent(item);\r\n\r\n\t\t\tif(!utils.defined(parent)){\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t\tthis.setParent(item, parent);\r\n\t\t\t}\r\n\r\n\t\t\tvar parentIndex = this.getIndexById(parent);\r\n\t\t\tvar targetIndex = parentIndex + Math.min(Math.max(index, 0), this.visibleOrder.length);\r\n\r\n\t\t\tif(targetIndex*1 !== targetIndex){\r\n\t\t\t\ttargetIndex = undefined;\r\n\t\t\t}\r\n\t\t\tDataStore.prototype._addItemInner.call(this, item, targetIndex);\r\n\t\t\tthis.setParent(item, parent);\r\n\r\n\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\tthis._move_branch(item, item.$rendered_parent);\r\n\t\t\t}\r\n\t\t\tthis._add_branch(item, index);\r\n\t\t},\r\n\t\t_changeIdInner: function(oldId, newId){\r\n\t\t\tvar children = this.getChildren(oldId);\r\n\t\t\tvar visibleOrder = this._searchVisibleOrder[oldId];\r\n\r\n\t\t\tDataStore.prototype._changeIdInner.call(this, oldId, newId);\r\n\r\n\t\t\tvar parent = this.getParent(newId);\r\n\r\n\t\t\tthis._replace_branch_child(parent, oldId, newId);\r\n\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\tthis.setParent(this.getItem(children[i]), newId);\r\n\t\t\t}\r\n\r\n\t\t\tthis._searchVisibleOrder[newId] = visibleOrder;\r\n\t\t\tdelete this._branches[oldId];\r\n\t\t},\r\n\r\n\t\t_traverseBranches: function(code, parent){\r\n\t\t\tparent = parent || this.$getRootId();\r\n\t\t\tvar branch = this._branches[parent];\r\n\t\t\tif (branch) {\r\n\t\t\t\tfor (var i = 0; i < branch.length; i++) {\r\n\t\t\t\t\tvar itemId = branch[i];\r\n\t\t\t\t\tcode.call(this, itemId);\r\n\t\t\t\t\tif (this._branches[itemId])\r\n\t\t\t\t\t\tthis._traverseBranches(code, itemId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_updateOrder: function(code){\r\n\r\n\t\t\tthis.fullOrder = powerArray.$create();\r\n\t\t\tthis._traverseBranches(function(taskId){\r\n\t\t\t\tthis.fullOrder.push(taskId);\r\n\t\t\t});\r\n\r\n\t\t\tif(code)\r\n\t\t\t\tDataStore.prototype._updateOrder.call(this, code);\r\n\t\t},\r\n\r\n\t\t_removeItemInner: function(id){\r\n\r\n\t\t\tvar items = [];\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\titems.push(child);\r\n\t\t\t}, id);\r\n\r\n\t\t\titems.push(this.getItem(id));\r\n\r\n\t\t\tfor(var i = 0; i < items.length; i++){\r\n\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t\tDataStore.prototype._removeItemInner.call(this, items[i].id);\r\n\t\t\t\tthis._move_branch(items[i], this.getParent(items[i]), null);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmove: function(sid, tindex, parent){\r\n\t\t\t//target id as 4th parameter\r\n\t\t\tvar id = arguments[3];\r\n\t\t\tif (id) {\r\n\t\t\t\tif (id === sid) return;\r\n\r\n\t\t\t\tparent = this.getParent(id);\r\n\t\t\t\ttindex = this.getBranchIndex(id);\r\n\t\t\t}\r\n\t\t\tif(sid == parent){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tparent = parent || this.$getRootId();\r\n\t\t\tvar source = this.getItem(sid);\r\n\t\t\tvar source_pid = this.getParent(source.id);\r\n\t\t\tvar sbranch = this.getChildren(this.getParent(source.id));\r\n\r\n\t\t\tvar tbranch = this.getChildren(parent);\r\n\r\n\t\t\tif (tindex == -1)\r\n\t\t\t\ttindex = tbranch.length + 1;\r\n\t\t\tif (source_pid == parent) {\r\n\t\t\t\tvar sindex = this.getBranchIndex(sid);\r\n\t\t\t\tif (sindex == tindex) return;\r\n\t\t\t}\r\n\r\n\t\t\tif(this.callEvent(\"onBeforeItemMove\", [sid, parent, tindex]) === false)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis._replace_branch_child(source_pid, sid);\r\n\t\t\ttbranch = this.getChildren(parent);\r\n\r\n\t\t\tvar tid = tbranch[tindex];\r\n\t\t\tif (!tid) //adding as last element\r\n\t\t\t\ttbranch.push(sid);\r\n\t\t\telse\r\n\t\t\t\ttbranch = tbranch.slice(0, tindex).concat([ sid ]).concat(tbranch.slice(tindex));\r\n\r\n\t\t\tthis.setParent(source, parent);\r\n\t\t\tthis._branches[parent] = tbranch;\r\n\r\n\t\t\tvar diff = this.calculateItemLevel(source) - source.$level;\r\n\t\t\tsource.$level += diff;\r\n\t\t\tthis.eachItem(function(item){\r\n\t\t\t\titem.$level += diff;\r\n\t\t\t}, source.id, this);\r\n\r\n\r\n\t\t\tthis._moveInner(this.getIndexById(sid), this.getIndexById(parent) + tindex);\r\n\r\n\t\t\tthis.callEvent(\"onAfterItemMove\", [sid, parent, tindex]);\r\n\t\t\tthis.refresh();\r\n\t\t},\r\n\r\n\t\tgetBranchIndex: function(id){\r\n\t\t\tvar branch = this.getChildren(this.getParent(id));\r\n\t\t\tfor (var i = 0; i < branch.length; i++)\r\n\t\t\t\tif (branch[i] == id)\r\n\t\t\t\t\treturn i;\r\n\r\n\t\t\treturn -1;\r\n\t\t},\r\n\t\thasChild: function(id){\r\n\t\t\treturn (utils.defined(this._branches[id]) && this._branches[id].length);\r\n\t\t},\r\n\t\tgetChildren: function(id){\r\n\t\t\treturn utils.defined(this._branches[id]) ? this._branches[id] : powerArray.$create();\r\n\t\t},\r\n\r\n\t\tisChildOf: function(childId, parentId){\r\n\t\t\tif (!this.exists(childId))\r\n\t\t\t\treturn false;\r\n\t\t\tif (parentId === this.$getRootId())\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tif (!this.hasChild(parentId))\r\n\t\t\t\treturn false;\r\n\r\n\t\t\tvar item = this.getItem(childId);\r\n\t\t\tvar pid = this.getParent(childId);\r\n\r\n\t\t\tvar parent = this.getItem(parentId);\r\n\t\t\tif(parent.$level >= item.$level){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\twhile (item && this.exists(pid)) {\r\n\t\t\t\titem = this.getItem(pid);\r\n\r\n\t\t\t\tif (item && item.id == parentId)\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tpid = this.getParent(item);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\tgetSiblings: function(id){\r\n\t\t\tif(!this.exists(id)){\r\n\t\t\t\treturn powerArray.$create();\r\n\t\t\t}\r\n\t\t\tvar parent = this.getParent(id);\r\n\t\t\treturn this.getChildren(parent);\r\n\r\n\t\t},\r\n\t\tgetNextSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i+1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetPrevSibling: function(id){\r\n\t\t\tvar siblings = this.getSiblings(id);\r\n\t\t\tfor(var i= 0, len = siblings.length; i < len; i++){\r\n\t\t\t\tif(siblings[i] == id)\r\n\t\t\t\t\treturn siblings[i-1] || null;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tgetParent: function(id){\r\n\t\t\tvar item = null;\r\n\t\t\tif(id.id !== undefined){\r\n\t\t\t\titem = id;\r\n\t\t\t}else{\r\n\t\t\t\titem = this.getItem(id);\r\n\t\t\t}\r\n\r\n\t\t\tvar parent;\r\n\t\t\tif(item){\r\n\t\t\t\tparent = item[this.$parentProperty];\r\n\t\t\t}else{\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\t\t\treturn parent;\r\n\r\n\t\t},\r\n\r\n\t\tclearAll: function(){\r\n\t\t\tthis._branches = {};\r\n\t\t\tDataStore.prototype.clearAll.call(this);\r\n\t\t},\r\n\r\n\t\tcalculateItemLevel: function(item){\r\n\t\t\tvar level = 0;\r\n\t\t\tthis.eachParent(function(){\r\n\t\t\t\tlevel++;\r\n\t\t\t}, item);\r\n\t\t\treturn level;\r\n\t\t},\r\n\r\n\t\t_setParentInner: function(item, new_pid, silent){\r\n\t\t\tif(!silent){\r\n\t\t\t\tif(item.hasOwnProperty(\"$rendered_parent\")){\r\n\t\t\t\t\tthis._move_branch(item, item.$rendered_parent, new_pid);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._move_branch(item, item[this.$parentProperty], new_pid);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetParent: function(item, new_pid, silent){\r\n\t\t\tthis._setParentInner(item, new_pid, silent);\r\n\r\n\t\t\titem[this.$parentProperty] = new_pid;\r\n\t\t},\r\n\t\teachItem: function(code, parent){\r\n\t\t\tparent = parent || this.$getRootId();\r\n\r\n\r\n\t\t\tvar branch = this.getChildren(parent);\r\n\t\t\tif (branch)\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tvar item = this.pull[branch[i]];\r\n\t\t\t\t\tcode.call(this, item);\r\n\t\t\t\t\tif (this.hasChild(item.id))\r\n\t\t\t\t\t\tthis.eachItem(code, item.id);\r\n\t\t\t\t}\r\n\t\t},\r\n\t\teachParent: function(code, startItem){\r\n\t\t\tvar item = startItem;\r\n\t\t\tvar parent = this.getParent(item);\r\n\t\t\twhile (this.exists(parent)) {\r\n\t\t\t\titem = this.getItem(parent);\r\n\t\t\t\tcode.call(this, item);\r\n\t\t\t\tparent = this.getParent(item);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_add_branch: function(item, index, parent){\r\n\t\t\tvar pid = parent === undefined ? this.getParent(item) : parent;\r\n\t\t\tif (!this.hasChild(pid))\r\n\t\t\t\tthis._branches[pid] = powerArray.$create();\r\n\t\t\tvar branch = this.getChildren(pid);\r\n\t\t\tvar added_already = false;\r\n\t\t\tfor(var i = 0, length = branch.length; i < length; i++){\r\n\t\t\t\tif(branch[i] == item.id){\r\n\t\t\t\t\tadded_already = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!added_already){\r\n\t\t\t\tif(index*1 == index){\r\n\r\n\t\t\t\t\tbranch.splice(index, 0, item.id);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tbranch.push(item.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.$rendered_parent = pid;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_move_branch: function(item, old_parent, new_parent){\r\n\t\t\t//this.setParent(item, new_parent);\r\n\t\t\t//this._sync_parent(task);\r\n\t\t\tthis._replace_branch_child(old_parent, item.id);\r\n\t\t\tif(this.exists(new_parent) || new_parent == this.$getRootId()){\r\n\r\n\t\t\t\tthis._add_branch(item, undefined, new_parent);\r\n\t\t\t}else{\r\n\t\t\t\tdelete this._branches[item.id];\r\n\t\t\t}\r\n\t\t\titem.$level =  this.calculateItemLevel(item);\r\n\t\t\tthis.eachItem(function(child){\r\n\t\t\t\tchild.$level = this.calculateItemLevel(child);\r\n\t\t\t}, item.id);\r\n\t\t},\r\n\r\n\t\t_replace_branch_child: function(node, old_id, new_id){\r\n\t\t\tvar branch = this.getChildren(node);\r\n\t\t\tif (branch && node !== undefined){\r\n\t\t\t\tvar newbranch = powerArray.$create();\r\n\t\t\t\tfor (var i=0; i<branch.length; i++){\r\n\t\t\t\t\tif (branch[i] != old_id)\r\n\t\t\t\t\t\tnewbranch.push(branch[i]);\r\n\t\t\t\t\telse if (new_id)\r\n\t\t\t\t\t\tnewbranch.push(new_id);\r\n\t\t\t\t}\r\n\t\t\t\tthis._branches[node] = newbranch;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tsort: function(field, desc, parent){\r\n\t\t\tif (!this.exists(parent)) {\r\n\t\t\t\tparent = this.$getRootId();\r\n\t\t\t}\r\n\r\n\t\t\tif (!field) field = \"order\";\r\n\t\t\tvar criteria = (typeof(field) == \"string\") ? (function(a, b) {\r\n\t\t\t\tif(a[field] == b[field]){\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar result = a[field] > b[field];\r\n\t\t\t\treturn result ? 1 : -1;\r\n\t\t\t}) : field;\r\n\r\n\t\t\tif (desc) {\r\n\t\t\t\tvar original_criteria = criteria;\r\n\t\t\t\tcriteria = function (a, b) {\r\n\t\t\t\t\treturn original_criteria(b, a);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tvar els = this.getChildren(parent);\r\n\r\n\t\t\tif (els){\r\n\t\t\t\tvar temp = [];\r\n\t\t\t\tfor (var i = els.length - 1; i >= 0; i--)\r\n\t\t\t\t\ttemp[i] = this.getItem(els[i]);\r\n\r\n\t\t\t\ttemp.sort(criteria);\r\n\r\n\t\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\t\tels[i] = temp[i].id;\r\n\t\t\t\t\tthis.sort(field, desc, els[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tfilter: function(rule){\r\n\t\t\tfor(var i  in this.pull){\r\n\t\t\t\tif(this.pull[i].$rendered_parent !== this.getParent(this.pull[i])){\r\n\t\t\t\t\tthis._move_branch(this.pull[i], this.pull[i].$rendered_parent, this.getParent(this.pull[i]));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn DataStore.prototype.filter.apply(this, arguments);\r\n\t\t},\r\n\r\n\t\topen: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = true;\r\n\t\t\t\tthis.callEvent(\"onItemOpen\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclose: function(id){\r\n\t\t\tif(this.exists(id)){\r\n\t\t\t\tthis.getItem(id).$open = false;\r\n\t\t\t\tthis.callEvent(\"onItemClose\", [id]);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdestructor: function(){\r\n\t\t\tDataStore.prototype.destructor.call(this);\r\n\t\t\tthis._branches = null;\r\n\t\t}\r\n\t},\r\n\tDataStore.prototype\r\n);\r\n\r\nmodule.exports = TreeDataStore;","var utils = require(\"../../utils/utils\");\r\n\r\n\r\nvar createLinksStoreFacade = function(){\r\n\treturn {\r\n\tgetLinkCount: function () {\r\n\t\treturn this.$data.linksStore.count();\r\n\t},\r\n\r\n\tgetLink : function (id) {\r\n\t\treturn this.$data.linksStore.getItem(id);\r\n\t},\r\n\r\n\tgetLinks : function () {\r\n\t\treturn this.$data.linksStore.getItems();\r\n\t},\r\n\r\n\tisLinkExists : function (id) {\r\n\t\treturn this.$data.linksStore.exists(id);\r\n\t},\r\n\r\n\taddLink : function (link) {\r\n\t\treturn this.$data.linksStore.addItem(link);\r\n\t},\r\n\r\n\tupdateLink : function (id, data) {\r\n\t\tif (!utils.defined(data))\r\n\t\t\tdata = this.getLink(id);\r\n\t\tthis.$data.linksStore.updateItem(id, data);\r\n\t},\r\n\r\n\tdeleteLink : function (id) {\r\n\t\treturn this.$data.linksStore.removeItem(id);\r\n\t},\r\n\r\n\tchangeLinkId : function (oldid, newid) {\r\n\t\treturn this.$data.linksStore.changeId(oldid, newid);\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createLinksStoreFacade;","var utils = require(\"../../utils/utils\");\r\n\r\nvar createTasksDatastoreFacade = function(){\r\n\treturn {\r\n\tgetTask: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument for gantt.getTask\");\r\n\t\tvar task = this.$data.tasksStore.getItem(id);\r\n\t\tthis.assert(task, \"Task not found id=\" + id);\r\n\t\treturn task;\r\n\t},\r\n\tgetTaskByTime: function (from, to) {\r\n\t\tvar p = this.$data.tasksStore.getItems();\r\n\r\n\t\tvar res = [];\r\n\r\n\t\tif (!(from || to)) {\r\n\t\t\tres = p;\r\n\t\t} else {\r\n\t\t\tfrom = +from || -Infinity;\r\n\t\t\tto = +to || Infinity;\r\n\t\t\tfor (var t = 0; t < p.length; t++){\r\n\t\t\t\tvar task = p[t];\r\n\t\t\t\tif (+task.start_date < to && +task.end_date > from)\r\n\t\t\t\t\tres.push(task);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t},\r\n\tisTaskExists: function (id) {\r\n\t\treturn this.$data.tasksStore.exists(id);\r\n\t},\r\n\tupdateTask: function (id, item) {\r\n\t\tif (!utils.defined(item)) item = this.getTask(id);\r\n\t\tthis.$data.tasksStore.updateItem(id, item);\r\n\t\tif(this.isTaskExists(id))\r\n\t\t\tthis.refreshTask(id);\r\n\t},\r\n\taddTask: function (item, parent, index) {\r\n\t\tif (!utils.defined(item.id))\r\n\t\t\titem.id = utils.uid();\r\n\r\n\t\tif (!utils.defined(parent)) parent = this.getParent(item) || 0;\r\n\t\tif (!this.isTaskExists(parent)) parent = 0;\r\n\t\tthis.setParent(item, parent);\r\n\r\n\t\treturn this.$data.tasksStore.addItem(item, index, parent);\r\n\t},\r\n\tdeleteTask: function (id) {\r\n\t\treturn this.$data.tasksStore.removeItem(id);\r\n\t},\r\n\tgetTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.count();\r\n\t},\r\n\tgetVisibleTaskCount: function () {\r\n\t\treturn this.$data.tasksStore.countVisible();\r\n\t},\r\n\tgetTaskIndex: function (id) {\r\n\t\treturn this.$data.tasksStore.getBranchIndex(id);\r\n\t},\r\n\tgetGlobalTaskIndex: function (id) {\r\n\t\tthis.assert(id, \"Invalid argument\");\r\n\t\treturn this.$data.tasksStore.getIndexById(id);\r\n\t},\r\n\teachTask: function (code, parent, master) {\r\n\t\treturn this.$data.tasksStore.eachItem(utils.bind(code, master||this), parent);\r\n\t},\r\n\teachParent: function (callback, startTask, master) {\r\n\t\treturn this.$data.tasksStore.eachParent(utils.bind(callback, master || this), startTask);\r\n\t},\r\n\tchangeTaskId: function (oldid, newid) {\r\n\t\tthis.$data.tasksStore.changeId(oldid, newid);\r\n\t\tvar task = this.$data.tasksStore.getItem(newid);\r\n\r\n\t\tvar links = [];\r\n\r\n\t\tif (task.$source) {\r\n\t\t\tlinks = links.concat(task.$source);\r\n\t\t}\r\n\t\tif (task.$target) {\r\n\t\t\tlinks = links.concat(task.$target);\r\n\t\t}\r\n\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = this.getLink(links[i]);\r\n\t\t\tif (link.source == oldid) {\r\n\t\t\t\tlink.source = newid;\r\n\t\t\t}\r\n\t\t\tif (link.target == oldid) {\r\n\t\t\t\tlink.target = newid;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcalculateTaskLevel: function (item) {\r\n\t\treturn this.$data.tasksStore.calculateItemLevel(item);\r\n\t},\r\n\tgetNext: function (id) {\r\n\t\treturn this.$data.tasksStore.getNext(id);\r\n\t},\r\n\tgetPrev: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrev(id);\r\n\t},\r\n\tgetParent: function (id) {\r\n\t\treturn this.$data.tasksStore.getParent(id);\r\n\t},\r\n\tsetParent: function (task, new_pid, silent) {\r\n\t\treturn this.$data.tasksStore.setParent(task, new_pid, silent);\r\n\t},\r\n\tgetSiblings: function (id) {\r\n\t\treturn this.$data.tasksStore.getSiblings(id).slice();\r\n\t},\r\n\tgetNextSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getNextSibling(id);\r\n\t},\r\n\tgetPrevSibling: function (id) {\r\n\t\treturn this.$data.tasksStore.getPrevSibling(id);\r\n\t},\r\n\tgetTaskByIndex: function(index){\r\n\t\tvar id = this.$data.tasksStore.getIdByIndex(index);\r\n\t\tif(this.isTaskExists(id)){\r\n\t\t\treturn this.getTask(id);\r\n\t\t}else{\r\n\t\t\treturn null;\r\n\t\t}\r\n\t},\r\n\tgetChildren: function (id) {\r\n\t\tif(!this.hasChild(id)){\r\n\t\t\treturn [];\r\n\t\t}else{\r\n\t\t\treturn this.$data.tasksStore.getChildren(id).slice();\r\n\t\t}\r\n\t},\r\n\thasChild: function (id) {\r\n\t\treturn this.$data.tasksStore.hasChild(id);\r\n\t},\r\n\topen: function (id) {\r\n\t\tthis.$data.tasksStore.open(id);\r\n\t},\r\n\tclose: function (id) {\r\n\t\tthis.$data.tasksStore.close(id);\r\n\t},\r\n\tmoveTask: function (sid, tindex, parent) {\r\n\t\tthis.$data.tasksStore.move.apply(this.$data.tasksStore, arguments);\r\n\t},\r\n\tsort: function(field, desc, parent, silent) {\r\n\t\tvar render = !silent;//4th argument to cancel redraw after sorting\r\n\r\n\t\tthis.$data.tasksStore.sort(field, desc, parent);\r\n\t\tif (render) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t\tthis.callEvent(\"onAfterSort\", [field, desc, parent]);\r\n\t}\r\n};\r\n};\r\n\r\nmodule.exports = createTasksDatastoreFacade;\r\n\r\n\r\n","var utils = require(\"../../utils/utils\");\r\nvar createTasksFacade = require(\"./datastore_tasks\"),\r\n\tcreateLinksFacade = require(\"./datastore_links\"),\r\n\tDataStore = require(\"../datastore/datastore\"),\r\n\tTreeDataStore = require(\"../datastore/treedatastore\"),\r\n\tcreateDatastoreSelect = require(\"../datastore/select\");\r\nvar datastoreRender = require(\"../datastore/datastore_render\");\r\n\r\nfunction getDatastores(){\r\n\tvar storeNames = this.$services.getService(\"datastores\");\r\n\tvar res = [];\r\n\tfor(var i = 0; i < storeNames.length; i++){\r\n\t\tres.push(this.getDatastore(storeNames[i]));\r\n\t}\r\n\treturn res;\r\n}\r\n\r\nvar createDatastoreFacade = function(){\r\n\treturn {\r\n\tcreateDatastore: function(config){\r\n\r\n\t\tvar $StoreType = (config.type || \"\").toLowerCase() == \"treedatastore\" ? TreeDataStore : DataStore;\r\n\r\n\t\tif(config){\r\n\t\t\tvar self = this;\r\n\t\t\tconfig.openInitially = function(){ return self.config.open_tree_initially; };\r\n\t\t}\r\n\r\n\t\tvar store = new $StoreType(config);\r\n\t\tthis.mixin(store, createDatastoreSelect(store));\r\n\r\n\t\tif(config.name){\r\n\r\n\t\t\tthis.$services.setService(\"datastore:\" + config.name, function(){return store;});\r\n\t\t\tvar storeList = this.$services.getService(\"datastores\");\r\n\t\t\tif(!storeList){\r\n\t\t\t\tstoreList = [];\r\n\t\t\t\tthis.$services.setService(\"datastores\", function(){return storeList;});\r\n\t\t\t}\r\n\t\t\tstoreList.push(config.name);\r\n\r\n\t\t\tdatastoreRender.bindDataStore(config.name, this);\r\n\t\t}\r\n\r\n\t\treturn store;\r\n\t},\r\n\tgetDatastore: function(name){\r\n\t\treturn this.$services.getService(\"datastore:\" + name);\r\n\t},\r\n\r\n\trefreshData: function () {\r\n\t\tvar scrollState = this.getScrollState();\r\n\t\tthis.callEvent(\"onBeforeDataRender\", []);\r\n\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].refresh();\r\n\t\t}\r\n\r\n\t\tif(scrollState.x || scrollState.y){\r\n\t\t\tthis.scrollTo(scrollState.x, scrollState.y);\r\n\t\t}\r\n\t\tthis.callEvent(\"onDataRender\", []);\r\n\t},\r\n\r\n\tisChildOf: function(childId, parentId){\r\n\t\treturn this.$data.tasksStore.isChildOf(childId, parentId);\r\n\t},\r\n\r\n\trefreshTask: function (taskId, refresh_links) {\r\n\t\tvar task = this.getTask(taskId);\r\n\t\tif (task && this.isTaskVisible(taskId)) {\r\n\r\n\t\t\tthis.$data.tasksStore.refresh(taskId, !!this.getState().drag_id);// do quick refresh during drag and drop\r\n\r\n\t\t\tif (refresh_links !== undefined && !refresh_links)\r\n\t\t\t\treturn;\r\n\t\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$source[i]);\r\n\t\t\t}\r\n\t\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\t\tthis.refreshLink(task.$target[i]);\r\n\t\t\t}\r\n\t\t}else if(this.isTaskExists(taskId) && this.isTaskExists(this.getParent(taskId))){\r\n\t\t\tthis.refreshTask(this.getParent(taskId));\r\n\t\t}\r\n\r\n\t},\r\n\trefreshLink: function (linkId) {\r\n\t\tthis.$data.linksStore.refresh(linkId, !!this.getState().drag_id);// do quick refresh during drag and drop\r\n\t},\r\n\r\n\tsilent: function(code){\r\n\t\tvar gantt = this;\r\n\t\tgantt.$data.tasksStore.silent(function(){\r\n\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\tcode();\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\r\n\tclearAll: function () {\r\n\t\tvar stores = getDatastores.call(this);\r\n\t\tfor(var i = 0; i < stores.length; i++){\r\n\t\t\tstores[i].clearAll();\r\n\t\t}\r\n\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t\tthis.callEvent(\"onClear\", []);\r\n\t\tthis.render();\r\n\t},\r\n\t_clear_data: function () {\r\n\t\tthis.$data.tasksStore.clearAll();\r\n\t\tthis.$data.linksStore.clearAll();\r\n\t\tthis._update_flags();\r\n\t\tthis.userdata = {};\r\n\t},\r\n\r\n\tselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tif(!this.config.select_task)\r\n\t\t\treturn false;\r\n\t\tif (id){\r\n\r\n\t\t\tstore.select(id);\r\n\t\t}\r\n\t\treturn store.getSelectedId();\r\n\t},\r\n\tunselectTask: function(id){\r\n\t\tvar store = this.$data.tasksStore;\r\n\t\tstore.unselect(id);\r\n\t},\r\n\tgetSelectedId: function() {\r\n\t\treturn this.$data.tasksStore.getSelectedId();\r\n\t}\r\n};\r\n};\r\n\r\nfunction createFacade(){\r\n\tvar res = utils.mixin({}, createDatastoreFacade());\r\n\tutils.mixin(res, createTasksFacade());\r\n\tutils.mixin(res, createLinksFacade());\r\n\treturn res;\r\n}\r\n\r\n\r\n\r\n\r\nmodule.exports = {create: createFacade};","var utils = require(\"../../utils/utils\");\r\nvar facadeFactory = require(\"./../facades/datastore\");\r\nvar calculateScaleRange = require(\"../gantt_data_range\");\r\nfunction initDataStores(gantt){\r\n\r\n\tvar facade = facadeFactory.create();\r\n\tutils.mixin(gantt, facade);\r\n\tvar tasksStore = gantt.createDatastore({\r\n\t\tname: \"task\",\r\n\t\ttype: \"treeDatastore\",\r\n\t\trootId: function(){return gantt.config.root_id;},\r\n\t\tinitItem: utils.bind(_init_task, gantt)\r\n\t});\r\n\r\n\tvar linksStore = gantt.createDatastore({\r\n\t\tname: \"link\",\r\n\t\tinitItem: utils.bind(_init_link, gantt)\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onBeforeRefreshAll\", function(){\r\n\r\n\t\tvar order = tasksStore.getVisibleItems();\r\n\r\n\t\tfor(var i=0; i < order.length; i++){\r\n\t\t\tvar item = order[i];\r\n\t\t\titem.$index = i;\r\n\t\t\tgantt.resetProjectDates(item);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onFilterItem\", function(id, task){\r\n\t\tvar min = null, max = null;\r\n\t\tif (gantt.config.start_date && gantt.config.end_date) {\r\n\t\t\tif (gantt._isAllowedUnscheduledTask(task)) return true;\r\n\t\t\tmin = gantt.config.start_date.valueOf();\r\n\t\t\tmax = gantt.config.end_date.valueOf();\r\n\r\n\t\t\tif (+task.start_date > max || +task.end_date < +min)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onIdChange\", function(oldId, newId){\r\n\t\tgantt._update_flags(oldId, newId);\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterUpdate\", function(id){\r\n\t\tgantt._update_parents(id);\r\n\t\tif(gantt.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tvar task = tasksStore.getItem(id);\r\n\t\tfor (var i = 0; i < task.$source.length; i++) {\r\n\t\t\tlinksStore.refresh(task.$source[i]);\r\n\t\t}\r\n\t\tfor (var i = 0; i < task.$target.length; i++) {\r\n\t\t\tlinksStore.refresh(task.$target[i]);\r\n\t\t}\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onAfterItemMove\", function(sid, parent, tindex){\r\n\t\tvar source = gantt.getTask(sid);\r\n\r\n\t\tif(this.getNextSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = this.getNextSibling(sid);\r\n\t\t} else if(this.getPrevSibling(sid) !== null){\r\n\t\t\tsource.$drop_target = \"next:\" + this.getPrevSibling(sid);\r\n\t\t}else{\r\n\t\t\tsource.$drop_target = \"next:null\";\r\n\t\t}\r\n\r\n\t});\r\n\r\n\ttasksStore.attachEvent(\"onStoreUpdated\", function(id, item, action){\r\n\t\tif(action == \"delete\"){\r\n\t\t\tgantt._update_flags(id, null);\r\n\t\t}\r\n\r\n\t\tvar state = gantt.$services.getService(\"state\");\r\n\t\tif(state.getState(\"batchUpdate\").batch_update){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(gantt.config.fit_tasks && action !== \"paint\"){\r\n\t\t\tvar oldState = gantt.getState();\r\n\t\t\tcalculateScaleRange(gantt);\r\n\t\t\tvar newState = gantt.getState();\r\n\r\n\t\t\t//this._init_tasks_range();\r\n\t\t\tif (+oldState.min_date != +newState.min_date || +oldState.max_date != +newState.max_date) {\r\n\t\t\t\tgantt.render();\r\n\r\n\t\t\t\tgantt.callEvent(\"onScaleAdjusted\", []);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(action == \"add\" || action == \"move\" || action == \"delete\"){\r\n\t\t\tgantt.$layout.resize();\r\n\t\t}else if(!id){\r\n\t\t\tlinksStore.refresh();\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tlinksStore.attachEvent(\"onAfterAdd\", function(id, link){\r\n\t\tsync_link(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterUpdate\", function(id, link){\r\n\t\tsync_links();\r\n\t});\r\n\tlinksStore.attachEvent(\"onAfterDelete\", function(id, link){\r\n\t\tsync_link_delete(link);\r\n\t});\r\n\tlinksStore.attachEvent(\"onBeforeIdChange\", function(oldId, newId){\r\n\t\tsync_link_delete(gantt.mixin({id:oldId}, gantt.$data.linksStore.getItem(newId)));\r\n\t\tsync_link(gantt.$data.linksStore.getItem(newId));\r\n\t});\r\n\r\n\tfunction checkLinkedTaskVisibility(taskId){\r\n\t\tvar isVisible = gantt.isTaskVisible(taskId);\r\n\t\tif(!isVisible && gantt.isTaskExists(taskId)){\r\n\t\t\tvar parent = gantt.getParent(taskId);\r\n\t\t\tif(gantt.isTaskExists(parent) && gantt.isTaskVisible(parent)){\r\n\t\t\t\tparent = gantt.getTask(parent);\r\n\t\t\t\tif(gantt.isSplitTask(parent)){\r\n\t\t\t\t\tisVisible = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn isVisible;\r\n\t}\r\n\r\n\tlinksStore.attachEvent(\"onFilterItem\", function(id, link){\r\n\t\tif (!gantt.config.show_links) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tvar sourceVisible = checkLinkedTaskVisibility(link.source);\r\n\t\tvar targetVisible = checkLinkedTaskVisibility(link.target);\r\n\r\n\t\tif (!(sourceVisible && targetVisible) ||\r\n\t\t\tgantt._isAllowedUnscheduledTask(gantt.getTask(link.source)) || gantt._isAllowedUnscheduledTask(gantt.getTask(link.target)))\r\n\t\t\treturn false;\r\n\r\n\t\treturn gantt.callEvent(\"onBeforeLinkDisplay\", [id, link]);\r\n\t});\r\n\r\n\r\n\t(function(){\r\n\t\t// delete all connected links after task is deleted\r\n\t\tvar treeHelper = require(\"../../utils/task_tree_helpers\");\r\n\t\tvar deletedLinks = {};\r\n\r\n\t\tgantt.attachEvent(\"onBeforeTaskDelete\", function(id, item){\r\n \t\t\tdeletedLinks[id] = treeHelper.getSubtreeLinks(gantt, id);\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onAfterTaskDelete\", function(id, item) {\r\n\t\t\tif(deletedLinks[id]){\r\n\t\t\t\tgantt.$data.linksStore.silent(function(){\r\n\t\t\t\t\tfor(var i in deletedLinks[id]){\r\n\t\t\t\t\t\tgantt.$data.linksStore.removeItem(i);\r\n\t\t\t\t\t\tsync_link_delete(deletedLinks[id][i]);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdeletedLinks[id] = null;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t})();\r\n\r\n\tgantt.attachEvent(\"onAfterLinkDelete\", function(id, link) {\r\n\t\tgantt.refreshTask(link.source);\r\n\t\tgantt.refreshTask(link.target);\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onParse\", sync_links);\r\n\r\n\tmapEvents({\r\n\t\tsource: linksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onLinkLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeLinkAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterLinkAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeLinkUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterLinkUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeLinkDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterLinkDelete\",\r\n\t\t\t\"onIdChange\":\"onLinkIdChange\"\r\n\t\t}\r\n\t});\r\n\r\n\tmapEvents({\r\n\t\tsource: tasksStore,\r\n\t\ttarget: gantt,\r\n\t\tevents:{\r\n\t\t\t\"onItemLoading\":\"onTaskLoading\",\r\n\t\t\t\"onBeforeAdd\":\"onBeforeTaskAdd\",\r\n\t\t\t\"onAfterAdd\":\"onAfterTaskAdd\",\r\n\t\t\t\"onBeforeUpdate\":\"onBeforeTaskUpdate\",\r\n\t\t\t\"onAfterUpdate\":\"onAfterTaskUpdate\",\r\n\t\t\t\"onBeforeDelete\":\"onBeforeTaskDelete\",\r\n\t\t\t\"onAfterDelete\":\"onAfterTaskDelete\",\r\n\t\t\t\"onIdChange\":\"onTaskIdChange\",\r\n\t\t\t\"onBeforeItemMove\":\"onBeforeTaskMove\",\r\n\t\t\t\"onAfterItemMove\":\"onAfterTaskMove\",\r\n\t\t\t\"onFilterItem\":\"onBeforeTaskDisplay\",\r\n\t\t\t\"onItemOpen\":\"onTaskOpened\",\r\n\t\t\t\"onItemClose\":\"onTaskClosed\",\r\n\t\t\t\"onBeforeSelect\":\"onBeforeTaskSelected\",\r\n\t\t\t\"onAfterSelect\":\"onTaskSelected\",\r\n\t\t\t\"onAfterUnselect\":\"onTaskUnselected\"\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.$data = {\r\n\t\ttasksStore: tasksStore,\r\n\t\tlinksStore: linksStore\r\n\t};\r\n\r\n\tfunction sync_link(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tsourceTask.$source = sourceTask.$source || [];\r\n\t\t\tsourceTask.$source.push(link.id);\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\ttargetTask.$target = targetTask.$target || [];\r\n\t\t\ttargetTask.$target.push(link.id);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_link_delete(link){\r\n\t\tif(gantt.isTaskExists(link.source)){\r\n\t\t\tvar sourceTask = gantt.getTask(link.source);\r\n\t\t\tfor(var i = 0; i < sourceTask.$source.length; i++){\r\n\t\t\t\tif(sourceTask.$source[i] == link.id){\r\n\t\t\t\t\tsourceTask.$source.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(gantt.isTaskExists(link.target)){\r\n\t\t\tvar targetTask = gantt.getTask(link.target);\r\n\t\t\tfor(var i = 0; i < targetTask.$target.length; i++){\r\n\t\t\t\tif(targetTask.$target[i] == link.id){\r\n\t\t\t\t\ttargetTask.$target.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sync_links() {\r\n\t\tvar task = null;\r\n\t\tvar tasks = gantt.$data.tasksStore.getItems();\r\n\r\n\t\tfor(var i = 0, len = tasks.length; i < len; i++){\r\n\t\t\ttask = tasks[i];\r\n\t\t\ttask.$source = [];\r\n\t\t\ttask.$target = [];\r\n\t\t}\r\n\r\n\t\tvar links = gantt.$data.linksStore.getItems();\r\n\t\tfor (var i = 0, len = links.length; i < len; i++) {\r\n\r\n\t\t\tvar link = links[i];\r\n\t\t\tsync_link(link);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction mapEvents(conf){\r\n\t\tvar mapFrom = conf.source;\r\n\t\tvar mapTo = conf.target;\r\n\t\tfor(var i in conf.events){\r\n\t\t\t(function(sourceEvent, targetEvent){\r\n\t\t\t\tmapFrom.attachEvent(sourceEvent, function(){\r\n\t\t\t\t\treturn mapTo.callEvent(targetEvent, Array.prototype.slice.call(arguments));\r\n\t\t\t\t}, targetEvent);\r\n\t\t\t})(i, conf.events[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _init_task(task) {\r\n\t\tif (!this.defined(task.id))\r\n\t\t\ttask.id = this.uid();\r\n\r\n\t\tif (task.start_date)\r\n\t\t\ttask.start_date = gantt.date.parseDate(task.start_date, \"xml_date\");\r\n\t\tif (task.end_date)\r\n\t\t\ttask.end_date = gantt.date.parseDate(task.end_date, \"xml_date\");\r\n\r\n\r\n\t\tvar duration = null;\r\n\t\tif (task.duration || task.duration === 0) {\r\n\t\t\ttask.duration = duration = task.duration * 1;\r\n\t\t}\r\n\r\n\t\tif (duration) {\r\n\t\t\tif (task.start_date && !task.end_date) {\r\n\t\t\t\ttask.end_date = this.calculateEndDate(task);\r\n\t\t\t} else if (!task.start_date && task.end_date) {\r\n\t\t\t\ttask.start_date = this.calculateEndDate({\r\n\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\tduration: -task.duration,\r\n\t\t\t\t\ttask: task\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\tif (this._isAllowedUnscheduledTask(task)) {\r\n\t\t\tthis._set_default_task_timing(task);\r\n\t\t}\r\n\t\tthis._init_task_timing(task);\r\n\t\tif (task.start_date && task.end_date)\r\n\t\t\tthis.correctTaskWorkTime(task);\r\n\r\n\t\ttask.$source = [];\r\n\t\ttask.$target = [];\r\n\t\tif (task.parent === undefined) {\r\n\t\t\tthis.setParent(task, this.config.root_id);\r\n\t\t}\r\n\r\n\t\treturn task;\r\n\t}\r\n\r\n\tfunction _init_link(link) {\r\n\t\tif (!this.defined(link.id))\r\n\t\t\tlink.id = this.uid();\r\n\t\treturn link;\r\n\t}\r\n}\r\n\r\n\r\nmodule.exports = initDataStores;\r\n","function createLayoutFacade(){\r\n\r\n\tfunction getTimeline(gantt){\r\n\t\treturn gantt.$ui.getView(\"timeline\");\r\n\t}\r\n\r\n\tfunction getGrid(gantt){\r\n\t\treturn gantt.$ui.getView(\"grid\");\r\n\t}\r\n\r\n\tfunction getVerticalScrollbar(gantt){\r\n\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t}\r\n\r\n\tfunction getHorizontalScrollbar(gantt){\r\n\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t}\r\n\r\n\tvar DEFAULT_VALUE = \"DEFAULT_VALUE\";\r\n\r\n\tfunction tryCall(getView, method, args, fallback){\r\n\t\tvar view = getView(this);\r\n\t\tif (!(view && view.isVisible())) {\r\n\t\t\tif(fallback){\r\n\t\t\t\treturn fallback();\r\n\t\t\t}else{\r\n\t\t\t\treturn DEFAULT_VALUE;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn view[method].apply(view, args);\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\r\n\t\tgetColumnIndex: function(name) {\r\n\t\t\tvar res = tryCall.call(this, getGrid, \"getColumnIndex\", [name]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdateFromPos: function(x) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"dateFromPos\", Array.prototype.slice.call(arguments));\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn this.getState().min_date;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tposFromDate: function(date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"posFromDate\", [date]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetRowTop: function(index) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getRowTop\", [index],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getRowTop\", [index]);}\r\n\t\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskTop: function(id) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getItemTop\", [id],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemTop\", [id]);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tgetTaskPosition: function(task, start_date, end_date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"getItemPosition\", [task, start_date, end_date]);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\tvar top = this.getTaskTop(task.id);\r\n\t\t\t\tvar height = this.getTaskHeight();\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\ttop: top,\r\n\t\t\t\t\theight: height,\r\n\t\t\t\t\twidth: 0\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskHeight: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar res = tryCall.call(self, getTimeline, \"getItemHeight\", [],\r\n\t\t\t\tfunction(){ return tryCall.call(self, getGrid, \"getItemHeight\", []);}\r\n\t\t\t);\r\n\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tcolumnIndexByDate: function(date) {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"columnIndexByDate\", [date]);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn 0;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\troundTaskDates: function() {\r\n\t\t\ttryCall.call(this, getTimeline, \"roundTaskDates\", []);\r\n\t\t},\r\n\r\n\t\tgetScale: function() {\r\n\t\t\tvar res = tryCall.call(this, getTimeline, \"getScale\", []);\r\n\t\t\tif(res === DEFAULT_VALUE){\r\n\t\t\t\treturn null;\r\n\t\t\t}else{\r\n\t\t\t\treturn res;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetTaskNode: function(id) {\r\n\t\t\tvar timeline = getTimeline(this);\r\n\t\t\tif (!timeline || !timeline.isVisible()) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\treturn timeline._taskRenderer.rendered[id];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\tgetLinkNode: function(id) {\r\n\t\t\tvar timeline = getTimeline(this);\r\n\t\t\tif (!timeline.isVisible()) {\r\n\t\t\t\treturn null;\r\n\t\t\t} else {\r\n\t\t\t\treturn timeline._linkRenderer.rendered[id];\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tscrollTo: function(left, top){\r\n\t\t\tvar vertical = getVerticalScrollbar(this);\r\n\t\t\tvar horizontal = getHorizontalScrollbar(this);\r\n\r\n\t\t\tvar oldH = {position: 0},\r\n\t\t\t\toldV = {position: 0};\r\n\r\n\t\t\tif(vertical){\r\n\t\t\t\toldV = vertical.getScrollState();\r\n\t\t\t}\r\n\t\t\tif(horizontal){\r\n\t\t\t\toldH = horizontal.getScrollState();\r\n\t\t\t}\r\n\r\n\t\t\tif (horizontal && left*1 == left){\r\n\t\t\t\thorizontal.scroll(left);\r\n\t\t\t}\r\n\t\t\tif(vertical && top*1 == top){\r\n\t\t\t\tvertical.scroll(top);\r\n\t\t\t}\r\n\r\n\t\t\tvar newV = {position: 0},\r\n\t\t\t\tnewH = {position: 0};\r\n\t\t\tif(vertical){\r\n\t\t\t\tnewV = vertical.getScrollState();\r\n\t\t\t}\r\n\t\t\tif(horizontal){\r\n\t\t\t\tnewH = horizontal.getScrollState();\r\n\t\t\t}\r\n\r\n\t\t\tthis.callEvent(\"onGanttScroll\", [oldH.position, oldV.position, newH.position, newV.position]);\r\n\t\t},\r\n\r\n\t\tshowDate: function(date){\r\n\t\t\tvar date_x = this.posFromDate(date);\r\n\t\t\tvar scroll_to = Math.max(date_x - this.config.task_scroll_offset, 0);\r\n\t\t\tthis.scrollTo(scroll_to);\r\n\t\t},\r\n\t\tshowTask: function(id) {\r\n\t\t\tvar pos = this.getTaskPosition(this.getTask(id));\r\n\r\n\t\t\tvar left = Math.max(pos.left - this.config.task_scroll_offset, 0);\r\n\r\n\t\t\tvar dataHeight = this._scroll_state().y;\r\n\t\t\tvar top;\r\n\t\t\tif(!dataHeight){\r\n\t\t\t\ttop = pos.top;\r\n\t\t\t}else{\r\n\t\t\t\ttop = pos.top - (dataHeight - this.config.row_height)/2;\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollTo(left, top);\r\n\t\t},\r\n\t\t_scroll_state: function(){\r\n\t\t\tvar result = {\r\n\t\t\t\tx: false,\r\n\t\t\t\ty: false,\r\n\t\t\t\tx_pos: 0,\r\n\t\t\t\ty_pos: 0,\r\n\t\t\t\tscroll_size: this.config.scroll_size + 1,//1px for inner content\r\n\t\t\t\tx_inner: 0,\r\n\t\t\t\ty_inner: 0\r\n\t\t\t};\r\n\r\n\t\t\tvar scrollVer = getVerticalScrollbar(this),\r\n\t\t\t\tscrollHor = getHorizontalScrollbar(this);\r\n\t\t\tif(scrollHor){\r\n\t\t\t\tvar horState = scrollHor.getScrollState();\r\n\t\t\t\tif(horState.visible){\r\n\t\t\t\t\tresult.x = horState.size;\r\n\t\t\t\t\tresult.x_inner = horState.scrollSize;\r\n\t\t\t\t}\r\n\t\t\t\tresult.x_pos = horState.position || 0;\r\n\t\t\t}\r\n\r\n\t\t\tif(scrollVer){\r\n\t\t\t\tvar verState = scrollVer.getScrollState();\r\n\t\t\t\tif(verState.visible){\r\n\t\t\t\t\tresult.y = verState.size;\r\n\r\n\t\t\t\t\tresult.y_inner = verState.scrollSize;\r\n\t\t\t\t}\r\n\t\t\t\tresult.y_pos = verState.position || 0;\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tgetScrollState: function(){\r\n\t\t\tvar state = this._scroll_state();\r\n\t\t\treturn { x:state.x_pos, y:state.y_pos, inner_width:state.x, inner_height:state.y, width: state.x_inner, height: state.y_inner };\r\n\t\t}\r\n\r\n\t};\r\n\r\n}\r\n\r\nmodule.exports = createLayoutFacade;","module.exports = function(gantt) {\r\n\tdelete gantt.addTaskLayer;\r\n\tdelete gantt.addLinkLayer;\r\n};","var domHelpers = require(\"../../utils/dom_helpers\");\r\n\r\nvar initializer = (function() {\r\n\treturn function (gantt) {\r\n\t\treturn {\r\n\r\n\t\t\tgetVerticalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollVer\");\r\n\t\t\t},\r\n\t\t\tgetHorizontalScrollbar: function(){\r\n\t\t\t\treturn gantt.$ui.getView(\"scrollHor\");\r\n\t\t\t},\r\n\r\n\t\t\t_legacyGridResizerClass: function(layout){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar r = resizers[i];\r\n\t\t\t\t\tvar gridResizer = false;\r\n\r\n\t\t\t\t\tvar prev = r.$parent.getPrevSibling(r.$id);\r\n\t\t\t\t\tif(prev && prev.$config && prev.$config.id === \"grid\"){\r\n\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar next = r.$parent.getNextSibling(r.$id);\r\n\t\t\t\t\t\tif(next && next.$config && next.$config.id === \"grid\"){\r\n\t\t\t\t\t\t\tgridResizer= true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(gridResizer){\r\n\t\t\t\t\t\tr.$config.css = (r.$config.css ? r.$config.css + \" \" : \"\") + \"gantt_grid_resize_wrap\";\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tonCreated: function(layout) {\r\n\t\t\t\tvar first = true;\r\n\r\n\t\t\t\tthis._legacyGridResizerClass(layout);\r\n\r\n\t\t\t\tlayout.attachEvent(\"onBeforeResize\", function() {\r\n\t\t\t\t\tvar mainTimeline = gantt.$ui.getView(\"timeline\");\r\n\t\t\t\t\tif (mainTimeline)\r\n\t\t\t\t\t\tmainTimeline.$config.hidden = mainTimeline.$parent.$config.hidden = !gantt.config.show_chart;\r\n\r\n\t\t\t\t\tvar mainGrid = gantt.$ui.getView(\"grid\");\r\n\r\n\t\t\t\t\tif(!mainGrid)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar showGrid = gantt.config.show_grid;\r\n\t\t\t\t\tif (first) {\r\n\t\t\t\t\t\tvar colsWidth = mainGrid._getColsTotalWidth();\r\n\t\t\t\t\t\tif (colsWidth !== false){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = colsWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tshowGrid = showGrid && !!gantt.config.grid_width;\r\n\t\t\t\t\t\tgantt.config.show_grid = showGrid;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmainGrid.$config.hidden = mainGrid.$parent.$config.hidden = !showGrid;\r\n\r\n\t\t\t\t\tif (!mainGrid.$config.hidden) {\r\n\t\t\t\t\t\t/* restrict grid width due to min_width, max_width, min_grid_column_width */\r\n\t\t\t\t\t\tvar grid_limits = mainGrid._getGridWidthLimits();\r\n\t\t\t\t\t\tif (grid_limits[0] && gantt.config.grid_width < grid_limits[0])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[0];\r\n\t\t\t\t\t\tif (grid_limits[1] && gantt.config.grid_width > grid_limits[1])\r\n\t\t\t\t\t\t\tgantt.config.grid_width = grid_limits[1];\r\n\t\t\t\t\t\tif (mainTimeline && gantt.config.show_chart){\r\n\r\n\t\t\t\t\t\t\tmainGrid.$config.width = gantt.config.grid_width - 1;\r\n\t\t\t\t\t\t\tif (!first) {\r\n\t\t\t\t\t\t\t\tif (mainTimeline && !domHelpers.isChildOf(mainTimeline.$task, layout.$view)) {\r\n\t\t\t\t\t\t\t\t\t// timeline is being displayed after being not visible, reset grid with from full screen\r\n\t\t\t\t\t\t\t\t\tif (!mainGrid.$config.original_grid_width) {\r\n\t\t\t\t\t\t\t\t\t\tvar skinSettings = gantt.skins[gantt.skin];\r\n\t\t\t\t\t\t\t\t\t\tif(skinSettings && skinSettings.config && skinSettings.config.grid_width){\r\n\t\t\t\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width =  skinSettings.config.grid_width;\r\n\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width = 0;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tgantt.config.grid_width = mainGrid.$config.original_grid_width;\r\n\t\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tmainGrid.$parent._setContentSize(mainGrid.$config.width, mainGrid.$config.height);\r\n\t\t\t\t\t\t\t\t\tgantt.$layout._syncCellSizes(mainGrid.$parent.$config.group, gantt.config.grid_width);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t\tif (mainGrid.$parent.$config.group) {\r\n\t\t\t\t\t\t\t\t\tgantt.$layout._syncCellSizes(mainGrid.$parent.$config.group, mainGrid.$parent.$config.width);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (mainTimeline && domHelpers.isChildOf(mainTimeline.$task, layout.$view)) {\r\n\t\t\t\t\t\t\t\t// hiding timeline, remember grid with to restore it when timeline is displayed again\r\n\t\t\t\t\t\t\t\tmainGrid.$config.original_grid_width = gantt.config.grid_width;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!first) {\r\n\t\t\t\t\t\t\t\tmainGrid.$parent.$config.width = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfirst = false;\r\n\t\t\t\t});\r\n\t\t\t\tthis._initScrollStateEvents(layout);\r\n\t\t\t},\r\n\r\n\t\t\t_initScrollStateEvents: function(layout) {\r\n\t\t\t\tgantt._getVerticalScrollbar = this.getVerticalScrollbar;\r\n\t\t\t\tgantt._getHorizontalScrollbar = this.getHorizontalScrollbar;\r\n\r\n\t\t\t\tvar vertical = this.getVerticalScrollbar();\r\n\t\t\t\tvar horizontal = this.getHorizontalScrollbar();\r\n\t\t\t\tif (vertical) {\r\n\t\t\t\t\tvertical.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [scrollState.x, oldPos, scrollState.x, newPos]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (horizontal) {\r\n\t\t\t\t\thorizontal.attachEvent(\"onScroll\", function(oldPos, newPos, dir){\r\n\t\t\t\t\t\tvar scrollState = gantt.getScrollState();\r\n\t\t\t\t\t\tgantt.callEvent(\"onGanttScroll\", [oldPos, scrollState.y, newPos, scrollState.y]);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlayout.attachEvent(\"onResize\", function(){\r\n\t\t\t\t\tif (vertical && !gantt.$scroll_ver){\r\n\t\t\t\t\t\tgantt.$scroll_ver = vertical.$scroll_ver;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (horizontal && !gantt.$scroll_hor){\r\n\t\t\t\t\t\tgantt.$scroll_hor = horizontal.$scroll_hor;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_findGridResizer: function(layout, grid){\r\n\t\t\t\tvar resizers = layout.getCellsByType(\"resizer\");\r\n\r\n\t\t\t\tvar gridFirst = true;\r\n\t\t\t\tvar gridResizer;\r\n\t\t\t\tfor(var i = 0; i < resizers.length; i++){\r\n\t\t\t\t\tvar res = resizers[i];\r\n\t\t\t\t\tres._getSiblings();\r\n\t\t\t\t\tvar prev = res._behind;\r\n\t\t\t\t\tvar next = res._front;\r\n\t\t\t\t\tif(prev && prev.$content === grid || (prev.isChild && prev.isChild(grid))){\r\n\t\t\t\t\t\tgridResizer = res;\r\n\t\t\t\t\t\tgridFirst = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}else if(next && next.$content === grid || (next.isChild && next.isChild(grid))){\r\n\t\t\t\t\t\tgridResizer = res;\r\n\t\t\t\t\t\tgridFirst = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\tresizer: gridResizer,\r\n\t\t\t\t\tgridFirst: gridFirst\r\n\t\t\t\t};\r\n\t\t\t},\r\n\r\n\t\t\tonInitialized: function (layout) {\r\n\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\r\n\t\t\t\tvar resizeInfo = this._findGridResizer(layout, grid);\r\n\r\n\t\t\t\t// expose grid resize events\r\n\t\t\t\tif(resizeInfo.resizer){\r\n\t\t\t\t\tvar gridFirst = resizeInfo.gridFirst,\r\n\t\t\t\t\t\tnext = resizeInfo.resizer;\r\n\t\t\t\t\tvar initialWidth;\r\n\t\t\t\t\tnext.attachEvent(\"onResizeStart\", function(prevCellWidth, nextCellWidth){\r\n\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tvar limits = grid._getGridWidthLimits();\r\n\r\n\t\t\t\t\t\t\t// min grid width is defined by min widths of its columns, unless grid has horizontal scroll\r\n\t\t\t\t\t\t\tif(!grid.$config.scrollable)\r\n\t\t\t\t\t\t\t\tviewCell.$config.minWidth = limits[0];\r\n\r\n\t\t\t\t\t\t\tviewCell.$config.maxWidth = limits[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tinitialWidth = gridFirst ? prevCellWidth : nextCellWidth;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResizeStart\", [initialWidth]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResize\", function(newBehindSize, newFrontSize){\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBehindSize : newFrontSize;\r\n\t\t\t\t\t\treturn gantt.callEvent(\"onGridResize\", [initialWidth, newSize]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tnext.attachEvent(\"onResizeEnd\", function(oldBackSize, oldFrontSize, newBackSize, newFrontSize){\r\n\r\n\t\t\t\t\t\tvar oldSize = gridFirst ? oldBackSize : oldFrontSize;\r\n\t\t\t\t\t\tvar newSize = gridFirst ? newBackSize : newFrontSize;\r\n\t\t\t\t\t\tvar grid = gantt.$ui.getView(\"grid\");\r\n\t\t\t\t\t\tvar viewCell = grid ? grid.$parent : null;\r\n\t\t\t\t\t\tif(viewCell){\r\n\t\t\t\t\t\t\tviewCell.$config.minWidth = undefined;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar res = gantt.callEvent(\"onGridResizeEnd\", [oldSize, newSize]);\r\n\t\t\t\t\t\tif(res){\r\n\t\t\t\t\t\t\tgantt.config.grid_width = newSize;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn res;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;","var domHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar initLinksDND = function(timeline, gantt) {\r\n\tvar _link_landing,\r\n\t\t_link_target_task,\r\n\t\t_link_target_task_start,\r\n\t\t_link_source_task,\r\n\t\t_link_source_task_start;\r\n\r\n\r\n\tfunction getVisibleMilestoneWidth() {\r\n\t\tvar origWidth = timeline.getItemHeight();//m-s have square shape\r\n\t\treturn Math.round(Math.sqrt(2 * origWidth * origWidth)) - 2;\r\n\t}\r\n\r\n\tfunction isMilestone(task) {\r\n\t\treturn gantt.getTaskType(task.type) == gantt.config.types.milestone;\r\n\t}\r\n\r\n\tfunction getDndState(){\r\n\t\treturn {\r\n\t\t\tlink_source_id : _link_source_task,\r\n\t\t\tlink_target_id : _link_target_task,\r\n\t\t\tlink_from_start : _link_source_task_start,\r\n\t\t\tlink_to_start : _link_target_task_start,\r\n\t\t\tlink_landing_area : _link_landing\r\n\t\t};\r\n\t}\r\n\r\n\tvar services = gantt.$services;\r\n\r\n\tvar state = services.getService(\"state\");\r\n\tvar DnD = services.getService(\"dnd\");\r\n\r\n\tstate.registerProvider(\"linksDnD\", getDndState);\r\n\r\n\tvar dnd = new DnD(timeline.$task_bars, { sensitivity : 0, updates_per_second : 60 }),\r\n\t\tstart_marker = \"task_start_date\",\r\n\t\tend_marker = \"task_end_date\",\r\n\t\tlink_edge_marker = \"gantt_link_point\",\r\n\t\tlink_landing_hover_area = \"gantt_link_control\";\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function(obj,e) {\r\n\t\tvar target = (e.target||e.srcElement);\r\n\t\tresetDndState();\r\n\t\tif(gantt.getState().drag_id)\r\n\t\t\treturn false;\r\n\r\n\t\tif(domHelpers.locateClassName(target, link_edge_marker)){\r\n\t\t\tif(domHelpers.locateClassName(target, start_marker))\r\n\t\t\t\t_link_source_task_start = true;\r\n\r\n\t\t\tvar sid = gantt.locate(e);\r\n\t\t\t_link_source_task = sid;\r\n\r\n\t\t\tvar t = gantt.getTask(sid);\r\n\t\t\tif(gantt.isReadonly(t)){\r\n\t\t\t\tresetDndState();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar shift = 0;\r\n\r\n\t\t\tthis._dir_start = getLinePos(t, !!_link_source_task_start, shift, timeline.$getConfig(), true);\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, this));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function(obj,e) {\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\tupdateMarkedHtml(dnd.config.marker);\r\n\t}, this));\r\n\r\n\tfunction getLinePos(task, to_start, shift, cfg, isStart){\r\n\t\tvar taskPos = getMilestonePosition(task, function(task){ return gantt.getTaskPosition(task);}, cfg);\r\n\r\n\t\tvar pos = {x: taskPos.x, y: taskPos.y};\r\n\t\tif(!to_start){\r\n\t\t\tpos.x = taskPos.xEnd;\r\n\t\t}\r\n\r\n\t\t//var pos = gantt._get_task_pos(task, !!to_start);\r\n\t\tpos.y += gantt.config.row_height/2;\r\n\r\n\t\tvar offset = isMilestone(task) && isStart ? 2 : 0;\r\n\r\n\t\tshift = shift || 0;\r\n\t\tif(cfg.rtl)\r\n\t\t\tshift = shift * -1;\r\n\r\n\t\tpos.x += (to_start ? -1 : 1)*shift  - offset;\r\n\t\treturn pos;\r\n\t}\r\n\r\n\tfunction getMilestonePosition(task, getTaskPosition, cfg){\r\n\t\tvar pos = getTaskPosition(task);\r\n\r\n\t\tvar res = {\r\n\t\t\tx: pos.left,\r\n\t\t\ty: pos.top,\r\n\t\t\twidth: pos.width,\r\n\t\t\theight: pos.height\r\n\t\t};\r\n\r\n\t\tif(cfg.rtl){\r\n\t\t\tres.xEnd = res.x;\r\n\t\t\tres.x = res.xEnd + res.width;\r\n\t\t}else{\r\n\t\t\tres.xEnd = res.x + res.width;\r\n\t\t}\r\n\t\tres.yEnd = res.y + res.height;\r\n\r\n\t\tif(gantt.getTaskType(task.type) == gantt.config.types.milestone){\r\n\t\t\tvar milestoneWidth = getVisibleMilestoneWidth();\r\n\r\n\t\t\tres.x += (!cfg.rtl ? -1 : 1)*(milestoneWidth / 2);\r\n\t\t\tres.xEnd += (!cfg.rtl ? 1 : -1)*(milestoneWidth / 2);\r\n\r\n\t\t\t//pos.x -= milestoneWidth / 2;\r\n\t\t\t//pos.xEnd += milestoneWidth / 2;\r\n\t\t\tres.width = pos.xEnd - pos.x;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function(obj,e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd.getPosition(e);\r\n\t\tadvanceMarker(dd.marker, pos);\r\n\t\tvar landing = !!domHelpers.locateClassName(e, link_landing_hover_area);\r\n\r\n\t\tvar prevTarget = _link_target_task;\r\n\t\tvar prevLanding = _link_landing;\r\n\t\tvar prevToStart = _link_target_task_start;\r\n\r\n\t\tvar targ = gantt.locate(e),\r\n\t\t\tto_start = true;\r\n\t\tif(landing){\r\n\t\t\t//refreshTask\r\n\t\t\tto_start = !domHelpers.locateClassName(e, end_marker);\r\n\t\t\tlanding = !!targ;\r\n\t\t}\r\n\r\n\t\t_link_target_task = targ;\r\n\t\t_link_landing = landing;\r\n\t\t_link_target_task_start = to_start;\r\n\r\n\t\tif(landing){\r\n\t\t\tvar t = gantt.getTask(targ);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar node = domHelpers.locateClassName(e, link_landing_hover_area);\r\n\t\t\tvar shift = 0;\r\n\t\t\tif(node){\r\n\t\t\t\tshift = Math.floor(node.offsetWidth  / 2);\r\n\t\t\t}\r\n\r\n\t\t\tthis._dir_end = getLinePos(t, !!_link_target_task_start,shift, config);\r\n\t\t}else{\r\n\t\t\tthis._dir_end = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t}\r\n\r\n\t\tvar targetChanged = !(prevLanding == landing && prevTarget == targ && prevToStart == to_start);\r\n\t\tif(targetChanged){\r\n\t\t\tif(prevTarget)\r\n\t\t\t\tgantt.refreshTask(prevTarget, false);\r\n\t\t\tif(targ)\r\n\t\t\t\tgantt.refreshTask(targ, false);\r\n\t\t}\r\n\r\n\t\tif(targetChanged){\r\n\t\t\tupdateMarkedHtml(dd.marker);\r\n\t\t}\r\n\r\n\t\tshowDirectingLine(this._dir_start.x, this._dir_start.y, this._dir_end.x, this._dir_end.y);\r\n\r\n\t\treturn true;\r\n\t}, this));\r\n\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function() {\r\n\t\tvar drag = getDndState();\r\n\r\n\t\tif(drag.link_source_id && drag.link_target_id && drag.link_source_id != drag.link_target_id){\r\n\t\t\tvar type = gantt._get_link_type(drag.link_from_start, drag.link_to_start);\r\n\r\n\t\t\tvar link = {source : drag.link_source_id, target: drag.link_target_id, type:type};\r\n\t\t\tif(link.type && gantt.isLinkAllowed(link))\r\n\t\t\t\tgantt.addLink(link);\r\n\t\t}\r\n\r\n\t\tresetDndState();\r\n\r\n\t\tif(gantt.config.touch) {\r\n\t\t\tgantt.refreshData();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (drag.link_source_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_source_id, false);\r\n\t\t\tif (drag.link_target_id)\r\n\t\t\t\tgantt.refreshTask(drag.link_target_id, false);\r\n\t\t}\r\n\t\tremoveDirectionLine();\r\n\t}, this));\r\n\r\n\tfunction updateMarkedHtml(marker){\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_tooltip\"];\r\n\t\tif(link.link_source_id && link.link_target_id){\r\n\t\t\tif(gantt.isLinkAllowed(link.link_source_id, link.link_target_id, link.link_from_start, link.link_to_start)){\r\n\t\t\t\tcss.push(\"gantt_allowed_link\");\r\n\t\t\t}else{\r\n\t\t\t\tcss.push(\"gantt_invalid_link\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar className = gantt.templates.drag_link_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start);\r\n\t\tif(className)\r\n\t\t\tcss.push(className);\r\n\r\n\t\tvar html = \"<div class='\"+className+ \"'>\" +\r\n\t\t\tgantt.templates.drag_link(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start) +\r\n\t\t\t\"</div>\";\r\n\t\tmarker.innerHTML = html;\r\n\t}\r\n\r\n\tfunction advanceMarker(marker, pos){\r\n\t\tmarker.style.left = pos.x + 5 + \"px\";\r\n\t\tmarker.style.top = pos.y + 5 + \"px\";\r\n\t}\r\n\r\n\tfunction resetDndState(){\r\n\t\t_link_source_task =\r\n\t\t\t_link_source_task_start =\r\n\t\t\t\t_link_target_task = null;\r\n\t\t_link_target_task_start = true;\r\n\t}\r\n\tfunction showDirectingLine(s_x, s_y, e_x, e_y){\r\n\t\tvar div = getDirectionLine();\r\n\r\n\t\tvar link = getDndState();\r\n\r\n\t\tvar css = [\"gantt_link_direction\"];\r\n\t\tif(gantt.templates.link_direction_class){\r\n\t\t\tcss.push(gantt.templates.link_direction_class(link.link_source_id, link.link_from_start, link.link_target_id, link.link_to_start));\r\n\t\t}\r\n\r\n\t\tvar dist =Math.sqrt( (Math.pow(e_x - s_x, 2)) + (Math.pow(e_y - s_y, 2)) );\r\n\t\tdist = Math.max(0, dist - 3);\r\n\t\tif(!dist)\r\n\t\t\treturn;\r\n\r\n\t\tdiv.className = css.join(\" \");\r\n\t\tvar tan = (e_y - s_y)/(e_x - s_x),\r\n\t\t\tangle = Math.atan(tan);\r\n\r\n\t\tif(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 2){\r\n\t\t\tangle += Math.PI;\r\n\t\t}else if(coordinateCircleQuarter(s_x, e_x, s_y, e_y) == 3){\r\n\t\t\tangle -= Math.PI;\r\n\t\t}\r\n\r\n\r\n\r\n\t\tvar sin = Math.sin(angle),\r\n\t\t\tcos = Math.cos(angle),\r\n\t\t\ttop = Math.round(s_y),\r\n\t\t\tleft = Math.round(s_x);\r\n\r\n\r\n\t\tvar style = [\r\n\t\t\t\"-webkit-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-moz-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-ms-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"-o-transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"transform: rotate(\"+angle+\"rad)\",\r\n\t\t\t\"width:\" + Math.round(dist) + \"px\"\r\n\t\t];\r\n\r\n\t\tif(window.navigator.userAgent.indexOf(\"MSIE 8.0\") != -1){\r\n\t\t\t//ms-filter breaks styles in ie9, so add it only for 8th\r\n\t\t\tstyle.push(\"-ms-filter: \\\"\" + ieTransform(sin, cos) + \"\\\"\");\r\n\r\n\t\t\tvar shiftLeft = Math.abs(Math.round(s_x - e_x)),\r\n\t\t\t\tshiftTop = Math.abs(Math.round(e_y - s_y));\r\n\t\t\t//fix rotation axis\r\n\t\t\tswitch(coordinateCircleQuarter(s_x, e_x, s_y, e_y)){\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\ttop -= shiftTop;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tleft -= shiftLeft;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstyle.push(\"top:\" +  top + \"px\");\r\n\t\tstyle.push(\"left:\" +  left + \"px\");\r\n\r\n\t\tdiv.style.cssText = style.join(\";\");\r\n\t}\r\n\r\n\tfunction ieTransform(sin, cos){\r\n\t\treturn \"progid:DXImageTransform.Microsoft.Matrix(\"+\r\n\t\t\t\"M11 = \"+cos+\",\"+\r\n\t\t\t\"M12 = -\"+sin+\",\"+\r\n\t\t\t\"M21 = \"+sin+\",\"+\r\n\t\t\t\"M22 = \"+cos+\",\"+\r\n\t\t\t\"SizingMethod = 'auto expand'\"+\r\n\t\t\")\";\r\n\t}\r\n\tfunction coordinateCircleQuarter(sX, eX, sY, eY){\r\n\t\tif(eX >= sX){\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 1;\r\n\t\t\t}else{\r\n\t\t\t\treturn 4;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(eY <= sY){\r\n\t\t\t\treturn 2;\r\n\t\t\t}else{\r\n\t\t\t\treturn 3;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\tfunction getDirectionLine(){\r\n\t\tif(!dnd._direction){\r\n\t\t\tdnd._direction = document.createElement(\"div\");\r\n\t\t\ttimeline.$task_links.appendChild(dnd._direction);\r\n\t\t}\r\n\t\treturn dnd._direction;\r\n\t}\r\n\tfunction removeDirectionLine(){\r\n\t\tif(dnd._direction){\r\n\t\t\tif (dnd._direction.parentNode)\t//the event line can be detached because of data refresh\r\n\t\t\t\tdnd._direction.parentNode.removeChild(dnd._direction);\r\n\r\n\t\t\tdnd._direction = null;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateLinkDND: function(){\r\n\t\treturn {\r\n\t\t\tinit: initLinksDND\r\n\t\t};\r\n\t}\r\n};","var domHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\");\r\nvar timeout = require(\"../../../utils/timeout\");\r\n\r\nfunction createTaskDND(timeline, gantt){\r\n\tvar services = gantt.$services;\r\n\treturn {\r\n\t\tdrag: null,\r\n\t\tdragMultiple: {},\r\n\t\t_events: {\r\n\t\t\tbefore_start: {},\r\n\t\t\tbefore_finish: {},\r\n\t\t\tafter_finish: {}\r\n\t\t},\r\n\t\t_handlers: {},\r\n\t\tinit: function () {\r\n\t\t\tthis._domEvents = gantt._createDomEventScope();\r\n\t\t\tthis.clear_drag_state();\r\n\t\t\tvar drag = gantt.config.drag_mode;\r\n\t\t\tthis.set_actions();\r\n\r\n\t\t\tvar stateService = services.getService(\"state\");\r\n\t\t\tstateService.registerProvider(\"tasksDnd\", utils.bind(function(){\r\n\t\t\t\treturn {\r\n\t\t\t\t\tdrag_id : this.drag ? this.drag.id : undefined,\r\n\t\t\t\t\tdrag_mode : this.drag ? this.drag.mode : undefined,\r\n\t\t\t\t\tdrag_from_start : this.drag ? this.drag.left : undefined\r\n\t\t\t\t};\r\n\t\t\t}, this));\r\n\r\n\t\t\tvar evs = {\r\n\t\t\t\t\"before_start\": \"onBeforeTaskDrag\",\r\n\t\t\t\t\"before_finish\": \"onBeforeTaskChanged\",\r\n\t\t\t\t\"after_finish\": \"onAfterTaskDrag\"\r\n\t\t\t};\r\n\t\t\t//for now, all drag operations will trigger the same events\r\n\t\t\tfor (var stage in this._events) {\r\n\t\t\t\tfor (var mode in drag) {\r\n\t\t\t\t\tthis._events[stage][mode] = evs[stage];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._handlers[drag.move] = this._move;\r\n\t\t\tthis._handlers[drag.resize] = this._resize;\r\n\t\t\tthis._handlers[drag.progress] = this._resize_progress;\r\n\t\t},\r\n\t\tset_actions: function () {\r\n\t\t\tvar data = timeline.$task_data;\r\n\t\t\tthis._domEvents.attach(data, \"mousemove\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_move(e || event);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(data, \"mousedown\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_down(e || event);\r\n\t\t\t}, this));\r\n\t\t\tthis._domEvents.attach(data, \"mouseup\", gantt.bind(function (e) {\r\n\t\t\t\tthis.on_mouse_up(e || event);\r\n\t\t\t}, this));\r\n\t\t},\r\n\r\n\t\tclear_drag_state: function () {\r\n\t\t\tthis.drag = {\r\n\t\t\t\tid: null,\r\n\t\t\t\tmode: null,\r\n\t\t\t\tpos: null,\r\n\t\t\t\tstart_x: null,\r\n\t\t\t\tstart_y: null,\r\n\t\t\t\tobj: null,\r\n\t\t\t\tleft: null\r\n\t\t\t};\r\n\t\t\tthis.dragMultiple = {};\r\n\t\t},\r\n\t\t_resize: function (ev, shift, drag) {\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tif (drag.left) {\r\n\t\t\t\tev.start_date = gantt.dateFromPos(coords_x.start + shift);\r\n\t\t\t\tif (!ev.start_date) {\r\n\t\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tev.end_date = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\t\tif (!ev.end_date) {\r\n\t\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (ev.end_date - ev.start_date < cfg.min_duration) {\r\n\t\t\t\tif (drag.left)\r\n\t\t\t\t\tev.start_date = gantt.calculateEndDate({start_date: ev.end_date, duration: -1, task: ev});\r\n\t\t\t\telse\r\n\t\t\t\t\tev.end_date = gantt.calculateEndDate({start_date: ev.start_date, duration: 1, task: ev});\r\n\t\t\t}\r\n\t\t\tgantt._init_task_timing(ev);\r\n\t\t},\r\n\t\t_resize_progress: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar diffValue = !config.rtl ? (drag.pos.x - coords_x.start) : (coords_x.start - drag.pos.x);\r\n\r\n\t\t\tvar diff = Math.max(0, diffValue);\r\n\t\t\tev.progress = Math.min(1, diff / Math.abs(coords_x.end - coords_x.start));\r\n\t\t},\r\n\r\n\t\t_find_max_shift: function(dragItems, shift){\r\n\t\t\tvar correctShift;\r\n\t\t\tfor(var i in dragItems){\r\n\t\t\t\tvar drag = dragItems[i];\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\t\tvar minX = gantt.posFromDate( new Date(gantt.getState().min_date)),\r\n\t\t\t\t\tmaxX = gantt.posFromDate( new Date(gantt.getState().max_date));\r\n\r\n\t\t\t\tif(coords_x.end + shift > maxX){\r\n\t\t\t\t\tvar maxShift = maxX - coords_x.end;\r\n\t\t\t\t\tif(maxShift < correctShift || correctShift === undefined){\r\n\t\t\t\t\t\tcorrectShift = maxShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(coords_x.start + shift < minX){\r\n\t\t\t\t\tvar minShift = minX - coords_x.start;\r\n\t\t\t\t\tif(minShift < correctShift || correctShift === undefined){\r\n\t\t\t\t\t\tcorrectShift = minShift;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn correctShift;\r\n\t\t},\r\n\t\t_move: function (ev, shift, drag) {\r\n\t\t\tvar coords_x = this._drag_task_coords(ev, drag);\r\n\t\t\tvar new_start = gantt.dateFromPos(coords_x.start + shift),\r\n\t\t\t\tnew_end = gantt.dateFromPos(coords_x.end + shift);\r\n\t\t\tif (!new_start) {\r\n\t\t\t\tev.start_date = new Date(gantt.getState().min_date);\r\n\t\t\t\tev.end_date = gantt.dateFromPos(gantt.posFromDate(ev.start_date) + (coords_x.end - coords_x.start));\r\n\t\t\t} else if (!new_end) {\r\n\t\t\t\tev.end_date = new Date(gantt.getState().max_date);\r\n\t\t\t\tev.start_date = gantt.dateFromPos(gantt.posFromDate(ev.end_date) - (coords_x.end - coords_x.start));\r\n\t\t\t} else {\r\n\t\t\t\tev.start_date = new_start;\r\n\t\t\t\tev.end_date = new_end;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_drag_task_coords: function (t, drag) {\r\n\t\t\tvar start = drag.obj_s_x = drag.obj_s_x || gantt.posFromDate(t.start_date);\r\n\t\t\tvar end = drag.obj_e_x = drag.obj_e_x || gantt.posFromDate(t.end_date);\r\n\t\t\treturn {\r\n\t\t\t\tstart: start,\r\n\t\t\t\tend: end\r\n\t\t\t};\r\n\t\t},\r\n\t\t_mouse_position_change: function (oldPos, newPos) {\r\n\t\t\tvar dx = oldPos.x - newPos.x,\r\n\t\t\t\tdy = oldPos.y - newPos.y;\r\n\t\t\treturn Math.sqrt(dx * dx + dy * dy);\r\n\t\t},\r\n\t\t_is_number: function (n) {\r\n\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\r\n\t\t},\r\n\r\n\t\ton_mouse_move: function (e) {\r\n\t\t\tif (this.drag.start_drag) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\tvar sX = this.drag.start_drag.start_x,\r\n\t\t\t\t\tsY = this.drag.start_drag.start_y;\r\n\r\n\t\t\t\tif ((Date.now() - this.drag.timestamp > 50) ||\r\n\t\t\t\t\t(this._is_number(sX) && this._is_number(sY) && this._mouse_position_change({\r\n\t\t\t\t\t\tx: sX,\r\n\t\t\t\t\t\ty: sY\r\n\t\t\t\t\t}, pos) > 20)) {\r\n\t\t\t\t\tthis._start_dnd(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar drag = this.drag;\r\n\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tif (!timeout(this, 40))//limit update frequency\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tthis._update_on_move(e);\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_update_item_on_move: function(shift, id, mode, drag, e){\r\n\t\t\tvar ev = gantt.getTask(id);\r\n\t\t\tvar original = gantt.mixin({}, ev);\r\n\t\t\tvar copy = gantt.mixin({}, ev);\r\n\t\t\tthis._handlers[mode].apply(this, [copy, shift, drag]);\r\n\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\t//gantt._update_parents(drag.id, true);\r\n\t\t\tgantt.callEvent(\"onTaskDrag\", [ev.id, mode, copy, original, e]);\r\n\t\t\tgantt.mixin(ev, copy, true);\r\n\t\t\tgantt.refreshTask(id);\r\n\t\t},\r\n\r\n\t\t_update_on_move: function (e) {\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (drag.mode) {\r\n\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, timeline.$task_data);\r\n\t\t\t\tif (drag.pos && drag.pos.x == pos.x)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tdrag.pos = pos;\r\n\r\n\t\t\t\tvar curr_date = gantt.dateFromPos(pos.x);\r\n\t\t\t\tif (!curr_date || isNaN(curr_date.getTime()))\r\n\t\t\t\t\treturn;\r\n\r\n\r\n\t\t\t\tvar shift = pos.x - drag.start_x;\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\r\n\t\t\t\tif (this._handlers[drag.mode]) {\r\n\r\n\t\t\t\t\tif(gantt.isSummaryTask(ev) && gantt.config.drag_project && drag.mode == config.drag_mode.move){\r\n\r\n\t\t\t\t\t\tvar initialDrag = {};\r\n\t\t\t\t\t\tinitialDrag[drag.id] = utils.copy(drag);\r\n\t\t\t\t\t\tvar maxShift = this._find_max_shift(utils.mixin(initialDrag, this.dragMultiple), shift);\r\n\t\t\t\t\t\tif(maxShift !== undefined){\r\n\t\t\t\t\t\t\tshift = maxShift;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\t\t\t\t\t\tfor(var i in this.dragMultiple){\r\n\t\t\t\t\t\t\tvar childDrag =  this.dragMultiple[i];\r\n\t\t\t\t\t\t\tthis._update_item_on_move(shift, childDrag.id, childDrag.mode, childDrag, e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis._update_item_on_move(shift, drag.id, drag.mode, drag, e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgantt._update_parents(drag.id);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\ton_mouse_down: function (e, src) {\r\n\t\t\t// on Mac we do not get onmouseup event when clicking right mouse button leaving us in dnd state\r\n\t\t\t// let's ignore right mouse button then\r\n\t\t\tif (e.button == 2 && e.button !== undefined)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar id = gantt.locate(e);\r\n\t\t\tvar task = null;\r\n\t\t\tif (gantt.isTaskExists(id)) {\r\n\t\t\t\ttask = gantt.getTask(id);\r\n\t\t\t}\r\n\r\n\t\t\tif (gantt.isReadonly(task) || this.drag.mode) return;\r\n\r\n\t\t\tthis.clear_drag_state();\r\n\r\n\t\t\tsrc = src || (e.target || e.srcElement);\r\n\r\n\t\t\tvar className = domHelpers.getClassName(src);\r\n\t\t\tvar drag = this._get_drag_mode(className, src);\r\n\r\n\t\t\tif (!className || !drag) {\r\n\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\t\t\t\telse\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!drag) {\r\n\t\t\t\tif (gantt.checkEvent(\"onMouseDown\") && gantt.callEvent(\"onMouseDown\", [className.split(\" \")[0]])) {\r\n\t\t\t\t\tif (src.parentNode)\r\n\t\t\t\t\t\treturn this.on_mouse_down(e, src.parentNode);\r\n\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (drag.mode && drag.mode != config.drag_mode.ignore && config[\"drag_\" + drag.mode]) {\r\n\t\t\t\t\tid = gantt.locate(src);\r\n\t\t\t\t\ttask = gantt.copy(gantt.getTask(id) || {});\r\n\r\n\t\t\t\t\tif (gantt.isReadonly(task)) {\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ((gantt.isSummaryTask(task) && !config.drag_project) && drag.mode != config.drag_mode.progress) {//only progress drag is allowed for tasks with flexible duration\r\n\t\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdrag.id = id;\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\r\n\t\t\t\t\tdrag.start_x = pos.x;\r\n\t\t\t\t\tdrag.start_y = pos.y;\r\n\t\t\t\t\tdrag.obj = task;\r\n\t\t\t\t\tthis.drag.start_drag = drag;\r\n\t\t\t\t\tthis.drag.timestamp = Date.now();\r\n\r\n\t\t\t\t} else\r\n\t\t\t\t\tthis.clear_drag_state();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_dnd_scale_time: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar unit = gantt.getScale().unit,\r\n\t\t\t\tstep = gantt.getScale().step;\r\n\t\t\tif (!config.round_dnd_dates) {\r\n\t\t\t\tunit = 'minute';\r\n\t\t\t\tstep = config.time_step;\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixStart(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(task.start_date, undefined, task))\r\n\t\t\t\t\ttask.start_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.start_date,\r\n\t\t\t\t\t\tduration: -1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction fixEnd(task) {\r\n\t\t\t\tif (!gantt.config.correct_work_time)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\tif (!gantt.isWorkTime(new Date(task.end_date - 1), undefined, task))\r\n\t\t\t\t\ttask.end_date = gantt.calculateEndDate({\r\n\t\t\t\t\t\tstart_date: task.end_date,\r\n\t\t\t\t\t\tduration: 1,\r\n\t\t\t\t\t\tunit: config.duration_unit,\r\n\t\t\t\t\t\ttask: task\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\t\tfixStart(task);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.roundDate({date: task.end_date, unit: unit, step: step});\r\n\t\t\t\t\tfixEnd(task);\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\ttask.start_date = gantt.roundDate({date: task.start_date, unit: unit, step: step});\r\n\t\t\t\tfixStart(task);\r\n\t\t\t\ttask.end_date = gantt.calculateEndDate(task);\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fix_working_times: function (task, drag) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar drag = drag || {mode: config.drag_mode.move};\r\n\t\t\t\r\n\t\t\tif (drag.mode == config.drag_mode.resize) {\r\n\t\t\t\tif (drag.left) {\r\n\t\t\t\t\ttask.start_date = gantt.getClosestWorkTime({date: task.start_date, dir: 'future', task: task});\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttask.end_date = gantt.getClosestWorkTime({date: task.end_date, dir: 'past', task: task});\r\n\t\t\t\t}\r\n\t\t\t} else if (drag.mode == config.drag_mode.move) {\r\n\t\t\t\tgantt.correctTaskWorkTime(task);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_finalize_mouse_up: function(taskId, config, drag, e){\r\n\t\t\tvar ev = gantt.getTask(taskId);\r\n\r\n\t\t\tif (config.work_time && config.correct_work_time) {\r\n\t\t\t\tthis._fix_working_times(ev, drag);\r\n\t\t\t}\r\n\r\n\t\t\tthis._fix_dnd_scale_time(ev, drag);\r\n\r\n\t\t\tif (!this._fireEvent(\"before_finish\", drag.mode, [taskId, drag.mode, gantt.copy(drag.obj), e])) {\r\n\t\t\t\t//drag.obj._dhx_changed = false;\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tif(taskId == drag.id){\r\n\t\t\t\t\tdrag.obj._dhx_changed = false;\r\n\t\t\t\t\tgantt.mixin(ev, drag.obj, true);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tgantt.refreshTask(ev.id);\r\n\t\t\t} else {\r\n\t\t\t\tvar drag_id = taskId;\r\n\r\n\t\t\t\tgantt._init_task_timing(ev);\r\n\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t\tgantt.updateTask(ev.id);\r\n\t\t\t\tthis._fireEvent(\"after_finish\", drag.mode, [drag_id, drag.mode, e]);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\ton_mouse_up: function (e) {\r\n\r\n\t\t\tvar drag = this.drag;\r\n\t\t\tif (drag.mode && drag.id) {\r\n\t\t\t\tvar config = timeline.$getConfig();\r\n\t\t\t\t//drop\r\n\t\t\t\tvar ev = gantt.getTask(drag.id);\r\n\t\t\t\tvar dragMultiple = this.dragMultiple;\r\n\r\n\t\t\t\tif(gantt.isSummaryTask(ev) && config.drag_project && drag.mode == config.drag_mode.move){\r\n\t\t\t\t\tfor(var i in dragMultiple){\r\n\t\t\t\t\t\tthis._finalize_mouse_up(dragMultiple[i].id, config, dragMultiple[i], e);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._finalize_mouse_up(drag.id, config, drag, e);\r\n\t\t\t}\r\n\t\t\tthis.clear_drag_state();\r\n\t\t},\r\n\t\t_get_drag_mode: function (className, el) {\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tvar modes = config.drag_mode;\r\n\t\t\tvar classes = (className || \"\").split(\" \");\r\n\t\t\tvar classname = classes[0];\r\n\t\t\tvar drag = {mode: null, left: null};\r\n\t\t\tswitch (classname) {\r\n\t\t\t\tcase \"gantt_task_line\":\r\n\t\t\t\tcase \"gantt_task_content\":\r\n\t\t\t\t\tdrag.mode = modes.move;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_drag\":\r\n\t\t\t\t\tdrag.mode = modes.resize;\r\n\r\n\t\t\t\t\tvar dragProperty = el.getAttribute(\"data-bind-property\");\r\n\r\n\t\t\t\t\tif (dragProperty == \"start_date\") {\r\n\t\t\t\t\t\tdrag.left = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdrag.left = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_task_progress_drag\":\r\n\t\t\t\t\tdrag.mode = modes.progress;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"gantt_link_control\":\r\n\t\t\t\tcase \"gantt_link_point\":\r\n\t\t\t\t\tdrag.mode = modes.ignore;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tdrag = null;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn drag;\r\n\r\n\t\t},\r\n\r\n\t\t_start_dnd: function (e) {\r\n\t\t\tvar drag = this.drag = this.drag.start_drag;\r\n\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\tvar cfg = timeline.$getConfig();\r\n\t\t\tvar id = drag.id;\r\n\t\t\tif (!cfg[\"drag_\" + drag.mode] || !gantt.callEvent(\"onBeforeDrag\", [id, drag.mode, e]) || !this._fireEvent(\"before_start\", drag.mode, [id, drag.mode, e])) {\r\n\t\t\t\tthis.clear_drag_state();\r\n\t\t\t} else {\r\n\t\t\t\tdelete drag.start_drag;\r\n\r\n\t\t\t\tvar task = gantt.getTask(id);\r\n\t\t\t\tif(gantt.isSummaryTask(task) && gantt.config.drag_project && drag.mode == cfg.drag_mode.move){\r\n\t\t\t\t\tgantt.eachTask(function(child){\r\n\t\t\t\t\t\tthis.dragMultiple[child.id] = gantt.mixin({\r\n\t\t\t\t\t\t\tid: child.id,\r\n\t\t\t\t\t\t\tobj: child\r\n\t\t\t\t\t\t}, this.drag);\r\n\t\t\t\t\t}, task.id, this);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgantt.callEvent(\"onTaskDragStart\", []);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_fireEvent: function (stage, mode, params) {\r\n\t\t\tgantt.assert(this._events[stage], \"Invalid stage:{\" + stage + \"}\");\r\n\r\n\t\t\tvar trigger = this._events[stage][mode];\r\n\r\n\t\t\tgantt.assert(trigger, \"Unknown after drop mode:{\" + mode + \"}\");\r\n\t\t\tgantt.assert(params, \"Invalid event arguments\");\r\n\r\n\r\n\t\t\tif (!gantt.checkEvent(trigger))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\treturn gantt.callEvent(trigger, params);\r\n\t\t},\r\n\r\n\t\tround_task_dates: function(task){\r\n\t\t\tvar drag_state = this.drag;\r\n\t\t\tvar config = timeline.$getConfig();\r\n\t\t\tif (!drag_state) {\r\n\t\t\t\tdrag_state = {mode: config.drag_mode.move};\r\n\t\t\t}\r\n\t\t\tthis._fix_dnd_scale_time(task, drag_state);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tthis._domEvents.detachAll();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction initTaskDND() {\r\n\tvar _tasks_dnd;\r\n\treturn {\r\n\t\textend: function(timeline){\r\n\t\t\ttimeline.roundTaskDates = function (task) {\r\n\t\t\t\t_tasks_dnd.round_task_dates(task);\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\tinit: function(timeline, gantt){\r\n\t\t\t_tasks_dnd = createTaskDND(timeline, gantt);\r\n\t\t\t// TODO: entry point for touch handlers, move touch to timeline\r\n\t\t\ttimeline._tasks_dnd = _tasks_dnd;\r\n\t\t\treturn _tasks_dnd.init(gantt);\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\t_tasks_dnd.destructor();\r\n\t\t\t_tasks_dnd = null;\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tcreateTaskDND: initTaskDND\r\n};\r\n","var utils = require(\"../../../utils/utils\"),\r\n\ttaskDnD = require(\"./tasks_dnd\"),\r\n\tlinkDnD = require(\"./links_dnd\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\tvar services = gantt.$services;\r\n\t\treturn {\r\n\t\t\tonCreated: function (timeline) {\r\n\t\t\t\tvar config = timeline.$config;\r\n\t\t\t\tconfig.bind = utils.defined(config.bind) ? config.bind : \"task\";\r\n\t\t\t\tconfig.bindLinks = utils.defined(config.bindLinks) ? config.bindLinks : \"link\";\r\n\r\n\t\t\t\ttimeline._linksDnD = linkDnD.createLinkDND();\r\n\t\t\t\ttimeline._tasksDnD = taskDnD.createTaskDND();\r\n\t\t\t\ttimeline._tasksDnD.extend(timeline);\r\n\r\n\t\t\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (timeline) {\r\n\t\t\t\tthis._attachDomEvents(gantt);\r\n\r\n\t\t\t\tthis._attachStateProvider(gantt, timeline);\r\n\r\n\t\t\t\ttimeline._tasksDnD.init(timeline, gantt);\r\n\t\t\t\ttimeline._linksDnD.init(timeline, gantt);\r\n\r\n\t\t\t\tif(timeline.$config.id == \"timeline\"){\r\n\t\t\t\t\tthis.extendDom(timeline);\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (timeline) {\r\n\t\t\t\tthis._clearDomEvents(gantt);\r\n\t\t\t\tthis._clearStateProvider(gantt);\r\n\t\t\t},\r\n\t\t\textendDom: function(timeline){\r\n\t\t\t\tgantt.$task = timeline.$task;\r\n\t\t\t\tgantt.$task_scale = timeline.$task_scale;\r\n\t\t\t\tgantt.$task_data = timeline.$task_data;\r\n\t\t\t\tgantt.$task_bg = timeline.$task_bg;\r\n\t\t\t\tgantt.$task_links = timeline.$task_links;\r\n\t\t\t\tgantt.$task_bars = timeline.$task_bars;\r\n\t\t\t},\r\n\r\n\t\t\t_clearDomEvents: function(){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\t_attachDomEvents: function(gantt){\r\n\t\t\t\tfunction _delete_link_handler(id, e) {\r\n\t\t\t\t\tif (id && this.callEvent(\"onLinkDblClick\", [id, e])) {\r\n\r\n\t\t\t\t\t\tvar link = this.getLink(id);\r\n\t\t\t\t\t\tif (this.isReadonly(link)) return;\r\n\r\n\t\t\t\t\t\tvar title = \"\";\r\n\t\t\t\t\t\tvar question = this.locale.labels.link + \" \" + this.templates.link_description(this.getLink(id)) + \" \" + this.locale.labels.confirm_link_deleting;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function () {\r\n\t\t\t\t\t\t\tgantt._dhtmlx_confirm(question, title, function () {\r\n\t\t\t\t\t\t\t\tgantt.deleteLink(id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, (this.config.touch ? 300 : 1));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_task_link\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, this.config.link_attribute);\r\n\t\t\t\t\tif (id) {\r\n\t\t\t\t\t\tthis.callEvent(\"onLinkClick\", [id, e]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_scale_cell\", gantt.bind(function (e, trg) {\r\n\t\t\t\t\tvar pos = domHelpers.getRelativeEventPosition(e, gantt.$task_data);\r\n\t\t\t\t\tvar date = gantt.dateFromPos(pos.x);\r\n\t\t\t\t\tvar coll = Math.floor(gantt.columnIndexByDate(date));\r\n\r\n\t\t\t\t\tvar coll_date = gantt.getScale().trace_x[coll];\r\n\r\n\t\t\t\t\tgantt.callEvent(\"onScaleClick\", [e, coll_date]);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_task_link\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e, gantt.config.link_attribute);\r\n\t\t\t\t\t_delete_link_handler.call(this, id, e);\r\n\t\t\t\t}, gantt), this.$task);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"doubleclick\", \"gantt_link_point\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar id = this.locate(e),\r\n\t\t\t\t\t\ttask = this.getTask(id);\r\n\r\n\t\t\t\t\tvar link = null;\r\n\t\t\t\t\tif (trg.parentNode && domHelpers.getClassName(trg.parentNode)) {\r\n\t\t\t\t\t\tif (domHelpers.getClassName(trg.parentNode).indexOf(\"_left\") > -1) {\r\n\t\t\t\t\t\t\tlink = task.$target[0];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlink = task.$source[0];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (link)\r\n\t\t\t\t\t\t_delete_link_handler.call(this, link, e);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), this.$task);\r\n\t\t\t},\r\n\r\n\t\t\t_attachStateProvider: function(gantt, timeline){\r\n\t\t\t\tvar self = timeline;\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.registerProvider(\"tasksTimeline\", function(){\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tscale_unit: self._tasks ? self._tasks.unit : undefined,\r\n\t\t\t\t\t\tscale_step:  self._tasks ? self._tasks.step  : undefined\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t_clearStateProvider: function(){\r\n\t\t\t\tvar state = services.getService(\"state\");\r\n\t\t\t\tstate.unregisterProvider(\"tasksTimeline\");\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n})();\r\n\r\nmodule.exports = initializer;","var domHelpers = require(\"../../../../utils/dom_helpers\");\r\n\r\n/**\r\n * methods for highlighting current drag and drop position\r\n */\r\n\r\nfunction highlightPosition(target, root, grid){\r\n\tvar markerPos = getTaskMarkerPosition(target, grid);\r\n\t// setting position of row\r\n\troot.marker.style.left = 10 + \"px\";\r\n\troot.marker.style.top = markerPos.y + \"px\";\r\n\tvar markerLine = root.markerLine;\r\n\tif(!markerLine){\r\n\t\tmarkerLine = document.createElement(\"div\");\r\n\t\tmarkerLine.className = \"gantt_drag_marker gantt_grid_dnd_marker\";\r\n\t\tmarkerLine.innerHTML = \"<div class='gantt_grid_dnd_marker_line'></div>\";\r\n\t\tmarkerLine.style.pointerEvents = \"none\";\r\n\t\tdocument.body.appendChild(markerLine);\r\n\t\troot.markerLine = markerLine;\r\n\t}\r\n\tif(target.child){\r\n\t\thighlightFolder(target, markerLine, grid);\r\n\t}else{\r\n\t\thighlightRow(target, markerLine, grid);\r\n\t}\r\n}\r\n\r\nfunction removeLineHighlight(root){\r\n\tif(root.markerLine && root.markerLine.parentNode){\r\n\t\troot.markerLine.parentNode.removeChild(root.markerLine);\r\n\t}\r\n\troot.markerLine = null;\r\n}\r\n\r\nfunction highlightRow(target, markerLine, grid){\r\n\tvar linePos = getLineMarkerPosition(target, grid);\r\n\r\n\tmarkerLine.innerHTML = \"<div class='gantt_grid_dnd_marker_line'></div>\";\r\n\tmarkerLine.style.left = linePos.x + \"px\";\r\n\tmarkerLine.style.height = \"4px\";\r\n\r\n\tmarkerLine.style.top = (linePos.y - 2) + \"px\";\r\n\tmarkerLine.style.width = linePos.width + \"px\";\r\n\r\n\treturn markerLine;\r\n}\r\nfunction highlightFolder(target, markerFolder, grid){\r\n\tvar id = target.targetParent;\r\n\tvar pos = gridToPageCoordinates({x: 0, y: grid.getItemTop(id)}, grid);\r\n\r\n\tmarkerFolder.innerHTML = \"<div class='gantt_grid_dnd_marker_folder'></div>\";\r\n\tmarkerFolder.style.width = grid.$grid_data.offsetWidth + \"px\";\r\n\tmarkerFolder.style.top = pos.y + \"px\";\r\n\tmarkerFolder.style.left = pos.x  + \"px\";\r\n\tmarkerFolder.style.height = grid.getItemHeight(id) + \"px\";\r\n\treturn markerFolder;\r\n}\r\n\r\nfunction getLineMarkerPosition(target, grid){\r\n\tvar store = grid.$config.rowStore;\r\n\tvar pos = {x:0, y:0};\r\n\tvar indentNode = grid.$grid_data.querySelector(\".gantt_tree_indent\");\r\n\tvar indent = 15;\r\n\tvar level = 0;\r\n\tif(indentNode){\r\n\t\tindent = indentNode.offsetWidth;\r\n\t}\r\n\tvar iconWidth = 40;\r\n\tif(target.targetId !== store.$getRootId()){\r\n\t\tvar itemTop = grid.getItemTop(target.targetId);\r\n\t\tvar itemHeight = grid.getItemHeight(target.targetId);\r\n\t\tlevel = store.exists(target.targetId) ? store.calculateItemLevel(store.getItem(target.targetId)) : 0;\r\n\r\n\t\tif(target.prevSibling){\r\n\t\t\tpos.y = itemTop;\r\n\t\t}else if(target.nextSibling){\r\n\t\t\tvar childCount = 0;\r\n\t\t\tstore.eachItem(function(child){\r\n\t\t\t\tif(store.getIndexById(child.id) !== -1)\r\n\t\t\t\t\tchildCount++;\r\n\t\t\t}, target.targetId);\r\n\r\n\t\t\tpos.y = itemTop + itemHeight + childCount*itemHeight;\r\n\t\t}else {\r\n\t\t\tpos.y = itemTop + itemHeight;\r\n\t\t\tlevel += 1;\r\n\t\t}\r\n\t}\r\n\tpos.x = iconWidth + level * indent;\r\n\tpos.width = Math.max(grid.$grid_data.offsetWidth - pos.x, 0);\r\n\treturn gridToPageCoordinates(pos, grid);\r\n}\r\n\r\nfunction gridToPageCoordinates(pos, grid){\r\n\tvar gridPos = domHelpers.getNodePosition(grid.$grid_data);\r\n\tpos.x += gridPos.x - grid.$grid.scrollLeft;\r\n\tpos.y += gridPos.y - grid.$grid_data.scrollTop;\r\n\treturn pos;\r\n}\r\n\r\nfunction getTaskMarkerPosition(e, grid) {\r\n\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\tvar ePos = domHelpers.getRelativeEventPosition(e, grid.$grid_data);\r\n\tvar store = grid.$config.rowStore;\r\n\t// row offset\r\n\tvar x = pos.x;\r\n\tvar y = ePos.y - 10;\r\n\r\n\tvar config = grid.$getConfig();\r\n\t// prevent moving row out of grid_data container\r\n\tif (y < pos.y) y = pos.y;\r\n\tvar gridHeight = store.countVisible() * config.row_height;\r\n\tif (y > pos.y + gridHeight - config.row_height) y = pos.y + gridHeight - config.row_height;\r\n\r\n\tpos.x = x;\r\n\tpos.y = y;\r\n\treturn pos;\r\n}\r\n\r\nmodule.exports = {\r\n\tremoveLineHighlight: removeLineHighlight,\r\n\thighlightPosition: highlightPosition\r\n};\r\n","/**\r\n * resolve dnd position of the task when gantt.config.order_branch_free = true\r\n */\r\n\r\nvar dropTarget = require(\"./drop_target\");\r\n\r\nmodule.exports = function getMultiLevelDropPosition(targetTaskId, relTargetPos, eventTop, store){\r\n\tvar result;\r\n\r\n\tif(targetTaskId !== store.$getRootId()){\r\n\t\tif(relTargetPos < 0.25){\r\n\t\t\tresult = dropTarget.prevSiblingTarget(targetTaskId, store);\r\n\t\t}else if(relTargetPos > 0.60 && !(store.hasChild(targetTaskId) && store.getItem(targetTaskId).$open)){\r\n\t\t\tresult = dropTarget.nextSiblingTarget(targetTaskId, store);\r\n\t\t}else {\r\n\t\t\tresult = dropTarget.firstChildTarget(targetTaskId, store);\r\n\t\t}\r\n\t}else{\r\n\t\tvar rootId = store.$getRootId();\r\n\t\tif(store.hasChild(rootId) && eventTop >= 0){\r\n\t\t\tresult = dropTarget.lastChildTarget(rootId, store);\r\n\t\t}else{\r\n\t\t\tresult = dropTarget.firstChildTarget(rootId, store);\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n};","/**\r\n * resolve dnd position of the task when gantt.config.order_branch_free = false\r\n */\r\n\r\nvar dropTarget = require(\"./drop_target\");\r\n\r\nfunction getLast(store){\r\n\tvar current = store.getNext();\r\n\twhile(store.exists(current)){\r\n\r\n\t\tvar next = store.getNext(current);\r\n\t\tif(!store.exists(next)){\r\n\t\t\treturn current;\r\n\t\t}else{\r\n\t\t\tcurrent = next;\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction findClosesTarget(taskId, allowedLevel, store, up){\r\n\tvar prev = taskId;\r\n\twhile(store.exists(prev)){\r\n\t\tvar targetLevel = store.calculateItemLevel(store.getItem(prev));\r\n\t\tif((targetLevel === allowedLevel || targetLevel === (allowedLevel - 1)) && store.getBranchIndex(prev) > -1){\r\n\t\t\tbreak;\r\n\t\t}else {\r\n\t\t\tprev = up ? store.getPrev(prev) : store.getNext(prev);\r\n\t\t}\r\n\t}\r\n\r\n\tif(store.exists(prev)){\r\n\t\tif(store.calculateItemLevel(store.getItem(prev)) === allowedLevel){\r\n\t\t\treturn up ? dropTarget.nextSiblingTarget(prev, store) : dropTarget.prevSiblingTarget(prev, store);\r\n\t\t}else{\r\n\t\t\treturn dropTarget.firstChildTarget(prev, store);\r\n\t\t}\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nfunction findTargetAbove(taskId, allowedLevel, store){\r\n\treturn findClosesTarget(taskId, allowedLevel, store, true);\r\n}\r\nfunction findTargetBelow(taskId, allowedLevel, store){\r\n\treturn findClosesTarget(taskId, allowedLevel, store, false);\r\n}\r\n\r\nmodule.exports = function getSameLevelDropPosition(targetTaskId, relTargetPos, eventTop, store, level){\r\n\tvar result;\r\n\tif(targetTaskId !== store.$getRootId()) {\r\n\t\tif (relTargetPos < 0.5) {\r\n\t\t\tif (store.calculateItemLevel(store.getItem(targetTaskId)) === level) {\r\n\t\t\t\tresult = dropTarget.prevSiblingTarget(targetTaskId, store);\r\n\t\t\t} else {\r\n\t\t\t\tresult = findTargetAbove(targetTaskId, level, store);\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\tresult = findTargetBelow(targetTaskId, level, store);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (store.calculateItemLevel(store.getItem(targetTaskId)) === level) {\r\n\t\t\t\tresult = dropTarget.nextSiblingTarget(targetTaskId, store);\r\n\t\t\t} else {\r\n\t\t\t\tresult = findTargetBelow(targetTaskId, level, store);\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\tresult = findTargetAbove(targetTaskId, level, store);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tvar rootId = store.$getRootId();\r\n\t\tvar rootLevel = store.getChildren(rootId);\r\n\t\tresult = dropTarget.createDropTargetObject();\r\n\t\tif(rootLevel.length && eventTop >= 0){\r\n\t\t\tresult = findTargetAbove(getLast(store), level, store);\r\n\t\t}else{\r\n\t\t\tresult = findTargetBelow(rootId, level, store);\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n","var domHelpers = require(\"../../../utils/dom_helpers\");\r\nvar dropTarget = require(\"./tasks_grid_dnd_marker_helpers/drop_target\");\r\nvar getLockedLevelTarget = require(\"./tasks_grid_dnd_marker_helpers/locked_level\");\r\nvar getMultiLevelTarget = require(\"./tasks_grid_dnd_marker_helpers/multi_level\");\r\nvar higlighter = require(\"./tasks_grid_dnd_marker_helpers/highlight\");\r\n\r\nfunction _init_dnd(gantt, grid) {\r\n\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\tif(!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction locate(e){\r\n\t\treturn domHelpers.locateAttribute(e, grid.$config.item_attribute);\r\n\t}\r\n\r\n\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\tif (gantt.defined(grid.$getConfig().dnd_sensitivity))\r\n\t\tdnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tif (!el) return false;\r\n\t\tif (gantt.hideQuickInfo) gantt._hideQuickInfo();\r\n\r\n\t\tvar id = el.getAttribute(grid.$config.item_attribute);\r\n\t\tvar datastore = grid.$config.rowStore;\r\n\t\tvar task = datastore.getItem(id);\r\n\r\n\t\tif (gantt.isReadonly(task))\r\n\t\t\treturn false;\r\n\r\n\t\tdnd.config.initial_open_state = task.$open;\r\n\t\tif (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\r\n\t\tdnd.config.marker.innerHTML = el.outerHTML;\r\n\t\tvar element = dnd.config.marker.firstChild;\r\n\t\tif(element){\r\n\t\t\tdnd.config.marker.style.opacity = 0.4;\r\n\t\t\telement.style.position = \"static\";\r\n\t\t\telement.style.pointerEvents = \"none\";\r\n\t\t}\r\n\t\t\r\n\t\tdnd.config.id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar store = grid.$config.rowStore;\r\n\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\tdnd.config.level = store.calculateItemLevel(task);\r\n\t\tdnd.config.drop_target = dropTarget.createDropTargetObject({\r\n\t\t\ttargetParent: store.getParent(task.id),\r\n\t\t\ttargetIndex: store.getBranchIndex(task.id),\r\n\t\t\ttargetId: task.id,\r\n\t\t\tnextSibling: true\r\n\t\t});\r\n\r\n\t\ttask.$open = false;\r\n\t\ttask.$transparent = true;\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n\r\n\tfunction getTargetTaskId(e){\r\n\t\tvar y = domHelpers.getRelativeEventPosition(e, grid.$grid_data).y;\r\n\t\tvar store = grid.$config.rowStore;\r\n\r\n\t\ty = y || 0;\r\n\r\n\t\tif(y < 0){\r\n\t\t\treturn store.$getRootId();\r\n\t\t}\r\n\r\n\t\tvar index = Math.floor(y / grid.getItemHeight());\r\n\r\n\t\tif (index > store.countVisible() - 1)\r\n\t\t\treturn store.$getRootId();\r\n\r\n\t\treturn store.getIdByIndex(index);\r\n\t}\r\n\r\n\tfunction getDropPosition(e){\r\n\t\tvar targetTaskId = getTargetTaskId(e);\r\n\t\tvar relTargetPos = null;\r\n\t\tvar store = grid.$config.rowStore;\r\n\t\tvar config = grid.$getConfig();\r\n\t\tvar lockLevel = !config.order_branch_free;\r\n\r\n\t\tvar eventTop = domHelpers.getRelativeEventPosition(e, grid.$grid_data).y;\r\n\r\n\t\tif(targetTaskId !== store.$getRootId()) {\r\n\t\t\tvar rowTop = grid.getItemTop(targetTaskId);\r\n\t\t\tvar rowHeight = grid.getItemHeight();\r\n\t\t\trelTargetPos = (eventTop - rowTop) / rowHeight;\r\n\t\t}\r\n\r\n\t\tvar result;\r\n\t\tif(!lockLevel){\r\n\t\t\tresult = getMultiLevelTarget(targetTaskId, relTargetPos, eventTop, store);\r\n\t\t}else{\r\n\t\t\tresult = getLockedLevelTarget(targetTaskId, relTargetPos, eventTop, store, dnd.config.level);\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\r\n\t\tvar target = getDropPosition(e);\r\n\r\n\t\tif(!target || \r\n\t\t\tgantt.callEvent(\"onBeforeRowDragMove\", [dnd.config.id, target.targetParent, target.targetIndex]) === false){\r\n\t\t\t\ttarget = dropTarget.createDropTargetObject(dnd.config.drop_target);\r\n\t\t\t}\r\n\t\t\r\n\t\thiglighter.highlightPosition(target, dnd.config, grid);\r\n\t\tdnd.config.drop_target = target;\r\n\r\n\t\tthis.callEvent(\"onRowDragMove\", [dnd.config.id, target.targetParent, target.targetIndex]);\r\n\t\treturn true;\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\r\n\t\tvar store = grid.$config.rowStore;\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\r\n\t\thiglighter.removeLineHighlight(dnd.config);\r\n\r\n\t\ttask.$transparent = false;\r\n\t\ttask.$open = dnd.config.initial_open_state;\r\n\t\tvar target = dnd.config.drop_target;\r\n\r\n\t\tif (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, target.targetParent, target.targetIndex]) === false) {\r\n\t\t\ttask.$drop_target = null;\r\n\t\t} else {\r\n\t\t\tstore.move(dnd.config.id, target.targetIndex, target.targetParent);\r\n\t\t\tthis.callEvent(\"onRowDragEnd\", [dnd.config.id, target.targetParent, target.targetIndex]);\r\n\t\t}\r\n\t\tstore.refresh(task.id);\r\n\t}, gantt));\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: _init_dnd\r\n};","var domHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nfunction _init_dnd(gantt, grid) {\r\n\tvar DnD = gantt.$services.getService(\"dnd\");\r\n\r\n\tif(!grid.$config.bind || !gantt.getDatastore(grid.$config.bind)){\r\n\t\treturn;\r\n\t}\r\n\r\n\tfunction locate(e){\r\n\t\treturn domHelpers.locateAttribute(e, grid.$config.item_attribute);\r\n\t}\r\n\r\n\tfunction getStore(){\r\n\t\treturn gantt.getDatastore(grid.$config.bind);\r\n\t}\r\n\r\n\tvar dnd = new DnD(grid.$grid_data, {updates_per_second: 60});\r\n\tif (gantt.defined(grid.$getConfig().dnd_sensitivity))\r\n\t\tdnd.config.sensitivity = grid.$getConfig().dnd_sensitivity;\r\n\r\n\tdnd.attachEvent(\"onBeforeDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tif (!el) return false;\r\n\t\tif (gantt.hideQuickInfo) gantt._hideQuickInfo();\r\n\r\n\t\tvar id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar datastore = getStore();\r\n\r\n\t\tvar task = datastore.getItem(id);\r\n\r\n\t\tif (gantt.isReadonly(task))\r\n\t\t\treturn false;\r\n\r\n\t\tdnd.config.initial_open_state = task.$open;\r\n\t\tif (!gantt.callEvent(\"onRowDragStart\", [id, e.target || e.srcElement, e])) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onAfterDragStart\", gantt.bind(function (obj, e) {\r\n\t\tvar el = locate(e);\r\n\t\tdnd.config.marker.innerHTML = el.outerHTML;\r\n\t\tvar element = dnd.config.marker.firstChild;\r\n\t\tif(element){\r\n\t\t\telement.style.position = \"static\";\r\n\t\t}\r\n\r\n\t\tdnd.config.id = el.getAttribute(grid.$config.item_attribute);\r\n\r\n\t\tvar store = getStore();\r\n\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\tdnd.config.index = store.getBranchIndex(dnd.config.id);\r\n\t\tdnd.config.parent = task.parent;\r\n\t\ttask.$open = false;\r\n\t\ttask.$transparent = true;\r\n\t\tthis.refreshData();\r\n\t}, gantt));\r\n\r\n\tdnd.lastTaskOfLevel = function (level) {\r\n\t\tvar last_item = null;\r\n\t\tvar store = getStore();\r\n\t\tvar tasks = store.getItems();\r\n\t\tfor (var i = 0, len = tasks.length; i < len; i++) {\r\n\t\t\tif (tasks[i].$level == level) {\r\n\t\t\t\tlast_item = tasks[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn last_item ? last_item.id : null;\r\n\t};\r\n\tdnd._getGridPos = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\t\tvar store = getStore();\r\n\t\t// row offset\r\n\t\tvar x = pos.x;\r\n\t\tvar y = e.pos.y - 10;\r\n\r\n\t\tvar config = grid.$getConfig();\r\n\t\t// prevent moving row out of grid_data container\r\n\t\tif (y < pos.y) y = pos.y;\r\n\t\tvar gridHeight = store.countVisible() * config.row_height;\r\n\t\tif (y > pos.y + gridHeight - config.row_height) y = pos.y + gridHeight - config.row_height;\r\n\r\n\t\tpos.x = x;\r\n\t\tpos.y = y;\r\n\t\treturn pos;\r\n\t}, gantt);\r\n\tdnd._getTargetY = gantt.bind(function (e) {\r\n\t\tvar pos = domHelpers.getNodePosition(grid.$grid_data);\r\n\r\n\t\tvar y = e.pageY - pos.y + (grid.$state.scrollTop || 0);\r\n\t\tif (y < 0)\r\n\t\t\ty = 0;\r\n\t\treturn y;\r\n\t}, gantt);\r\n\tdnd._getTaskByY = gantt.bind(function (y, dropIndex) {\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\ty = y || 0;\r\n\r\n\t\tvar index = Math.floor(y / config.row_height);\r\n\t\tindex = dropIndex < index ? index - 1 : index;\r\n\r\n\t\tif (index > store.countVisible() - 1)\r\n\t\t\treturn null;\r\n\r\n\t\treturn store.getIdByIndex(index);\r\n\t}, gantt);\r\n\tdnd.attachEvent(\"onDragMove\", gantt.bind(function (obj, e) {\r\n\t\tvar dd = dnd.config;\r\n\t\tvar pos = dnd._getGridPos(e);\r\n\r\n\t\tvar config = grid.$getConfig(),\r\n\t\t\tstore = getStore();\r\n\r\n\t\t// setting position of row\r\n\t\tdd.marker.style.left = pos.x + 10 + \"px\";\r\n\t\tdd.marker.style.top = pos.y + \"px\";\r\n\r\n\t\t// highlight row when mouseover\r\n\t\tvar item = store.getItem(dnd.config.id);\r\n\t\tvar targetY = dnd._getTargetY(e);\r\n\t\tvar el = dnd._getTaskByY(targetY, store.getIndexById(item.id));\r\n\r\n\t\tif (!store.exists(el)) {\r\n\t\t\tel = dnd.lastTaskOfLevel(config.order_branch_free ? item.$level : 0);\r\n\t\t\tif (el == dnd.config.id) {\r\n\t\t\t\tel = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction allowedLevel(next, item) {\r\n\t\t\treturn (!(store.isChildOf(over.id, item.id)) && (next.$level == item.$level || config.order_branch_free));\r\n\t\t}\r\n\r\n\t\tif (store.exists(el)) {\r\n\t\t\tvar over = store.getItem(el);\r\n\r\n\t\t\tif (store.getIndexById(over.id) * config.row_height + config.row_height / 2 < targetY) {\r\n\t\t\t\t//hovering over bottom part of item, check can be drop to bottom\r\n\t\t\t\tvar index = store.getIndexById(over.id);\r\n\t\t\t\tvar nextId = store.getNext(over.id);//adds +1 when hovering over placeholder\r\n\t\t\t\tvar next = store.getItem(nextId);\r\n\t\t\t\tif (next) {\r\n\t\t\t\t\tif (next.id != item.id) {\r\n\t\t\t\t\t\tover = next; //there is a valid target\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tif (config.order_branch_free) {\r\n\t\t\t\t\t\t\tif (!(store.isChildOf(item.id, over.id) && store.getChildren(over.id).length == 1))\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tstore.move(item.id, store.getBranchIndex(over.id) + 1, store.getParent(over.id));\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//we at end of the list, check and drop at the end of list\r\n\t\t\t\t\tnextId = store.getIdByIndex(index);\r\n\t\t\t\t\tnext = store.getItem(nextId);\r\n\r\n\t\t\t\t\tif (allowedLevel(next, item) && next.id != item.id) {\r\n\t\t\t\t\t\tstore.move(item.id, -1, store.getParent(next.id));\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (config.order_branch_free) {\r\n\t\t\t\tif (over.id != item.id && allowedLevel(over, item)) {\r\n\t\t\t\t\tif (!store.hasChild(over.id)) {\r\n\t\t\t\t\t\tover.$open = true;\r\n\t\t\t\t\t\tstore.move(item.id, -1, over.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (store.getIndexById(over.id) || config.row_height / 3 < targetY) return;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//if item is on different level, check the one before it\r\n\t\t\tvar index = store.getIndexById(over.id),\r\n\t\t\t\tprevId = store.getIdByIndex(index - 1);\r\n\r\n\t\t\tvar prev = store.getItem(prevId);\r\n\r\n\t\t\tvar shift = 1;\r\n\t\t\twhile ((!prev || prev.id == over.id) && index - shift >= 0) {\r\n\r\n\t\t\t\tprevId = store.getIdByIndex(index - shift);\r\n\t\t\t\tprev = store.getItem(prevId);\r\n\t\t\t\tshift++;\r\n\t\t\t}\r\n\r\n\t\t\tif (item.id == over.id) return;\r\n\t\t\t//replacing item under cursor\r\n\t\t\tif (allowedLevel(over, item) && item.id != over.id) {\r\n\t\t\t\tstore.move(item.id, 0, 0, over.id);\r\n\r\n\t\t\t} else if (over.$level == item.$level - 1 && !store.getChildren(over.id).length) {\r\n\t\t\t\tstore.move(item.id, 0, over.id);\r\n\r\n\t\t\t} else if (prev && (allowedLevel(prev, item)) && (item.id != prev.id)) {\r\n\t\t\t\tstore.move(item.id, -1, store.getParent(prev.id));\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}, gantt));\r\n\r\n\tdnd.attachEvent(\"onDragEnd\", gantt.bind(function () {\r\n\t\tvar store = getStore();\r\n\t\tvar task = store.getItem(dnd.config.id);\r\n\t\ttask.$transparent = false;\r\n\t\ttask.$open = dnd.config.initial_open_state;\r\n\r\n\t\tif (this.callEvent(\"onBeforeRowDragEnd\", [dnd.config.id, dnd.config.parent, dnd.config.index]) === false) {\r\n\t\t\tstore.move(dnd.config.id, dnd.config.index, dnd.config.parent);\r\n\t\t\ttask.$drop_target = null;\r\n\t\t} else {\r\n\t\t\tthis.callEvent(\"onRowDragEnd\", [dnd.config.id, task.$drop_target]);\r\n\t\t}\r\n\t\t\r\n\t\tstore.refresh(task.id);\r\n\t\t//this.refreshData();\r\n\t}, gantt));\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: _init_dnd\r\n};","var utils = require(\"../../../utils/utils\");\r\nvar rowDnd = require(\"./tasks_grid_dnd\");\r\nvar rowDndMarker = require(\"./tasks_grid_dnd_marker\");\r\nvar editors = require(\"./editors/controller\");\r\nvar initializer = (function(){\r\n\treturn function(gantt){\r\n\t\treturn {\r\n\t\t\tonCreated: function (grid) {\r\n\t\t\t\tgrid.$config = utils.mixin(grid.$config, {\r\n\t\t\t\t\tbind: \"task\"\r\n\t\t\t\t});\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendGantt(grid);\r\n\t\t\t\t\tgantt.ext.inlineEditors = gantt.ext._inlineEditors.createEditors(grid);\r\n\t\t\t\t\tgantt.ext.inlineEditors.init();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._mouseDelegates = require(\"../mouse_event_container\")(gantt);\r\n\t\t\t},\r\n\t\t\tonInitialized: function (grid) {\r\n\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\tif (config.order_branch) {\r\n\t\t\t\t\tif(config.order_branch == \"marker\"){\r\n\t\t\t\t\t\trowDndMarker.init(grid.$gantt, grid);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trowDnd.init(grid.$gantt, grid);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.initEvents(grid, gantt);\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tthis.extendDom(grid);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonDestroyed: function (grid) {\r\n\t\t\t\tif(grid.$config.id == \"grid\") {\r\n\t\t\t\t\tgantt.ext.inlineEditors.destructor();\r\n\t\t\t\t}\r\n\t\t\t\tthis.clearEvents(grid, gantt);\r\n\t\t\t},\r\n\r\n\t\t\tinitEvents: function (grid, gantt) {\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_row\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (id !== null) {\r\n\t\t\t\t\t\tvar task = this.getTask(id);\r\n\t\t\t\t\t\tif (config.scroll_on_click && !gantt._is_icon_open_click(e))\r\n\t\t\t\t\t\t\tthis.showDate(task.start_date);\r\n\t\t\t\t\t\tgantt.callEvent(\"onTaskRowClick\", [id, trg]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_grid_head_cell\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar column = trg.getAttribute(\"data-column-id\");\r\n\r\n\t\t\t\t\tif (!gantt.callEvent(\"onGridHeaderClick\", [column, e]))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\r\n\t\t\t\t\tif (column == \"add\") {\r\n\t\t\t\t\t\tvar mouseEvents = gantt.$services.getService(\"mouseEvents\");\r\n\t\t\t\t\t\tmouseEvents.callHandler(\"click\", \"gantt_add\", grid.$grid, [e, config.root_id]);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (config.sort) {\r\n\t\t\t\t\t\tvar sorting_method = column,\r\n\t\t\t\t\t\t\tconf;\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < config.columns.length; i++) {\r\n\t\t\t\t\t\t\tif (config.columns[i].name == column) {\r\n\t\t\t\t\t\t\t\tconf = config.columns[i];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (conf && conf.sort !== undefined && conf.sort !== true) {\r\n\t\t\t\t\t\t\tsorting_method = conf.sort;\r\n\r\n\t\t\t\t\t\t\tif (!sorting_method) { // column sort property 'false', no sorting\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar sort = (this._sort && this._sort.direction && this._sort.name == column) ? this._sort.direction : \"desc\";\r\n\t\t\t\t\t\t// invert sort direction\r\n\t\t\t\t\t\tsort = (sort == \"desc\") ? \"asc\" : \"desc\";\r\n\t\t\t\t\t\tthis._sort = {\r\n\t\t\t\t\t\t\tname: column,\r\n\t\t\t\t\t\t\tdirection: sort\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.sort(sorting_method, sort == \"desc\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t\tthis._mouseDelegates.delegate(\"click\", \"gantt_add\", gantt.bind(function (e, id, trg) {\r\n\t\t\t\t\tvar config = grid.$getConfig();\r\n\t\t\t\t\tif (config.readonly) return;\r\n\r\n\t\t\t\t\tvar item = {};\r\n\t\t\t\t\tthis.createTask(item, id ? id : gantt.config.root_id);\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}, gantt), grid.$grid);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclearEvents: function(grid, gantt){\r\n\t\t\t\tthis._mouseDelegates.destructor();\r\n\t\t\t\tthis._mouseDelegates = null;\r\n\t\t\t},\r\n\r\n\t\t\textendDom: function(grid){\r\n\t\t\t\tgantt.$grid = grid.$grid;\r\n\t\t\t\tgantt.$grid_scale = grid.$grid_scale;\r\n\t\t\t\tgantt.$grid_data = grid.$grid_data;\r\n\t\t\t},\r\n\t\t\textendGantt: function(grid){\r\n\t\t\t\tgantt.getGridColumns = gantt.bind(grid.getGridColumns, grid);\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeStart\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeStart\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResize\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResize\", arguments);\r\n\t\t\t\t});\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeEnd\", function(){\r\n\t\t\t\t\treturn gantt.callEvent(\"onColumnResizeEnd\", arguments);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tgrid.attachEvent(\"onColumnResizeComplete\", function(columns, totalWidth){\r\n\t\t\t\t\tgantt.config.grid_width = totalWidth;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n})();\r\n\r\nmodule.exports = initializer;","var helpers = require(\"../../../utils/helpers\");\r\n\r\nfunction createGridLineRender(gantt){\r\n\tfunction _render_grid_item(item, view) {\r\n\t\t//if (!_is_grid_visible.call(this))\r\n\t\t//\treturn null;\r\n\r\n\t\tvar columns = view.getGridColumns();\r\n\t\tvar config = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\r\n\t\tif(config.rtl){\r\n\t\t\tcolumns = columns.reverse();\r\n\t\t}\r\n\r\n\t\tvar cells = [];\r\n\t\tvar width = 0;\r\n\t\tvar has_child;\r\n\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\tvar last = i == columns.length - 1;\r\n\t\t\tvar col = columns[i];\r\n\t\t\tvar cell;\r\n\r\n\t\t\tvar value;\r\n\t\t\tvar textValue;\r\n\t\t\tif (col.name == \"add\") {\r\n\t\t\t\tvar aria = gantt._waiAria.gridAddButtonAttrString(col);\r\n\r\n\t\t\t\tvalue = \"<div \" + aria + \" class='gantt_add'></div>\";\r\n\t\t\t\ttextValue = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tif (col.template)\r\n\t\t\t\t\tvalue = col.template(item);\r\n\t\t\t\telse\r\n\t\t\t\t\tvalue = item[col.name];\r\n\r\n\t\t\t\tif (helpers.isDate(value))\r\n\t\t\t\t\tvalue = templates.date_grid(value, item);\r\n\t\t\t\ttextValue = value;\r\n\t\t\t\tvalue = \"<div class='gantt_tree_content'>\" + value + \"</div>\";\r\n\t\t\t}\r\n\t\t\tvar css = \"gantt_cell\" + (last ? \" gantt_last_cell\" : \"\");\r\n\r\n\t\t\tvar tree = [];\r\n\t\t\tif (col.tree) {\r\n\t\t\t\tfor (var j = 0; j < item.$level; j++)\r\n\t\t\t\t\ttree.push(templates.grid_indent(item));\r\n\r\n\t\t\t\thas_child = store.hasChild(item.id) && !(gantt.isSplitTask(item));\r\n\t\t\t\tif (has_child) {\r\n\t\t\t\t\ttree.push(templates.grid_open(item));\r\n\t\t\t\t\ttree.push(templates.grid_folder(item));\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttree.push(templates.grid_blank(item));\r\n\t\t\t\t\ttree.push(templates.grid_file(item));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar style = \"width:\" + (col.width - (last ? 1 : 0)) + \"px;\";\r\n\t\t\tif (this.defined(col.align))\r\n\t\t\t\tstyle += \"text-align:\" + col.align + \";\";\r\n\r\n\t\t\tvar aria = gantt._waiAria.gridCellAttrString(col, textValue);\r\n\r\n\t\t\ttree.push(value);\r\n\t\t\tif(config.rtl){\r\n\t\t\t\ttree = tree.reverse();\r\n\t\t\t}\r\n\t\t\tcell = \"<div class='\" + css + \"' data-column-index='\"+i+\"' data-column-name='\"+col.name+\"' style='\" + style + \"' \" + aria + \">\" + tree.join(\"\") + \"</div>\";\r\n\t\t\tcells.push(cell);\r\n\t\t}\r\n\t\tvar css = gantt.getGlobalTaskIndex(item.id) % 2 === 0 ? \"\" : \" odd\";\r\n\t\tcss += (item.$transparent) ? \" gantt_transparent\" : \"\";\r\n\r\n\t\tcss += (item.$dataprocessor_class ? \" \" + item.$dataprocessor_class : \"\");\r\n\r\n\t\tif (templates.grid_row_class) {\r\n\t\t\tvar css_template = templates.grid_row_class.call(gantt, item.start_date, item.end_date, item);\r\n\t\t\tif (css_template)\r\n\t\t\t\tcss += \" \" + css_template;\r\n\t\t}\r\n\r\n\t\tif(store.getSelectedId() == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\tvar el = document.createElement(\"div\");\r\n\t\tel.className = \"gantt_row\" + css + \" gantt_row_\" + gantt.getTaskType(item.type);\r\n\t\tvar height = view.getItemHeight();\r\n\t\tel.style.height = height + \"px\";\r\n\t\tel.style.lineHeight = height + \"px\";\r\n\r\n\t\tif(config.smart_rendering){\r\n\t\t\tel.style.position = \"absolute\";\r\n\t\t\tel.style.left = \"0px\";\r\n\t\t\tel.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t}\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\tel.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\tgantt._waiAria.taskRowAttr(item, el);\r\n\r\n\t\tel.innerHTML = cells.join(\"\");\r\n\t\treturn el;\r\n\t}\r\n\r\n\treturn _render_grid_item;\r\n}\r\n\r\nmodule.exports = createGridLineRender;\r\n\r\n","\r\nfunction createLinkRender(gantt){\r\n\r\nfunction _render_link_element(link, view) {\r\n\tvar config = view.$getConfig();\r\n\r\n\tvar pt = path_builder.get_endpoint(link, view);\r\n\tvar dy = pt.e_y - pt.y;\r\n\tvar dx = pt.e_x - pt.x;\r\n\tif(!dx && !dy){\r\n\t\treturn null;\r\n\t}\r\n\r\n\r\n\tvar dots = path_builder.get_points(link, view);\r\n\tvar lines = drawer.get_lines(dots, view);\r\n\r\n\tvar div = document.createElement(\"div\");\r\n\r\n\tvar css = \"gantt_task_link\";\r\n\r\n\tif (link.color) {\r\n\t\tcss += \" gantt_link_inline_color\";\r\n\t}\r\n\tvar cssTemplate = gantt.templates.link_class ? gantt.templates.link_class(link) : \"\";\r\n\tif (cssTemplate) {\r\n\t\tcss += \" \" + cssTemplate;\r\n\t}\r\n\r\n\tif (config.highlight_critical_path && gantt.isCriticalLink) {\r\n\t\tif (gantt.isCriticalLink(link))\r\n\t\t\tcss += \" gantt_critical_link\";\r\n\t}\r\n\r\n\tdiv.className = css;\r\n\r\n\tif(view.$config.link_attribute){\r\n\t\tdiv.setAttribute(view.$config.link_attribute, link.id);\r\n\t}\r\n\r\n\tfor (var i = 0; i < lines.length; i++) {\r\n\t\tif (i == lines.length - 1) {\r\n\t\t\tlines[i].size -= config.link_arrow_size;\r\n\t\t}\r\n\t\tvar el = drawer.render_line(lines[i], lines[i + 1], view);\r\n\t\tif (link.color) {\r\n\t\t\tel.firstChild.style.backgroundColor = link.color;\r\n\t\t}\r\n\t\tdiv.appendChild(el);\r\n\t}\r\n\r\n\tvar direction = lines[lines.length - 1].direction;\r\n\tvar endpoint = _render_link_arrow(dots[dots.length - 1], direction, view);\r\n\tif (link.color) {\r\n\t\tendpoint.style.borderColor = link.color;\r\n\t}\r\n\tdiv.appendChild(endpoint);\r\n\r\n\tgantt._waiAria.linkAttr(link, div);\r\n\r\n\treturn div;\r\n}\r\n\r\nfunction _render_link_arrow(point, direction, view) {\r\n\tvar config = view.$getConfig();\r\n\tvar div = document.createElement(\"div\");\r\n\tvar top = point.y;\r\n\tvar left = point.x;\r\n\r\n\tvar size = config.link_arrow_size;\r\n\tvar line_width = config.row_height;\r\n\tvar className = \"gantt_link_arrow gantt_link_arrow_\" + direction;\r\n\tswitch (direction) {\r\n\t\tcase drawer.dirs.right:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.left:\r\n\t\t\ttop -= (size - line_width) / 2;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.up:\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tcase drawer.dirs.down:\r\n\t\t\ttop += size * 2;\r\n\t\t\tleft -= size;\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\tdiv.style.cssText = [\r\n\t\t\"top:\" + top + \"px\",\r\n\t\t\"left:\" + left + 'px'].join(';');\r\n\tdiv.className = className;\r\n\r\n\treturn div;\r\n}\r\n\r\n\r\nvar drawer = {\r\n\tcurrent_pos: null,\r\n\tdirs: {\"left\": 'left', \"right\": 'right', \"up\": 'up', \"down\": 'down'},\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.current_pos = null;\r\n\t\tthis.path = [];\r\n\t},\r\n\tpoint: function (pos) {\r\n\t\tthis.current_pos = gantt.copy(pos);\r\n\t},\r\n\tget_lines: function (dots) {\r\n\t\tthis.clear();\r\n\t\tthis.point(dots[0]);\r\n\t\tfor (var i = 1; i < dots.length; i++) {\r\n\t\t\tthis.line_to(dots[i]);\r\n\t\t}\r\n\t\treturn this.get_path();\r\n\t},\r\n\tline_to: function (pos) {\r\n\t\tvar next = gantt.copy(pos);\r\n\t\tvar prev = this.current_pos;\r\n\r\n\t\tvar line = this._get_line(prev, next);\r\n\t\tthis.path.push(line);\r\n\t\tthis.current_pos = next;\r\n\t},\r\n\tget_path: function () {\r\n\t\treturn this.path;\r\n\t},\r\n\tget_wrapper_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\ty = v.y + (config.row_height - wrapper_size) / 2;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - v.size - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y,\r\n\t\t\t\t\tlineHeight: wrapper_size,\r\n\t\t\t\t\theight: wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: v.size + wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y - v.size,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\ttop: y /*- wrapper_size/2*/,\r\n\t\t\t\t\tlineHeight: v.size + wrapper_size,\r\n\t\t\t\t\theight: v.size + wrapper_size,\r\n\t\t\t\t\tleft: v.x - wrapper_size / 2,\r\n\t\t\t\t\twidth: wrapper_size\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t},\r\n\tget_line_sizes: function (v, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar res,\r\n\t\t\tline_size = config.link_line_width,\r\n\t\t\twrapper_size = config.link_wrapper_width,\r\n\t\t\tsize = v.size + line_size;\r\n\t\tswitch (v.direction) {\r\n\t\t\tcase this.dirs.left:\r\n\t\t\tcase this.dirs.right:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: line_size,\r\n\t\t\t\t\twidth: size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tcase this.dirs.up:\r\n\t\t\tcase this.dirs.down:\r\n\t\t\t\tres = {\r\n\t\t\t\t\theight: size,\r\n\t\t\t\t\twidth: line_size,\r\n\t\t\t\t\tmarginTop: (wrapper_size - line_size) / 2,\r\n\t\t\t\t\tmarginLeft: (wrapper_size - line_size) / 2\r\n\t\t\t\t};\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\r\n\t\treturn res;\r\n\t},\r\n\trender_line: function (v, end, view) {\r\n\t\tvar pos = this.get_wrapper_sizes(v, view);\r\n\t\tvar wrapper = document.createElement(\"div\");\r\n\t\twrapper.style.cssText = [\r\n\t\t\t\"top:\" + pos.top + \"px\",\r\n\t\t\t\"left:\" + pos.left + \"px\",\r\n\t\t\t\"height:\" + pos.height + \"px\",\r\n\t\t\t\"width:\" + pos.width + \"px\"\r\n\t\t].join(';');\r\n\t\twrapper.className = \"gantt_line_wrapper\";\r\n\r\n\t\tvar innerPos = this.get_line_sizes(v, view);\r\n\t\tvar inner = document.createElement(\"div\");\r\n\t\tinner.style.cssText = [\r\n\t\t\t\"height:\" + innerPos.height + \"px\",\r\n\t\t\t\"width:\" + innerPos.width + \"px\",\r\n\t\t\t\"margin-top:\" + innerPos.marginTop + \"px\",\r\n\t\t\t\"margin-left:\" + innerPos.marginLeft + \"px\"\r\n\t\t].join(\";\");\r\n\r\n\t\tinner.className = \"gantt_link_line_\" + v.direction;\r\n\t\twrapper.appendChild(inner);\r\n\r\n\t\treturn wrapper;\r\n\t},\r\n\t_get_line: function (from, to) {\r\n\t\tvar direction = this.get_direction(from, to);\r\n\t\tvar vect = {\r\n\t\t\tx: from.x,\r\n\t\t\ty: from.y,\r\n\t\t\tdirection: this.get_direction(from, to)\r\n\t\t};\r\n\t\tif (direction == this.dirs.left || direction == this.dirs.right) {\r\n\t\t\tvect.size = Math.abs(from.x - to.x);\r\n\t\t} else {\r\n\t\t\tvect.size = Math.abs(from.y - to.y);\r\n\t\t}\r\n\t\treturn vect;\r\n\t},\r\n\tget_direction: function (from, to) {\r\n\t\tvar direction = 0;\r\n\t\tif (to.x < from.x) {\r\n\t\t\tdirection = this.dirs.left;\r\n\t\t} else if (to.x > from.x) {\r\n\t\t\tdirection = this.dirs.right;\r\n\t\t} else if (to.y > from.y) {\r\n\t\t\tdirection = this.dirs.down;\r\n\t\t} else {\r\n\t\t\tdirection = this.dirs.up;\r\n\t\t}\r\n\t\treturn direction;\r\n\t}\r\n\r\n};\r\n\r\nvar path_builder = {\r\n\r\n\tpath: [],\r\n\tclear: function () {\r\n\t\tthis.path = [];\r\n\t},\r\n\tcurrent: function () {\r\n\t\treturn this.path[this.path.length - 1];\r\n\t},\r\n\tpoint: function (next) {\r\n\t\tif (!next)\r\n\t\t\treturn this.current();\r\n\r\n\t\tthis.path.push(gantt.copy(next));\r\n\t\treturn next;\r\n\t},\r\n\tpoint_to: function (direction, diff, point) {\r\n\t\tif (!point)\r\n\t\t\tpoint = gantt.copy(this.point());\r\n\t\telse\r\n\t\t\tpoint = {x: point.x, y: point.y};\r\n\t\tvar dir = drawer.dirs;\r\n\t\tswitch (direction) {\r\n\t\t\tcase (dir.left):\r\n\t\t\t\tpoint.x -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.right):\r\n\t\t\t\tpoint.x += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.up):\r\n\t\t\t\tpoint.y -= diff;\r\n\t\t\t\tbreak;\r\n\t\t\tcase (dir.down):\r\n\t\t\t\tpoint.y += diff;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\treturn this.point(point);\r\n\t},\r\n\tget_points: function (link, view) {\r\n\t\tvar pt = this.get_endpoint(link, view);\r\n\t\tvar xy = gantt.config;\r\n\r\n\t\tvar dy = pt.e_y - pt.y;\r\n\t\tvar dx = pt.e_x - pt.x;\r\n\r\n\t\tvar dir = drawer.dirs;\r\n\r\n\t\tthis.clear();\r\n\t\tthis.point({x: pt.x, y: pt.y});\r\n\r\n\t\tvar shiftX = 2 * xy.link_arrow_size;//just random size for first line\r\n\t\tvar lineType = this.get_line_type(link, view.$getConfig());\r\n\r\n\t\tvar forward = (pt.e_x > pt.x);\r\n\t\tif (lineType.from_start && lineType.to_start) {\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\r\n\t\t} else if (!lineType.from_start && lineType.to_start) {\r\n\t\t\tforward = (pt.e_x > (pt.x + 2 * shiftX));\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tdx -= shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx -= 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\t}\r\n\r\n\t\t} else if (!lineType.from_start && !lineType.to_start) {\r\n\t\t\tthis.point_to(dir.right, shiftX);\r\n\t\t\tif (forward) {\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t} else {\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t}\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t} else if (lineType.from_start && !lineType.to_start) {\r\n\r\n\t\t\tforward = (pt.e_x > (pt.x - 2 * shiftX));\r\n\t\t\tthis.point_to(dir.left, shiftX);\r\n\r\n\t\t\tif (!forward) {\r\n\t\t\t\tdx += shiftX;\r\n\t\t\t\tthis.point_to(dir.down, dy);\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t} else {\r\n\t\t\t\tdx += 2 * shiftX;\r\n\t\t\t\tvar sign = dy > 0 ? 1 : -1;\r\n\t\t\t\tthis.point_to(dir.down, sign * (xy.row_height / 2));\r\n\t\t\t\tthis.point_to(dir.right, dx);\r\n\t\t\t\tthis.point_to(dir.down, sign * ( Math.abs(dy) - (xy.row_height / 2)));\r\n\t\t\t\tthis.point_to(dir.left, shiftX);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.path;\r\n\t},\r\n\tget_line_type: function(link, config){\r\n\t\tvar types = config.links;\r\n\t\tvar from_start = false, to_start = false;\r\n\t\tif (link.type == types.start_to_start) {\r\n\t\t\tfrom_start = to_start = true;\r\n\t\t} else if (link.type == types.finish_to_finish) {\r\n\t\t\tfrom_start = to_start = false;\r\n\t\t} else if (link.type == types.finish_to_start) {\r\n\t\t\tfrom_start = false;\r\n\t\t\tto_start = true;\r\n\t\t} else if (link.type == types.start_to_finish) {\r\n\t\t\tfrom_start = true;\r\n\t\t\tto_start = false;\r\n\t\t} else {\r\n\t\t\tgantt.assert(false, \"Invalid link type\");\r\n\t\t}\r\n\r\n\t\tif(config.rtl){\r\n\t\t\tfrom_start = !from_start;\r\n\t\t\tto_start = !to_start;\r\n\t\t}\r\n\r\n\t\treturn {from_start: from_start, to_start: to_start};\r\n\t},\r\n\r\n\tget_endpoint: function (link, view) {\r\n\t\tvar config = view.$getConfig();\r\n\t\tvar types = config.links;\r\n\r\n\t\tvar lineType = this.get_line_type(link, config);\r\n\t\tvar from_start = lineType.from_start,\r\n\t\t\tto_start = lineType.to_start;\r\n\r\n\t\tvar source = gantt.getTask(link.source);\r\n\t\tvar target = gantt.getTask(link.target);\r\n\r\n\t\tvar from = getMilestonePosition(source, view),\r\n\t\t\tto = getMilestonePosition(target, view);\r\n\r\n\t\treturn {\r\n\t\t\tx: from_start ? from.left : (from.left + from.width),\r\n\t\t\te_x: to_start ? to.left : (to.left + to.width),\r\n\t\t\ty: from.top,\r\n\t\t\te_y: to.top\r\n\t\t};\r\n\t}\r\n};\r\n\r\nfunction getMilestonePosition(task, view){\r\n\tvar config = view.$getConfig();\r\n\tvar pos = view.getItemPosition(task);\r\n\tif(gantt.getTaskType(task.type) == config.types.milestone){\r\n\t\tvar milestoneHeight = gantt.getTaskHeight();\r\n\t\tvar milestoneWidth = Math.sqrt(2*milestoneHeight*milestoneHeight);\r\n\t\tpos.left -= milestoneWidth / 2;\r\n\t\tpos.width = milestoneWidth;\r\n\t}\r\n\treturn pos;\r\n}\r\n\r\nreturn _render_link_element;\r\n\r\n}\r\n\r\nmodule.exports = createLinkRender;","function createTaskBgRender(gantt){\r\n\t//this.getTaskTop\r\n\tfunction _render_bg_line(item, view) {\r\n\t\tvar config = view.$getConfig(),\r\n\t\t\ttemplates = view.$getTemplates();\r\n\t\tvar cfg = view.getScale();\r\n\t\tvar count = cfg.count;\r\n\t\tvar row = document.createElement(\"div\");\r\n\t\tif (config.show_task_cells) {\r\n\t\t\tfor (var j = 0; j < count; j++) {\r\n\t\t\t\tvar width = cfg.width[j],\r\n\t\t\t\t\tcssclass = \"\";\r\n\r\n\t\t\t\tif (width > 0) {//do not render skipped columns\r\n\t\t\t\t\tvar cell = document.createElement(\"div\");\r\n\t\t\t\t\tcell.style.width = (width) + \"px\";\r\n\r\n\t\t\t\t\tcssclass = \"gantt_task_cell\" + (j == count - 1 ? \" gantt_last_cell\" : \"\");\r\n\t\t\t\t\tcssTemplate = templates.task_cell_class(item, cfg.trace_x[j]);\r\n\t\t\t\t\tif (cssTemplate)\r\n\t\t\t\t\t\tcssclass += \" \" + cssTemplate;\r\n\t\t\t\t\tcell.className = cssclass;\r\n\r\n\t\t\t\t\trow.appendChild(cell);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar odd = gantt.getGlobalTaskIndex(item.id) % 2 !== 0;\r\n\t\tvar cssTemplate = templates.task_row_class(item.start_date, item.end_date, item);\r\n\t\tvar css = \"gantt_task_row\" + (odd ? \" odd\" : \"\") + (cssTemplate ? ' ' + cssTemplate : '');\r\n\r\n\t\tvar store = view.$config.rowStore;\r\n\t\tif(store.getSelectedId() == item.id) {\r\n\t\t\tcss += \" gantt_selected\";\r\n\t\t}\r\n\r\n\t\t//var row = \"<div class='\" + css + \"' \" + this.config.task_attribute + \"='\" + item.id + \"'>\" + cells.join(\"\") + \"</div>\";\r\n\r\n\t\trow.className = css;\r\n\r\n\t\tif (config.smart_rendering) {\r\n\t\t\trow.style.position = \"absolute\";\r\n\t\t\trow.style.top = view.getItemTop(item.id) + \"px\";\r\n\t\t\trow.style.width = \"100%\";\r\n\t\t}\r\n\t\trow.style.height = (config.row_height) + \"px\";\r\n\r\n\t\tif(view.$config.item_attribute){\r\n\t\t\trow.setAttribute(view.$config.item_attribute, item.id);\r\n\t\t}\r\n\r\n\t\treturn row;\r\n\t}\r\n\r\n\treturn _render_bg_line;\r\n}\r\n\r\nmodule.exports = createTaskBgRender;","function createTaskRenderer(gantt){\r\n\tvar defaultRender = require(\"./task_bar_render\")(gantt);\r\n\r\n\treturn function show_children(task, timeline) {\r\n\t\tif (gantt.isSplitTask(task)) {\r\n\t\t\tvar sub_height = gantt.config.row_height - 5,\r\n\t\t\t\tel = document.createElement('div'),\r\n\t\t\t\tsizes = gantt.getTaskPosition(task);\r\n\r\n\t\t\tvar sub_tasks = gantt.getChildren(task.id);\r\n\r\n\r\n\t\t\tfor (var i = 0; i < sub_tasks.length; i++) {\r\n\t\t\t\tvar child = gantt.getTask(sub_tasks[i]);\r\n\r\n\t\t\t\tvar element = defaultRender(child, timeline);\r\n\t\t\t\tif(!element)\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\tvar padding = Math.floor((gantt.config.row_height - sizes.height) / 2);\r\n\r\n\t\t\t\telement.style.top = (sizes.top + padding) + \"px\";\r\n\t\t\t\telement.className += \" gantt_split_child\";\r\n\r\n\t\t\t\tel.appendChild(element);\r\n\t\t\t}\r\n\t\t\treturn el;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n}\r\n\r\nmodule.exports = createTaskRenderer;","module.exports = function (gantt) {\r\n\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tfunction PredecessorEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(PredecessorEditor, BaseEditor);\r\n\r\n\tfunction parseInputString(value, config) {\r\n\t\tvar predecessors = (value || \"\").split(config.delimiter || \",\");\r\n\t\tfor (var i = 0; i < predecessors.length; i++) {\r\n\t\t\tvar val = predecessors[i].trim();\r\n\t\t\tif (val) {\r\n\t\t\t\tpredecessors[i] = val;\r\n\t\t\t} else {\r\n\t\t\t\tpredecessors.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t\tpredecessors.sort();\r\n\t\treturn predecessors;\r\n\t}\r\n\r\n\tfunction formatPredecessors(task, config, gantt) {\r\n\t\tvar links = task.$target;\r\n\t\tvar labels = [];\r\n\t\tfor (var i = 0; i < links.length; i++) {\r\n\t\t\tvar link = gantt.getLink(links[i]);\r\n\t\t\tvar pred = gantt.getTask(link.source);\r\n\t\t\tlabels.push(gantt.getWBSCode(pred));\r\n\t\t}\r\n\t\treturn labels.join((config.delimiter || \",\") + \" \");\r\n\t}\r\n\r\n\tfunction getSelectedLinks(taskId, predecessorCodes) {\r\n\t\tvar links = [];\r\n\t\tpredecessorCodes.forEach(function (code) {\r\n\t\t\tvar predecessor = gantt.getTaskByWBSCode(code);\r\n\t\t\tif (predecessor) {\r\n\t\t\t\tvar link = {\r\n\t\t\t\t\tsource: predecessor.id,\r\n\t\t\t\t\ttarget: taskId,\r\n\t\t\t\t\ttype: gantt.config.links.finish_to_start,\r\n\t\t\t\t\tlag: 0\r\n\t\t\t\t};\r\n\t\t\t\tif (gantt.isLinkAllowed(link)) {\r\n\t\t\t\t\tlinks.push(link);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn links;\r\n\t}\r\n\r\n\tfunction getLinksDiff(task, predecessorCodes) {\r\n\t\tvar selectedLinks = getSelectedLinks(task.id, predecessorCodes);\r\n\t\tvar existingLinksSearch = {};\r\n\t\ttask.$target.forEach(function (linkId) {\r\n\t\t\tvar link = gantt.getLink(linkId);\r\n\t\t\texistingLinksSearch[link.source + \"_\" + link.target] = link.id;\r\n\t\t});\r\n\r\n\t\tvar linksToAdd = [];\r\n\t\tselectedLinks.forEach(function (link) {\r\n\t\t\tvar linkKey = link.source + \"_\" + link.target;\r\n\t\t\tif (!existingLinksSearch[linkKey]) {\r\n\t\t\t\tlinksToAdd.push(link);\r\n\t\t\t} else {\r\n\t\t\t\tdelete existingLinksSearch[linkKey];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tvar linksToDelete = [];\r\n\t\tfor (var i in existingLinksSearch) {\r\n\t\t\tlinksToDelete.push(existingLinksSearch[i]);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tadd: linksToAdd,\r\n\t\t\tremove: linksToDelete\r\n\t\t};\r\n\t}\r\n\r\n\tutils.mixin(PredecessorEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = \"<div><input type='text' name='\" + column.name + \"'></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\thide: function () {\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tthis.get_input(node).value = formatPredecessors(value, column.editor, gantt);\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\treturn parseInputString((this.get_input(node).value || \"\"), column.editor);\r\n\t\t},\r\n\t\tsave: function (id, column, node) {\r\n\t\t\tvar task = gantt.getTask(id);\r\n\r\n\t\t\tvar linksDiff = getLinksDiff(task, this.get_value(id, column, node));\r\n\r\n\t\t\tif (linksDiff.add.length || linksDiff.remove.length) {\r\n\t\t\t\tgantt.batchUpdate(function () {\r\n\t\t\t\t\tlinksDiff.add.forEach(function (link) {\r\n\t\t\t\t\t\tgantt.addLink(link);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlinksDiff.remove.forEach(function (linkId) {\r\n\t\t\t\t\t\tgantt.deleteLink(linkId);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (gantt.autoSchedule)\r\n\t\t\t\t\t\tgantt.autoSchedule();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tis_changed: function (value, id, column, node) {\r\n\t\t\tvar inputPredecessors = this.get_value(id, column, node);\r\n\t\t\tvar taskPredecessors = parseInputString(formatPredecessors(value, column.editor, gantt), column.editor);\r\n\r\n\t\t\treturn inputPredecessors.join() !== taskPredecessors.join();\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn PredecessorEditor;\r\n};","module.exports = function(gantt) {\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tvar html5DateFormat = \"%Y-%m-%d\";\r\n\r\n\tvar dateToStr = null;\r\n\tvar strToDate = null;\r\n\r\n\tfunction init(){\r\n\t\tif(!dateToStr){\r\n\t\t\tdateToStr = gantt.date.date_to_str(html5DateFormat);\r\n\t\t}\r\n\t\tif(!strToDate){\r\n\t\t\tstrToDate = gantt.date.str_to_date(html5DateFormat);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction DateEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(DateEditor, BaseEditor);\r\n\r\n\tutils.mixin(DateEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\r\n\t\t\tinit();\r\n\t\t\tvar minValue = dateToStr(config.min || gantt.getState().min_date);\r\n\t\t\tvar maxValue = dateToStr(config.max || gantt.getState().max_date);\r\n\r\n\t\t\tvar html = \"<div style='width:140px'><input type='date' min='\" + minValue + \"' max='\" + maxValue + \"' name='\" + column.name + \"'></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\tset_value: function (value, id, column, node) {\r\n\t\t\tthis.get_input(node).value = dateToStr(value);\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\tif (!value || isNaN(value.getTime()))\r\n\t\t\t\treturn false;\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\tvar parsed = null;\r\n\t\t\ttry {\r\n\t\t\t\tparsed = strToDate(this.get_input(node).value || \"\");\r\n\t\t\t} catch (e) {\r\n\t\t\t}\r\n\r\n\t\t\treturn parsed;\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn DateEditor;\r\n};\r\n","module.exports = function(gantt) {\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tfunction SelectEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(SelectEditor, BaseEditor);\r\n\r\n\tutils.mixin(SelectEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = \"<div><select name='\" + column.name + \"'>\";\r\n\t\t\tvar optionsHtml = [],\r\n\t\t\t\toptions = config.options || [];\r\n\r\n\t\t\tfor (var i = 0; i < options.length; i++) {\r\n\t\t\t\toptionsHtml.push(\"<option value='\" + config.options[i].key + \"'>\" + options[i].label + \"</option>\");\r\n\t\t\t}\r\n\r\n\t\t\thtml += optionsHtml.join(\"\") + \"</select></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\tget_input: function (node) {\r\n\t\t\treturn node.querySelector(\"select\");\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn SelectEditor;\r\n};","module.exports = function (gantt) {\r\n\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tfunction NumberEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(NumberEditor, BaseEditor);\r\n\r\n\tutils.mixin(NumberEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar min = config.min || 0,\r\n\t\t\t\tmax = config.max || 100;\r\n\r\n\t\t\tvar html = \"<div><input type='number' min='\" + min + \"' max='\" + max + \"' name='\" + column.name + \"'></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t},\r\n\t\tget_value: function (id, column, node) {\r\n\t\t\tvar value = BaseEditor.prototype.get_value(id, column, node);\r\n\t\t\treturn this.get_input(node).value || \"\";\r\n\t\t},\r\n\t\tis_valid: function (value, id, column, node) {\r\n\t\t\treturn !isNaN(parseInt(value, 10));\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn NumberEditor;\r\n};","module.exports = function(gantt) {\r\n\r\n\tvar BaseEditor = require(\"./base\")(gantt),\r\n\t\tutils = require(\"../../../../../utils/utils\");\r\n\tvar __extends = require(\"../../../../../utils/extends\");\r\n\r\n\tfunction TextEditor() {\r\n\t\tvar self = BaseEditor.apply(this, arguments) || this;\r\n\t\treturn self;\r\n\t}\r\n\r\n\t__extends(TextEditor, BaseEditor);\r\n\r\n\tutils.mixin(TextEditor.prototype, {\r\n\t\tshow: function (id, column, config, placeholder) {\r\n\t\t\tvar html = \"<div><input type='text' name='\" + column.name + \"'></div>\";\r\n\t\t\tplaceholder.innerHTML = html;\r\n\t\t}\r\n\t}, true);\r\n\r\n\treturn TextEditor;\r\n};","module.exports = {\r\n\tinit: function(controller, grid){\r\n\t\tvar self = controller;\r\n\t\tvar gantt = grid.$gantt;\r\n\r\n\t\tvar onBlurDelay = null;\r\n\t\tvar keyNav = gantt.ext.keyboardNavigation;\r\n\t\tkeyNav.attachEvent(\"onBeforeFocus\", function (node) {\r\n\t\t\tvar activeCell = controller.locateCell(node);\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t\tif (activeCell) {\r\n\t\t\t\tvar columnName = activeCell.columnName;\r\n\t\t\t\tvar id = activeCell.id;\r\n\r\n\t\t\t\tvar editorState = self.getState();\r\n\t\t\t\tif(self.isVisible()){\r\n\t\t\t\t\tif(editorState.id == id && editorState.columnName === columnName) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onFocus\", function (node) {\r\n\t\t\tvar activeCell = controller.locateCell(node);\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t\tif (activeCell && !(activeCell.id == state.id && activeCell.columnName == state.columnName)) {\r\n\t\t\t\tif(self.isVisible()){\r\n\t\t\t\t\tself.save();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tcontroller.attachEvent(\"onHide\", function(){\r\n\t\t\tclearTimeout(onBlurDelay);\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onBlur\", function () {\r\n\t\t\tonBlurDelay = setTimeout(function(){\r\n\t\t\t\tself.save();\r\n\t\t\t});\r\n\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskDblClick\", function(id,e){\r\n\t\t\t// block lightbox on double click inside editor\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\t\t\tif(cell && controller.isVisible() && cell.columnName == state.columnName){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskClick\", function (id, e) {\r\n\t\t\tif(gantt._is_icon_open_click(e))\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\r\n\t\t\tif (cell && controller.getEditorConfig(cell.columnName)) {\r\n\t\t\t\tif(controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName){\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcontroller.startEdit(cell.id, cell.columnName);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onEmptyClick\", function () {\r\n\t\t\tself.save();\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tkeyNav.attachEvent(\"onKeyDown\", function(command, e){\r\n\t\t\tvar activeCell = controller.locateCell(e.target);\r\n\t\t\tvar hasEditor = activeCell ? controller.getEditorConfig(activeCell.columnName) : false;\r\n\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar keyboard = gantt.constants.KEY_CODES;\r\n\t\t\tvar keyCode = e.keyCode;\r\n\t\t\tvar preventKeyNav = false;\r\n\r\n\t\t\tswitch (keyCode){\r\n\t\t\t\tcase keyboard.ENTER:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tcontroller.save();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}else if(hasEditor && !(e.ctrlKey || e.metaKey || e.shiftKey)){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.ESC:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.UP:\r\n\t\t\t\tcase keyboard.DOWN:\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.LEFT:\r\n\t\t\t\tcase keyboard.RIGHT:\r\n\t\t\t\t\tif(state.editorType === \"date\"){\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.SPACE:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.DELETE:\r\n\t\t\t\t\tif(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.TAB:\r\n\t\t\t\t\tif(controller.isVisible()){\r\n\r\n\t\t\t\t\t\tif(e.shiftKey){\r\n\t\t\t\t\t\t\tcontroller.editPrevCell(true);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tcontroller.editNextCell(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar newState = controller.getState();\r\n\t\t\t\t\t\tif(newState.id){\r\n\t\t\t\t\t\t\tkeyNav.focus({type:\"taskCell\", id: newState.id, column:newState.columnName});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif(controller.isVisible())\r\n\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\telse{\r\n\r\n\t\t\t\t\t\t// start editing on character key\r\n\t\t\t\t\t\tif((keyCode >= 48 && keyCode <= 57) || // [0-9]\r\n\t\t\t\t\t\t\t(keyCode > 95 && keyCode < 112) || // numpad\r\n\t\t\t\t\t\t\t(keyCode >= 64 && keyCode <= 91) || // [a-z]\r\n\t\t\t\t\t\t\t(keyCode > 185 && keyCode < 193) || //;=-,etc\r\n\t\t\t\t\t\t\t(keyCode > 218  && keyCode < 223)\r\n\t\t\t\t\t\t){\r\n\t\t\t\t\t\t\tif(hasEditor && !controller.isVisible()){\r\n\t\t\t\t\t\t\t\tself.startEdit(activeCell.id, activeCell.columnName);\r\n\t\t\t\t\t\t\t\tpreventKeyNav = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif (preventKeyNav){\r\n\t\t\t\treturn false;\r\n\t\t\t} else{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t},\r\n\tonShow: function(controller, placeholder, grid){},\r\n\tonHide: function(controller, placeholder, grid){\r\n\t\tvar gantt = grid.$gantt;\r\n\t\tgantt.focus();\r\n\r\n\t},\r\n\tdestroy: function(){}\r\n};\r\n\r\n","module.exports = {\r\n\tinit: function(controller, grid){\r\n\t\tvar gantt = grid.$gantt;\r\n\r\n\t\tgantt.attachEvent(\"onTaskClick\", function (id, e) {\r\n\t\t\tif(gantt._is_icon_open_click(e))\r\n\t\t\t\treturn true;\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\r\n\t\t\tif (cell && controller.getEditorConfig(cell.columnName)) {\r\n\t\t\t\tif(controller.isVisible() && state.id == cell.id && state.columnName == cell.columnName){\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcontroller.startEdit(cell.id, cell.columnName);\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\tgantt.attachEvent(\"onEmptyClick\", function () {\r\n\t\t\tcontroller.hide();\r\n\t\t\treturn true;\r\n\t\t});\r\n\r\n\t\tgantt.attachEvent(\"onTaskDblClick\", function(id,e){\r\n\t\t\tvar state = controller.getState();\r\n\t\t\tvar cell = controller.locateCell(e.target);\r\n\t\t\tif(cell && controller.isVisible() && cell.columnName == state.columnName){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t});\r\n\t},\r\n\r\n\tonShow: function(controller, placeholder, grid){\r\n\t\tif(grid.$getConfig().keyboard_navigation){\r\n\t\t\t// keyboard navigation extension will handle arrows if enabled\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar gantt = grid.$gantt;\r\n\t\tplaceholder.onkeydown = function (e) {\r\n\t\t\te = e || window.event;\r\n\r\n\t\t\tvar keyboard = gantt.constants.KEY_CODES;\r\n\t\t\tif(e.defaultPrevented || (e.shiftKey && e.keyCode != keyboard.TAB)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar shouldPrevent = true;\r\n\t\t\tswitch (e.keyCode) {\r\n\t\t\t\tcase gantt.keys.edit_save:\r\n\t\t\t\t\tcontroller.save();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase gantt.keys.edit_cancel:\r\n\t\t\t\t\tcontroller.hide();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase keyboard.TAB:\r\n\t\t\t\t\tif(e.shiftKey){\r\n\t\t\t\t\t\tcontroller.editPrevCell(true);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tcontroller.editNextCell(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tshouldPrevent = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\tif(shouldPrevent){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tonHide: function(){\r\n\r\n\t},\r\n\r\n\tdestroy: function(){\r\n\r\n\t}\r\n};\r\n\r\n","var defaultMapping = require(\"./keyboard_mappings/default\");\r\nvar keyNavMappings = require(\"./keyboard_mappings/keyboard_navigation\");\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tvar mapping = null;\r\n\r\n\treturn {\r\n\t\tsetMapping: function(map){\r\n\t\t\tmapping = map;\r\n\t\t},\r\n\t\tgetMapping: function(){\r\n\r\n\t\t\tif(mapping){\r\n\t\t\t\treturn mapping;\r\n\t\t\t}else if(gantt.config.keyboard_navigation_cells){\r\n\t\t\t\treturn keyNavMappings;\r\n\t\t\t}else{\r\n\t\t\t\treturn defaultMapping;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n};\r\n","function createResizer(gantt, grid){\r\n\treturn {\r\n\t\tinit: function(){},\r\n\t\tdoOnRender: function(){}\r\n\t};\r\n}\r\n\r\nmodule.exports = createResizer;","var createStaticBgHelper = function(){\r\n\treturn {\r\n\t\trender: function(){}\r\n\t};\r\n};\r\n\r\nmodule.exports = {\r\n\tcreate: function(){\r\n\t\treturn createStaticBgHelper();\r\n\t}\r\n};\r\n\r\n","var __extends = require(\"../../../utils/extends\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tenv = require(\"../../../utils/env\"),\r\n\teventable = require(\"../../../utils/eventable\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ScrollbarCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ScrollbarCell, _super);\r\n\tfunction ScrollbarCell(parent, config, factory, gantt) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tthis.$config = utils.mixin(config, {scroll: \"x\"});\r\n\t\t_this._scrollHorizontalHandler = utils.bind(_this._scrollHorizontalHandler, _this);\r\n\t\t_this._scrollVerticalHandler = utils.bind(_this._scrollVerticalHandler, _this);\r\n\t\t_this._outerScrollVerticalHandler = utils.bind(_this._outerScrollVerticalHandler, _this);\r\n\t\t_this._outerScrollHorizontalHandler = utils.bind(_this._outerScrollHorizontalHandler, _this);\r\n\t\t_this._mouseWheelHandler = utils.bind(_this._mouseWheelHandler, _this);\r\n\r\n\t\tthis.$config.hidden = true;\r\n\t\tvar size = gantt.config.scroll_size;\r\n\r\n\t\tif(gantt.env.isIE){\r\n\t\t\t// full element height/width must be bigger than just a browser scrollbar,\r\n\t\t\t// otherwise the scrollbar element won't be scrolled on click\r\n\t\t\tsize += 1;\r\n\t\t}\r\n\r\n\t\tif(this._isHorizontal()){\r\n\t\t\t_this.$config.height = size;\r\n\t\t\t_this.$parent.$config.height = size;\r\n\t\t}else{\r\n\t\t\t_this.$config.width = size;\r\n\t\t\t_this.$parent.$config.width = size;\r\n\t\t}\r\n\r\n\t\tthis.$config.scrollPosition = 0;\r\n\r\n\t\t_this.$name = \"scroller\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tScrollbarCell.prototype.init = function(container){\r\n\t\tcontainer.innerHTML = this.$toHTML();\r\n\t\tthis.$view = container.firstChild;\r\n\r\n\t\tif(!this.$view){\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t\tif(this._isVertical()){\r\n\t\t\tthis._initVertical();\r\n\t\t}else{\r\n\t\t\tthis._initHorizontal();\r\n\t\t}\r\n\t\tthis._initMouseWheel();\r\n\t\tthis._initLinkedViews();\r\n\t};\r\n\r\n\tScrollbarCell.prototype.$toHTML = function () {\r\n\t\tvar className = this._isHorizontal() ? \"gantt_hor_scroll\" : \"gantt_ver_scroll\";\r\n\t\treturn \"<div class='gantt_layout_cell \"+className+\"'><div style='\"+(this._isHorizontal() ? \"width:2000px\" : \"height:2000px\")+\"'></div></div>\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getRootParent = function(){\r\n\t\tvar parent = this.$parent;\r\n\t\twhile(parent && parent.$parent){\r\n\t\t\tparent = parent.$parent;\r\n\t\t}\r\n\t\tif(parent){\r\n\t\t\treturn parent;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tfunction eachCell(root, res){\r\n\t\tres.push(root);\r\n\t\tif(root.$cells){\r\n\t\t\tfor(var i = 0; i < root.$cells.length; i++){\r\n\t\t\t\teachCell(root.$cells[i], res);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tScrollbarCell.prototype._eachView = function(){\r\n\t\tvar res = [];\r\n\t\teachCell(this._getRootParent(), res);\r\n\t\treturn res;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getLinkedViews = function(){\r\n\t\tvar views = this._eachView();\r\n\t\tvar res = [];\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].$config && ((this._isVertical() && views[i].$config.scrollY == this.$id) || (this._isHorizontal() && views[i].$config.scrollX == this.$id)) ){\r\n\t\t\t\tres.push(views[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn res;\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype._initHorizontal = function(){\r\n\t\tthis.$scroll_hor = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollHorizontalHandler);\r\n\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initLinkedViews = function(){\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tvar css = this._isVertical() ?\"gantt_layout_outer_scroll gantt_layout_outer_scroll_vertical\" : \"gantt_layout_outer_scroll gantt_layout_outer_scroll_horizontal\";\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\t//views[i].$config.css = [views[i].$config.css || \"\", css].join(\" \");\r\n\t\t\tdomHelpers.addClassName(views[i].$view || views[i].getNode(), css);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initVertical = function(){\r\n\t\tthis.$scroll_ver = this.$view;\r\n\t\tthis.$domEvents.attach(this.$view, \"scroll\", this._scrollVerticalHandler);\r\n\t};\r\n\r\n\tScrollbarCell.prototype._updateLinkedViews = function(){\r\n\t\tvar root = this._getRootParent();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._initMouseWheel = function(){\r\n\t\tvar ff = env.isFF;\r\n\t\tif (ff)\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"wheel\", this._mouseWheelHandler);\r\n\t\telse\r\n\t\t\tthis.$domEvents.attach(this._getRootParent().$view, \"mousewheel\", this._mouseWheelHandler);\r\n\t};\r\n\r\n\r\n\r\n\r\n\tScrollbarCell.prototype.scrollHorizontally = function(left){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\tthis.$config.codeScrollLeft = left;\r\n\t\tleft = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(left, undefined);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = left;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, left, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\tScrollbarCell.prototype.scrollVertically = function(top){\r\n\t\tif(this._scrolling) return;\r\n\t\tthis._scrolling = true;\r\n\r\n\t\tthis.$scroll_ver.scrollTop = top;\r\n\t\ttop = this.$scroll_ver.scrollTop;\r\n\r\n\t\tvar views = this._getLinkedViews();\r\n\r\n\t\tfor(var i = 0; i < views.length; i++){\r\n\t\t\tif(views[i].scrollTo){\r\n\t\t\t\tviews[i].scrollTo(undefined, top);\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar oldSize = this.$config.scrollPosition;\r\n\t\tthis.$config.scrollPosition = top;\r\n\t\tthis.callEvent(\"onScroll\", [oldSize, top, this.$config.scroll]);\r\n\t\tthis._scrolling = false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._isVertical = function(){\r\n\t\treturn this.$config.scroll == \"y\";\r\n\t};\r\n\tScrollbarCell.prototype._isHorizontal = function(){\r\n\t\treturn this.$config.scroll == \"x\";\r\n\t};\r\n\tScrollbarCell.prototype._scrollHorizontalHandler = function (e) {\r\n\t\tif(this._isVertical() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t//in safari we can catch previous onscroll after setting new value from mouse-wheel event\r\n\t\t//set delay to prevent value drifiting\r\n\t\tif ((new Date()) - ( this._wheel_time || 0 ) < 100) return true;\r\n\t\tif (this.$gantt._touch_scroll_active) return;\r\n\t\tvar left = this.$scroll_hor.scrollLeft;\r\n\r\n\t\tthis.scrollHorizontally(left);\r\n\r\n\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollHorizontalHandler = function(e){\r\n\t\tif(this._isVertical()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.show = function(){\r\n\t\tthis.$parent.show();\r\n\t};\r\n\tScrollbarCell.prototype.hide = function(){\r\n\t\tthis.$parent.hide();\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollSize = function(){\r\n\t\tvar scrollSize = 0;\r\n\t\tvar outerSize = 0;\r\n\t\tvar isHorizontal = this._isHorizontal();\r\n\r\n\t\tvar linked = this._getLinkedViews();\r\n\t\tvar view;\r\n\t\tvar scrollProperty = isHorizontal ? \"scrollWidth\" : \"scrollHeight\",\r\n\t\t\tinnerSizeProperty = isHorizontal ? \"contentX\" : \"contentY\";\r\n\t\tvar outerProperty = isHorizontal ? \"x\" : \"y\";\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tfor(var i = 0; i < linked.length; i++){\r\n\t\t\tview = linked[i];\r\n\t\t\tif(!(view && view.$content && view.$content.getSize && !view.$config.hidden)) continue;\r\n\r\n\t\t\tvar sizes = view.$content.getSize();\r\n\t\t\tvar cellScrollSize;\r\n\t\t\tif(sizes.hasOwnProperty(scrollProperty)){\r\n\t\t\t\tcellScrollSize = sizes[scrollProperty];\r\n\t\t\t}else{\r\n\t\t\t\tcellScrollSize = sizes[innerSizeProperty];\r\n\t\t\t}\r\n\r\n\t\t\tif(offset){\r\n\t\t\t\t// precalculated vertical/horizontal offsets of scrollbar to emulate 4.x look\r\n\t\t\t\tif(sizes[innerSizeProperty] > sizes[outerProperty] && sizes[innerSizeProperty] > scrollSize && (cellScrollSize > (sizes[outerProperty] - offset + 2))){\r\n\t\t\t\t\tscrollSize = cellScrollSize + (isHorizontal ? 0 : 2);\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar nonScrollableSize = Math.max(sizes[innerSizeProperty] - cellScrollSize, 0);\r\n\t\t\t\tvar scrollableViewPortSize = Math.max(sizes[outerProperty] - nonScrollableSize, 0);\r\n\t\t\t\tcellScrollSize = cellScrollSize + nonScrollableSize;\r\n\r\n\t\t\t\tif(cellScrollSize > scrollableViewPortSize && (cellScrollSize > scrollSize) ){\r\n\t\t\t\t\t//|| (cellScrollSize === scrollSize && sizes[outerProperty] < outerSize) // same scroll width but smaller scrollable view port\r\n\r\n\t\t\t\t\tscrollSize = cellScrollSize;\r\n\t\t\t\t\touterSize = sizes[outerProperty];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\touterScroll: outerSize,\r\n\t\t\tinnerScroll: scrollSize\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.scroll = function(position){\r\n\t\tif(this._isHorizontal()){\r\n\t\t\tthis.scrollHorizontally(position);\r\n\t\t}else{\r\n\t\t\tthis.scrollVertically(position);\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.getScrollState = function(){\r\n\t\treturn {\r\n\t\t\tvisible: this.isVisible(),\r\n\t\t\tdirection: this.$config.scroll,\r\n\t\t\tsize: this.$config.outerSize,\r\n\t\t\tscrollSize: this.$config.scrollSize || 0,\r\n\t\t\tposition: this.$config.scrollPosition || 0\r\n\t\t};\r\n\t};\r\n\r\n\tScrollbarCell.prototype.setSize = function(width, height){\r\n\t\t_super.prototype.setSize.apply(this, arguments);\r\n\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\r\n\t\tvar ownSize = (this._isVertical() ? height : width) - this._getScrollOffset() + (this._isHorizontal() ? 1 : 0);\r\n\r\n\t\tif(scrollSizes.innerScroll && ownSize > scrollSizes.outerScroll){\r\n\t\t\tscrollSizes.innerScroll += (ownSize - scrollSizes.outerScroll);\r\n\t\t}\r\n\t\tthis.$config.scrollSize = scrollSizes.innerScroll;\r\n\r\n\t\tthis.$config.width = width;\r\n\t\tthis.$config.height = height;\r\n\t\tthis._setScrollSize(scrollSizes.innerScroll);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.isVisible = function(){\r\n\t\treturn !!(this.$parent && this.$parent.$view.parentNode);\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldShow = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn false;\r\n\t\t}else if(scrollSizes.innerScroll && !(this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype.shouldHide = function(){\r\n\t\tvar scrollSizes = this._getScrollSize();\r\n\t\tif(!scrollSizes.innerScroll && (this.$parent && this.$parent.$view.parentNode)){\r\n\t\t\treturn true;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tScrollbarCell.prototype.toggleVisibility = function(){\r\n\t\tif(this.shouldHide()){\r\n\t\t\tthis.hide();\r\n\t\t}else if(this.shouldShow()){\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t};\r\n\t\r\n\tScrollbarCell.prototype._getScaleOffset = function(view){\r\n\t\tvar offset = 0;\r\n\t\tif(view && (view.$config.view == \"timeline\" || view.$config.view == \"grid\")){\r\n\t\t\toffset = view.$content.$getConfig().scale_height;\r\n\t\t}\r\n\t\treturn offset;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._getScrollOffset = function(){\r\n\t\tvar offset = 0;\r\n\t\tif(this._isVertical()){\r\n\t\t\tvar parentLayout = this.$parent.$parent;\r\n\t\t\toffset = Math.max(\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getPrevSibling(this.$parent.$id)),\r\n\t\t\t\tthis._getScaleOffset(parentLayout.getNextSibling(this.$parent.$id))\r\n\t\t\t\t);\r\n\t\t}else{\r\n\t\t\tvar linked = this._getLinkedViews();\r\n\r\n\t\t\tfor (var i = 0; i < linked.length; i++) {\r\n\t\t\t\tvar view = linked[i],\r\n\t\t\t\t\tvparent = view.$parent;\r\n\t\t\t\tvar cells = vparent.$cells;\r\n\r\n\t\t\t\tvar last = cells[cells.length - 1];\r\n\r\n\t\t\t\tif (last && last.$config.view == \"scrollbar\" && last.$config.hidden === false) {\r\n\t\t\t\t\toffset = last.$config.width;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn offset || 0;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._setScrollSize = function(size){\r\n\t\tvar property = this._isHorizontal() ? \"width\" : \"height\";\r\n\t\tvar scrollbar = this._isHorizontal() ? this.$scroll_hor : this.$scroll_ver;\r\n\r\n\t\tvar offset = this._getScrollOffset();\r\n\r\n\t\tvar node = scrollbar.firstChild;\r\n\r\n\t\tif(offset){\r\n\t\t\tif(this._isVertical()){\r\n\r\n\t\t\t\tthis.$config.outerSize = (this.$config.height - offset + 3);\r\n\t\t\t\tscrollbar.style.height = this.$config.outerSize + \"px\";\r\n\t\t\t\tscrollbar.style.top = (offset-1) + \"px\";\r\n\t\t\t\tdomHelpers.addClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\t\tdomHelpers.addClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\t}else{\r\n\t\t\t\tthis.$config.outerSize = (this.$config.width - offset + 1);\r\n\t\t\t\tscrollbar.style.width = this.$config.outerSize + \"px\";\r\n\t\t\t\t//domHelpers.addClassName(scrollbar, this.$parent._borders.right);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tscrollbar.style.top = \"auto\";\r\n\t\t\tdomHelpers.removeClassName(scrollbar, this.$parent._borders.top);\r\n\t\t\tdomHelpers.removeClassName(scrollbar.parentNode, \"gantt_task_vscroll\");\r\n\t\t\tthis.$config.outerSize = this.$config.height;\r\n\t\t}\r\n\r\n\t\tnode.style[property] = size + \"px\";\r\n\t};\r\n\r\n\tScrollbarCell.prototype._scrollVerticalHandler = function (e) {\r\n\t\tif(this._scrollHorizontalHandler() || this._scrolling){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.$gantt._touch_scroll_active) return;\r\n\t\tvar top = this.$scroll_ver.scrollTop;\r\n\t\tvar prev = this._oldTop;\r\n\t\tif(top == prev) return;\r\n\r\n\t\tthis.scrollVertically(top);\r\n\r\n\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\r\n\t};\r\n\tScrollbarCell.prototype._outerScrollVerticalHandler = function(e){\r\n\t\tif(this._scrollHorizontalHandler()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\tScrollbarCell.prototype._checkWheelTarget = function(targetNode){\r\n\t\tvar connectedViews = this._getLinkedViews().concat(this);\r\n\r\n\t\tfor(var i = 0; i < connectedViews.length; i++){\r\n\t\t\tvar node = connectedViews[i].$view;\r\n\t\t\tif(domHelpers.isChildOf(targetNode, node)){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tScrollbarCell.prototype._mouseWheelHandler = function(e){\r\n\t\tvar target = e.target || e.srcElement;\r\n\r\n\t\tif(!this._checkWheelTarget(target))\r\n\t\t\treturn;\r\n\r\n\t\tthis._wheel_time = new Date();\r\n\r\n\t\tvar res = {};\r\n\t\tvar ff = env.isFF;\r\n\t\tvar wx = ff ? (e.deltaX*-20) : e.wheelDeltaX*2;\r\n\t\tvar wy = ff ? (e.deltaY*-40) : e.wheelDelta;\r\n\r\n\t\tif(e.shiftKey && !(e.deltaX || e.wheelDeltaX)){\r\n\t\t\t// shift+mousewheel for horizontal scroll\r\n\t\t\twx = wy*2;\r\n\t\t\twy = 0;\r\n\t\t}\r\n\r\n\t\tif (wx && Math.abs(wx) > Math.abs(wy)){\r\n\t\t\tif(this._isVertical()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.x) return true;//no horisontal scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_hor || !this.$scroll_hor.offsetWidth) return true;\r\n\r\n\t\t\tvar dir  = wx/-40;\r\n\t\t\tvar oldLeft = this._oldLeft;\r\n\t\t\tvar left = oldLeft+dir*30;\r\n\t\t\tthis.scrollHorizontally(left);\r\n\t\t\tthis.$scroll_hor.scrollLeft = left;\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldLeft == this.$scroll_hor.scrollLeft){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tthis._oldLeft = this.$scroll_hor.scrollLeft;\r\n\t\t} else {\r\n\t\t\tif(this._isHorizontal()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif(res.y) return true;//no vertical scroll, must not block scrolling\r\n\t\t\tif(!this.$scroll_ver || !this.$scroll_ver.offsetHeight) return true;\r\n\r\n\t\t\tvar dir  = wy/-40;\r\n\t\t\tif (typeof wy == \"undefined\")\r\n\t\t\t\tdir = e.detail;\r\n\r\n\t\t\tvar oldTop = this._oldTop;\r\n\t\t\tvar top = this.$scroll_ver.scrollTop+dir*30;\r\n\r\n\t\t\t//if(!this.$gantt.config.prevent_default_scroll &&\r\n\t\t\t//\t(this.$gantt._cached_scroll_pos && ((this.$gantt._cached_scroll_pos.y == top) || (this.$gantt._cached_scroll_pos.y <= 0 && top <= 0)))) return true;\r\n\r\n\r\n\t\t\tthis.scrollVertically(top);\r\n\t\t\tthis.$scroll_ver.scrollTop = top;\r\n\r\n\t\t\t// not block scroll if position hasn't changed\r\n\t\t\tif(oldTop == this.$scroll_ver.scrollTop){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tthis._oldTop = this.$scroll_ver.scrollTop;\r\n\t\t}\r\n\r\n\t\tif (e.preventDefault)\r\n\t\t\te.preventDefault();\r\n\t\te.cancelBubble=true;\r\n\t\treturn false;\r\n\t};\r\n\r\n\treturn ScrollbarCell;\r\n})(Cell);\r\n\r\nmodule.exports = ScrollbarCell;","module.exports = null;","var __extends = require(\"../../../utils/extends\"),\r\n\tutils = require(\"../../../utils/utils\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ViewCell = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewCell, _super);\r\n\tfunction ViewCell(parent, config, factory) {\r\n\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\r\n\t\tif(config.view){\r\n\t\t\tif(config.id){\r\n\t\t\t\t// pass id to the nested view\r\n\t\t\t\tthis.$id = utils.uid();\r\n\t\t\t}\r\n\t\t\tvar childConfig = utils.copy(config);\r\n\t\t\tdelete childConfig.config;\r\n\t\t\tdelete childConfig.templates;\r\n\r\n\t\t\tthis.$content = this.$factory.createView(config.view, this, childConfig, this);\r\n\t\t\tif(!this.$content)\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t_this.$name = \"viewCell\";\r\n\t\treturn _this;\r\n\t}\r\n\r\n\tViewCell.prototype.destructor = function(){\r\n\t\tthis.clear();\r\n\t\t_super.prototype.destructor.call(this);\r\n\t};\r\n\r\n\tViewCell.prototype.clear = function(){\r\n\r\n\t\tthis.$initialized = false;\r\n\r\n\t\t// call destructor\r\n\t\tif (this.$content){\r\n\t\t\tvar method = this.$content.unload || this.$content.destructor;\r\n\t\t\tif (method){\r\n\t\t\t\tmethod.call(this.$content);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_super.prototype.clear.call(this);\r\n\r\n\t};\r\n\r\n\tViewCell.prototype.scrollTo = function(left, top){\r\n\r\n\t\tif(this.$content && this.$content.scrollTo){\r\n\t\t\tthis.$content.scrollTo(left, top);\r\n\t\t}else{\r\n\t\t\t_super.prototype.scrollTo.call(this, left, top);\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype._setContentSize = function(x, y){\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tvar outerX = x + borders.horizontal;\r\n\t\tvar outerY = y + borders.vertical;\r\n\t\tthis.$config.width = outerX;\r\n\t\tthis.$config.height = outerY;\r\n\t};\r\n\r\n\tViewCell.prototype.setSize = function(x, y){\r\n\t\t_super.prototype.setSize.call(this, x, y);\r\n\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (!this.$initialized) {\r\n\t\t\t\tthis.$initialized = true;\r\n\t\t\t\tvar header = this.$view.childNodes[0];\r\n\t\t\t\tvar content = this.$view.childNodes[1];\r\n\t\t\t\tif(!content) content = header;\r\n\r\n\t\t\t\t/*if(this.$content.$config){\r\n\t\t\t\t\tthis.$content.$config.width = this.$lastSize.contentX;\r\n\t\t\t\t\tthis.$content.$config.height = this.$lastSize.contentY;\r\n\t\t\t\t}*/\r\n\t\t\t\tthis.$content.init(content);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tViewCell.prototype.setContentSize = function(){\r\n\t\tif(!this.$preResize && this.$content) {\r\n\t\t\tif (this.$initialized) {\r\n\t\t\t\tthis.$content.setSize(this.$lastSize.contentX, this.$lastSize.contentY);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tViewCell.prototype.getContentSize = function(){\r\n\t\tvar size = _super.prototype.getContentSize.call(this);\r\n\r\n\t\tif(this.$content && this.$initialized){\r\n\t\t\tvar childSize = this.$content.getSize();\r\n\t\t\tsize.width = childSize.contentX === undefined ? childSize.width : childSize.contentX;\r\n\t\t\tsize.height = childSize.contentY === undefined ? childSize.height : childSize.contentY;\r\n\t\t}\r\n\r\n\t\tvar borders = this._getBorderSizes();\r\n\t\tsize.width += borders.horizontal;\r\n\t\tsize.height += borders.vertical;\r\n\r\n\t\treturn size;\r\n\t};\r\n\r\n\treturn ViewCell;\r\n}(Cell));\r\n\r\nmodule.exports = ViewCell;","var __extends = require(\"../../../utils/extends\"),\r\n\tLayout = require(\"./layout\"),\r\n\tCell = require(\"./cell\");\r\n\r\nvar ViewLayout = (function (_super) {\r\n\t\"use strict\";\r\n\r\n\t__extends(ViewLayout, _super);\r\n\tfunction ViewLayout(parent, config, factory) {\r\n\t\tvar _this = _super.apply(this, arguments) || this;\r\n\t\tfor (var i = 0; i < _this.$cells.length; i++) {\r\n\t\t\t_this.$cells[i].$config.hidden = (i !== 0);\r\n\t\t}\r\n\t\t_this.$cell = _this.$cells[0];\r\n\t\t_this.$name = \"viewLayout\";\r\n\r\n\t\treturn _this;\r\n\t}\r\n\tViewLayout.prototype.cell = function (id) {\r\n\t\tvar cell = _super.prototype.cell.call(this, id);\r\n\t\tif (!cell.$view) {\r\n\t\t\tthis.$fill(null, this);\r\n\t\t}\r\n\t\treturn cell;\r\n\t};\r\n\tViewLayout.prototype.moveView = function (view) {\r\n\t\tvar body = this.$view;\r\n\t\tif (this.$cell) {\r\n\t\t\tthis.$cell.$config.hidden = true;\r\n\t\t\tbody.removeChild(this.$cell.$view);\r\n\t\t}\r\n\t\tthis.$cell = view;\r\n\t\tbody.appendChild(view.$view);\r\n\t};\r\n\tViewLayout.prototype.setSize = function (x, y) {\r\n\t\tCell.prototype.setSize.call(this, x, y);\r\n\t};\r\n\r\n\tViewLayout.prototype.setContentSize = function(){\r\n\t\tvar size = this.$lastSize;\r\n\t\tthis.$cell.setSize(size.contentX, size.contentY);\r\n\t};\r\n\r\n\tViewLayout.prototype.getSize = function () {\r\n\t\tvar sizes = _super.prototype.getSize.call(this);\r\n\t\tif (this.$cell) {\r\n\t\t\tvar cellSize = this.$cell.getSize();\r\n\t\t\tif (this.$config.byMaxSize) {\r\n\t\t\t\tfor (var i = 0; i < this.$cells.length; i++) {\r\n\t\t\t\t\tvar otherCell = this.$cells[i].getSize();\r\n\t\t\t\t\tfor (var cell in cellSize) {\r\n\t\t\t\t\t\tcellSize[cell] = Math.max(cellSize[cell], otherCell[cell]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor (var size in sizes) {\r\n\t\t\t\tsizes[size] = sizes[size] || cellSize[size];\r\n\t\t\t}\r\n\t\t\tsizes.gravity = Math.max(sizes.gravity, cellSize.gravity);\r\n\t\t}\r\n\t\treturn sizes;\r\n\t};\r\n\treturn ViewLayout;\r\n}(Layout));\r\n\r\nmodule.exports = ViewLayout;","var rendererFactory = function(gantt){\r\n\tvar services = gantt.$services;\r\n\r\n\t//hash of dom elements is needed to redraw single bar/link\r\n\tvar task_area_pulls = {},\r\n\t\ttask_area_renderers = {};\r\n\r\n\tfunction getRenderer(id, layer, node) {\r\n\r\n\t\tif (task_area_renderers[id])\r\n\t\t\treturn task_area_renderers[id];\r\n\r\n\t\tif (!layer.renderer)\r\n\t\t\tgantt.assert(false, \"Invalid renderer call\");\r\n\r\n\t\tvar renderOne = function(item){\r\n\t\t\treturn layer.renderer.call(this, item, layer.host);\r\n\t\t} ;\r\n\r\n\t\tvar filter = layer.filter;\r\n\r\n\t\tif (node)\r\n\t\t\tnode.setAttribute(services.config().layer_attribute, true);\r\n\r\n\t\ttask_area_renderers[id] = {\r\n\t\t\trender_item: function (item, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tif (filter) {\r\n\t\t\t\t\tif (!filter(item)) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dom = renderOne.call(gantt, item);\r\n\t\t\t\tthis.append(item, dom, container);\r\n\r\n\t\t\t},\r\n\r\n\t\t\tclear: function (container) {\r\n\r\n\t\t\t\tthis.rendered = task_area_pulls[id] = {};\r\n\t\t\t\tif(!layer.append)\r\n\t\t\t\t\tthis.clear_container(container);\r\n\t\t\t},\r\n\t\t\tclear_container: function (container) {\r\n\t\t\t\tcontainer = container || node;\r\n\t\t\t\tif (container)\r\n\t\t\t\t\tcontainer.innerHTML = \"\";\r\n\t\t\t},\r\n\t\t\trender_items: function (items, container) {\r\n\t\t\t\tcontainer = container || node;\r\n\r\n\t\t\t\tvar buffer = document.createDocumentFragment();\r\n\t\t\t\tthis.clear(container);\r\n\t\t\t\tfor (var i = 0, vis = items.length; i < vis; i++) {\r\n\t\t\t\t\tthis.render_item(items[i], buffer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcontainer.appendChild(buffer);\r\n\t\t\t},\r\n\t\t\tappend: function (item, node, container) {\r\n\t\t\t\tif (!node) {\r\n\t\t\t\t\tif (this.rendered[item.id]) {\r\n\t\t\t\t\t\tthis.remove_item(item.id);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.rendered[item.id] && this.rendered[item.id].parentNode) {\r\n\t\t\t\t\tthis.replace_item(item.id, node);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item.id] = node;\r\n\r\n\t\t\t},\r\n\t\t\treplace_item: function (item_id, newNode) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.replaceChild(newNode, item);\r\n\t\t\t\t}\r\n\t\t\t\tthis.rendered[item_id] = newNode;\r\n\t\t\t},\r\n\t\t\tremove_item: function (item_id) {\r\n\t\t\t\tthis.hide(item_id);\r\n\t\t\t\tdelete this.rendered[item_id];\r\n\t\t\t},\r\n\t\t\thide: function (item_id) {\r\n\t\t\t\tvar item = this.rendered[item_id];\r\n\t\t\t\tif (item && item.parentNode) {\r\n\t\t\t\t\titem.parentNode.removeChild(item);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trestore: function (item) {\r\n\t\t\t\tvar dom = this.rendered[item.id];\r\n\t\t\t\tif (dom) {\r\n\t\t\t\t\tif (!dom.parentNode) {\r\n\t\t\t\t\t\tthis.append(item, dom, node);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.render_item(item, node);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tchange_id: function (oldid, newid) {\r\n\t\t\t\tthis.rendered[newid] = this.rendered[oldid];\r\n\t\t\t\tdelete this.rendered[oldid];\r\n\t\t\t},\r\n\t\t\trendered: task_area_pulls[id],\r\n\t\t\tnode: node,\r\n\t\t\tdestructor: function () {\r\n\t\t\t\tthis.clear();\r\n\t\t\t\tdelete task_area_renderers[id];\r\n\t\t\t\tdelete task_area_pulls[id];\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\treturn task_area_renderers[id];\r\n\t}\r\n\r\n\r\n\tfunction clearRenderers() {\r\n\t\tfor (var i in task_area_renderers) {\r\n\t\t\tgetRenderer(i).destructor();\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetRenderer: getRenderer,\r\n\t\tclearRenderers: clearRenderers\r\n\t};\r\n\r\n};\r\n\r\nmodule.exports = rendererFactory;","var renderFactoryProvider = require(\"./render_factory\");\r\nvar utils = require(\"../../../utils/utils\"),\r\n\tdomHelpers = require(\"../../../utils/dom_helpers\");\r\n\r\nvar layerFactory = function(gantt){\r\n\r\n\tvar renderFactory = renderFactoryProvider(gantt);\r\n\treturn {\r\n\tcreateGroup: function (get_container, rel_root, defaultFilters) {\r\n\r\n\t\tvar renderGroup = {\r\n\t\t\ttempCollection: [],\r\n\t\t\trenderers: {},\r\n\t\t\tcontainer: get_container,\r\n\t\t\tfilters: [],\r\n\t\t\tgetLayers: function () {\r\n\t\t\t\tthis._add();// add pending layers\r\n\r\n\t\t\t\tvar res = [];\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tres.push(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn res;\r\n\t\t\t},\r\n\t\t\tgetLayer: function (id) {\r\n\t\t\t\treturn this.renderers[id];\r\n\t\t\t},\r\n\t\t\t_add: function (layer) {\r\n\t\t\t\tif (layer) {\r\n\t\t\t\t\tlayer.id = layer.id || utils.uid();\r\n\t\t\t\t\tthis.tempCollection.push(layer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar container = this.container();\r\n\r\n\t\t\t\tvar pending = this.tempCollection;\r\n\t\t\t\tfor (var i = 0; i < pending.length; i++) {\r\n\t\t\t\t\tlayer = pending[i];\r\n\r\n\t\t\t\t\tif (!this.container() && !(layer && layer.container && domHelpers.isChildOf(layer.container, document.body))) continue;\r\n\r\n\t\t\t\t\tvar node = layer.container,\r\n\t\t\t\t\t\tid = layer.id,\r\n\t\t\t\t\t\ttopmost = layer.topmost;\r\n\t\t\t\t\tif (!node.parentNode) {\r\n\t\t\t\t\t\t//insert on top or below the tasks\r\n\t\t\t\t\t\tif (topmost) {\r\n\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar rel = rel_root ? rel_root() : container.firstChild;\r\n\t\t\t\t\t\t\tif (rel)\r\n\t\t\t\t\t\t\t\tcontainer.insertBefore(node, rel);\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\tcontainer.appendChild(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.renderers[id] = renderFactory.getRenderer(\r\n\t\t\t\t\t\tid,\r\n\t\t\t\t\t\tlayer,\r\n\t\t\t\t\t\tnode\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.tempCollection.splice(i, 1);\r\n\t\t\t\t\ti--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddLayer: function (config) {\r\n\t\t\t\t//config = prepareConfig(config);\r\n\t\t\t\tif(config){\r\n\t\t\t\t\tif(typeof config == \"function\"){\r\n\t\t\t\t\t\tconfig = {renderer: config};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(config.filter === undefined){\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(defaultFilters || []);\r\n\t\t\t\t\t}else if(config.filter instanceof Array){\r\n\t\t\t\t\t\tconfig.filter.push(defaultFilters);\r\n\t\t\t\t\t\tconfig.filter = mergeFilters(config.filter);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!config.container){\r\n\t\t\t\t\t\tconfig.container = document.createElement(\"div\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._add(config);\r\n\t\t\t\treturn (config ? config.id : undefined);\r\n\t\t\t},\r\n\t\t\teachLayer: function(code){\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tcode(this.renderers[i]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tremoveLayer: function (id) {\r\n\t\t\t\tif(!this.renderers[id])\r\n\t\t\t\t\treturn;\r\n\t\t\t\tthis.renderers[id].destructor();\r\n\t\t\t\tdelete this.renderers[id];\r\n\t\t\t},\r\n\t\t\tclear: function () {\r\n\t\t\t\tfor (var i in this.renderers) {\r\n\t\t\t\t\tthis.renderers[i].destructor();\r\n\t\t\t\t}\r\n\t\t\t\tthis.renderers = {};\r\n\t\t\t}//,\r\n\t\t\t//prepareConfig: prepareConfig\r\n\t\t};\r\n\r\n\t\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\t\trenderGroup.clear();\r\n\t\t\trenderGroup = null;\r\n\t\t});\r\n\r\n\t\treturn renderGroup;\r\n\t}\r\n};};\r\n\r\n\r\nfunction mergeFilters(filter_methods){\r\n\tif(!(filter_methods instanceof Array)){\r\n\t\tfilter_methods = Array.prototype.slice.call(arguments, 0);\r\n\t}\r\n\r\n\treturn function(obj){\r\n\t\tvar res = true;\r\n\t\tfor(var i = 0, len = filter_methods.length; i < len; i++){\r\n\t\t\tvar filter_method = filter_methods[i];\r\n\t\t\tif(filter_method){\r\n\t\t\t\tres = res && (filter_method(obj.id, obj) !== false);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\t};\r\n}\r\n\r\n\r\nmodule.exports = layerFactory;\r\n","var createLayerFactory = require(\"./render/layer_engine\");\r\n\r\nvar createLayerEngine = function(gantt){\r\n\tvar factory = createLayerFactory(gantt);\r\n\treturn {\r\n\t\tgetDataRender: function(name){\r\n\t\t\treturn gantt.$services.getService(\"layer:\" + name) || null;\r\n\t\t},\r\n\t\tcreateDataRender: function(config){\r\n\t\t\tvar name = config.name,\r\n\t\t\t\tdefaultContainer = config.defaultContainer,\r\n\t\t\t\tpreviusSiblingContainer = config.defaultContainerSibling;\r\n\r\n\t\t\tvar layers = factory.createGroup(\r\n\t\t\t\tdefaultContainer,\r\n\t\t\t\tpreviusSiblingContainer,\r\n\t\t\t\tfunction(itemId, item){\r\n\t\t\t\t\tif(layers.filters){\r\n\t\t\t\t\t\tfor(var i = 0; i < layers.filters.length; i++){\r\n\t\t\t\t\t\t\tif(layers.filters[i](itemId, item) === false){\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\tgantt.$services.setService(\"layer:\" + name, function(){\r\n\t\t\t\treturn layers;\r\n\t\t\t});\r\n\r\n\t\t\tgantt.attachEvent(\"onGanttReady\", function () {\r\n\t\t\t\tlayers.addLayer();// init layers on start\r\n\t\t\t});\r\n\r\n\t\t\treturn layers;\r\n\t\t},\r\n\t\tinit: function(){\r\n\t\t\tvar taskLayers = this.createDataRender({\r\n\t\t\t\tname: \"task\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdefaultContainerSibling: function(){\r\n\t\t\t\t\tif(gantt.$task_links){\r\n\t\t\t\t\t\treturn gantt.$task_links;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_links;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfilter: function(item){\r\n\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\tvar linkLayers = this.createDataRender({\r\n\t\t\t\tname: \"link\",\r\n\t\t\t\tdefaultContainer: function(){\r\n\t\t\t\t\tif(gantt.$task_data){\r\n\t\t\t\t\t\treturn gantt.$task_data;\r\n\t\t\t\t\t}else if(gantt.$ui.getView(\"timeline\")){\r\n\t\t\t\t\t\treturn gantt.$ui.getView(\"timeline\").$task_data;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, gantt);\r\n\r\n\t\t\treturn {\r\n\t\t\t\taddTaskLayer: function(config){\r\n\t\t\t\t\treturn taskLayers.addLayer(config);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/*getTaskLayer: function(id){\r\n\t\t\t\t\treturn taskLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\r\n\t\t\t\t_getTaskLayers: function(){\r\n\t\t\t\t\treturn taskLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveTaskLayer: function(id){\r\n\t\t\t\t\ttaskLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachTaskLayer: function(code){\r\n\t\t\t\t\ttaskLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearTaskLayers: function(){\r\n\t\t\t\t\ttaskLayers.clear();\r\n\t\t\t\t},\r\n\t\t\t\taddLinkLayer: function(config){\r\n\t\t\t\t\treturn linkLayers.addLayer(config);\r\n\t\t\t\t},\r\n\t\t\t\t/*getLinkLayer: function(id){\r\n\t\t\t\t\treturn linkLayers.getLayer(id);\r\n\t\t\t\t},*/\r\n\t\t\t\t_getLinkLayers: function(){\r\n\t\t\t\t\treturn linkLayers.getLayers();\r\n\t\t\t\t},\r\n\t\t\t\tremoveLinkLayer: function(id){\r\n\t\t\t\t\tlinkLayers.removeLayer(id);\r\n\t\t\t\t},\r\n\t\t\t\t/*eachLinkLayer: function(code){\r\n\t\t\t\t\tlinkLayers.eachLayer(code);\r\n\t\t\t\t},*/\r\n\t\t\t\t_clearLinkLayers: function(){\r\n\t\t\t\t\tlinkLayers.clear();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = createLayerEngine;","var domHelpers = require(\"../../utils/dom_helpers\");\r\n\r\nvar createMouseHandler = (function(domHelpers) {\r\n\treturn function (gantt) {\r\n\t\tvar eventHandlers = {\r\n\t\t\t\"click\": {},\r\n\t\t\t\"doubleclick\": {},\r\n\t\t\t\"contextMenu\": {}\r\n\t\t};\r\n\r\n\t\tfunction addEventTarget(event, className, handler, root) {\r\n\t\t\tif(!eventHandlers[event][className]){\r\n\t\t\t\teventHandlers[event][className] = [];\r\n\t\t\t}\r\n\r\n\t\t\teventHandlers[event][className].push({\r\n\t\t\t\thandler: handler,\r\n\t\t\t\troot: root\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfunction callHandler(eventName, className, root, args) {\r\n\t\t\tvar handlers = eventHandlers[eventName][className];\r\n\t\t\tif(handlers){\r\n\t\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\t\tif(!(root || handlers[i].root) || handlers[i].root === root){\r\n\t\t\t\t\t\thandlers[i].handler.apply(this, args);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.click);\r\n\t\t\tvar res = true;\r\n\t\t\tif (id !== null) {\r\n\t\t\t\tres = !gantt.checkEvent(\"onTaskClick\") || gantt.callEvent(\"onTaskClick\", [id, e]);\r\n\t\t\t} else {\r\n\t\t\t\tgantt.callEvent(\"onEmptyClick\", [e]);\r\n\t\t\t}\r\n\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id && gantt.getTask(id) && gantt.config.select_task && !gantt.config.multiselect) {\r\n\t\t\t\t\tgantt.selectTask(id);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onContextMenu(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar src = e.target || e.srcElement,\r\n\t\t\t\ttaskId = gantt.locate(src),\r\n\t\t\t\tlinkId = gantt.locate(src, gantt.config.link_attribute);\r\n\r\n\t\t\tvar res = !gantt.checkEvent(\"onContextMenu\") || gantt.callEvent(\"onContextMenu\", [taskId, linkId, e]);\r\n\t\t\tif (!res) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\telse\r\n\t\t\t\t\te.returnValue = false;\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\t\tfunction findEventHandlers(e, hash){\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar handlers = [];\r\n\t\t\twhile (trg) {\r\n\t\t\t\tvar css = domHelpers.getClassName(trg);\r\n\t\t\t\tif (css) {\r\n\t\t\t\t\tcss = css.split(\" \");\r\n\t\t\t\t\tfor (var i = 0; i < css.length; i++) {\r\n\t\t\t\t\t\tif (!css[i]) continue;\r\n\t\t\t\t\t\tif (hash[css[i]]) {\r\n\t\t\t\t\t\t\tvar delegateHandlers = hash[css[i]];\r\n\r\n\t\t\t\t\t\t\tfor(var h = 0; h < delegateHandlers.length; h++){\r\n\t\t\t\t\t\t\t\tif(delegateHandlers[h].root){\r\n\t\t\t\t\t\t\t\t\tif(!domHelpers.isChildOf(trg, delegateHandlers[h].root)){\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\thandlers.push(delegateHandlers[h].handler);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttrg = trg.parentNode;\r\n\t\t\t}\r\n\t\t\treturn handlers;\r\n\t\t}\r\n\r\n\t\tfunction callEventHandlers(handlers, e, id){\r\n\t\t\tvar res = true;\r\n\r\n\t\t\tfor(var i = 0; i < handlers.length; i++){\r\n\t\t\t\tvar handlerResult =  handlers[i].call(gantt, e, id, e.target || e.srcElement);\r\n\t\t\t\tres = res && !(typeof handlerResult != \"undefined\" && handlerResult !== true);\r\n\t\t\t}\r\n\r\n\t\t\treturn res;\r\n\t\t}\r\n\r\n\r\n\t\tfunction onDoubleClick(e) {\r\n\t\t\te = e || window.event;\r\n\t\t\tvar trg = e.target || e.srcElement;\r\n\t\t\tvar id = gantt.locate(e);\r\n\r\n\t\t\tvar handlers = findEventHandlers(e, eventHandlers.doubleclick);\r\n\t\t\tvar res = !gantt.checkEvent(\"onTaskDblClick\") || gantt.callEvent(\"onTaskDblClick\", [id, e]);\r\n\t\t\tif (res) {\r\n\t\t\t\tvar default_action = callEventHandlers(handlers, e, id);\r\n\t\t\t\tif (!default_action)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tif (id !== null && gantt.getTask(id)) {\r\n\t\t\t\t\tif (res && gantt.config.details_on_dblclick) {\r\n\t\t\t\t\t\tgantt.showLightbox(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction onMouseMove(e) {\r\n\t\t\tif (gantt.checkEvent(\"onMouseMove\")) {\r\n\t\t\t\tvar id = gantt.locate(e);\r\n\t\t\t\tgantt._last_move_event = e;\r\n\t\t\t\tgantt.callEvent(\"onMouseMove\", [id, e]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction detach(eventName, className, handler, root) {\r\n\t\t\tif (eventHandlers[eventName] && eventHandlers[eventName][className]) {\r\n\t\t\t\tvar handlers = eventHandlers[eventName];\r\n\t\t\t\tvar elementHandlers = handlers[className];\r\n\t\t\t\tfor(var i = 0; i < elementHandlers.length; i++){\r\n\t\t\t\t\tif(elementHandlers[i].root == root){\r\n\t\t\t\t\t\telementHandlers.splice(i, 1);\r\n\t\t\t\t\t\ti--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(!elementHandlers.length){\r\n\t\t\t\t\tdelete handlers[className];\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar domEvents = gantt._createDomEventScope();\r\n\r\n\t\tfunction reset(node){\r\n\r\n\t\t\tdomEvents.detachAll();\r\n\r\n\t\t\tif(node){\r\n\t\t\t\tdomEvents.attach(node, \"click\", onClick);\r\n\t\t\t\tdomEvents.attach(node, \"dblclick\", onDoubleClick);\r\n\t\t\t\tdomEvents.attach(node, \"mousemove\", onMouseMove);\r\n\t\t\t\tdomEvents.attach(node, \"contextmenu\", onContextMenu);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn {\r\n\t\t\treset: reset,\r\n\t\t\tglobal: function(event, classname, handler){\r\n\t\t\t\taddEventTarget(event, classname, handler, null);\r\n\t\t\t},\r\n\t\t\tdelegate: addEventTarget,\r\n\t\t\tdetach: detach,\r\n\t\t\tcallHandler: callHandler,\r\n\t\t\tonDoubleClick: onDoubleClick,\r\n\t\t\tonMouseMove: onMouseMove,\r\n\t\t\tonContextMenu: onContextMenu,\r\n\t\t\tonClick: onClick,\r\n\t\t\tdestructor: function(){\r\n\t\t\t\treset();\r\n\t\t\t\teventHandlers = null;\r\n\t\t\t\tdomEvents = null;\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t};\r\n\r\n})(domHelpers);\r\n\r\n\r\nmodule.exports = {\r\n\tinit:createMouseHandler\r\n};","var utils = require(\"../../utils/utils\");\r\n\r\nfunction ViewSettings(config){\r\n\tutils.mixin(this, config, true);\r\n}\r\n\r\n\r\nfunction extendSettings (store, parentSettings){\r\n\tvar own = this.$config[store];\r\n\r\n\tif(own){\r\n\t\tif(own instanceof ViewSettings){\r\n\t\t\treturn own;\r\n\t\t}else{\r\n\t\t\tViewSettings.prototype = parentSettings;\r\n\t\t\tthis.$config[store] = new ViewSettings(own);\r\n\t\t\treturn this.$config[store];\r\n\t\t}\r\n\t}else{\r\n\t\treturn parentSettings;\r\n\t}\r\n}\r\n\r\nvar configurable = function(parentView){\r\n\tvar parentConfig,\r\n\t\tparentTemplates;\r\n\r\n\treturn {\r\n\t\t$getConfig: function(){\r\n\t\t\tif(!parentConfig){\r\n\t\t\t\tparentConfig = parentView ? parentView.$getConfig() : this.$gantt.config;\r\n\t\t\t}\r\n\r\n\t\t\treturn extendSettings.call(this, \"config\", parentConfig);\r\n\t\t},\r\n\t\t$getTemplates: function(){\r\n\t\t\tif(!parentTemplates){\r\n\t\t\t\tparentTemplates = parentView ? parentView.$getTemplates() : this.$gantt.templates;\r\n\t\t\t}\r\n\r\n\t\t\treturn extendSettings.call(this, \"templates\", parentTemplates);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nmodule.exports = function(obj, parent){\r\n\tutils.mixin(obj, configurable(parent));\r\n};","var utils = require(\"../../utils/utils\"),\r\n\tconfigurable = require(\"./configurable\");\r\n\r\nvar uiFactory = function createFactory(gantt){\r\n\tvar views = {};\r\n\r\n\tfunction ui(cell, parentView) {\r\n\t\tvar content;\r\n\t\tvar view = \"cell\";\r\n\t\tif (cell.view){\r\n\t\t\tview = \"viewcell\";\r\n\t\t}else if (cell.resizer) {\r\n\t\t\tview = \"resizer\";\r\n\t\t}\r\n\t\telse if (cell.rows || cell.cols) {\r\n\t\t\tview = \"layout\";\r\n\t\t}\r\n\t\telse if (cell.views) {\r\n\t\t\tview = \"multiview\";\r\n\t\t}\r\n\r\n\t\tcontent = createView.call(this, view, null, cell, parentView);\r\n\t\treturn content;\r\n\t}\r\n\t\r\n\tvar createdViews = {};\r\n\r\n\tfunction createView(name, parent, config, parentView) {\r\n\t\tvar creator = views[name];\r\n\r\n\t\tif(!creator || !creator.create)\r\n\t\t\treturn false;\r\n\r\n\t\tif(name == \"resizer\" && !config.mode){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.mode = \"x\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.mode = \"y\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(name == \"viewcell\" && config.view == \"scrollbar\" && !config.scroll){\r\n\t\t\tif(parentView.$config.cols){\r\n\t\t\t\tconfig.scroll = \"y\";\r\n\t\t\t}else{\r\n\t\t\t\tconfig.scroll = \"x\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar config = utils.copy(config);\r\n\r\n\t\tif(!config.id && !createdViews[config.view]){\r\n\t\t\tconfig.id = config.view;\r\n\t\t}\r\n\r\n\t\tif(config.id && !config.css){\r\n\t\t\tconfig.css = config.id+\"_cell\";\r\n\t\t}\r\n\r\n\t\tvar view = new creator.create(parent, config, this, gantt);\r\n\r\n\t\tif(creator.configure){\r\n\t\t\tcreator.configure(view);\r\n\t\t}\r\n\r\n\t\tconfigurable(view, parentView);\r\n\t\tif(!view.$id){\r\n\t\t\tview.$id = config.id || gantt.uid();\r\n\t\t}\r\n\r\n\t\tif(!view.$parent && typeof parent == \"object\"){\r\n\t\t\tview.$parent = parent;\r\n\t\t}\r\n\t\tif(!view.$config){\r\n\t\t\tview.$config = config;\r\n\t\t}\r\n\r\n\t\tif(createdViews[view.$id]){\r\n\t\t\tview.$id = gantt.uid();\r\n\t\t}\r\n\r\n\t\tcreatedViews[view.$id] = view;\r\n\r\n\t\treturn view;\r\n\t}\r\n\r\n\tfunction reset(){\r\n\t\tcreatedViews = {};\r\n\t}\r\n\r\n\tfunction register(name, viewConstructor, configure){\r\n\t\tviews[name] = {create: viewConstructor, configure: configure};\r\n\t}\r\n\r\n\tfunction getView(id){\r\n\t\treturn createdViews[id];\r\n\t}\r\n\r\n\tvar factory = {\r\n\t\tinitUI:ui,\r\n\t\treset: reset,\r\n\t\tregisterView: register,\r\n\t\tcreateView: createView,\r\n\t\tgetView: getView\r\n\t};\r\n\r\n\treturn factory;\r\n};\r\n\r\nmodule.exports = {\r\n\tcreateFactory: uiFactory\r\n};\r\n\r\n","var uiFactory = require(\"./ui_factory\"),\r\n\tmouseEvents = require(\"./mouse\"),\r\n\tcreateLayers = require(\"./gantt_layers\"),\r\n\tCell = require(\"./layout/cell\"),\r\n\tLayout = require(\"./layout/layout\"),\r\n\tViewLayout = require(\"./layout/view_layout\"),\r\n\tViewCell = require(\"./layout/view_cell\"),\r\n\tResizer = require(\"./layout/resizer_cell\"),\r\n\tScrollbar = require(\"./layout/scrollbar_cell\"),\r\n\tTimeline = require(\"./timeline/timeline\"),\r\n\tGrid = require(\"./grid/grid\"),\r\n\tResourceGrid = require(\"./grid/resource_grid\"),\r\n\tResourceTimeline = require(\"./timeline/resource_timeline\"),\r\n\tResourceHistogram = require(\"./timeline/resource_histogram\");\r\n\r\n\r\nvar gridEditorsFactory = require(\"./grid/editors/controller\");\r\n\r\n\r\nvar renderTaskBar = require(\"./render/task_bar_render\"),\r\n\trenderSplitTaskBar = require(\"./render/task_split_render\"),\r\n\trenderTaskBg = require(\"./render/task_bg_render\"),\r\n\trenderLink = require(\"./render/link_render\"),\r\n\tgridRenderer = require(\"./render/task_grid_line_render\");\r\n\r\nvar mainGridInitializer = require(\"./grid/main_grid_initializer\");\r\nvar mainTimelineInitializer = require(\"./timeline/main_timeline_initializer\");\r\nvar mainLayoutInitializer = require(\"./main_layout_initializer\");\r\n\r\nfunction initUI(gantt){\r\n\tfunction inheritGridConfig(id){\r\n\t\treturn {\r\n\t\t\t//width: gantt.config.grid_width\r\n\t\t};\r\n\t}\r\n\r\n\tfunction attachInitializer(view, initializer){\r\n\t\tvar ext = initializer(gantt);\r\n\t\tif(ext.onCreated)\r\n\t\t\text.onCreated(view);\r\n\t\tview.attachEvent(\"onReady\", function(){\r\n\t\t\tif(ext.onInitialized)\r\n\t\t\t\text.onInitialized(view);\r\n\t\t});\r\n\t\tview.attachEvent(\"onDestroy\", function(){\r\n\t\t\tif(ext.onDestroyed)\r\n\t\t\t\text.onDestroyed(view);\r\n\t\t});\r\n\t}\r\n\r\n\tvar factory = uiFactory.createFactory(gantt);\r\n\tfactory.registerView(\"cell\", Cell);\r\n\tfactory.registerView(\"resizer\", Resizer);\r\n\tfactory.registerView(\"scrollbar\", Scrollbar);\r\n\tfactory.registerView(\"layout\", Layout, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"main\"){\r\n\t\t\tattachInitializer(view, mainLayoutInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"viewcell\", ViewCell);\r\n\tfactory.registerView(\"multiview\", ViewLayout);\r\n\tfactory.registerView(\"timeline\", Timeline, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"timeline\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainTimelineInitializer);\r\n\t\t}\r\n\t});\r\n\tfactory.registerView(\"grid\", Grid, function(view){\r\n\t\tvar id = view.$config ? view.$config.id : null;\r\n\t\tif(id === \"grid\" || view.$config.bind == \"task\"){\r\n\t\t\tattachInitializer(view, mainGridInitializer);\r\n\t\t}\r\n\t});\r\n\r\n\tfactory.registerView(\"resourceGrid\", ResourceGrid);\r\n\tfactory.registerView(\"resourceTimeline\", ResourceTimeline);\r\n\tfactory.registerView(\"resourceHistogram\", ResourceHistogram);\r\n\r\n\tvar layersEngine = createLayers(gantt);\r\n\r\n\tvar inlineEditors = gridEditorsFactory(gantt);\r\n\r\n\tgantt.ext.inlineEditors = inlineEditors;\r\n\tgantt.ext._inlineEditors = inlineEditors;\r\n\tinlineEditors.init(gantt);\r\n\r\n\treturn {\r\n\t\tfactory:factory,\r\n\t\tmouseEvents: mouseEvents.init(gantt),\r\n\t\tlayersApi: layersEngine.init(),\r\n\t\trender:{\r\n\t\t\tgridLine: gridRenderer(gantt),\r\n\t\t\ttaskBg: renderTaskBg(gantt),\r\n\t\t\ttaskBar: renderTaskBar(gantt),\r\n\t\t\ttaskSplitBar: renderSplitTaskBar(gantt),\r\n\t\t\tlink: renderLink(gantt)\r\n\t\t},\r\n\t\tlayersService: {\r\n\t\t\tgetDataRender: function(name){\r\n\t\t\t\treturn layersEngine.getDataRender(name, gantt);\r\n\t\t\t},\r\n\t\t\tcreateDataRender: function(config){\r\n\t\t\t\treturn layersEngine.createDataRender(config, gantt);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: initUI\r\n};","var utils = require(\"../utils/utils\");\r\nvar domHelpers = require(\"../utils/dom_helpers\");\r\n\r\nmodule.exports = function(gantt) {\r\n\r\n\tvar boxAttribute = \"data-dhxbox\";\r\n\r\n\tvar _dhx_msg_cfg = null;\r\n\r\n\tfunction callback(config, result) {\r\n\t\tvar usercall = config.callback;\r\n\t\tmodalBox.hide(config.box);\r\n\r\n\t\t_dhx_msg_cfg = config.box = null;\r\n\t\tif (usercall)\r\n\t\t\tusercall(result);\r\n\t}\r\n\r\n\tfunction modal_key(e) {\r\n\t\tif (_dhx_msg_cfg) {\r\n\t\t\te = e || event;\r\n\t\t\tvar code = e.which || event.keyCode;\r\n\t\t\tvar preventDefault = false;\r\n\r\n\t\t\tif (messageBox.keyboard) {\r\n\t\t\t\tif (code == 13 || code == 32) {\r\n\t\t\t\t\t// default behavior is to confirm/submit popup on space/enter\r\n\t\t\t\t\t// if browser focus is set on button element - do button click instead of default behavior\r\n\t\t\t\t\tvar target = e.target || e.srcElement;\r\n\t\t\t\t\tif (domHelpers.getClassName(target).indexOf(\"gantt_popup_button\") > -1 && target.click) {\r\n\t\t\t\t\t\ttarget.click();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback(_dhx_msg_cfg, true);\r\n\t\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (code == 27) {\r\n\t\t\t\t\tcallback(_dhx_msg_cfg, false);\r\n\t\t\t\t\tpreventDefault = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (preventDefault) {\r\n\t\t\t\tif (e.preventDefault)\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\treturn !(e.cancelBubble = true);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.event(document, \"keydown\", modal_key, true);\r\n\r\n\tfunction modality(mode) {\r\n\t\tif (!modality.cover) {\r\n\t\t\tmodality.cover = document.createElement(\"div\");\r\n\t\t\t//necessary for IE only\r\n\t\t\tmodality.cover.onkeydown = modal_key;\r\n\t\t\tmodality.cover.className = \"dhx_modal_cover\";\r\n\t\t\tdocument.body.appendChild(modality.cover);\r\n\t\t}\r\n\t\tvar height = document.body.scrollHeight;\r\n\t\tmodality.cover.style.display = mode ? \"inline-block\" : \"none\";\r\n\t}\r\n\r\n\tfunction button(text, className, result) {\r\n\t\tvar buttonAriaAttrs = gantt._waiAria.messageButtonAttrString(text);\r\n\t\tvar name = className.toLowerCase().replace(/ /g, \"_\");\r\n\t\tvar button_css = \"gantt_\" + name + \"_button\" + \" dhtmlx_\" + name + \"_button\"; // dhtmlx_ok_button, dhtmlx_click_me_button\r\n\t\treturn \"<div \" + buttonAriaAttrs + \" class='gantt_popup_button dhtmlx_popup_button \" + button_css + \"' data-result='\" + result + \"' result='\" + result + \"' ><div>\" + text + \"</div></div>\";\r\n\t}\r\n\r\n\tfunction info(text) {\r\n\t\tif (!messageBox.area) {\r\n\t\t\tmessageBox.area = document.createElement(\"div\");\r\n\t\t\tmessageBox.area.className = \"gantt_message_area dhtmlx_message_area\";\r\n\t\t\tmessageBox.area.style[messageBox.position] = \"5px\";\r\n\t\t\tdocument.body.appendChild(messageBox.area);\r\n\t\t}\r\n\r\n\t\tmessageBox.hide(text.id);\r\n\t\tvar message = document.createElement(\"div\");\r\n\t\tmessage.innerHTML = \"<div>\" + text.text + \"</div>\";\r\n\t\tmessage.className = \"gantt-info dhtmlx-info gantt-\" + text.type + \" dhtmlx-\" + text.type;\r\n\t\tmessage.onclick = function () {\r\n\t\t\tmessageBox.hide(text.id);\r\n\t\t\ttext = null;\r\n\t\t};\r\n\r\n\t\tgantt._waiAria.messageInfoAttr(message);\r\n\r\n\t\tif (messageBox.position == \"bottom\" && messageBox.area.firstChild)\r\n\t\t\tmessageBox.area.insertBefore(message, messageBox.area.firstChild);\r\n\t\telse\r\n\t\t\tmessageBox.area.appendChild(message);\r\n\r\n\t\tif (text.expire > 0)\r\n\t\t\tmessageBox.timers[text.id] = window.setTimeout(function () {\r\n\t\t\t\tmessageBox.hide(text.id);\r\n\t\t\t}, text.expire);\r\n\r\n\t\tmessageBox.pull[text.id] = message;\r\n\t\tmessage = null;\r\n\r\n\t\treturn text.id;\r\n\t}\r\n\r\n\tfunction getFirstDefined() {\r\n\t\tvar values = [].slice.apply(arguments, [0]);\r\n\r\n\t\tfor (var i = 0; i < values.length; i++) {\r\n\t\t\tif (values[i]) {\r\n\t\t\t\treturn values[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction _boxStructure(config, ok, cancel) {\r\n\t\tvar box = document.createElement(\"div\");\r\n\r\n\t\tvar locale = gantt.locale;\r\n\r\n\t\tvar contentId = utils.uid();\r\n\t\tgantt._waiAria.messageModalAttr(box, contentId);\r\n\r\n\r\n\t\tbox.className = \" gantt_modal_box dhtmlx_modal_box gantt-\" + config.type + \" dhtmlx-\" + config.type;\r\n\t\tbox.setAttribute(boxAttribute, 1);\r\n\r\n\t\tvar inner = '';\r\n\r\n\t\tif (config.width)\r\n\t\t\tbox.style.width = config.width;\r\n\t\tif (config.height)\r\n\t\t\tbox.style.height = config.height;\r\n\t\tif (config.title)\r\n\t\t\tinner += '<div class=\"gantt_popup_title dhtmlx_popup_title\">' + config.title + '</div>';\r\n\t\tinner += '<div class=\"gantt_popup_text dhtmlx_popup_text\" id=\"' + contentId + '\"><span>' + (config.content ? '' : config.text) + '</span></div><div  class=\"gantt_popup_controls dhtmlx_popup_controls\">';\r\n\t\tif (ok)\r\n\t\t\tinner += button(getFirstDefined(config.ok, gantt.locale.labels.message_ok, \"OK\"), \"ok\", true);\r\n\t\tif (cancel)\r\n\t\t\tinner += button(getFirstDefined(config.cancel, gantt.locale.labels.message_cancel, \"Cancel\"), \"cancel\", false);\r\n\r\n\t\tif (config.buttons) {\r\n\t\t\tfor (var i = 0; i < config.buttons.length; i++) {\r\n\t\t\t\tvar btn = config.buttons[i];\r\n\t\t\t\tif (typeof btn == \"object\") {\r\n\t\t\t\t\t// Support { label:\"Save\", css:\"main_button\", value:\"save\" }\r\n\t\t\t\t\tvar label = btn.label;\r\n\t\t\t\t\tvar css = btn.css || (\"gantt_\" + btn.label.toLowerCase() + \"_button dhtmlx_\" + btn.label.toLowerCase() + \"_button\");\r\n\t\t\t\t\tvar value = btn.value || i;\r\n\t\t\t\t\tinner += button(label, css, value);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinner += button(btn, btn, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tinner += '</div>';\r\n\t\tbox.innerHTML = inner;\r\n\r\n\t\tif (config.content) {\r\n\t\t\tvar node = config.content;\r\n\t\t\tif (typeof node == \"string\")\r\n\t\t\t\tnode = document.getElementById(node);\r\n\t\t\tif (node.style.display == 'none')\r\n\t\t\t\tnode.style.display = \"\";\r\n\t\t\tbox.childNodes[config.title ? 1 : 0].appendChild(node);\r\n\t\t}\r\n\r\n\t\tbox.onclick = function (e) {\r\n\t\t\te = e || event;\r\n\t\t\tvar source = e.target || e.srcElement;\r\n\t\t\tif (!source.className) source = source.parentNode;\r\n\t\t\tif (source.className.split(\" \")[0] == \"gantt_popup_button\") {\r\n\t\t\t\tvar result = source.getAttribute(\"data-result\");\r\n\t\t\t\tresult = (result == \"true\") || (result == \"false\" ? false : result);\r\n\t\t\t\tcallback(config, result);\r\n\t\t\t}\r\n\t\t};\r\n\t\tconfig.box = box;\r\n\t\tif (ok || cancel)\r\n\t\t\t_dhx_msg_cfg = config;\r\n\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction _createBox(config, ok, cancel) {\r\n\t\tvar box = config.tagName ? config : _boxStructure(config, ok, cancel);\r\n\r\n\t\tif (!config.hidden)\r\n\t\t\tmodality(true);\r\n\t\tdocument.body.appendChild(box);\r\n\t\tvar x = Math.abs(Math.floor(((window.innerWidth || document.documentElement.offsetWidth) - box.offsetWidth) / 2));\r\n\t\tvar y = Math.abs(Math.floor(((window.innerHeight || document.documentElement.offsetHeight) - box.offsetHeight) / 2));\r\n\t\tif (config.position == \"top\")\r\n\t\t\tbox.style.top = \"-3px\";\r\n\t\telse\r\n\t\t\tbox.style.top = y + 'px';\r\n\t\tbox.style.left = x + 'px';\r\n\t\t//necessary for IE only\r\n\t\tbox.onkeydown = modal_key;\r\n\r\n\t\tmodalBox.focus(box);\r\n\r\n\t\tif (config.hidden)\r\n\t\t\tmodalBox.hide(box);\r\n\r\n\t\tgantt.callEvent(\"onMessagePopup\", [box]);\r\n\t\treturn box;\r\n\t}\r\n\r\n\tfunction alertPopup(config) {\r\n\t\treturn _createBox(config, true, false);\r\n\t}\r\n\r\n\tfunction confirmPopup(config) {\r\n\t\treturn _createBox(config, true, true);\r\n\t}\r\n\r\n\tfunction boxPopup(config) {\r\n\t\treturn _createBox(config);\r\n\t}\r\n\r\n\tfunction box_params(text, type, callback) {\r\n\t\tif (typeof text != \"object\") {\r\n\t\t\tif (typeof type == \"function\") {\r\n\t\t\t\tcallback = type;\r\n\t\t\t\ttype = \"\";\r\n\t\t\t}\r\n\t\t\ttext = {text: text, type: type, callback: callback};\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tfunction params(text, type, expire, id) {\r\n\t\tif (typeof text != \"object\")\r\n\t\t\ttext = {text: text, type: type, expire: expire, id: id};\r\n\t\ttext.id = text.id || utils.uid();\r\n\t\ttext.expire = text.expire || messageBox.expire;\r\n\t\treturn text;\r\n\t}\r\n\r\n\tvar alertBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"confirm\";\r\n\t\treturn alertPopup(text);\r\n\t};\r\n\tvar confirmBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn confirmPopup(text);\r\n\t};\r\n\tvar modalBox = function () {\r\n\t\tvar text = box_params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"alert\";\r\n\t\treturn boxPopup(text);\r\n\t};\r\n\tmodalBox.hide = function (node) {\r\n\t\twhile (node && node.getAttribute && !node.getAttribute(boxAttribute))\r\n\t\t\tnode = node.parentNode;\r\n\t\tif (node) {\r\n\t\t\tnode.parentNode.removeChild(node);\r\n\t\t\tmodality(false);\r\n\r\n\t\t\tgantt.callEvent(\"onAfterMessagePopup\", [node]);\r\n\t\t}\r\n\t};\r\n\r\n\tvar domHelpers = require(\"../utils/dom_helpers\");\r\n\r\n\tmodalBox.focus = function (node) {\r\n\t\tsetTimeout(function () {\r\n\t\t\tvar focusable = domHelpers.getFocusableNodes(node);\r\n\t\t\tif (focusable.length) {\r\n\t\t\t\tif (focusable[0].focus) focusable[0].focus();\r\n\t\t\t}\r\n\t\t}, 1);\r\n\t};\r\n\r\n\tvar messageBox = function (text, type, expire, id) {\r\n\t\ttext = params.apply(this, arguments);\r\n\t\ttext.type = text.type || \"info\";\r\n\r\n\t\tvar subtype = text.type.split(\"-\")[0];\r\n\t\tswitch (subtype) {\r\n\t\t\tcase \"alert\":\r\n\t\t\t\treturn alertPopup(text);\r\n\t\t\tcase \"confirm\":\r\n\t\t\t\treturn confirmPopup(text);\r\n\t\t\tcase \"modalbox\":\r\n\t\t\t\treturn boxPopup(text);\r\n\t\t\tdefault:\r\n\t\t\t\treturn info(text);\r\n\t\t}\r\n\t};\r\n\r\n\tmessageBox.seed = (new Date()).valueOf();\r\n\tmessageBox.uid = utils.uid;\r\n\tmessageBox.expire = 4000;\r\n\tmessageBox.keyboard = true;\r\n\tmessageBox.position = \"top\";\r\n\tmessageBox.pull = {};\r\n\tmessageBox.timers = {};\r\n\r\n\tmessageBox.hideAll = function () {\r\n\t\tfor (var key in messageBox.pull)\r\n\t\t\tmessageBox.hide(key);\r\n\t};\r\n\tmessageBox.hide = function (id) {\r\n\t\tvar obj = messageBox.pull[id];\r\n\t\tif (obj && obj.parentNode) {\r\n\t\t\twindow.setTimeout(function () {\r\n\t\t\t\tobj.parentNode.removeChild(obj);\r\n\t\t\t\tobj = null;\r\n\t\t\t}, 2000);\r\n\t\t\tobj.className += \" hidden\";\r\n\r\n\t\t\tif (messageBox.timers[id])\r\n\t\t\t\twindow.clearTimeout(messageBox.timers[id]);\r\n\t\t\tdelete messageBox.pull[id];\r\n\t\t}\r\n\t};\r\n\r\n\tvar popups = [];\r\n\tgantt.attachEvent(\"onMessagePopup\", function(box){\r\n\t\tpopups.push(box);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterMessagePopup\", function(box){\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i] === box){\r\n\t\t\t\tpopups.splice(i, 1);\r\n\t\t\t\ti--;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onDestroy\", function(){\r\n\t\tif(modality.cover && modality.cover.parentNode){\r\n\t\t\tmodality.cover.parentNode.removeChild(modality.cover);\r\n\t\t}\r\n\r\n\t\tfor(var i = 0; i < popups.length; i++){\r\n\t\t\tif(popups[i].parentNode){\r\n\t\t\t\tpopups[i].parentNode.removeChild(popups[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tpopups = null;\r\n\r\n\t\tif(messageBox.area && messageBox.area.parentNode){\r\n\t\t\tmessageBox.area.parentNode.removeChild(messageBox.area);\r\n\t\t}\r\n\t\tmessageBox = null;\r\n\t});\r\n\r\n\treturn {\r\n\t\talert: alertBox,\r\n\t\tconfirm: confirmBox,\r\n\t\tmessage: messageBox,\r\n\t\tmodalbox: modalBox\r\n\t};\r\n};","var utils = require(\"../../utils/utils\");\r\n\r\nvar StateService = (function(){\r\n\tvar stateProviders = {};\r\n\r\n\tfunction getState(name){\r\n\t\tif(name){\r\n\t\t\treturn stateProviders[name].method();\r\n\t\t}else{\r\n\t\t\tvar res = {};\r\n\t\t\tfor(var i in stateProviders){\r\n\t\t\t\tif(!stateProviders[i].internal)\r\n\t\t\t\t\tutils.mixin(res, stateProviders[i].method(), true);\r\n\t\t\t}\r\n\t\t\treturn res;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction registerProvider(name, provider, internal){\r\n\t\tstateProviders[name] = { method: provider, internal: internal};\r\n\t}\r\n\r\n\tfunction unregisterProvider(name){\r\n\t\tdelete stateProviders[name];\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetState: getState,\r\n\t\tregisterProvider: registerProvider,\r\n\t\tunregisterProvider: unregisterProvider\r\n\t};\r\n});\r\n\r\nmodule.exports = StateService;\r\n\r\n","module.exports = function(gantt) {\r\n\r\n\tvar regTemplates = {};\r\n\r\n\tfunction initTemplate(name, initial, template_name) {\r\n\t\ttemplate_name = template_name || name;\r\n\t\tvar config = gantt.config,\r\n\t\t\ttemplates = gantt.templates;\r\n\r\n\t\tif (gantt.config[name] && regTemplates[template_name] != config[name]) {\r\n\t\t\tif (!(initial && templates[template_name])) {\r\n\t\t\t\ttemplates[template_name] = gantt.date.date_to_str(config[name]);\r\n\t\t\t\tregTemplates[template_name] = config[name];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction initTemplates() {\r\n\t\tvar labels = gantt.locale.labels;\r\n\t\tlabels.gantt_save_btn = labels.icon_save;\r\n\t\tlabels.gantt_cancel_btn = labels.icon_cancel;\r\n\t\tlabels.gantt_delete_btn = labels.icon_delete;\r\n\r\n\r\n\t\tvar date = gantt.date;\r\n\r\n\t\t//build configuration based templates\r\n\t\tvar d = date.date_to_str;\r\n\t\tvar c = gantt.config;\r\n\t\tinitTemplate(\"date_scale\", true, undefined, gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"date_grid\", true, \"grid_date_format\", gantt.config, gantt.templates);\r\n\t\tinitTemplate(\"task_date\", true, undefined, gantt.config, gantt.templates);\r\n\r\n\t\tgantt.mixin(gantt.templates, {\r\n\t\t\txml_date: date.str_to_date(c.xml_date, c.server_utc),\r\n\t\t\txml_format: d(c.xml_date, c.server_utc),\r\n\t\t\tapi_date: date.str_to_date(c.api_date),\r\n\t\t\tprogress_text: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_header_class: function (column, config) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttask_text: function (start, end, task) {\r\n\t\t\t\treturn task.text;\r\n\t\t\t},\r\n\t\t\ttask_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tgrid_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_row_class: function (start, end, task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\ttask_cell_class: function (item, date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_cell_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tscale_row_class: function (date) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\tgrid_indent: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_indent'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_folder: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_folder_\" + (item.$open ? \"open\" : \"closed\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_file: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_file'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_open: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_\" + (item.$open ? \"close\" : \"open\") + \"'></div>\";\r\n\t\t\t},\r\n\t\t\tgrid_blank: function (item) {\r\n\t\t\t\treturn \"<div class='gantt_tree_icon gantt_blank'></div>\";\r\n\t\t\t},\r\n\t\t\tdate_grid: function (date, item) {\r\n\t\t\t\tif (item && gantt.isUnscheduledTask(item) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(item);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.grid_date_format(date);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_time: function (start, end, ev) {\r\n\t\t\t\tif (gantt.isUnscheduledTask(ev) && gantt.config.show_unscheduled) {\r\n\t\t\t\t\treturn gantt.templates.task_unscheduled_time(ev);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn gantt.templates.task_date(start) + \" - \" + gantt.templates.task_date(end);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\ttask_unscheduled_time: function (task) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\r\n\t\t\ttime_picker: d(c.time_picker),\r\n\t\t\tlink_class: function (link) {\r\n\t\t\t\treturn \"\";\r\n\t\t\t},\r\n\t\t\tlink_description: function (link) {\r\n\t\t\t\tvar from = gantt.getTask(link.source),\r\n\t\t\t\t\tto = gantt.getTask(link.target);\r\n\r\n\t\t\t\treturn \"<b>\" + from.text + \"</b> &ndash;  <b>\" + to.text + \"</b>\";\r\n\t\t\t},\r\n\r\n\t\t\tdrag_link: function (from, from_start, to, to_start) {\r\n\t\t\t\tfrom = gantt.getTask(from);\r\n\t\t\t\tvar labels = gantt.locale.labels;\r\n\r\n\t\t\t\tvar text = \"<b>\" + from.text + \"</b> \" + (from_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\tif (to) {\r\n\t\t\t\t\tto = gantt.getTask(to);\r\n\t\t\t\t\ttext += \"<b> \" + to.text + \"</b> \" + (to_start ? labels.link_start : labels.link_end) + \"<br/>\";\r\n\t\t\t\t}\r\n\t\t\t\treturn text;\r\n\t\t\t},\r\n\t\t\tdrag_link_class: function (from, from_start, to, to_start) {\r\n\t\t\t\tvar add = \"\";\r\n\r\n\t\t\t\tif (from && to) {\r\n\t\t\t\t\tvar allowed = gantt.isLinkAllowed(from, to, from_start, to_start);\r\n\t\t\t\t\tadd = \" \" + (allowed ? \"gantt_link_allow\" : \"gantt_link_deny\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn \"gantt_link_tooltip\" + add;\r\n\t\t\t},\r\n\r\n\t\t\t/* used for aria-labels of bar elements and for tooltip.js */\r\n\t\t\ttooltip_date_format: date.date_to_str(\"%Y-%m-%d\"),\r\n\t\t\ttooltip_text: function (start, end, event) {\r\n\t\t\t\treturn \"<b>Task:</b> \" + event.text + \"<br/><b>Start date:</b> \" + gantt.templates.tooltip_date_format(start) + \"<br/><b>End date:</b> \" + gantt.templates.tooltip_date_format(end);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\treturn {\r\n\t\tinitTemplates: initTemplates,\r\n\t\tinitTemplate: initTemplate\r\n\t};\r\n\r\n};","var eventable = require(\"../../utils/eventable\");\r\nvar utils = require(\"../../utils/utils\");\r\nvar timeout = require(\"../../utils/timeout\");\r\n\r\nmodule.exports = function(gantt){\r\n\r\n\tfunction copyDomEvent(e){\r\n\t\treturn {\r\n\t\t\ttarget: e.target || e.srcElement,\r\n\t\t\tpageX: e.pageX,\r\n\t\t\tpageY: e.pageY,\r\n\t\t\tclientX: e.clientX,\r\n\t\t\tclientY: e.clientY,\r\n\t\t\tmetaKey: e.metaKey,\r\n\t\t\tshiftKey: e.shiftKey,\r\n\t\t\tctrlKey: e.ctrlKey,\r\n\t\t\taltKey: e.altKey\r\n\t\t};\r\n\t}\r\n\r\n\tfunction DnD(obj, config) {\r\n\t\tthis._obj = obj;\r\n\t\tthis._settings = config || {};\r\n\t\teventable(this);\r\n\r\n\t\tvar inputMethods = this.getInputMethods();\r\n\r\n\t\tthis._drag_start_timer = null;\r\n\t\tgantt.attachEvent(\"onGanttScroll\", utils.bind(function (left, top) {\r\n\t\t\tthis.clearDragTimer();\r\n\t\t}, this));\r\n\r\n\t\tfor(var i = 0; i < inputMethods.length; i++){\r\n\t\t\t(utils.bind(function(input){\r\n\r\n\t\t\t\tgantt.event(obj, input.down, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis._settings.original_target = copyDomEvent(e);\r\n\r\n\t\t\t\t\tif (gantt.config.touch) {\r\n\t\t\t\t\t\tthis.clearDragTimer();\r\n\r\n\t\t\t\t\t\tthis._drag_start_timer = setTimeout(utils.bind(function () {\r\n\t\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t\t}, this), gantt.config.touch_drag);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.dragStart(obj, e, input);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t\tgantt.event(document.body, input.up, utils.bind(function (e) {\r\n\t\t\t\t\tif(!input.accessor(e)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.clearDragTimer();\r\n\t\t\t\t}, this));\r\n\r\n\t\t\t}, this))(inputMethods[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tDnD.prototype = {\r\n\t\ttraceDragEvents: function (domElement, inputMethod) {\r\n\t\t\tvar mousemove = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragMove(domElement, e, inputMethod.accessor);\r\n\t\t\t}, this);\r\n\t\t\tvar scroll = utils.bind(function (e) {\r\n\t\t\t\treturn this.dragScroll(domElement, e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar limited_mousemove = utils.bind(function (e) {\r\n\t\t\t\tif (e && e.preventDefault) //Cancel default action on DND\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t(e || event).cancelBubble = true;\r\n\t\t\t\tif (utils.defined(this.config.updates_per_second)) {\r\n\t\t\t\t\tif (!timeout(this, this.config.updates_per_second))\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn mousemove(e);\r\n\t\t\t}, this);\r\n\r\n\t\t\tvar mouseup = utils.bind(function (e) {\r\n\t\t\t\tgantt.eventRemove(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\t\tgantt.eventRemove(document.body, inputMethod.up, mouseup);\r\n\t\t\t\treturn this.dragEnd(domElement);\r\n\t\t\t}, this);\r\n\r\n\t\t\tgantt.event(document.body, inputMethod.move, limited_mousemove);\r\n\t\t\tgantt.event(document.body, inputMethod.up, mouseup);\r\n\t\t},\r\n\t\tcheckPositionChange: function (pos) {\r\n\t\t\tvar diff_x = pos.x - this.config.pos.x;\r\n\t\t\tvar diff_y = pos.y - this.config.pos.y;\r\n\t\t\tvar distance = Math.sqrt(Math.pow(Math.abs(diff_x), 2) + Math.pow(Math.abs(diff_y), 2));\r\n\r\n\t\t\tif (distance > this.config.sensitivity) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitDnDMarker: function () {\r\n\t\t\t// create dnd placeholder and put it in dom\r\n\t\t\tvar marker = this.config.marker = document.createElement(\"div\");\r\n\t\t\tmarker.className = \"gantt_drag_marker\";\r\n\t\t\tmarker.innerHTML = \"Dragging object\";\r\n\t\t\tdocument.body.appendChild(marker);\r\n\t\t},\r\n\t\tbackupEventTarget: function (domEvent, getEvent) {\r\n\t\t\tif (!gantt.config.touch) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// keep original event target in DOM in order to keep dnd on touchmove event\r\n\t\t\tvar e = getEvent(domEvent);\r\n\r\n\t\t\tvar el = e.target || e.srcElement;\r\n\t\t\tvar copy = el.cloneNode(true);\r\n\t\t\t//this.config.target.target = copy;\r\n\t\t\tthis.config.original_target = copyDomEvent(e);\r\n\t\t\tthis.config.original_target.target = copy;\r\n\t\t\tthis.config.backup_element = el;\r\n\t\t\tel.parentNode.appendChild(copy);\r\n\r\n\t\t\tel.style.display = \"none\";\r\n\t\t\tdocument.body.appendChild(el);\r\n\t\t},\r\n\t\tgetInputMethods: function () {\r\n\t\t\t// bind actions to browser events\r\n\t\t\tvar inputMethods = [];\r\n\r\n\t\t\tinputMethods.push({\r\n\t\t\t\t\"move\": \"mousemove\",\r\n\t\t\t\t\"down\": \"mousedown\",\r\n\t\t\t\t\"up\": \"mouseup\",\r\n\t\t\t\t\"accessor\": function (e) {\r\n\t\t\t\t\treturn e;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\r\n\t\t\t\tvar touchEventsSupported = true;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tdocument.createEvent(\"TouchEvent\");\r\n\t\t\t\t}catch (e){\r\n\t\t\t\t\ttouchEventsSupported = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(touchEventsSupported){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"touchmove\",\r\n\t\t\t\t\t\t\"down\": \"touchstart\",\r\n\t\t\t\t\t\t\"up\": \"touchend\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.touches && ev.touches.length > 1) return null;\r\n\t\t\t\t\t\t\tif (ev.touches[0])\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\ttarget: document.elementFromPoint(ev.touches[0].clientX, ev.touches[0].clientY),\r\n\t\t\t\t\t\t\t\t\tpageX: ev.touches[0].pageX,\r\n\t\t\t\t\t\t\t\t\tpageY: ev.touches[0].pageY,\r\n\t\t\t\t\t\t\t\t\tclientX: ev.touches[0].clientX,\r\n\t\t\t\t\t\t\t\t\tclientY: ev.touches[0].clientY\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(window.navigator.pointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"pointermove\",\r\n\t\t\t\t\t\t\"down\": \"pointerdown\",\r\n\t\t\t\t\t\t\"up\": \"pointerup\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == \"mouse\") return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}else if (window.navigator.msPointerEnabled){\r\n\t\t\t\t\tinputMethods.push({\r\n\t\t\t\t\t\t\"move\": \"MSPointerMove\",\r\n\t\t\t\t\t\t\"down\": \"MSPointerDown\",\r\n\t\t\t\t\t\t\"up\": \"MSPointerUp\",\r\n\t\t\t\t\t\t\"accessor\": function (ev) {\r\n\t\t\t\t\t\t\tif (ev.pointerType == ev.MSPOINTER_TYPE_MOUSE) return null;\r\n\t\t\t\t\t\t\treturn ev;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn inputMethods;\r\n\t\t},\r\n\t\tclearDragTimer: function () {\r\n\t\t\tif (this._drag_start_timer) {\r\n\t\t\t\tclearTimeout(this._drag_start_timer);\r\n\t\t\t\tthis._drag_start_timer = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdragStart: function (obj, e, inputMethod) {\r\n\t\t\tif (this.config && this.config.started) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.config = {\r\n\t\t\t\tobj: obj,\r\n\t\t\t\tmarker: null,\r\n\t\t\t\tstarted: false,\r\n\t\t\t\tpos: this.getPosition(e),\r\n\t\t\t\tsensitivity: 4\r\n\t\t\t};\r\n\t\t\tif (this._settings)\r\n\t\t\t\tutils.mixin(this.config, this._settings, true);\r\n\r\n\r\n\t\t\tthis.traceDragEvents(obj, inputMethod);\r\n\r\n\t\t\tgantt._prevent_touch_scroll = true;\r\n\t\t\tdocument.body.className += \" gantt_noselect\";\r\n\r\n\t\t\tif (gantt.config.touch) {\r\n\t\t\t\tthis.dragMove(obj, e, inputMethod.accessor);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tdragMove: function (obj, e, getEvent) {\r\n\t\t\tvar source = getEvent(e);\r\n\t\t\tif (!source) return;\r\n\r\n\t\t\tif (!this.config.marker && !this.config.started) {\r\n\t\t\t\tvar pos = this.getPosition(source);\r\n\r\n\t\t\t\tif (gantt.config.touch || this.checkPositionChange(pos)) {\r\n\t\t\t\t\t// real drag starts here,\r\n\t\t\t\t\t// when user moves mouse at first time after onmousedown\r\n\t\t\t\t\tthis.config.started = true;\r\n\t\t\t\t\tthis.config.ignore = false;\r\n\t\t\t\t\tif (this.callEvent(\"onBeforeDragStart\", [obj, this.config.original_target]) === false) {\r\n\t\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.backupEventTarget(e, getEvent);\r\n\t\t\t\t\tthis.initDnDMarker();\r\n\t\t\t\t\tgantt._touch_feedback();\r\n\t\t\t\t\tthis.callEvent(\"onAfterDragStart\", [obj, this.config.original_target]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.config.ignore = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif (!this.config.ignore) {\r\n\t\t\t\tsource.pos = this.getPosition(source);\r\n\t\t\t\tthis.config.marker.style.left = source.pos.x + \"px\";\r\n\t\t\t\tthis.config.marker.style.top = source.pos.y + \"px\";\r\n\t\t\t\tthis.callEvent(\"onDragMove\", [obj, source]);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdragEnd: function (obj) {\r\n\t\t\tvar target = this.config.backup_element;\r\n\t\t\tif (target && target.parentNode) {\r\n\t\t\t\ttarget.parentNode.removeChild(target);\r\n\t\t\t}\r\n\t\t\tgantt._prevent_touch_scroll = false;\r\n\t\t\tif (this.config.marker) {\r\n\t\t\t\tthis.config.marker.parentNode.removeChild(this.config.marker);\r\n\t\t\t\tthis.config.marker = null;\r\n\r\n\t\t\t\tthis.callEvent(\"onDragEnd\", []);\r\n\t\t\t}\r\n\t\t\tthis.config.started = false;\r\n\t\t\tdocument.body.className = document.body.className.replace(\" gantt_noselect\", \"\");\r\n\t\t},\r\n\r\n\t\tgetPosition: function (e) {\r\n\t\t\tvar x = 0, y = 0;\r\n\t\t\te = e || window.event;\r\n\t\t\tif (e.pageX || e.pageY) {\r\n\t\t\t\tx = e.pageX;\r\n\t\t\t\ty = e.pageY;\r\n\t\t\t} else if (e.clientX || e.clientY) {\r\n\t\t\t\tx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n\t\t\t\ty = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n\t\t\t}\r\n\t\t\treturn {x: x, y: y};\r\n\t\t}\r\n\t};\r\n\r\n\treturn DnD;\r\n};\r\n","/*\r\n %d - the day as a number with a leading zero ( 01 to 31 );\r\n %j - the day as a number without a leading zero ( 1 to 31 );\r\n %D - the day as an abbreviation ( Sun to Sat );\r\n %l - the day as a full name ( Sunday to Saturday );\r\n %W - the ISO-8601 week number of the year. Weeks start on Monday; 1)\r\n %m - the month as a number without a leading zero ( 1 to 12 );\r\n %n - the month as a number with a leading zero ( 01 to 12);\r\n %M - the month as an abbreviation ( Jan to Dec );\r\n %F - the month as a full name ( January to December );\r\n %y - the year as a two-digit number ( 00 to 99 );\r\n %Y - the year as a four-digit number ( 1900–9999 );\r\n %h - the hour based on the 12-hour clock ( 00 to 11 );\r\n %H - the hour based on the 24-hour clock ( 00 to 23 );\r\n %i - the minute as a number with a leading zero ( 00 to 59 );\r\n %s - the second as a number without a leading zero ( 00 to 59 ); 2)\r\n %a - displays am (for times from midnight until noon) and pm (for times from noon until midnight);\r\n %A - displays AM (for times from midnight until noon) and PM (for times from noon until midnight).\r\n*/\r\n\r\nmodule.exports = function(gantt) {\r\n\tvar dateHelper = {\r\n\t\tinit: function () {\r\n\t\t\tvar locale = gantt.locale;\r\n\r\n\t\t\tvar s = locale.date.month_short;\r\n\t\t\tvar t = locale.date.month_short_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\r\n\t\t\tvar s = locale.date.month_full;\r\n\t\t\tvar t = locale.date.month_full_hash = {};\r\n\t\t\tfor (var i = 0; i < s.length; i++)\r\n\t\t\t\tt[s[i]] = i;\r\n\t\t},\r\n\t\tdate_part: function (date) {\r\n\t\t\tvar old = new Date(date);\r\n\t\t\tdate.setHours(0);\r\n\t\t\tthis.hour_start(date);\r\n\t\t\tif (date.getHours() && //shift to yesterday on dst\r\n\t\t\t\t(date.getDate() < old.getDate() || date.getMonth() < old.getMonth() || date.getFullYear() < old.getFullYear()))\r\n\t\t\t\tdate.setTime(date.getTime() + 60 * 60 * 1000 * (24 - date.getHours()));\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\ttime_part: function (date) {\r\n\t\t\treturn (date.valueOf() / 1000 - date.getTimezoneOffset() * 60) % 86400;\r\n\t\t},\r\n\t\tweek_start: function (date) {\r\n\t\t\tvar shift = date.getDay();\r\n\t\t\tif (gantt.config.start_on_monday) {\r\n\t\t\t\tif (shift === 0) shift = 6;\r\n\t\t\t\telse shift--;\r\n\t\t\t}\r\n\t\t\treturn this.date_part(this.add(date, -1 * shift, \"day\"));\r\n\t\t},\r\n\t\tmonth_start: function (date) {\r\n\t\t\tdate.setDate(1);\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\tquarter_start: function (date) {\r\n\t\t\tthis.month_start(date);\r\n\t\t\tvar m = date.getMonth(),\r\n\t\t\t\tres_month;\r\n\r\n\t\t\tif (m >= 9) {\r\n\t\t\t\tres_month = 9;\r\n\t\t\t} else if (m >= 6) {\r\n\t\t\t\tres_month = 6;\r\n\t\t\t} else if (m >= 3) {\r\n\t\t\t\tres_month = 3;\r\n\t\t\t} else {\r\n\t\t\t\tres_month = 0;\r\n\t\t\t}\r\n\r\n\t\t\tdate.setMonth(res_month);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tyear_start: function (date) {\r\n\t\t\tdate.setMonth(0);\r\n\t\t\treturn this.month_start(date);\r\n\t\t},\r\n\t\tday_start: function (date) {\r\n\t\t\treturn this.date_part(date);\r\n\t\t},\r\n\t\thour_start: function (date) {\r\n\t\t\tif (date.getMinutes())\r\n\t\t\t\tdate.setMinutes(0);\r\n\t\t\tthis.minute_start(date);\r\n\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tminute_start: function (date) {\r\n\t\t\tif (date.getSeconds())\r\n\t\t\t\tdate.setSeconds(0);\r\n\t\t\tif (date.getMilliseconds())\r\n\t\t\t\tdate.setMilliseconds(0);\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\t_add_days: function (date, inc) {\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\r\n\t\t\tndate.setDate(ndate.getDate() + inc);\r\n\t\t\tif (inc >= 0 && (!date.getHours() && ndate.getHours()) &&//shift to yesterday on dst\r\n\t\t\t\t(ndate.getDate() <= date.getDate() || ndate.getMonth() < date.getMonth() || ndate.getFullYear() < date.getFullYear()))\r\n\t\t\t\tndate.setTime(ndate.getTime() + 60 * 60 * 1000 * (24 - ndate.getHours()));\r\n\t\t\treturn ndate;\r\n\t\t},\r\n\r\n\t\tadd: function (date, inc, mode) {\r\n\t\t\t/*jsl:ignore*/\r\n\t\t\tvar ndate = new Date(date.valueOf());\r\n\t\t\tswitch (mode) {\r\n\t\t\t\tcase \"day\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"week\":\r\n\t\t\t\t\tndate = this._add_days(ndate, inc * 7);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"month\":\r\n\t\t\t\t\tndate.setMonth(ndate.getMonth() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"year\":\r\n\t\t\t\t\tndate.setYear(ndate.getFullYear() + inc);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"hour\":\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t\tadding hours/minutes via setHour(getHour() + inc) gives weird result when\r\n\t\t\t\t\t\tadding one hour to the time before switch to a Daylight Saving time\r\n\r\n\t\t\t\t\t\texample: //Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\t\t\t\t\t\tnew Date(2014, 02, 30, 1).setHours(2)\r\n\t\t\t\t\t\t>>Sun Mar 30 2014 01:00:00 GMT+0100 (W. Europe Standard Time)\r\n\r\n\t\t\t\t\t\tsetTime seems working as expected\r\n\t\t\t\t\t */\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 60 * 1000);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"minute\":\r\n\r\n\t\t\t\t\tndate.setTime(ndate.getTime() + inc * 60 * 1000);\r\n\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn this[\"add_\" + mode](date, inc, mode);\r\n\t\t\t}\r\n\t\t\treturn ndate;\r\n\t\t\t/*jsl:end*/\r\n\t\t},\r\n\t\tadd_quarter: function (date, inc) {\r\n\t\t\treturn this.add(date, inc * 3, \"month\");\r\n\t\t},\r\n\r\n\t\tto_fixed: function (num) {\r\n\t\t\tif (num < 10) return \"0\" + num;\r\n\t\t\treturn num;\r\n\t\t},\r\n\t\tcopy: function (date) {\r\n\t\t\treturn new Date(date.valueOf());\r\n\t\t},\r\n\t\tdate_to_str: function (format, utc) {\r\n\t\t\tformat = format.replace(/%[a-zA-Z]/g, function (a) {\r\n\t\t\t\tswitch (a) {\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getDate())+\\\"\";\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getMonth()+1))+\\\"\";\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getDate()+\\\"\";\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getMonth()+1)+\\\"\";\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getFullYear()%100)+\\\"\";\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getFullYear()+\\\"\";\r\n\t\t\t\t\tcase \"%D\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_short[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%l\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.day_full[date.getDay()]+\\\"\";\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_short[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\treturn \"\\\"+locale.date.month_full[date.getMonth()]+\\\"\";\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\t\treturn \"\\\"+((date.getHours()+11)%12+1)+\\\"\";\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\t\treturn \"\\\"+date.getHours()+\\\"\";\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getHours())+\\\"\";\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getMinutes())+\\\"\";\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"pm\\\":\\\"am\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\treturn \"\\\"+(date.getHours()>11?\\\"PM\\\":\\\"AM\\\")+\\\"\";\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(date.getSeconds())+\\\"\";\r\n\t\t\t\t\tcase \"%W\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(getISOWeek(date))+\\\"\";\r\n\t\t\t\t\tcase \"%w\":\r\n\t\t\t\t\t\treturn \"\\\"+to_fixed(getWeek(date))+\\\"\";\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn a;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (utc) format = format.replace(/date\\.get/g, \"date.getUTC\");\r\n\t\t\tvar dateToStr = new Function(\"date\", \"to_fixed\", \"locale\", \"getISOWeek\", \"getWeek\", \"return \\\"\" + format + \"\\\";\");\r\n\r\n\t\t\treturn function (date) {\r\n\t\t\t\treturn dateToStr(date, dateHelper.to_fixed, gantt.locale, dateHelper.getISOWeek, dateHelper.getWeek);\r\n\t\t\t};\r\n\t\t},\r\n\t\tstr_to_date: function (format, utc) {\r\n\t\t\tvar splt = \"var temp=date.match(/[a-zA-Z]+|[0-9]+/g);\";\r\n\t\t\tvar mask = format.match(/%[a-zA-Z]/g);\r\n\t\t\tfor (var i = 0; i < mask.length; i++) {\r\n\t\t\t\tswitch (mask[i]) {\r\n\t\t\t\t\tcase \"%j\":\r\n\t\t\t\t\tcase \"%d\":\r\n\t\t\t\t\t\tsplt += \"set[2]=temp[\" + i + \"]||1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%n\":\r\n\t\t\t\t\tcase \"%m\":\r\n\t\t\t\t\t\tsplt += \"set[1]=(temp[\" + i + \"]||1)-1;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]*1+(temp[\" + i + \"]>50?1900:2000);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%g\":\r\n\t\t\t\t\tcase \"%G\":\r\n\t\t\t\t\tcase \"%h\":\r\n\t\t\t\t\tcase \"%H\":\r\n\t\t\t\t\t\tsplt += \"set[3]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%i\":\r\n\t\t\t\t\t\tsplt += \"set[4]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%Y\":\r\n\t\t\t\t\t\tsplt += \"set[0]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%a\":\r\n\t\t\t\t\tcase \"%A\":\r\n\t\t\t\t\t\tsplt += \"set[3]=set[3]%12+((temp[\" + i + \"]||'').toLowerCase()=='am'?0:12);\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%s\":\r\n\t\t\t\t\t\tsplt += \"set[5]=temp[\" + i + \"]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%M\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_short_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"%F\":\r\n\t\t\t\t\t\tsplt += \"set[1]=locale.date.month_full_hash[temp[\" + i + \"]]||0;\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar code = \"set[0],set[1],set[2],set[3],set[4],set[5]\";\r\n\t\t\tif (utc) code = \" Date.UTC(\" + code + \")\";\r\n\t\t\tvar strToDate = new Function(\"date\", \"locale\", \"var set=[0,0,1,0,0,0]; \" + splt + \" return new Date(\" + code + \");\");\r\n\r\n\t\t\treturn function (dateString) {\r\n\t\t\t\treturn strToDate(dateString, gantt.locale);\r\n\t\t\t};\r\n\t\t},\r\n\t\tgetISOWeek: function (ndate) {\r\n\t\t\treturn gantt.date._getWeekNumber(ndate, true);\r\n\t\t},\r\n\t\t_getWeekNumber: function(ndate, isoWeek){\r\n\t\t\tif (!ndate) return false;\r\n\t\t\tvar nday = ndate.getDay();\r\n\t\t\tif(isoWeek){\r\n\t\t\t\tif (nday === 0) {\r\n\t\t\t\t\tnday = 7;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar first_thursday = new Date(ndate.valueOf());\r\n\t\t\tfirst_thursday.setDate(ndate.getDate() + (4 - nday));\r\n\t\t\tvar year_number = first_thursday.getFullYear(); // year of the first Thursday\r\n\t\t\tvar ordinal_date = Math.round((first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) / 86400000); //ordinal date of the first Thursday - 1 (so not really ordinal date)\r\n\t\t\tvar week_number = 1 + Math.floor(ordinal_date / 7);\r\n\t\t\treturn week_number;\r\n\t\t},\r\n\r\n\t\tgetWeek: function(ndate){\r\n\t\t\treturn gantt.date._getWeekNumber(ndate, gantt.config.start_on_monday);\r\n\t\t},\r\n\t\tgetUTCISOWeek: function (ndate) {\r\n\t\t\treturn gantt.date.getISOWeek(ndate);\r\n\t\t},\r\n\t\tconvert_to_utc: function (date) {\r\n\t\t\treturn new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\r\n\t\t},\r\n\t\tparseDate: function (date, format) {\r\n\t\t\t// raw date may be of type string, number (timestamp) or something else\r\n\t\t\t// do not check for instanceof Date explicitly, since we may swap native date with different date implementation at some point\r\n\t\t\tif (date && !date.getFullYear) {\r\n\t\t\t\tif (gantt.defined(format)) {\r\n\t\t\t\t\tif (typeof(format) == \"string\")\r\n\t\t\t\t\t\tformat = gantt.defined(gantt.templates[format]) ? gantt.templates[format] : gantt.date.str_to_date(format);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tformat = gantt.templates.xml_date;\r\n\t\t\t\t}\r\n\t\t\t\tif (date)\r\n\t\t\t\t\tdate = format(date);\r\n\t\t\t\telse\r\n\t\t\t\t\tdate = null;\r\n\t\t\t}\r\n\t\t\treturn date;\r\n\t\t}\r\n\t};\r\n\treturn dateHelper;\r\n};","var env = require(\"../../utils/env\");\r\n\r\nmodule.exports = function(gantt){\r\n\treturn {\r\n\r\n\t\t// if false - dhxr param will added to prevent caching on client side (default),\r\n\t\t// if true - do not add extra params\r\n\t\tcache: true,\r\n\r\n\t\t// default method for load/loadStruct, post/get allowed\r\n\t\t// get - since 4.1.1, this should fix 412 error for macos safari\r\n\t\tmethod: \"get\",\r\n\r\n\t\tparse: function(data) {\r\n\t\t\tif (typeof data !== \"string\") return data;\r\n\r\n\t\t\tvar obj;\r\n\t\t\tdata = data.replace(/^[\\s]+/,\"\");\r\n\t\t\tif (window.DOMParser && !env.isIE) { // ff,ie9\r\n\t\t\t\tobj = (new window.DOMParser()).parseFromString(data, \"text/xml\");\r\n\t\t\t} else if (window.ActiveXObject !== window.undefined) {\r\n\t\t\t\tobj = new window.ActiveXObject(\"Microsoft.XMLDOM\");\r\n\t\t\t\tobj.async = \"false\";\r\n\t\t\t\tobj.loadXML(data);\r\n\t\t\t}\r\n\t\t\treturn obj;\r\n\t\t},\r\n\t\txmltop: function(tagname, xhr, obj) {\r\n\t\t\tif (typeof xhr.status == \"undefined\" || xhr.status < 400) {\r\n\t\t\t\tvar xml = (!xhr.responseXML) ? this.parse(xhr.responseText || xhr) : (xhr.responseXML || xhr);\r\n\t\t\t\tif (xml && xml.documentElement !== null && !xml.getElementsByTagName(\"parsererror\").length) {\r\n\t\t\t\t\treturn xml.getElementsByTagName(tagname)[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (obj !== -1) gantt.callEvent(\"onLoadXMLError\",[\"Incorrect XML\", arguments[1], obj]);\r\n\t\t\treturn document.createElement(\"DIV\");\r\n\t\t},\r\n\t\txpath: function(xpathExp, docObj) {\r\n\t\t\tif (!docObj.nodeName) docObj = docObj.responseXML || docObj;\r\n\t\t\tif (env.isIE) {\r\n\t\t\t\treturn docObj.selectNodes(xpathExp)||[];\r\n\t\t\t} else {\r\n\t\t\t\tvar rows = [];\r\n\t\t\t\tvar first;\r\n\t\t\t\tvar col = (docObj.ownerDocument||docObj).evaluate(xpathExp, docObj, null, XPathResult.ANY_TYPE, null);\r\n\r\n\t\t\t\twhile (true){\r\n\t\t\t\t\tfirst = col.iterateNext();\r\n\t\t\t\t\tif(first){\r\n\t\t\t\t\t\trows.push(first);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn rows;\r\n\t\t\t}\r\n\t\t},\r\n\t\tquery: function(config) {\r\n\t\t\tthis._call(\r\n\t\t\t\t(config.method || \"GET\"),\r\n\t\t\t\tconfig.url,\r\n\t\t\t\tconfig.data || \"\",\r\n\t\t\t\t(config.async || true),\r\n\t\t\t\tconfig.callback,\r\n\t\t\t\tnull,\r\n\t\t\t\tconfig.headers\r\n\t\t\t);\r\n\t\t},\r\n\t\tget: function(url, onLoad) {\r\n\t\t\tthis._call(\"GET\", url, null, true, onLoad);\r\n\t\t},\r\n\t\tgetSync: function(url) {\r\n\t\t\treturn this._call(\"GET\", url, null, false);\r\n\t\t},\r\n\t\tput: function(url, postData, onLoad) {\r\n\t\t\tthis._call(\"PUT\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tdel: function(url, postData, onLoad) {\r\n\t\t\tthis._call(\"DELETE\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tpost: function(url, postData, onLoad) {\r\n\t\t\tif (arguments.length == 1) {\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else if (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]) == \"function\")) {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t} else {\r\n\t\t\t\tpostData = String(postData);\r\n\t\t\t}\r\n\t\t\tthis._call(\"POST\", url, postData, true, onLoad);\r\n\t\t},\r\n\t\tpostSync: function(url, postData) {\r\n\t\t\tpostData = (postData === null ? \"\" : String(postData));\r\n\t\t\treturn this._call(\"POST\", url, postData, false);\r\n\t\t},\r\n\t\tgetLong: function(url, onLoad) {\r\n\t\t\tthis._call(\"GET\", url, null, true, onLoad, {url:url});\r\n\t\t},\r\n\t\tpostLong: function(url, postData, onLoad) {\r\n\t\t\tif (arguments.length == 2 && (typeof(postData) == \"function\" || typeof(window[postData]))) {\r\n\t\t\t\tonLoad = postData;\r\n\t\t\t\tpostData = \"\";\r\n\t\t\t}\r\n\t\t\tthis._call(\"POST\", url, postData, true, onLoad, {url:url, postData:postData});\r\n\t\t},\r\n\t\t_call: function(method, url, postData, async, onLoad, longParams, headers) {\r\n\r\n\t\t\tvar t = (window.XMLHttpRequest && !env.isIE ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\"));\r\n\t\t\tvar isQt = (navigator.userAgent.match(/AppleWebKit/) !== null && navigator.userAgent.match(/Qt/) !== null && navigator.userAgent.match(/Safari/) !== null);\r\n\r\n\t\t\tif (!!async) {\r\n\t\t\t\tt.onreadystatechange = function() {\r\n\t\t\t\t\tif ((t.readyState == 4) || (isQt && t.readyState == 3)) { // what for long response and status 404?\r\n\t\t\t\t\t\tif (t.status != 200 || t.responseText === \"\")\r\n\t\t\t\t\t\t\tif (!gantt.callEvent(\"onAjaxError\", [t])) return;\r\n\r\n\t\t\t\t\t\twindow.setTimeout(function(){\r\n\t\t\t\t\t\t\tif (typeof(onLoad) == \"function\") {\r\n\t\t\t\t\t\t\t\tonLoad.apply(window, [{xmlDoc:t, filePath:url}]); // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (longParams) {\r\n\t\t\t\t\t\t\t\tif (typeof(longParams.postData) != \"undefined\") {\r\n\t\t\t\t\t\t\t\t\tthis.postLong(longParams.url, longParams.postData, onLoad);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.getLong(longParams.url, onLoad);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonLoad = null;\r\n\t\t\t\t\t\t\tt = null;\r\n\t\t\t\t\t\t},1);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (method == \"GET\" && !this.cache) {\r\n\t\t\t\turl += (url.indexOf(\"?\")>=0?\"&\":\"?\")+\"dhxr\"+new Date().getTime()+\"=1\";\r\n\t\t\t}\r\n\r\n\t\t\tt.open(method, url, async);\r\n\r\n\t\t\tif (headers){\r\n\t\t\t\tfor (var key in headers)\r\n\t\t\t\t\tt.setRequestHeader(key, headers[key]);\r\n\t\t\t} else if (method.toUpperCase() == \"POST\" || method == \"PUT\" || method == \"DELETE\") {\r\n\t\t\t\tt.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n\t\t\t} else if (method == \"GET\") {\r\n\t\t\t\tpostData = null;\r\n\t\t\t}\r\n\r\n\t\t\tt.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n\r\n\t\t\tt.send(postData);\r\n\r\n\t\t\tif (!async) return {xmlDoc:t, filePath:url}; // dhtmlx-compat, response.xmlDoc.responseXML/responseText\r\n\r\n\t\t},\r\n\t\turlSeparator: function(str){\r\n\t\t\tif (str.indexOf(\"?\") != -1)\r\n\t\t\t\treturn \"&\";\r\n\t\t\telse\r\n\t\t\t\treturn \"?\";\r\n\t\t}\r\n\t};\r\n};\r\n","module.exports = function() {\r\n\treturn {\r\n\t\tlayout: {\r\n\t\t\tcss: \"gantt_container\",\r\n\t\t\trows: [\r\n\t\t\t\t{\r\n\t\t\t\t\tcols: [\r\n\t\t\t\t\t\t{view: \"grid\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{resizer: true, width: 1},\r\n\t\t\t\t\t\t{view: \"timeline\", scrollX: \"scrollHor\", scrollY: \"scrollVer\"},\r\n\t\t\t\t\t\t{view: \"scrollbar\", id: \"scrollVer\"}\r\n\t\t\t\t\t]\r\n\r\n\t\t\t\t},\r\n\t\t\t\t{view: \"scrollbar\", id: \"scrollHor\", height: 20}\r\n\t\t\t]\r\n\t\t},\r\n\t\tlinks: {\r\n\t\t\t\"finish_to_start\": \"0\",\r\n\t\t\t\"start_to_start\": \"1\",\r\n\t\t\t\"finish_to_finish\": \"2\",\r\n\t\t\t\"start_to_finish\": \"3\"\r\n\t\t},\r\n\t\ttypes: {\r\n\t\t\t'task': 'task',\r\n\t\t\t'project': 'project',\r\n\t\t\t'milestone': 'milestone'\r\n\t\t},\r\n\t\tauto_types: false,\r\n\t\tduration_unit: \"day\",\r\n\t\twork_time: false,\r\n\t\tcorrect_work_time: false,\r\n\t\tskip_off_time: false,\r\n\r\n\t\tcascade_delete: true,\r\n\r\n\t\tautosize: false,\r\n\t\tautosize_min_width: 0,\r\n\t\tautoscroll: true,\r\n\t\tautoscroll_speed: 30,\r\n\r\n\t\tshow_links: true,\r\n\t\tshow_task_cells: true,\r\n\t\t// replace backgroung of the task area with a canvas img\r\n\t\tstatic_background: false,\r\n\t\tbranch_loading: false,\r\n\t\tbranch_loading_property: \"$has_child\",\r\n\t\tshow_loading: false,\r\n\t\tshow_chart: true,\r\n\t\tshow_grid: true,\r\n\t\tmin_duration: 60 * 60 * 1000,\r\n\t\txml_date: \"%d-%m-%Y %H:%i\",\r\n\t\tapi_date: \"%d-%m-%Y %H:%i\",\r\n\t\tstart_on_monday: true,\r\n\t\tserver_utc: false,\r\n\t\tshow_progress: true,\r\n\t\tfit_tasks: false,\r\n\t\tselect_task: true,\r\n\t\tscroll_on_click: true,\r\n\t\tpreserve_scroll: true,\r\n\t\treadonly: false,\r\n\r\n\t\t/*grid */\r\n\t\tdate_grid: \"%Y-%m-%d\",\r\n\r\n\t\tdrag_links: true,\r\n\t\tdrag_progress: true,\r\n\t\tdrag_resize: true,\r\n\t\tdrag_project: false,\r\n\t\tdrag_move: true,\r\n\t\tdrag_mode: {\r\n\t\t\t\"resize\": \"resize\",\r\n\t\t\t\"progress\": \"progress\",\r\n\t\t\t\"move\": \"move\",\r\n\t\t\t\"ignore\": \"ignore\"\r\n\t\t},\r\n\t\tround_dnd_dates: true,\r\n\t\tlink_wrapper_width: 20,\r\n\t\troot_id: 0,\r\n\r\n\t\tautofit: false, // grid column automatic fit grid_width config\r\n\t\tcolumns: [\r\n\t\t\t{name: \"text\", tree: true, width: '*', resize: true},\r\n\t\t\t{name: \"start_date\", align: \"center\", resize: true},\r\n\t\t\t{name: \"duration\", align: \"center\"},\r\n\t\t\t{name: \"add\", width: 44}\r\n\t\t],\r\n\r\n\t\t/*scale*/\r\n\t\tstep: 1,\r\n\t\tscale_unit: \"day\",\r\n\t\tscale_offset_minimal: true,\r\n\t\tsubscales: [],\r\n\r\n\t\tinherit_scale_class: false,\r\n\r\n\t\ttime_step: 60,\r\n\t\tduration_step: 1,\r\n\t\tdate_scale: \"%d %M\",\r\n\t\ttask_date: \"%d %F %Y\",\r\n\t\ttime_picker: \"%H:%i\",\r\n\t\ttask_attribute: \"task_id\",\r\n\t\tlink_attribute: \"link_id\",\r\n\t\tlayer_attribute: \"data-layer\",\r\n\t\tbuttons_left: [\r\n\t\t\t\"gantt_save_btn\",\r\n\t\t\t\"gantt_cancel_btn\"\r\n\t\t],\r\n\t\t_migrate_buttons: {\r\n\t\t\t\"dhx_save_btn\": \"gantt_save_btn\",\r\n\t\t\t\"dhx_cancel_btn\": \"gantt_cancel_btn\",\r\n\t\t\t\"dhx_delete_btn\": \"gantt_delete_btn\"\r\n\t\t},\r\n\t\tbuttons_right: [\r\n\t\t\t\"gantt_delete_btn\"\r\n\t\t],\r\n\t\tlightbox: {\r\n\t\t\tsections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"time\", type: \"duration\", map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tproject_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", readonly: true, map_to: \"auto\"}\r\n\t\t\t],\r\n\t\t\tmilestone_sections: [\r\n\t\t\t\t{name: \"description\", height: 70, map_to: \"text\", type: \"textarea\", focus: true},\r\n\t\t\t\t{name: \"type\", type: \"typeselect\", map_to: \"type\"},\r\n\t\t\t\t{name: \"time\", type: \"duration\", single_date: true, map_to: \"auto\"}\r\n\t\t\t]\r\n\t\t},\r\n\t\tdrag_lightbox: true,\r\n\t\tsort: false,\r\n\t\tdetails_on_create: true,\r\n\t\tdetails_on_dblclick: true,\r\n\t\tinitial_scroll: true,\r\n\t\ttask_scroll_offset: 100,\r\n\r\n\t\torder_branch: false,\r\n\t\torder_branch_free: false,\r\n\r\n\t\ttask_height: \"full\",//number px of 'full' for row height\r\n\t\tmin_column_width: 70,\r\n\r\n\t\t// min width for grid column (when resizing)\r\n\t\tmin_grid_column_width: 70,\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_column_attribute: \"column_index\",\r\n\t\t// name of the attribute with column index for resize element\r\n\t\tgrid_resizer_attribute: \"grid_resizer\",\r\n\r\n\t\t// grid width can be increased after the column has been resized\r\n\t\tkeep_grid_width: false,\r\n\r\n\t\t// grid width can be adjusted\r\n\t\tgrid_resize: false,\r\n\r\n\t\tshow_unscheduled: true,\r\n\r\n\t\t//\r\n\t\treadonly_property: \"readonly\",\r\n\t\teditable_property: \"editable\",\r\n\t\tcalendar_property: \"calendar_id\",\r\n\t\tresource_calendars: {},\r\n\r\n\t\ttype_renderers: {},\r\n\r\n\t\topen_tree_initially: false,\r\n\t\toptimize_render: true,\r\n\t\tprevent_default_scroll: false,\r\n\t\tshow_errors: true,\r\n\t\twai_aria_attributes: true,\r\n\t\tsmart_scales: true,\r\n\t\trtl:false,\r\n\t\tplaceholder_task: false\r\n\t};\r\n};\r\n","module.exports = function(){\r\n\tvar services = {};\r\n\tfunction register (name, getter){\r\n\t\tservices[name] = getter;\r\n\t}\r\n\r\n\tfunction getService(name){\r\n\t\tif(!services[name]){\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\treturn services[name]();\r\n\t}\r\n\r\n\tvar servicesEnum = {\r\n\t\t\"config\": \"config\",\r\n\t\t\"templates\": \"templates\",\r\n\t\t\"locale\": \"locale\"\r\n\t};\r\n\r\n\treturn {\r\n\t\tservices: servicesEnum,\r\n\t\tsetService: register,\r\n\t\tgetService: getService,\r\n\t\tconfig: function(){\r\n\t\t\treturn this.getService(\"config\");\r\n\t\t},\r\n\t\ttemplates: function(){\r\n\t\t\treturn this.getService(\"templates\");\r\n\t\t},\r\n\t\tlocale: function(){\r\n\t\t\treturn this.getService(\"locale\");\r\n\t\t},\r\n\t\tdestructor: function(){\r\n\t\t\tfor(var i in services){\r\n\t\t\t\tif(services[i]){\r\n\t\t\t\t\tvar service = services[i];\r\n\t\t\t\t\tif(service && service.destructor){\r\n\t\t\t\t\t\tservice.destructor();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tservices = null;\r\n\t\t}\r\n\t};\r\n};\r\n","module.exports = function(gantt){\r\n\tgantt.$inject = function(module){\r\n\t\treturn module(this.$services);\r\n\t};\r\n};","module.exports = {\r\n\tKEY_CODES: {\r\n\t\tUP: 38,\r\n\t\tDOWN: 40,\r\n\t\tLEFT: 37,\r\n\t\tRIGHT: 39,\r\n\t\tSPACE: 32,\r\n\t\tENTER: 13,\r\n\t\tDELETE: 46,\r\n\t\tESC: 27,\r\n\t\tTAB: 9\r\n\t}\r\n};","require(\"css/skins/terrace.less\");\r\n\r\nfunction DHXGantt(){\r\n\tthis.constants = require(\"./../constants\");\r\n\tthis.version = VERSION;\r\n\tthis.templates = {};\r\n\tthis.ext = {};\r\n\tthis.keys = {\r\n\t\tedit_save: this.constants.KEY_CODES.ENTER,\r\n\t\tedit_cancel: this.constants.KEY_CODES.ESC\r\n\t};\r\n}\r\n\r\nmodule.exports = function() {\r\n\t// use a named constructor to make gantt instance discoverable in heap snapshots\r\n\tvar gantt = new DHXGantt();\r\n\r\n\trequire(\"./common/import\")(gantt);\r\n\r\n\tgantt.$services = gantt.$inject(require(\"./common/services\"));\r\n\tgantt.config = gantt.$inject(require(\"./common/config\"));\r\n\tgantt.ajax =  require(\"./common/ajax\")(gantt);\r\n\tgantt.date = require(\"./common/date\")(gantt);\r\n\tvar dnd = require(\"./common/dnd\")(gantt);\r\n\tgantt.$services.setService(\"dnd\", function(){return dnd;});\r\n\r\n\tgantt.$services.setService(\"config\", function () {\r\n\t\treturn gantt.config;\r\n\t});\r\n\tgantt.$services.setService(\"date\", function () {\r\n\t\treturn gantt.date;\r\n\t});\r\n\tgantt.$services.setService(\"locale\", function () {\r\n\t\treturn gantt.locale;\r\n\t});\r\n\tgantt.$services.setService(\"templates\", function () {\r\n\t\treturn gantt.templates;\r\n\t});\r\n\r\n\tvar templatesLoader = require(\"./common/templates\")(gantt);\r\n\tgantt.$services.setService(\"templateLoader\", function () {\r\n\t\treturn templatesLoader;\r\n\t});\r\n\r\n\tvar eventable = require(\"../utils/eventable\");\r\n\teventable(gantt);\r\n\r\n\tvar StateService = require(\"./common/state\");\r\n\tvar stateService = new StateService();\r\n\r\n\tstateService.registerProvider(\"global\", function () {\r\n\t\treturn {\r\n\t\t\tmin_date: gantt._min_date,\r\n\t\t\tmax_date: gantt._max_date,\r\n\t\t\tselected_task: gantt.$data.tasksStore.getSelectedId()\r\n\t\t};\r\n\t});\r\n\tgantt.getState = stateService.getState;\r\n\tgantt.$services.setService(\"state\", function () {\r\n\t\treturn stateService;\r\n\t});\r\n\r\n\tvar utils = require(\"../utils/utils\");\r\n\tutils.mixin(gantt, utils);\r\n\tgantt.env = require(\"../utils/env\");\r\n\r\n\tvar domEvents = require(\"../utils/dom_event_scope\")();\r\n\tgantt.event = domEvents.attach;\r\n\tgantt.eventRemove = domEvents.detach;\r\n\tgantt._eventRemoveAll = domEvents.detachAll;\r\n\tgantt._createDomEventScope = domEvents.extend;\r\n\r\n\tutils.mixin(gantt, require(\"./message\")(gantt));\r\n\tvar uiApi = require(\"./ui/index\").init(gantt);\r\n\tgantt.$ui = uiApi.factory;\r\n\tgantt.$ui.layers = uiApi.render;\r\n\tgantt.$mouseEvents = uiApi.mouseEvents;\r\n\tgantt.$services.setService(\"mouseEvents\", function () {\r\n\t\treturn gantt.$mouseEvents;\r\n\t});\r\n\tgantt.mixin(gantt, uiApi.layersApi);\r\n\r\n\trequire(\"./data_task_layers\")(gantt);\r\n\r\n\tgantt.$services.setService(\"layers\", function () {\r\n\t\treturn uiApi.layersService;\r\n\t});\r\n\r\n\tvar createLayoutFacade = require(\"./facades/layout\");\r\n\tgantt.mixin(gantt, createLayoutFacade());\r\n\r\n\trequire(\"./datastore/datastore_hooks\")(gantt);\r\n\r\n\trequire(\"./dataprocessor/hooks\")(gantt);\r\n\trequire(\"./plugins\")(gantt);\r\n\r\n\trequire(\"./dynamic_loading\")(gantt);\r\n\trequire(\"./grid_column_api\")(gantt);\r\n\trequire(\"./wai_aria\")(gantt);\r\n\trequire(\"./tasks\")(gantt);\r\n\trequire(\"./load\")(gantt);\r\n\trequire(\"./worktime/work_time\")(gantt);\r\n\trequire(\"./data\")(gantt);\r\n\trequire(\"./lightbox\")(gantt);\r\n\trequire(\"./lightbox_optional_time\")(gantt);\r\n\trequire(\"./data_task_types\")(gantt);\r\n\trequire(\"./cached_functions\")(gantt);\r\n\trequire(\"./skin\")(gantt);\r\n\trequire(\"../css/skins/skyblue\")(gantt);\r\n\trequire(\"../css/skins/meadow\")(gantt);\r\n\trequire(\"../css/skins/terrace\")(gantt);\r\n\trequire(\"../css/skins/broadway\")(gantt);\r\n\trequire(\"../css/skins/material\")(gantt);\r\n\trequire(\"../css/skins/contrast_black\")(gantt);\r\n\trequire(\"../css/skins/contrast_white\")(gantt);\r\n\trequire(\"./touch\")(gantt);\r\n\trequire(\"../locale/locale\")(gantt);\r\n\trequire(\"./gantt_core\")(gantt);\r\n\trequire(\"./destructor\")(gantt);\r\n\r\n\treturn gantt;\r\n};","module.exports = function(gantt){\r\n\r\n\tfunction deprecated(badCode, goodCode, versionDeprecated, versionDeleted) {\r\n\r\n\t\tvar formatting = gantt.env.isIE ? \"\" : \"%c\";\r\n\t\tversionDeprecated = versionDeprecated || \"v6.0\";\r\n\t\tversionDeleted = versionDeleted || \"v7.0\";\r\n\r\n\t\tvar message = [\r\n\t\t\tformatting, \"\\\"\", badCode, \"\\\"\",  formatting,\r\n\t\t\t\" has been deprecated in dhtmlxGantt \", versionDeprecated, \" and will stop working in \", versionDeleted,\". Use \",\r\n\t\t\tformatting, \"\\\"\", goodCode, \"\\\"\",  formatting,\r\n\t\t\t\" instead. \\nSee more details at http://docs.dhtmlx.com/gantt/migrating.html \"\r\n\t\t].join(\"\");\r\n\r\n\t\tvar log = window.console.warn || window.console.log;\r\n\r\n\t\tvar args = [message];\r\n\t\tif(!gantt.env.isIE){\r\n\t\t\targs = args.concat([\"font-weight:bold\", \"font-weight:normal\", \"font-weight:bold\", \"font-weight:normal\"]);\r\n\t\t}\r\n\r\n\t\tlog.apply(window.console, args);\r\n\t}\r\n\r\n\t// gantt.getSlack is defined inside an extension, leave it without message for now\r\n\r\n};","import * as warnings from \"./core/deprecated_warnings\";\r\nimport * as base from \"./core/gantt\";\r\n\r\n\r\nconst gantt = (window as any).gantt = base();\r\nwarnings(gantt);"],"sourceRoot":""}